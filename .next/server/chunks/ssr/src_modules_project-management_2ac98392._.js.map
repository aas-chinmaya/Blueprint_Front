{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/task/components/CreateTaskModal.jsx"],"sourcesContent":["\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\"use client\";\r\n\r\nimport { useState, useEffect, useMemo, useCallback } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { createTask } from \"@/modules/project-management/task/slices/taskSlice\";\r\nimport { fetchTeamByProjectId } from \"@/modules/project-management/team/slices/teamSlice\";\r\nimport { Edit, User, Flag, CalendarIcon, Info, X, Loader, Clock, AlertCircle } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\r\nimport { Calendar } from \"@/components/ui/calendar\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogClose } from \"@/components/ui/dialog\";\r\nimport { Command, CommandEmpty, CommandGroup, CommandInput, CommandItem } from \"@/components/ui/command\";\r\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\r\nimport { format } from \"date-fns\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Input } from \"@/components/ui/input\";\r\n\r\nconst priorityConfig = {\r\n  Low: { color: \"bg-emerald-100 text-emerald-800\", icon: \"Low\", badge: \"Low\" },\r\n  Medium: { color: \"bg-amber-100 text-amber-800\", icon: \"Medium\", badge: \"Medium\" },\r\n  High: { color: \"bg-rose-100 text-rose-800\", icon: \"High\", badge: \"High\" },\r\n};\r\n\r\nconst CreateTaskModal = ({ onTaskAssingn, projectId, project, onClose, isOpen }) => {\r\n  const dispatch = useDispatch();\r\n  const { teamsByProject: teams, status: teamStatus } = useSelector((state) => state.team);\r\n  const { status: taskStatus, error: taskError } = useSelector((state) => state.task);\r\n\r\n  const [formData, setFormData] = useState({\r\n    title: \"\",\r\n    description: \"\",\r\n    priority: \"Medium\",\r\n    projectId: projectId || \"\",\r\n    projectName: project?.data?.name || \"\",\r\n    teamId: \"\",\r\n    assignedTo: [],        // ← NOW ARRAY OF FULL OBJECTS\r\n    assignedBy: \"\",        // ← team lead name\r\n  });\r\n\r\n  const [selectedAssignees, setSelectedAssignees] = useState([]); // UI state\r\n  const [errors, setErrors] = useState({});\r\n  const [selectedTeam, setSelectedTeam] = useState(null);\r\n  const [selectedDate, setSelectedDate] = useState(null);\r\n  const [selectedTime, setSelectedTime] = useState(\"\");\r\n  const [memberSearchQuery, setMemberSearchQuery] = useState(\"\");\r\n  const [memberOpen, setMemberOpen] = useState(false);\r\n  const [isInitialized, setIsInitialized] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (projectId && !isInitialized && isOpen) {\r\n      dispatch(fetchTeamByProjectId(projectId));\r\n      setIsInitialized(true);\r\n    }\r\n  }, [dispatch, projectId, isInitialized, isOpen]);\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      setFormData({\r\n        title: \"\",\r\n        description: \"\",\r\n        priority: \"\",\r\n        projectId: projectId || \"\",\r\n        projectName: project?.data?.name || \"\",\r\n        teamId: \"\",\r\n        assignedTo: [],\r\n        assignedBy: \"\",\r\n      });\r\n      setSelectedAssignees([]);\r\n      setErrors({});\r\n      setSelectedTeam(null);\r\n      setSelectedDate(null);\r\n      setSelectedTime(\"\");\r\n      setMemberSearchQuery(\"\");\r\n    }\r\n  }, [isOpen, projectId, project?.data?.name]);\r\n\r\n  const handleTeamSelect = useCallback((value) => {\r\n    const team = teams.find(t => t.teamId === value);\r\n    setSelectedTeam(team);\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      teamId: value,\r\n      assignedBy: team?.teamLeadName || \"Unknown\",\r\n      assignedTo: [],\r\n    }));\r\n    setSelectedAssignees([]);\r\n  }, [teams]);\r\n\r\n  const availableMembers = useMemo(() => {\r\n    if (!selectedTeam?.teamMembers) return [];\r\n    const q = memberSearchQuery.toLowerCase();\r\n    return selectedTeam.teamMembers\r\n      .filter(m => \r\n        m.memberName.toLowerCase().includes(q) &&\r\n        !selectedAssignees.some(a => a.memberId === m.memberId)\r\n      )\r\n      .map(m => ({\r\n        memberId: m.memberId,\r\n        memberName: m.memberName,\r\n        role: m.role || \"Member\",\r\n      }));\r\n  }, [selectedTeam, memberSearchQuery, selectedAssignees]);\r\n\r\n  const toggleAssignee = useCallback((member) => {\r\n    setSelectedAssignees(prev => {\r\n      const exists = prev.some(a => a.memberId === member.memberId);\r\n      const newList = exists\r\n        ? prev.filter(a => a.memberId !== member.memberId)\r\n        : [...prev, member];\r\n\r\n      // Update assignedTo with full array of objects\r\n      setFormData(f => ({\r\n        ...f,\r\n        assignedTo: newList,\r\n      }));\r\n\r\n      return newList;\r\n    });\r\n  }, []);\r\n\r\n  const validate = useCallback(() => {\r\n    const newErrors = {};\r\n    if (!formData.title.trim()) newErrors.title = \"Title is required\";\r\n    if (!formData.priority) newErrors.priority = \"Priority is required\";\r\n    if (!selectedDate) newErrors.deadline = \"Deadline is required\";\r\n    if (!formData.description.trim()) newErrors.description = \"Description is required\";\r\n    if (!selectedTeam) newErrors.team = \"Team selection is required\";\r\n    if (selectedAssignees.length === 0) newErrors.assignedTo = \"Assign at least one member\";\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  }, [formData, selectedDate, selectedTeam, selectedAssignees]);\r\n\r\n  const handleSubmit = useCallback(async (e) => {\r\n    e.preventDefault();\r\n    if (!validate()) {\r\n      toast.error(\"Please fill all required fields\");\r\n      return;\r\n    }\r\n\r\n    const pad = (n) => (n < 10 ? \"0\" + n : n);\r\n    let deadline = null;\r\n    if (selectedDate) {\r\n      const d = new Date(selectedDate);\r\n      const [h, m] = selectedTime ? selectedTime.split(\":\").map(Number) : [23, 59];\r\n      d.setHours(h, m, 0, 0);\r\n      deadline = `${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())}T${pad(d.getHours())}:${pad(d.getMinutes())}:00`;\r\n    }\r\n\r\n    const payload = {\r\n      ...formData,\r\n      projectId: selectedTeam?.projectId || projectId,\r\n      projectName: selectedTeam?.projectName || project?.data?.name || \"N/A\",\r\n      teamId: selectedTeam?.teamId,\r\n      deadline,\r\n      assignedTo: formData.assignedTo,  // ← FULL ARRAY OF ALL ASSIGNEES\r\n      assignedBy: formData.assignedBy,\r\n    };\r\n\r\n    try {\r\n      await dispatch(createTask(payload)).unwrap();\r\n      onTaskAssingn?.();\r\n      toast.success(\"Task assigned successfully!\");\r\n      onClose();\r\n    } catch (err) {\r\n      toast.error(taskError || \"Failed to assign task\");\r\n    }\r\n  }, [validate, formData, selectedDate, selectedTime, selectedTeam, dispatch, projectId, project, taskError, onTaskAssingn, onClose]);\r\n\r\n  const displayDeadline = selectedDate\r\n    ? `${format(selectedDate, \"MMM dd, yyyy\")}${selectedTime ? ` • ${selectedTime}` : \"\"}`\r\n    : \"No deadline\";\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <Dialog open={isOpen} onOpenChange={onClose}>\r\n      <DialogContent className=\"w-full max-w-full h-[100vh] max-h-[100vh] sm:max-w-6xl sm:max-h-[85vh] bg-white shadow-lg border border-gray-200 rounded-lg text-black p-2\">\r\n        <DialogHeader className=\"bg-gradient-to-r from-blue-50 to-indigo-50 px-4 py-2 border-b border-gray-200 sticky top-0 z-10\">\r\n          <div className=\"flex justify-between items-center\">\r\n            <DialogTitle className=\"text-base sm:text-lg font-bold text-gray-800 flex items-center\">\r\n              <Edit className=\"mr-2 h-4 w-4 text-blue-500\" />\r\n              Assign New Task\r\n            </DialogTitle>\r\n            <DialogClose asChild>\r\n              <Button variant=\"ghost\" size=\"icon\" className=\"text-gray-500 hover:bg-gray-100 rounded-full h-7 w-7\">\r\n                <X className=\"h-3 w-3\" />\r\n              </Button>\r\n            </DialogClose>\r\n          </div>\r\n        </DialogHeader>\r\n\r\n        <div className=\"p-4 sm:p-6 overflow-y-auto max-h-[calc(85vh-60px)]\">\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n\r\n            {/* Title */}\r\n            <div className=\"w-full\">\r\n              <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n                <Edit className=\"h-4 w-4 text-blue-500 mr-2\" /> Task Title <span className=\"text-red-500 ml-1\">*</span>\r\n              </label>\r\n              <Textarea\r\n                value={formData.title}\r\n                onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n                className=\"w-full h-24 sm:h-28 md:h-32 bg-white border border-gray-300 rounded-lg text-sm resize-vertical focus:ring-2 focus:ring-blue-200 focus:border-blue-500 p-3\"\r\n                placeholder=\"Enter task title...\"\r\n              />\r\n              {errors.title && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><AlertCircle className=\"h-3 w-3 mr-1\" /> {errors.title}</p>}\r\n            </div>\r\n\r\n            {/* Grid */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n\r\n              {/* Priority */}\r\n              <div>\r\n                <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n                  <Flag className=\"h-4 w-4 text-blue-500 mr-2\" /> Priority <span className=\"text-red-500 ml-1\">*</span>\r\n                </label>\r\n                <Select value={formData.priority} onValueChange={(v) => setFormData({ ...formData, priority: v })}>\r\n                  <SelectTrigger className=\"w-full h-10 rounded-lg\">\r\n                    <SelectValue>\r\n                      {formData.priority && (\r\n                        <div className=\"flex items-center gap-2\">\r\n                         \r\n                          <span className={cn(\"px-2 py-1 rounded-full text-xs font-medium\", priorityConfig[formData.priority].color)}>\r\n                            {priorityConfig[formData.priority].badge}\r\n                          </span>\r\n                        </div>\r\n                      )}\r\n                    </SelectValue>\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {Object.entries(priorityConfig).map(([key, config]) => (\r\n                      <SelectItem key={key} value={key}>\r\n                        <div className=\"flex items-center gap-2\">\r\n                          \r\n                          <span className={cn(\"px-2 py-1 rounded-full text-xs font-medium\", config.color)}>{config.badge}</span>\r\n                        </div>\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              {/* Deadline + Time */}\r\n              <div>\r\n                <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n                  <CalendarIcon className=\"h-4 w-4 text-blue-500 mr-2\" /> Deadline <span className=\"text-red-500 ml-1\">*</span>\r\n                </label>\r\n                <Popover>\r\n                  <PopoverTrigger asChild>\r\n                    <Button variant=\"outline\" className={cn(\"w-full justify-start h-10 rounded-lg\", !selectedDate && \"text-gray-500\")}>\r\n                      <CalendarIcon className=\"mr-2 h-4 w-4\" />\r\n                      {displayDeadline}\r\n                    </Button>\r\n                  </PopoverTrigger>\r\n                  <PopoverContent className=\"w-auto p-0\" align=\"start\">\r\n                    <Calendar mode=\"single\" selected={selectedDate} onSelect={setSelectedDate} initialFocus />\r\n                    <div className=\"p-3 border-t flex items-center gap-2\">\r\n                      <Clock className=\"h-4 w-4 text-gray-500\" />\r\n                      <Input type=\"time\" value={selectedTime} onChange={(e) => setSelectedTime(e.target.value)} className=\"h-9\" />\r\n                    </div>\r\n                  </PopoverContent>\r\n                </Popover>\r\n                {errors.deadline && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><AlertCircle className=\"h-3 w-3 mr-1\" /> {errors.deadline}</p>}\r\n              </div>\r\n\r\n              {/* Team */}\r\n              <div>\r\n                <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n                  <User className=\"h-4 w-4 text-blue-500 mr-2\" /> Team <span className=\"text-red-500 ml-1\">*</span>\r\n                </label>\r\n                <Select value={selectedTeam?.teamId || \"\"} onValueChange={handleTeamSelect}>\r\n                  <SelectTrigger className=\"w-full h-10 rounded-lg\">\r\n                    <SelectValue placeholder={teamStatus === \"loading\" ? \"Loading teams...\" : \"Select team\"} />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {teams.map((team) => (\r\n                      <SelectItem key={team.teamId} value={team.teamId}>{team.teamName}</SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Assigned To - Multiple in UI, assignedTo = full array */}\r\n            <div>\r\n              <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n                <User className=\"h-4 w-4 text-blue-500 mr-2\" /> Assigne <span className=\"text-red-500 ml-1\">*</span>\r\n              </label>\r\n              <div className=\"cursor-pointer flex flex-wrap items-center gap-3 min-h-10\">\r\n                <TooltipProvider>\r\n                  {selectedAssignees.map((person) => (\r\n                    <Tooltip key={person.memberId}>\r\n                      <TooltipTrigger asChild>\r\n                        <div className=\"relative group \">\r\n                          <Avatar className=\"  h-10 w-10 ring-2 ring-white shadow\">\r\n                            <AvatarFallback className=\"cursor-pointer bg-teal-600  text-white text-sm font-medium\">\r\n                              {person.memberName.split(\" \").map((n) => n[0]).join(\"\").toUpperCase()}\r\n                            </AvatarFallback>\r\n                          </Avatar>\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => toggleAssignee(person)}\r\n                            className=\"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition\"\r\n                          >\r\n                            <X className=\"h-3 w-3\" />\r\n                          </button>\r\n                        </div>\r\n                      </TooltipTrigger>\r\n                      <TooltipContent>\r\n                        <div>{person.memberName}</div>\r\n                        <div className=\"text-xs text-gray-500\">{person.role}</div>\r\n                      </TooltipContent>\r\n                    </Tooltip>\r\n                  ))}\r\n\r\n                  <Popover open={memberOpen} onOpenChange={setMemberOpen}>\r\n                    <PopoverTrigger asChild>\r\n                      <button\r\n                        type=\"button\"\r\n                        disabled={!selectedTeam}\r\n                        className={cn(\r\n                          \"flex items-center justify-center w-10 h-10 rounded-full transition-all\",\r\n                          selectedAssignees.length === 0\r\n                            ? \"bg-gray-200 hover:bg-gray-300\"\r\n                            : \"bg-gray-100 hover:bg-gray-200 border-2 border-dashed border-gray-300\"\r\n                        )}\r\n                      >\r\n                        <User className=\"h-5 w-5 text-gray-500\" />\r\n                      </button>\r\n                    </PopoverTrigger>\r\n                    <PopoverContent className=\"w-80 p-0\">\r\n                      <Command>\r\n                        <CommandInput placeholder=\"Search members...\" value={memberSearchQuery} onValueChange={setMemberSearchQuery} />\r\n                        <CommandEmpty>No members found.</CommandEmpty>\r\n                        <CommandGroup className=\"max-h-64 overflow-auto\">\r\n                          {availableMembers.map((member) => (\r\n                            <CommandItem key={member.memberId} onSelect={() => toggleAssignee(member)} className=\"cursor-pointer\">\r\n                              <Avatar className=\"cursor-pointer h-8 w-8 mr-3\">\r\n                                <AvatarFallback className=\"text-xs\">{member.memberName.split(\" \").map(n => n[0]).join(\"\").toUpperCase()}</AvatarFallback>\r\n                              </Avatar>\r\n                              <div>\r\n                                <div className=\"font-medium\">{member.memberName}</div>\r\n                                <div className=\"text-xs text-gray-500\">{member.role}</div>\r\n                              </div>\r\n                            </CommandItem>\r\n                          ))}\r\n                        </CommandGroup>\r\n                      </Command>\r\n                    </PopoverContent>\r\n                  </Popover>\r\n                </TooltipProvider>\r\n              </div>\r\n              {errors.assignedTo && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><AlertCircle className=\"h-3 w-3 mr-1\" /> {errors.assignedTo}</p>}\r\n            </div>\r\n\r\n            {/* Description */}\r\n            <div className=\"w-full\">\r\n              <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n                <Info className=\"h-4 w-4 text-blue-500 mr-2\" /> Description <span className=\"text-red-500 ml-1\">*</span>\r\n              </label>\r\n              <Textarea\r\n                value={formData.description}\r\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n                className=\"w-full h-40 sm:h-48 md:h-52 bg-white border border-gray-300 rounded-lg text-sm resize-vertical focus:ring-2 focus:ring-blue-200 focus:border-blue-500 p-3\"\r\n                placeholder=\"Enter detailed task description...\"\r\n              />\r\n              {errors.description && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><AlertCircle className=\"h-3 w-3 mr-1\" /> {errors.description}</p>}\r\n            </div>\r\n\r\n            {/* Buttons */}\r\n            <div className=\"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200 mt-6\">\r\n              <Button type=\"button\" variant=\"outline\" onClick={onClose} className=\"w-full sm:w-auto bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 rounded-lg text-sm px-4 py-2 h-10\">\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                type=\"submit\"\r\n                disabled={!formData.title.trim() || !selectedDate || selectedAssignees.length === 0 || taskStatus === \"loading\"}\r\n                className=\"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm px-6 py-2 h-10 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                {taskStatus === \"loading\" ? (\r\n                  <> <Loader className=\"h-4 w-4 animate-spin mr-2\" /> Assigning Task...</>\r\n                ) : (\r\n                  \"Assign Task\"\r\n                )}\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default CreateTaskModal;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1083, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/task/components/EditTaskModal.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect, useMemo, useCallback } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { updateTask, fetchTaskById } from \"@/modules/project-management/task/slices/taskSlice\";\r\nimport { fetchTeamByProjectId } from \"@/modules/project-management/team/slices/teamSlice\";\r\nimport { Edit, User, Flag, CalendarIcon, Info, X, Loader, Clock, AlertCircle } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\r\nimport { Calendar } from \"@/components/ui/calendar\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogClose } from \"@/components/ui/dialog\";\r\nimport { Command, CommandEmpty, CommandGroup, CommandInput, CommandItem } from \"@/components/ui/command\";\r\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\r\nimport { format } from \"date-fns\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Input } from \"@/components/ui/input\";\r\n\r\nconst priorityConfig = {\r\n  Low: { color: \"bg-emerald-100 text-emerald-800\", badge: \"Low\" },\r\n  Medium: { color: \"bg-amber-100 text-amber-800\", badge: \"Medium\" },\r\n  High: { color: \"bg-rose-100 text-rose-800\", badge: \"High\" },\r\n};\r\n\r\nconst EditTaskModal = ({ taskId, isOpen, onClose, onTaskUpdated }) => {\r\n  const dispatch = useDispatch();\r\n  const task = useSelector((state) => state.task.currentTask);\r\n  const { teamsByProject: teams } = useSelector((state) => state.team);\r\n  const { status: taskStatus, error: taskError } = useSelector((state) => state.task);\r\n\r\n  const [formData, setFormData] = useState({\r\n    title: \"\",\r\n    description: \"\",\r\n    priority: \"Medium\",\r\n    deadline: null,\r\n    teamId: \"\",\r\n    assignedTo: [],\r\n  });\r\n\r\n  const [selectedAssignees, setSelectedAssignees] = useState([]);\r\n  const [selectedTeam, setSelectedTeam] = useState(null);\r\n  const [selectedDate, setSelectedDate] = useState(null);\r\n  const [selectedTime, setSelectedTime] = useState(\"\");\r\n  const [memberSearchQuery, setMemberSearchQuery] = useState(\"\");\r\n  const [memberOpen, setMemberOpen] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n\r\n  // Fetch task + team\r\n  useEffect(() => {\r\n    if (isOpen && taskId) {\r\n      dispatch(fetchTaskById(taskId));\r\n      if (task?.projectId) {\r\n        dispatch(fetchTeamByProjectId(task.projectId));\r\n      }\r\n    }\r\n  }, [isOpen, taskId, dispatch]);\r\n\r\n  // Pre-fill form when task loads\r\n  useEffect(() => {\r\n    if (!task || !isOpen) return;\r\n\r\n    const deadlineDate = task.deadline ? new Date(task.deadline) : null;\r\n\r\n    setFormData({\r\n      title: task.title || \"\",\r\n      description: task.description || \"\",\r\n      priority: task.priority || \"Medium\",\r\n      deadline: deadlineDate,\r\n      teamId: task.teamId || \"\",\r\n    });\r\n\r\n    setSelectedDate(deadlineDate);\r\n    if (deadlineDate) {\r\n      setSelectedTime(format(deadlineDate, \"HH:mm\"));\r\n    }\r\n\r\n    // Handle both old single assignee & new array format\r\n    const assignees = Array.isArray(task.assignedTo)\r\n      ? task.assignedTo.map(a => ({\r\n          memberId: a.memberId || a._id,\r\n          memberName: a.memberName,\r\n          role: a.role || \"Member\",\r\n        }))\r\n      : task.assignedToDetails\r\n      ? [{\r\n          memberId: task.assignedToDetails.memberId,\r\n          memberName: task.assignedToDetails.memberName,\r\n          role: task.assignedToDetails.role || \"Member\",\r\n        }]\r\n      : [];\r\n\r\n    setSelectedAssignees(assignees);\r\n\r\n    const team = teams.find(t => t.teamId === task.teamId);\r\n    setSelectedTeam(team || null);\r\n  }, [task, teams, isOpen]);\r\n\r\n  const handleTeamSelect = useCallback((value) => {\r\n    const team = teams.find(t => t.teamId === value);\r\n    setSelectedTeam(team);\r\n    setSelectedAssignees([]);\r\n  }, [teams]);\r\n\r\n  const availableMembers = useMemo(() => {\r\n    if (!selectedTeam?.teamMembers) return [];\r\n    const q = memberSearchQuery.toLowerCase();\r\n    return selectedTeam.teamMembers\r\n      .filter(m =>\r\n        m.memberName.toLowerCase().includes(q) &&\r\n        !selectedAssignees.some(a => a.memberId === m.memberId)\r\n      )\r\n      .map(m => ({\r\n        memberId: m.memberId,\r\n        memberName: m.memberName,\r\n        role: m.role || \"Member\",\r\n      }));\r\n  }, [selectedTeam, memberSearchQuery, selectedAssignees]);\r\n\r\n  const toggleAssignee = useCallback((member) => {\r\n    setSelectedAssignees(prev => {\r\n      const exists = prev.some(a => a.memberId === member.memberId);\r\n      const newList = exists\r\n        ? prev.filter(a => a.memberId !== member.memberId)\r\n        : [...prev, member];\r\n      return newList;\r\n    });\r\n  }, []);\r\n\r\n  const validate = useCallback(() => {\r\n    const newErrors = {};\r\n    if (!formData.title.trim()) newErrors.title = \"Title is required\";\r\n    if (!formData.priority) newErrors.priority = \"Priority is required\";\r\n    if (!selectedDate) newErrors.deadline = \"Deadline is required\";\r\n    if (!formData.description.trim()) newErrors.description = \"Description is required\";\r\n    if (!selectedTeam) newErrors.team = \"Team selection is required\";\r\n    if (selectedAssignees.length === 0) newErrors.assignedTo = \"Assign at least one member\";\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  }, [formData, selectedDate, selectedTeam, selectedAssignees]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!validate()) {\r\n      toast.error(\"Please fill all required fields\");\r\n      return;\r\n    }\r\n\r\n    const pad = (n) => (n < 10 ? \"0\" + n : n);\r\n    let deadline = null;\r\n    if (selectedDate) {\r\n      const d = new Date(selectedDate);\r\n      const [h, m] = selectedTime ? selectedTime.split(\":\").map(Number) : [23, 59];\r\n      d.setHours(h, m, 0, 0);\r\n      deadline = `${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())}T${pad(d.getHours())}:${pad(d.getMinutes())}:00`;\r\n    }\r\n\r\n    const payload = {\r\n      task_id: taskId,\r\n      title: formData.title,\r\n      description: formData.description,\r\n      priority: formData.priority,\r\n      deadline,\r\n      teamId: selectedTeam.teamId,\r\n      assignedTo: selectedAssignees,\r\n    };\r\n\r\n    try {\r\n      await dispatch(updateTask(payload)).unwrap();\r\n      toast.success(\"Task updated successfully!\");\r\n      onTaskUpdated?.();\r\n      onClose();\r\n    } catch (err) {\r\n      toast.error(taskError || \"Failed to update task\");\r\n    }\r\n  };\r\n\r\n  const displayDeadline = selectedDate\r\n    ? `${format(selectedDate, \"MMM dd, yyyy\")}${selectedTime ? ` • ${selectedTime}` : \"\"}`\r\n    : \"No deadline\";\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <Dialog open={isOpen} onOpenChange={onClose}>\r\n      <DialogContent className=\"w-full max-w-full h-[100vh] max-h-[100vh] sm:max-w-6xl sm:max-h-[85vh] bg-white shadow-lg border border-gray-200 rounded-lg text-black p-2\">\r\n        <DialogHeader className=\"bg-gradient-to-r from-blue-50 to-indigo-50 px-4 py-2 border-b border-gray-200 sticky top-0 z-10\">\r\n          <div className=\"flex justify-between items-center\">\r\n            <DialogTitle className=\"text-base sm:text-lg font-bold text-gray-800 flex items-center\">\r\n              <Edit className=\"mr-2 h-4 w-4 text-blue-500\" />\r\n              Edit Task\r\n            </DialogTitle>\r\n            <DialogClose asChild>\r\n              <Button variant=\"ghost\" size=\"icon\" className=\"text-gray-500 hover:bg-gray-100 rounded-full h-7 w-7\">\r\n                <X className=\"h-3 w-3\" />\r\n              </Button>\r\n            </DialogClose>\r\n          </div>\r\n        </DialogHeader>\r\n\r\n        <div className=\"p-4 sm:p-6 overflow-y-auto max-h-[calc(85vh-60px)]\">\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n\r\n            {/* Title */}\r\n            <div className=\"w-full\">\r\n              <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n                <Edit className=\"h-4 w-4 text-blue-500 mr-2\" /> Task Title <span className=\"text-red-500 ml-1\">*</span>\r\n              </label>\r\n              <Textarea\r\n                value={formData.title}\r\n                onChange={(e) => setFormData(prev => ({ ...prev, title: e.target.value }))}\r\n                className=\"w-full h-24 sm:h-28 md:h-32 bg-white border border-gray-300 rounded-lg text-sm resize-vertical focus:ring-2 focus:ring-blue-200 focus:border-blue-500 p-3\"\r\n                placeholder=\"Enter task title...\"\r\n              />\r\n              {errors.title && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><AlertCircle className=\"h-3 w-3 mr-1\" /> {errors.title}</p>}\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              {/* Priority */}\r\n              <div>\r\n                <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n                  <Flag className=\"h-4 w-4 text-blue-500 mr-2\" /> Priority <span className=\"text-red-500 ml-1\">*</span>\r\n                </label>\r\n                <Select value={formData.priority} onValueChange={(v) => setFormData(prev => ({ ...prev, priority: v }))}>\r\n                  <SelectTrigger className=\"w-full h-10 rounded-lg\">\r\n                    <SelectValue>\r\n                      <span className={cn(\"px-2 py-1 rounded-full text-xs font-medium\", priorityConfig[formData.priority]?.color)}>\r\n                        {priorityConfig[formData.priority]?.badge}\r\n                      </span>\r\n                    </SelectValue>\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {Object.entries(priorityConfig).map(([k, c]) => (\r\n                      <SelectItem key={k} value={k}>\r\n                        <span className={cn(\"px-2 py-1 rounded-full text-xs font-medium\", c.color)}>{c.badge}</span>\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              {/* Deadline */}\r\n              <div>\r\n                <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n                  <CalendarIcon className=\"h-4 w-4 text-blue-500 mr-2\" /> Deadline <span className=\"text-red-500 ml-1\">*</span>\r\n                </label>\r\n                <Popover>\r\n                  <PopoverTrigger asChild>\r\n                    <Button variant=\"outline\" className={cn(\"w-full justify-start h-10 rounded-lg\", !selectedDate && \"text-gray-500\")}>\r\n                      <CalendarIcon className=\"mr-2 h-4 w-4\" />\r\n                      {displayDeadline}\r\n                    </Button>\r\n                  </PopoverTrigger>\r\n                  <PopoverContent className=\"w-auto p-0\" align=\"start\">\r\n                    <Calendar mode=\"single\" selected={selectedDate} onSelect={setSelectedDate} initialFocus />\r\n                    <div className=\"p-3 border-t flex items-center gap-2\">\r\n                      <Clock className=\"h-4 w-4 text-gray-500\" />\r\n                      <Input type=\"time\" value={selectedTime} onChange={(e) => setSelectedTime(e.target.value)} className=\"h-9\" />\r\n                    </div>\r\n                  </PopoverContent>\r\n                </Popover>\r\n                {errors.deadline && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><AlertCircle className=\"h-3 w-3 mr-1\" /> {errors.deadline}</p>}\r\n              </div>\r\n\r\n              {/* Team */}\r\n              <div>\r\n                <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n                  <User className=\"h-4 w-4 text-blue-500 mr-2\" /> Team <span className=\"text-red-500 ml-1\">*</span>\r\n                </label>\r\n                <Select value={selectedTeam?.teamId || \"\"} onValueChange={handleTeamSelect}>\r\n                  <SelectTrigger className=\"w-full h-10 rounded-lg\">\r\n                    <SelectValue placeholder=\"Select team\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {teams.map((team) => (\r\n                      <SelectItem key={team.teamId} value={team.teamId}>{team.teamName}</SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Assignees */}\r\n            <div>\r\n              <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n                <User className=\"h-4 w-4 text-blue-500 mr-2\" /> Assigned To <span className=\"text-red-500 ml-1\">*</span>\r\n              </label>\r\n              <div className=\"flex flex-wrap items-center gap-3 min-h-12 p-3 border rounded-lg bg-gray-50\">\r\n                <TooltipProvider>\r\n                  {selectedAssignees.map((person) => (\r\n                    <Tooltip key={person.memberId}>\r\n                      <TooltipTrigger asChild>\r\n                        <div className=\"relative group\">\r\n                          <Avatar className=\"h-10 w-10 ring-2 ring-white\">\r\n                            <AvatarFallback className=\"bg-teal-600 text-white text-sm\">\r\n                              {person.memberName.split(\" \").map(n => n[0]).join(\"\").toUpperCase()}\r\n                            </AvatarFallback>\r\n                          </Avatar>\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => toggleAssignee(person)}\r\n                            className=\"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition\"\r\n                          >\r\n                            <X className=\"h-3 w-3\" />\r\n                          </button>\r\n                        </div>\r\n                      </TooltipTrigger>\r\n                      <TooltipContent>\r\n                        <div>{person.memberName}</div>\r\n                        <div className=\"text-xs text-gray-500\">{person.role}</div>\r\n                      </TooltipContent>\r\n                    </Tooltip>\r\n                  ))}\r\n\r\n                  <Popover open={memberOpen} onOpenChange={setMemberOpen}>\r\n                    <PopoverTrigger asChild>\r\n                      <button\r\n                        type=\"button\"\r\n                        disabled={!selectedTeam}\r\n                        className={cn(\r\n                          \"flex items-center justify-center w-10 h-10 rounded-full transition-all\",\r\n                          selectedAssignees.length === 0\r\n                            ? \"bg-gray-200 hover:bg-gray-300\"\r\n                            : \"bg-gray-100 hover:bg-gray-200 border-2 border-dashed border-gray-300\"\r\n                        )}\r\n                      >\r\n                        <User className=\"h-5 w-5 text-gray-500\" />\r\n                      </button>\r\n                    </PopoverTrigger>\r\n                    <PopoverContent className=\"w-80 p-0\">\r\n                      <Command>\r\n                        <CommandInput placeholder=\"Search members...\" value={memberSearchQuery} onValueChange={setMemberSearchQuery} />\r\n                        <CommandEmpty>No members found.</CommandEmpty>\r\n                        <CommandGroup className=\"max-h-64 overflow-auto\">\r\n                          {availableMembers.map((member) => (\r\n                            <CommandItem key={member.memberId} onSelect={() => toggleAssignee(member)} className=\"cursor-pointer\">\r\n                              <Avatar className=\"h-8 w-8 mr-3\">\r\n                                <AvatarFallback className=\"text-xs\">\r\n                                  {member.memberName.split(\" \").map(n => n[0]).join(\"\").toUpperCase()}\r\n                                </AvatarFallback>\r\n                              </Avatar>\r\n                              <div>\r\n                                <div className=\"font-medium\">{member.memberName}</div>\r\n                                <div className=\"text-xs text-gray-500\">{member.role}</div>\r\n                              </div>\r\n                            </CommandItem>\r\n                          ))}\r\n                        </CommandGroup>\r\n                      </Command>\r\n                    </PopoverContent>\r\n                  </Popover>\r\n                </TooltipProvider>\r\n              </div>\r\n              {errors.assignedTo && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><AlertCircle className=\"h-3 w-3 mr-1\" /> {errors.assignedTo}</p>}\r\n            </div>\r\n\r\n            {/* Description */}\r\n            <div className=\"w-full\">\r\n              <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n                <Info className=\"h-4 w-4 text-blue-500 mr-2\" /> Description <span className=\"text-red-500 ml-1\">*</span>\r\n              </label>\r\n              <Textarea\r\n                value={formData.description}\r\n                onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\r\n                className=\"w-full h-40 sm:h-48 md:h-52 bg-white border border-gray-300 rounded-lg text-sm resize-vertical focus:ring-2 focus:ring-blue-200 focus:border-blue-500 p-3\"\r\n                placeholder=\"Enter detailed task description...\"\r\n              />\r\n              {errors.description && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><AlertCircle className=\"h-3 w-3 mr-1\" /> {errors.description}</p>}\r\n            </div>\r\n\r\n            <div className=\"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200 mt-6\">\r\n              <Button type=\"button\" variant=\"outline\" onClick={onClose}>\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                type=\"submit\"\r\n                disabled={taskStatus === \"loading\"}\r\n                className=\"bg-blue-600 hover:bg-blue-700 text-white\"\r\n              >\r\n                {taskStatus === \"loading\" ? (\r\n                  <> <Loader className=\"h-4 w-4 animate-spin mr-2\" /> Updating...</>\r\n                ) : (\r\n                  \"Update Task\"\r\n                )}\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default EditTaskModal;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2129, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/task/components/AllTaskListByProjectId.jsx"],"sourcesContent":["\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\"use client\";\r\n\r\nimport { format } from \"date-fns\";\r\nimport { useEffect, useState, useMemo } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport {\r\n  fetchTasksByProjectId,\r\n  deleteTask,\r\n  downloadTasksReport,\r\n  selectTasksByProjectId,\r\n  selectTaskStatus,\r\n  selectEmployeeProjectTasks,\r\n  fetchEmployeeProjectTasks,\r\n} from \"@/modules/project-management/task/slices/taskSlice\";\r\nimport {\r\n  MoreVertical,\r\n  CalendarIcon,\r\n  Filter,\r\n  Eye,\r\n  Edit,\r\n  Trash2,\r\n  Download,\r\n  Plus,\r\n  Search,\r\n  AlertCircle,\r\n  X,\r\n} from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\r\nimport { Calendar } from \"@/components/ui/calendar\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from \"@/components/ui/table\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { formatDateTimeIST } from \"@/utils/formatDate\";\r\nimport CreateTaskModal from \"./CreateTaskModal\";\r\nimport EditTaskModal from \"./EditTaskModal\";\r\nimport { useCurrentUser } from \"@/hooks/useCurrentUser\";\r\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n\r\nconst AllTaskListByProjectId = ({ projectId, project }) => {\r\n  const { currentUser, isTeamLead } = useCurrentUser(project?.teamLeadId);\r\n  const dispatch = useDispatch();\r\n  const router = useRouter();\r\n\r\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n  const [taskIdToDelete, setTaskIdToDelete] = useState(null);\r\n  const [showLoader, setShowLoader] = useState(true);\r\n  const [showCreateTaskModal, setShowCreateTaskModal] = useState(false);\r\n  const [showEditModal, setShowEditModal] = useState(false);\r\n  const [editingTaskId, setEditingTaskId] = useState(null);\r\n  const [showFilterDialog, setShowFilterDialog] = useState(false);\r\n\r\n  const isCpc = currentUser?.role === \"cpc\";\r\n  const isTeamLeadOrCpc = isCpc || isTeamLead;\r\n  const [viewMode, setViewMode] = useState(isTeamLeadOrCpc ? \"all\" : \"my\");\r\n\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [tempPriorityFilter, setTempPriorityFilter] = useState(\"all\");\r\n  const [tempStatusFilter, setTempStatusFilter] = useState(\"all\");\r\n  const [tempAssignedToFilter, setTempAssignedToFilter] = useState(\"all\");\r\n  const [tempDateFrom, setTempDateFrom] = useState(null);\r\n  const [tempDateTo, setTempDateTo] = useState(null);\r\n  const [priorityFilter, setPriorityFilter] = useState(\"all\");\r\n  const [statusFilter, setStatusFilter] = useState(\"all\");\r\n  const [assignedToFilter, setAssignedToFilter] = useState(\"all\");\r\n  const [dateFrom, setDateFrom] = useState(null);\r\n  const [dateTo, setDateTo] = useState(null);\r\n  const [sortConfig, setSortConfig] = useState({ key: \"\", direction: \"asc\" });\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const tasksPerPage = 10;\r\n\r\n  useEffect(() => {\r\n    if (projectId) {\r\n      setShowLoader(true);\r\n      dispatch(fetchTasksByProjectId(projectId))\r\n        .unwrap()\r\n        .finally(() => setShowLoader(false));\r\n    }\r\n  }, [dispatch, projectId]);\r\n\r\n  const employeeId = currentUser?.id;\r\n  const tasksFromStore = useSelector((state) => selectTasksByProjectId(state, projectId));\r\n  const status = useSelector(selectTaskStatus);\r\n  const employeeProjectTasks = useSelector((state) =>\r\n    selectEmployeeProjectTasks(state, projectId, employeeId)\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (projectId && employeeId && (!isTeamLeadOrCpc || viewMode === \"my\")) {\r\n      setShowLoader(true);\r\n      dispatch(fetchEmployeeProjectTasks({ projectId, employeeId }))\r\n        .unwrap()\r\n        .finally(() => setShowLoader(false));\r\n    }\r\n  }, [dispatch, projectId, employeeId, isTeamLeadOrCpc, viewMode]);\r\n\r\n  const tasks = useMemo(() => {\r\n    return (!isTeamLeadOrCpc || viewMode === \"my\") ? employeeProjectTasks || [] : tasksFromStore || [];\r\n  }, [isTeamLeadOrCpc, viewMode, tasksFromStore, employeeProjectTasks]);\r\n\r\n  const showAllViewOption = isTeamLeadOrCpc;\r\n  const showAssignedFilter = showAllViewOption && viewMode === \"all\";\r\n\r\n  const refreshTasks = () => {\r\n    dispatch(fetchTasksByProjectId(projectId));\r\n    if (!isTeamLeadOrCpc || viewMode === \"my\") {\r\n      dispatch(fetchEmployeeProjectTasks({ projectId, employeeId }));\r\n    }\r\n  };\r\n\r\n  const handleDeleteTask = async () => {\r\n    try {\r\n      await dispatch(deleteTask(taskIdToDelete)).unwrap();\r\n      toast.success(\"Task deleted successfully!\");\r\n      refreshTasks();\r\n    } catch (err) {\r\n      toast.error(\"Failed to delete task.\");\r\n    }\r\n    setShowDeleteModal(false);\r\n    setTaskIdToDelete(null);\r\n  };\r\n\r\n  const handleSort = (key) => {\r\n    setSortConfig((prev) => ({\r\n      key,\r\n      direction: prev.key === key && prev.direction === \"asc\" ? \"desc\" : \"asc\",\r\n    }));\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const handleViewModeChange = (newMode) => {\r\n    setViewMode(newMode);\r\n    setCurrentPage(1);\r\n    handleResetFilters();\r\n  };\r\n\r\n  const assignedMembers = useMemo(() => {\r\n    return Array.from(new Set(tasks.flatMap(t => t.assignedTo?.map(a => a.memberName) || []))).filter(Boolean);\r\n  }, [tasks]);\r\n\r\n  const filteredTasks = useMemo(() => {\r\n    let filtered = [...tasks];\r\n\r\n    if (searchQuery.trim()) {\r\n      const q = searchQuery.toLowerCase();\r\n      filtered = filtered.filter(t =>\r\n        t.title?.toLowerCase().includes(q) ||\r\n        t.task_id?.toLowerCase().includes(q) ||\r\n        t.assignedTo?.some(a => a.memberName?.toLowerCase().includes(q))\r\n      );\r\n    }\r\n\r\n    if (priorityFilter !== \"all\") filtered = filtered.filter(t => t.priority === priorityFilter);\r\n    if (statusFilter !== \"all\") filtered = filtered.filter(t => t.status === statusFilter);\r\n    if (assignedToFilter !== \"all\" && showAssignedFilter) {\r\n      filtered = filtered.filter(t => t.assignedTo?.some(a => a.memberName === assignedToFilter));\r\n    }\r\n    if (dateFrom || dateTo) {\r\n      filtered = filtered.filter(t => {\r\n        if (!t.deadline) return false;\r\n        const d = new Date(t.deadline);\r\n        return (!dateFrom || d >= dateFrom) && (!dateTo || d <= dateTo);\r\n      });\r\n    }\r\n\r\n    if (sortConfig.key) {\r\n      filtered.sort((a, b) => {\r\n        let aVal = sortConfig.key.includes(\".\") ? sortConfig.key.split(\".\").reduce((o, k) => o?.[k], a) : a[sortConfig.key];\r\n        let bVal = sortConfig.key.includes(\".\") ? sortConfig.key.split(\".\").reduce((o, k) => o?.[k], b) : b[sortConfig.key];\r\n        if (typeof aVal === \"string\") aVal = aVal.toLowerCase();\r\n        if (typeof bVal === \"string\") bVal = bVal.toLowerCase();\r\n        return (aVal < bVal ? -1 : 1) * (sortConfig.direction === \"asc\" ? 1 : -1);\r\n      });\r\n    }\r\n\r\n    return filtered;\r\n  }, [tasks, searchQuery, priorityFilter, statusFilter, assignedToFilter, dateFrom, dateTo, sortConfig, showAssignedFilter]);\r\n\r\n  const handleResetFilters = () => {\r\n    setSearchQuery(\"\");\r\n    setPriorityFilter(\"all\");\r\n    setStatusFilter(\"all\");\r\n    setAssignedToFilter(\"all\");\r\n    setDateFrom(null);\r\n    setDateTo(null);\r\n    setTempPriorityFilter(\"all\");\r\n    setTempStatusFilter(\"all\");\r\n    setTempAssignedToFilter(\"all\");\r\n    setTempDateFrom(null);\r\n    setTempDateTo(null);\r\n    setSortConfig({ key: \"\", direction: \"asc\" });\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const handleApplyFilters = () => {\r\n    setPriorityFilter(tempPriorityFilter);\r\n    setStatusFilter(tempStatusFilter);\r\n    setAssignedToFilter(tempAssignedToFilter);\r\n    setDateFrom(tempDateFrom);\r\n    setDateTo(tempDateTo);\r\n    setShowFilterDialog(false);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const totalPages = Math.max(1, Math.ceil(filteredTasks.length / tasksPerPage));\r\n  const paginatedTasks = filteredTasks.slice((currentPage - 1) * tasksPerPage, currentPage * tasksPerPage);\r\n\r\n  const getInitials = (name) => {\r\n    if (!name) return \"NA\";\r\n    const words = name.split(\" \");\r\n    return words.length > 1 ? `${words[0][0]}${words[1][0]}`.toUpperCase() : name.slice(0, 2).toUpperCase();\r\n  };\r\n\r\n  const truncateTitle = (title) => title?.length > 70 ? `${title.slice(0, 70)}...` : title || \"N/A\";\r\n\r\n  return (\r\n    <TooltipProvider>\r\n      <div className=\"w-full bg-white\">\r\n        <div className=\"space-y-6\">\r\n\r\n          <div className=\"flex flex-wrap gap-4\">\r\n            <div className=\"flex-1 min-w-[180px]\">\r\n              <div className=\"relative\">\r\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4\" />\r\n                <Input\r\n                  placeholder=\"Search tasks...\"\r\n                  value={searchQuery}\r\n                  onChange={(e) => setSearchQuery(e.target.value)}\r\n                  className=\"pl-10\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {showAllViewOption && (\r\n              <Select value={viewMode} onValueChange={handleViewModeChange}>\r\n                <SelectTrigger className=\"w-[140px]\">\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"my\">My Tasks</SelectItem>\r\n                  <SelectItem value=\"all\">All Tasks</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            )}\r\n\r\n            <Button variant=\"outline\" onClick={() => setShowFilterDialog(true)}>\r\n              <Filter className=\"w-4 h-4 mr-2\" /> Filter\r\n            </Button>\r\n            <Button variant=\"outline\" onClick={handleResetFilters}>\r\n              <X className=\"w-4 h-4 mr-2\" /> Reset\r\n            </Button>\r\n\r\n            {isTeamLeadOrCpc && (\r\n              <>\r\n                <Button variant=\"default\" onClick={() => dispatch(downloadTasksReport({ projectId }))}>\r\n                  <Download className=\"w-4 h-4 mr-2\" /> Download\r\n                </Button>\r\n                <Button variant=\"default\" onClick={() => setShowCreateTaskModal(true)}>\r\n                  <Plus className=\"w-4 h-4 mr-2\" /> Create Task\r\n                </Button>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"border rounded-lg overflow-hidden\">\r\n            <Table>\r\n              <TableHeader>\r\n                <TableRow className=\"bg-gray-50\">\r\n                  <TableHead className=\"w-16\">S.N</TableHead>\r\n                  <TableHead onClick={() => handleSort(\"title\")} className=\"cursor-pointer\">Title</TableHead>\r\n                  <TableHead>Assignee</TableHead>\r\n                  <TableHead onClick={() => handleSort(\"priority\")} className=\"cursor-pointer\">Priority</TableHead>\r\n                  <TableHead onClick={() => handleSort(\"deadline\")} className=\"cursor-pointer\">Deadline</TableHead>\r\n                  <TableHead onClick={() => handleSort(\"status\")} className=\"cursor-pointer\">Status</TableHead>\r\n                  <TableHead className=\"w-20\">Action</TableHead>\r\n                </TableRow>\r\n              </TableHeader>\r\n              <TableBody>\r\n                {showLoader ? (\r\n                  <TableRow><TableCell colSpan={7} className=\"text-center py-10\">Loading...</TableCell></TableRow>\r\n                ) : paginatedTasks.length === 0 ? (\r\n                  <TableRow><TableCell colSpan={7} className=\"text-center py-10 text-gray-500\">No tasks found</TableCell></TableRow>\r\n                ) : (\r\n                  paginatedTasks.map((task, idx) => (\r\n                    <TableRow key={task._id} className=\"hover:bg-gray-50 cursor-pointer\" onClick={() => router.push(`/workspace/task/${task.task_id}`)}>\r\n                      <TableCell>{(currentPage - 1) * tasksPerPage + idx + 1}</TableCell>\r\n                      <TableCell className=\"font-medium\">{truncateTitle(task.title)}</TableCell>\r\n\r\n                      <TableCell>\r\n                        {task.assignedTo?.length > 0 ? (\r\n                          <div className=\"flex -space-x-2\">\r\n                            {task.assignedTo.slice(0, 3).map((a) => (\r\n                              <Tooltip key={a.memberId || a._id}>\r\n                                <TooltipTrigger asChild>\r\n                                  <Avatar className=\"w-8 h-8 ring-2 ring-white\">\r\n                                    <AvatarFallback className=\"bg-teal-600 text-white text-xs\">\r\n                                      {getInitials(a.memberName)}\r\n                                    </AvatarFallback>\r\n                                  </Avatar>\r\n                                </TooltipTrigger>\r\n                                <TooltipContent>{a.memberName}</TooltipContent>\r\n                              </Tooltip>\r\n                            ))}\r\n                            {task.assignedTo.length > 3 && (\r\n                              <div className=\"w-8 h-8 rounded-full bg-gray-300 text-xs flex items-center justify-center ring-2 ring-white\">\r\n                                +{task.assignedTo.length - 3}\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        ) : \"—\"}\r\n                      </TableCell>\r\n\r\n                      <TableCell>\r\n                        <span className={cn(\r\n                          \"px-2.5 py-0.5 rounded-full text-xs font-medium\",\r\n                          task.priority === \"Low\" && \"bg-green-100 text-green-800\",\r\n                          task.priority === \"Medium\" && \"bg-yellow-100 text-yellow-800\",\r\n                          task.priority === \"High\" && \"bg-red-100 text-red-800\"\r\n                        )}>\r\n                          {task.priority}\r\n                        </span>\r\n                      </TableCell>\r\n\r\n                      <TableCell className=\"text-xs\">\r\n                        {formatDateTimeIST(task.deadline) || \"—\"}\r\n                      </TableCell>\r\n\r\n                      <TableCell>\r\n                        <span className={cn(\r\n                          \"px-2.5 py-0.5 rounded-full text-xs font-medium\",\r\n                          task.status === \"Pending\" && \"bg-yellow-100 text-yellow-800\",\r\n                          task.status === \"In Progress\" && \"bg-blue-100 text-blue-800\",\r\n                          task.status === \"Completed\" && \"bg-green-100 text-green-800\"\r\n                        )}>\r\n                          {task.status}\r\n                        </span>\r\n                      </TableCell>\r\n\r\n                      <TableCell onClick={(e) => e.stopPropagation()}>\r\n                        <DropdownMenu>\r\n                          <DropdownMenuTrigger asChild>\r\n                            <Button variant=\"ghost\" size=\"icon\"><MoreVertical className=\"h-4 w-4\" /></Button>\r\n                          </DropdownMenuTrigger>\r\n                          <DropdownMenuContent align=\"end\">\r\n                            <DropdownMenuItem onClick={() => router.push(`/workspace/task/${task.task_id}`)}>\r\n                              <Eye className=\"w-4 h-4 mr-2\" /> View\r\n                            </DropdownMenuItem>\r\n                            {isTeamLeadOrCpc && viewMode === \"all\" && (\r\n                              <>\r\n                                <DropdownMenuItem onClick={() => { setEditingTaskId(task.task_id); setShowEditModal(true); }}>\r\n                                  <Edit className=\"w-4 h-4 mr-2\" /> Edit\r\n                                </DropdownMenuItem>\r\n                                <DropdownMenuItem onClick={() => { setTaskIdToDelete(task.task_id); setShowDeleteModal(true); }} className=\"text-red-600\">\r\n                                  <Trash2 className=\"w-4 h-4 mr-2\" /> Delete\r\n                                </DropdownMenuItem>\r\n                              </>\r\n                            )}\r\n                          </DropdownMenuContent>\r\n                        </DropdownMenu>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))\r\n                )}\r\n              </TableBody>\r\n            </Table>\r\n          </div>\r\n\r\n          {totalPages > 1 && (\r\n            <div className=\"flex justify-center gap-2\">\r\n              <Button variant=\"outline\" size=\"sm\" disabled={currentPage === 1} onClick={() => setCurrentPage(p => p - 1)}>Previous</Button>\r\n              {Array.from({ length: Math.min(7, totalPages) }, (_, i) => {\r\n                const page = i + 1;\r\n                return (\r\n                  <Button key={page} variant={currentPage === page ? \"default\" : \"outline\"} size=\"sm\" onClick={() => setCurrentPage(page)}>\r\n                    {page}\r\n                  </Button>\r\n                );\r\n              })}\r\n              <Button variant=\"outline\" size=\"sm\" disabled={currentPage === totalPages} onClick={() => setCurrentPage(p => p + 1)}>Next</Button>\r\n            </div>\r\n          )}\r\n\r\n          <Dialog open={showDeleteModal} onOpenChange={setShowDeleteModal}>\r\n            <DialogContent>\r\n              <DialogHeader>\r\n                <DialogTitle className=\"flex items-center gap-2\">\r\n                  <AlertCircle className=\"w-5 h-5 text-red-600\" /> Delete Task\r\n                </DialogTitle>\r\n              </DialogHeader>\r\n              <p>Are you sure you want to delete this task? This action cannot be undone.</p>\r\n              <div className=\"flex justify-end gap-3 mt-4\">\r\n                <Button variant=\"outline\" onClick={() => setShowDeleteModal(false)}>Cancel</Button>\r\n                <Button variant=\"destructive\" onClick={handleDeleteTask}>Delete</Button>\r\n              </div>\r\n            </DialogContent>\r\n          </Dialog>\r\n\r\n          {isTeamLeadOrCpc && (\r\n            <CreateTaskModal\r\n              onTaskAssingn={refreshTasks}\r\n              projectId={projectId}\r\n              project={project}\r\n              isOpen={showCreateTaskModal}\r\n              onClose={() => setShowCreateTaskModal(false)}\r\n            />\r\n          )}\r\n\r\n          {isTeamLeadOrCpc && (\r\n            <EditTaskModal\r\n              taskId={editingTaskId}\r\n              isOpen={showEditModal}\r\n              onClose={() => { setShowEditModal(false); setEditingTaskId(null); }}\r\n              onTaskUpdated={refreshTasks}\r\n            />\r\n          )}\r\n        </div>\r\n      </div>\r\n    </TooltipProvider>\r\n  );\r\n};\r\n\r\nexport default AllTaskListByProjectId;"],"names":[],"mappings":";;;;AAsBA;AACA;AACA;AACA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;AACA;AACA;AAOA;AACA;AACA;AACA;AAQA;AAMA;AAMA;AAMA;AACA;AACA;AACA;AACA;AACA;AAvEA;;;;;;;;;;;;;;;;;;;;;;;;AAyEA,MAAM,yBAAyB,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE;IACpD,MAAM,EAAE,WAAW,EAAE,UAAU,EAAE,GAAG,CAAA,GAAA,8HAAA,CAAA,iBAAc,AAAD,EAAE,SAAS;IAC5D,MAAM,WAAW,CAAA,GAAA,yJAAA,CAAA,cAAW,AAAD;IAC3B,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACrD,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC/D,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnD,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnD,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEzD,MAAM,QAAQ,aAAa,SAAS;IACpC,MAAM,kBAAkB,SAAS;IACjC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,kBAAkB,QAAQ;IAEnE,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC7D,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzD,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjE,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACrD,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzD,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACrC,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;QAAE,KAAK;QAAI,WAAW;IAAM;IACzE,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,eAAe;IAErB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,WAAW;YACb,cAAc;YACd,SAAS,CAAA,GAAA,sKAAA,CAAA,wBAAqB,AAAD,EAAE,YAC5B,MAAM,GACN,OAAO,CAAC,IAAM,cAAc;QACjC;IACF,GAAG;QAAC;QAAU;KAAU;IAExB,MAAM,aAAa,aAAa;IAChC,MAAM,iBAAiB,CAAA,GAAA,yJAAA,CAAA,cAAW,AAAD,EAAE,CAAC,QAAU,CAAA,GAAA,sKAAA,CAAA,yBAAsB,AAAD,EAAE,OAAO;IAC5E,MAAM,SAAS,CAAA,GAAA,yJAAA,CAAA,cAAW,AAAD,EAAE,sKAAA,CAAA,mBAAgB;IAC3C,MAAM,uBAAuB,CAAA,GAAA,yJAAA,CAAA,cAAW,AAAD,EAAE,CAAC,QACxC,CAAA,GAAA,sKAAA,CAAA,6BAA0B,AAAD,EAAE,OAAO,WAAW;IAG/C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,aAAa,cAAc,CAAC,CAAC,mBAAmB,aAAa,IAAI,GAAG;YACtE,cAAc;YACd,SAAS,CAAA,GAAA,sKAAA,CAAA,4BAAyB,AAAD,EAAE;gBAAE;gBAAW;YAAW,IACxD,MAAM,GACN,OAAO,CAAC,IAAM,cAAc;QACjC;IACF,GAAG;QAAC;QAAU;QAAW;QAAY;QAAiB;KAAS;IAE/D,MAAM,QAAQ,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAAE;QACpB,OAAO,AAAC,CAAC,mBAAmB,aAAa,OAAQ,wBAAwB,EAAE,GAAG,kBAAkB,EAAE;IACpG,GAAG;QAAC;QAAiB;QAAU;QAAgB;KAAqB;IAEpE,MAAM,oBAAoB;IAC1B,MAAM,qBAAqB,qBAAqB,aAAa;IAE7D,MAAM,eAAe;QACnB,SAAS,CAAA,GAAA,sKAAA,CAAA,wBAAqB,AAAD,EAAE;QAC/B,IAAI,CAAC,mBAAmB,aAAa,MAAM;YACzC,SAAS,CAAA,GAAA,sKAAA,CAAA,4BAAyB,AAAD,EAAE;gBAAE;gBAAW;YAAW;QAC7D;IACF;IAEA,MAAM,mBAAmB;QACvB,IAAI;YACF,MAAM,SAAS,CAAA,GAAA,sKAAA,CAAA,aAAU,AAAD,EAAE,iBAAiB,MAAM;YACjD,wIAAA,CAAA,QAAK,CAAC,OAAO,CAAC;YACd;QACF,EAAE,OAAO,KAAK;YACZ,wIAAA,CAAA,QAAK,CAAC,KAAK,CAAC;QACd;QACA,mBAAmB;QACnB,kBAAkB;IACpB;IAEA,MAAM,aAAa,CAAC;QAClB,cAAc,CAAC,OAAS,CAAC;gBACvB;gBACA,WAAW,KAAK,GAAG,KAAK,OAAO,KAAK,SAAS,KAAK,QAAQ,SAAS;YACrE,CAAC;QACD,eAAe;IACjB;IAEA,MAAM,uBAAuB,CAAC;QAC5B,YAAY;QACZ,eAAe;QACf;IACF;IAEA,MAAM,kBAAkB,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAAE;QAC9B,OAAO,MAAM,IAAI,CAAC,IAAI,IAAI,MAAM,OAAO,CAAC,CAAA,IAAK,EAAE,UAAU,EAAE,IAAI,CAAA,IAAK,EAAE,UAAU,KAAK,EAAE,IAAI,MAAM,CAAC;IACpG,GAAG;QAAC;KAAM;IAEV,MAAM,gBAAgB,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAAE;QAC5B,IAAI,WAAW;eAAI;SAAM;QAEzB,IAAI,YAAY,IAAI,IAAI;YACtB,MAAM,IAAI,YAAY,WAAW;YACjC,WAAW,SAAS,MAAM,CAAC,CAAA,IACzB,EAAE,KAAK,EAAE,cAAc,SAAS,MAChC,EAAE,OAAO,EAAE,cAAc,SAAS,MAClC,EAAE,UAAU,EAAE,KAAK,CAAA,IAAK,EAAE,UAAU,EAAE,cAAc,SAAS;QAEjE;QAEA,IAAI,mBAAmB,OAAO,WAAW,SAAS,MAAM,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK;QAC7E,IAAI,iBAAiB,OAAO,WAAW,SAAS,MAAM,CAAC,CAAA,IAAK,EAAE,MAAM,KAAK;QACzE,IAAI,qBAAqB,SAAS,oBAAoB;YACpD,WAAW,SAAS,MAAM,CAAC,CAAA,IAAK,EAAE,UAAU,EAAE,KAAK,CAAA,IAAK,EAAE,UAAU,KAAK;QAC3E;QACA,IAAI,YAAY,QAAQ;YACtB,WAAW,SAAS,MAAM,CAAC,CAAA;gBACzB,IAAI,CAAC,EAAE,QAAQ,EAAE,OAAO;gBACxB,MAAM,IAAI,IAAI,KAAK,EAAE,QAAQ;gBAC7B,OAAO,CAAC,CAAC,YAAY,KAAK,QAAQ,KAAK,CAAC,CAAC,UAAU,KAAK,MAAM;YAChE;QACF;QAEA,IAAI,WAAW,GAAG,EAAE;YAClB,SAAS,IAAI,CAAC,CAAC,GAAG;gBAChB,IAAI,OAAO,WAAW,GAAG,CAAC,QAAQ,CAAC,OAAO,WAAW,GAAG,CAAC,KAAK,CAAC,KAAK,MAAM,CAAC,CAAC,GAAG,IAAM,GAAG,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC,WAAW,GAAG,CAAC;gBACnH,IAAI,OAAO,WAAW,GAAG,CAAC,QAAQ,CAAC,OAAO,WAAW,GAAG,CAAC,KAAK,CAAC,KAAK,MAAM,CAAC,CAAC,GAAG,IAAM,GAAG,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC,WAAW,GAAG,CAAC;gBACnH,IAAI,OAAO,SAAS,UAAU,OAAO,KAAK,WAAW;gBACrD,IAAI,OAAO,SAAS,UAAU,OAAO,KAAK,WAAW;gBACrD,OAAO,CAAC,OAAO,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,SAAS,KAAK,QAAQ,IAAI,CAAC,CAAC;YAC1E;QACF;QAEA,OAAO;IACT,GAAG;QAAC;QAAO;QAAa;QAAgB;QAAc;QAAkB;QAAU;QAAQ;QAAY;KAAmB;IAEzH,MAAM,qBAAqB;QACzB,eAAe;QACf,kBAAkB;QAClB,gBAAgB;QAChB,oBAAoB;QACpB,YAAY;QACZ,UAAU;QACV,sBAAsB;QACtB,oBAAoB;QACpB,wBAAwB;QACxB,gBAAgB;QAChB,cAAc;QACd,cAAc;YAAE,KAAK;YAAI,WAAW;QAAM;QAC1C,eAAe;IACjB;IAEA,MAAM,qBAAqB;QACzB,kBAAkB;QAClB,gBAAgB;QAChB,oBAAoB;QACpB,YAAY;QACZ,UAAU;QACV,oBAAoB;QACpB,eAAe;IACjB;IAEA,MAAM,aAAa,KAAK,GAAG,CAAC,GAAG,KAAK,IAAI,CAAC,cAAc,MAAM,GAAG;IAChE,MAAM,iBAAiB,cAAc,KAAK,CAAC,CAAC,cAAc,CAAC,IAAI,cAAc,cAAc;IAE3F,MAAM,cAAc,CAAC;QACnB,IAAI,CAAC,MAAM,OAAO;QAClB,MAAM,QAAQ,KAAK,KAAK,CAAC;QACzB,OAAO,MAAM,MAAM,GAAG,IAAI,GAAG,KAAK,CAAC,EAAE,CAAC,EAAE,GAAG,KAAK,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,WAAW,KAAK,KAAK,KAAK,CAAC,GAAG,GAAG,WAAW;IACvG;IAEA,MAAM,gBAAgB,CAAC,QAAU,OAAO,SAAS,KAAK,GAAG,MAAM,KAAK,CAAC,GAAG,IAAI,GAAG,CAAC,GAAG,SAAS;IAE5F,qBACE,8OAAC,mIAAA,CAAA,kBAAe;kBACd,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,sMAAA,CAAA,SAAM;4CAAC,WAAU;;;;;;sDAClB,8OAAC,iIAAA,CAAA,QAAK;4CACJ,aAAY;4CACZ,OAAO;4CACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;4CAC9C,WAAU;;;;;;;;;;;;;;;;;4BAKf,mCACC,8OAAC,kIAAA,CAAA,SAAM;gCAAC,OAAO;gCAAU,eAAe;;kDACtC,8OAAC,kIAAA,CAAA,gBAAa;wCAAC,WAAU;kDACvB,cAAA,8OAAC,kIAAA,CAAA,cAAW;;;;;;;;;;kDAEd,8OAAC,kIAAA,CAAA,gBAAa;;0DACZ,8OAAC,kIAAA,CAAA,aAAU;gDAAC,OAAM;0DAAK;;;;;;0DACvB,8OAAC,kIAAA,CAAA,aAAU;gDAAC,OAAM;0DAAM;;;;;;;;;;;;;;;;;;0CAK9B,8OAAC,kIAAA,CAAA,SAAM;gCAAC,SAAQ;gCAAU,SAAS,IAAM,oBAAoB;;kDAC3D,8OAAC,sMAAA,CAAA,SAAM;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;0CAErC,8OAAC,kIAAA,CAAA,SAAM;gCAAC,SAAQ;gCAAU,SAAS;;kDACjC,8OAAC,4LAAA,CAAA,IAAC;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;4BAG/B,iCACC;;kDACE,8OAAC,kIAAA,CAAA,SAAM;wCAAC,SAAQ;wCAAU,SAAS,IAAM,SAAS,CAAA,GAAA,sKAAA,CAAA,sBAAmB,AAAD,EAAE;gDAAE;4CAAU;;0DAChF,8OAAC,0MAAA,CAAA,WAAQ;gDAAC,WAAU;;;;;;4CAAiB;;;;;;;kDAEvC,8OAAC,kIAAA,CAAA,SAAM;wCAAC,SAAQ;wCAAU,SAAS,IAAM,uBAAuB;;0DAC9D,8OAAC,kMAAA,CAAA,OAAI;gDAAC,WAAU;;;;;;4CAAiB;;;;;;;;;;;;;;;kCAMzC,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,iIAAA,CAAA,QAAK;;8CACJ,8OAAC,iIAAA,CAAA,cAAW;8CACV,cAAA,8OAAC,iIAAA,CAAA,WAAQ;wCAAC,WAAU;;0DAClB,8OAAC,iIAAA,CAAA,YAAS;gDAAC,WAAU;0DAAO;;;;;;0DAC5B,8OAAC,iIAAA,CAAA,YAAS;gDAAC,SAAS,IAAM,WAAW;gDAAU,WAAU;0DAAiB;;;;;;0DAC1E,8OAAC,iIAAA,CAAA,YAAS;0DAAC;;;;;;0DACX,8OAAC,iIAAA,CAAA,YAAS;gDAAC,SAAS,IAAM,WAAW;gDAAa,WAAU;0DAAiB;;;;;;0DAC7E,8OAAC,iIAAA,CAAA,YAAS;gDAAC,SAAS,IAAM,WAAW;gDAAa,WAAU;0DAAiB;;;;;;0DAC7E,8OAAC,iIAAA,CAAA,YAAS;gDAAC,SAAS,IAAM,WAAW;gDAAW,WAAU;0DAAiB;;;;;;0DAC3E,8OAAC,iIAAA,CAAA,YAAS;gDAAC,WAAU;0DAAO;;;;;;;;;;;;;;;;;8CAGhC,8OAAC,iIAAA,CAAA,YAAS;8CACP,2BACC,8OAAC,iIAAA,CAAA,WAAQ;kDAAC,cAAA,8OAAC,iIAAA,CAAA,YAAS;4CAAC,SAAS;4CAAG,WAAU;sDAAoB;;;;;;;;;;+CAC7D,eAAe,MAAM,KAAK,kBAC5B,8OAAC,iIAAA,CAAA,WAAQ;kDAAC,cAAA,8OAAC,iIAAA,CAAA,YAAS;4CAAC,SAAS;4CAAG,WAAU;sDAAkC;;;;;;;;;;+CAE7E,eAAe,GAAG,CAAC,CAAC,MAAM,oBACxB,8OAAC,iIAAA,CAAA,WAAQ;4CAAgB,WAAU;4CAAkC,SAAS,IAAM,OAAO,IAAI,CAAC,CAAC,gBAAgB,EAAE,KAAK,OAAO,EAAE;;8DAC/H,8OAAC,iIAAA,CAAA,YAAS;8DAAE,CAAC,cAAc,CAAC,IAAI,eAAe,MAAM;;;;;;8DACrD,8OAAC,iIAAA,CAAA,YAAS;oDAAC,WAAU;8DAAe,cAAc,KAAK,KAAK;;;;;;8DAE5D,8OAAC,iIAAA,CAAA,YAAS;8DACP,KAAK,UAAU,EAAE,SAAS,kBACzB,8OAAC;wDAAI,WAAU;;4DACZ,KAAK,UAAU,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,kBAChC,8OAAC,mIAAA,CAAA,UAAO;;sFACN,8OAAC,mIAAA,CAAA,iBAAc;4EAAC,OAAO;sFACrB,cAAA,8OAAC,kIAAA,CAAA,SAAM;gFAAC,WAAU;0FAChB,cAAA,8OAAC,kIAAA,CAAA,iBAAc;oFAAC,WAAU;8FACvB,YAAY,EAAE,UAAU;;;;;;;;;;;;;;;;sFAI/B,8OAAC,mIAAA,CAAA,iBAAc;sFAAE,EAAE,UAAU;;;;;;;mEARjB,EAAE,QAAQ,IAAI,EAAE,GAAG;;;;;4DAWlC,KAAK,UAAU,CAAC,MAAM,GAAG,mBACxB,8OAAC;gEAAI,WAAU;;oEAA8F;oEACzG,KAAK,UAAU,CAAC,MAAM,GAAG;;;;;;;;;;;;+DAI/B;;;;;;8DAGN,8OAAC,iIAAA,CAAA,YAAS;8DACR,cAAA,8OAAC;wDAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAChB,kDACA,KAAK,QAAQ,KAAK,SAAS,+BAC3B,KAAK,QAAQ,KAAK,YAAY,iCAC9B,KAAK,QAAQ,KAAK,UAAU;kEAE3B,KAAK,QAAQ;;;;;;;;;;;8DAIlB,8OAAC,iIAAA,CAAA,YAAS;oDAAC,WAAU;8DAClB,CAAA,GAAA,0HAAA,CAAA,oBAAiB,AAAD,EAAE,KAAK,QAAQ,KAAK;;;;;;8DAGvC,8OAAC,iIAAA,CAAA,YAAS;8DACR,cAAA,8OAAC;wDAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAChB,kDACA,KAAK,MAAM,KAAK,aAAa,iCAC7B,KAAK,MAAM,KAAK,iBAAiB,6BACjC,KAAK,MAAM,KAAK,eAAe;kEAE9B,KAAK,MAAM;;;;;;;;;;;8DAIhB,8OAAC,iIAAA,CAAA,YAAS;oDAAC,SAAS,CAAC,IAAM,EAAE,eAAe;8DAC1C,cAAA,8OAAC,4IAAA,CAAA,eAAY;;0EACX,8OAAC,4IAAA,CAAA,sBAAmB;gEAAC,OAAO;0EAC1B,cAAA,8OAAC,kIAAA,CAAA,SAAM;oEAAC,SAAQ;oEAAQ,MAAK;8EAAO,cAAA,8OAAC,0NAAA,CAAA,eAAY;wEAAC,WAAU;;;;;;;;;;;;;;;;0EAE9D,8OAAC,4IAAA,CAAA,sBAAmB;gEAAC,OAAM;;kFACzB,8OAAC,4IAAA,CAAA,mBAAgB;wEAAC,SAAS,IAAM,OAAO,IAAI,CAAC,CAAC,gBAAgB,EAAE,KAAK,OAAO,EAAE;;0FAC5E,8OAAC,gMAAA,CAAA,MAAG;gFAAC,WAAU;;;;;;4EAAiB;;;;;;;oEAEjC,mBAAmB,aAAa,uBAC/B;;0FACE,8OAAC,4IAAA,CAAA,mBAAgB;gFAAC,SAAS;oFAAQ,iBAAiB,KAAK,OAAO;oFAAG,iBAAiB;gFAAO;;kGACzF,8OAAC,2MAAA,CAAA,OAAI;wFAAC,WAAU;;;;;;oFAAiB;;;;;;;0FAEnC,8OAAC,4IAAA,CAAA,mBAAgB;gFAAC,SAAS;oFAAQ,kBAAkB,KAAK,OAAO;oFAAG,mBAAmB;gFAAO;gFAAG,WAAU;;kGACzG,8OAAC,0MAAA,CAAA,SAAM;wFAAC,WAAU;;;;;;oFAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;2CArElC,KAAK,GAAG;;;;;;;;;;;;;;;;;;;;;oBAmFhC,aAAa,mBACZ,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,kIAAA,CAAA,SAAM;gCAAC,SAAQ;gCAAU,MAAK;gCAAK,UAAU,gBAAgB;gCAAG,SAAS,IAAM,eAAe,CAAA,IAAK,IAAI;0CAAI;;;;;;4BAC3G,MAAM,IAAI,CAAC;gCAAE,QAAQ,KAAK,GAAG,CAAC,GAAG;4BAAY,GAAG,CAAC,GAAG;gCACnD,MAAM,OAAO,IAAI;gCACjB,qBACE,8OAAC,kIAAA,CAAA,SAAM;oCAAY,SAAS,gBAAgB,OAAO,YAAY;oCAAW,MAAK;oCAAK,SAAS,IAAM,eAAe;8CAC/G;mCADU;;;;;4BAIjB;0CACA,8OAAC,kIAAA,CAAA,SAAM;gCAAC,SAAQ;gCAAU,MAAK;gCAAK,UAAU,gBAAgB;gCAAY,SAAS,IAAM,eAAe,CAAA,IAAK,IAAI;0CAAI;;;;;;;;;;;;kCAIzH,8OAAC,kIAAA,CAAA,SAAM;wBAAC,MAAM;wBAAiB,cAAc;kCAC3C,cAAA,8OAAC,kIAAA,CAAA,gBAAa;;8CACZ,8OAAC,kIAAA,CAAA,eAAY;8CACX,cAAA,8OAAC,kIAAA,CAAA,cAAW;wCAAC,WAAU;;0DACrB,8OAAC,oNAAA,CAAA,cAAW;gDAAC,WAAU;;;;;;4CAAyB;;;;;;;;;;;;8CAGpD,8OAAC;8CAAE;;;;;;8CACH,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,kIAAA,CAAA,SAAM;4CAAC,SAAQ;4CAAU,SAAS,IAAM,mBAAmB;sDAAQ;;;;;;sDACpE,8OAAC,kIAAA,CAAA,SAAM;4CAAC,SAAQ;4CAAc,SAAS;sDAAkB;;;;;;;;;;;;;;;;;;;;;;;oBAK9D,iCACC,8OAAC,iLAAA,CAAA,UAAe;wBACd,eAAe;wBACf,WAAW;wBACX,SAAS;wBACT,QAAQ;wBACR,SAAS,IAAM,uBAAuB;;;;;;oBAIzC,iCACC,8OAAC,+KAAA,CAAA,UAAa;wBACZ,QAAQ;wBACR,QAAQ;wBACR,SAAS;4BAAQ,iBAAiB;4BAAQ,iBAAiB;wBAAO;wBAClE,eAAe;;;;;;;;;;;;;;;;;;;;;;AAO7B;uCAEe","debugId":null}},
    {"offset": {"line": 3063, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/issues/components/bug/BugDetailsViewModal.jsx"],"sourcesContent":["\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\"use client\";\r\n\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter } from \"@/components/ui/dialog\";\r\nimport { formatDateTimeIST } from \"@/utils/formatDate\";\r\nimport { useCurrentUser } from \"@/hooks/useCurrentUser\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { resolveBug, clearErrors, getBugById } from \"@/modules/project-management/issues/slices/bugSlice\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Loader2, Bug, Calendar, User, Clock, AlertCircle, FileText, CheckCircle, Clock as ClockIcon, ExternalLinkIcon } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nconst BugDetailsViewModal = ({ isOpen, onOpenChange, bugId }) => {\r\n  const { currentUser } = useCurrentUser();\r\n  const dispatch = useDispatch();\r\n  const router = useRouter();\r\n\r\n  const { bugDetails } = useSelector((state) => state.bugs);\r\n  const loading = useSelector((state) => state.bugs.loading?.bugResolve);\r\n  const error = useSelector((state) => state.bugs.error?.bugResolve);\r\n  const [delayReason, setDelayReason] = useState(bugDetails?.delayReason || \"\");\r\n  const [resolutionNote, setResolutionNote] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (bugId) {\r\n      dispatch(getBugById(bugId));\r\n    }\r\n  }, [dispatch, bugId]);\r\n\r\n\r\n  useEffect(() => {\r\n    if (isOpen && bugDetails) {\r\n      setDelayReason(bugDetails?.delayReason || \"\");\r\n      setResolutionNote(\"\");\r\n    }\r\n\r\n    return () => {\r\n      if (error) {\r\n        dispatch(clearErrors());\r\n      }\r\n    };\r\n  }, [dispatch, isOpen, bugDetails, error]);\r\n\r\n  const handleResolveBug = () => {\r\n    if (!bugDetails) return;\r\n\r\n    if (!resolutionNote.trim()) {\r\n      toast.error(\"Please provide a resolution note.\");\r\n      return;\r\n    }\r\n\r\n    // Convert bug deadline to Date object\r\n    const bugDeadlineDate = new Date(bugDetails.deadline);\r\n    // Get current date and time\r\n    const now = new Date();\r\n    // Check if deadline has passed\r\n    const isPastDeadline = now > bugDeadlineDate;\r\n\r\n    // ISO strings for logging\r\n    const bugDeadlineISO = bugDeadlineDate.toISOString();\r\n    const nowISO = now.toISOString();\r\n\r\n    if (isPastDeadline && !delayReason.trim()) {\r\n      toast.error(\"Please provide a reason for the delay.\");\r\n      return;\r\n    }\r\n    \r\n    const payload = {\r\n      bugId: bugDetails.bug_id,\r\n      resolutionNote,\r\n      ...(isPastDeadline && { delayReason }),\r\n    };\r\n\r\n    dispatch(resolveBug(payload)).then((result) => {\r\n      if (result.error) {\r\n        toast.error(`Failed to resolve bug: ${result.error.message}`);\r\n      } else {\r\n        toast.success(\"Issue resolved successfully!\");\r\n        onOpenChange(false);\r\n      }\r\n    });\r\n  };\r\n\r\n  if (!bugDetails) {\r\n    return null;\r\n  }\r\n\r\n  const isAssignedToCurrentUser = currentUser?.id === bugDetails?.assignedTo;\r\n  const isResolved = (bugDetails?.status || \"\").toLowerCase() === \"resolved\";\r\n  // const isResolved = bugDetails?.status === \"resolved\";\r\n\r\n  // Convert bug deadline to Date object\r\n  const bugDeadlineDate = bugDetails.deadline ? new Date(bugDetails.deadline) : null;\r\n  // Get current date and time\r\n  const now = new Date();\r\n  // Check if deadline has passed\r\n  const isOverdue = bugDeadlineDate && now > bugDeadlineDate;\r\n\r\n  // ISO strings for logging\r\n  if (bugDeadlineDate) {\r\n    const bugDeadlineISO = bugDeadlineDate.toISOString();\r\n    const nowISO = now.toISOString();\r\n  }\r\n\r\n  return (\r\n    <Dialog open={isOpen} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"w-full max-w-full h-[100vh] sm:max-w-4xl sm:max-h-[90vh] md:max-w-5xl bg-white shadow-lg border-gray-200 rounded-lg text-black overflow-y-auto\">\r\n        <DialogHeader className=\"px-4 py-3 sm:px-6 sm:py-4 sticky top-0\">\r\n          <DialogTitle className=\"text-gray-800 text-lg font-bold flex items-center gap-2\">\r\n            <Bug className=\"h-5 w-5\" />\r\n            Issue Details\r\n          </DialogTitle>\r\n        </DialogHeader>\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 py-2 px-4 sm:px-6\">\r\n          {/* Bug ID */}\r\n          <div className=\"flex flex-col\">\r\n            <Label className=\"text-xs font-bold text-gray-800 mb-1 flex items-center gap-1\">\r\n              <FileText className=\"h-3 w-3\" />\r\n              Issue ID\r\n            </Label>\r\n            <p className=\"text-xs text-black p-2\">{bugDetails.bug_id}</p>\r\n          </div>\r\n\r\n          {/* Status */}\r\n          <div className=\"flex flex-col\">\r\n            <Label className=\"text-xs font-bold text-gray-800 mb-1 flex items-center gap-1\">\r\n              <CheckCircle className=\"h-3 w-3\" />\r\n              Status\r\n            </Label>\r\n            <p className=\"text-xs text-black p-2\">{bugDetails.status || \"N/A\"}</p>\r\n          </div>\r\n\r\n          {/* Priority */}\r\n          <div className=\"flex flex-col\">\r\n            <Label className=\"text-xs font-bold text-gray-800 mb-1 flex items-center gap-1\">\r\n              <AlertCircle className=\"h-3 w-3\" />\r\n              Priority\r\n            </Label>\r\n            <p className=\"text-xs text-black p-2\">{bugDetails.priority || \"N/A\"}</p>\r\n          </div>\r\n\r\n          {/* Deadline */}\r\n          {bugDetails.deadline && (\r\n            <div className=\"flex flex-col\">\r\n              <Label className=\"text-xs font-bold text-gray-800 mb-1 flex items-center gap-1\">\r\n                <Calendar className=\"h-3 w-3\" />\r\n                Deadline\r\n              </Label>\r\n              <div className=\"flex items-center gap-2\">\r\n                <p className=\"text-xs text-black p-2\">\r\n                  {formatDateTimeIST(bugDetails.deadline) || \"N/A\"}\r\n                </p>\r\n                {/* Overdue indicator */}\r\n                {isOverdue && bugDetails?.status !== \"Resolved\" && (\r\n                  <span className=\"px-2 py-1 rounded-full bg-red-100 text-red-600 text-xs font-medium flex items-center gap-1\">\r\n                    <AlertCircle className=\"h-3 w-3\" />\r\n                    Overdue\r\n                  </span>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Assigned To */}\r\n          {bugDetails?.assignedToDetails?.memberName && (\r\n            <div className=\"flex flex-col\">\r\n              <Label className=\"text-xs font-bold text-gray-800 mb-1 flex items-center gap-1\">\r\n                <User className=\"h-3 w-3\" />\r\n                Assigned To\r\n              </Label>\r\n              <p className=\"text-xs text-black p-2\">{bugDetails.assignedToDetails.memberName}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Project Id */}\r\n          {bugDetails.projectId && (\r\n            <div className=\"flex flex-col\">\r\n              <Label className=\"text-xs font-bold text-gray-800 mb-1 flex items-center gap-1\">\r\n                <FileText className=\"h-3 w-3\" />\r\n                Project Id\r\n              </Label>\r\n              <p className=\"text-xs text-black p-2\">{bugDetails.projectId}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Created At */}\r\n          {bugDetails.createdAt && (\r\n            <div className=\"flex flex-col\">\r\n              <Label className=\"text-xs font-bold text-gray-800 mb-1 flex items-center gap-1\">\r\n                <ClockIcon className=\"h-3 w-3\" />\r\n                Created At\r\n              </Label>\r\n              <p className=\"text-xs text-black p-2\">{formatDateTimeIST(bugDetails.createdAt)}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Download Attachment */}\r\n          {bugDetails.attachmentLinks && (\r\n            <div className=\"mt-2\">\r\n              <Label className=\"text-xs font-bold text-gray-800 mb-1\">Attachment</Label>\r\n              <a\r\n                href={bugDetails.attachmentLinks}\r\n                download\r\n                className=\"inline-flex items-center gap-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 border border-gray-300 rounded-md text-sm text-gray-800 font-medium transition-colors\"\r\n              >\r\n                <svg\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  className=\"h-4 w-4 text-blue-600\"\r\n                  fill=\"none\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  stroke=\"currentColor\"\r\n                >\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M7 10l5 5m0 0l5-5m-5 5V4\" />\r\n                </svg>\r\n                <span>Download</span>\r\n              </a>\r\n            </div>\r\n          )}\r\n\r\n          {/* Task Ref - Clickable */}\r\n          <div className=\"flex flex-col relative\">\r\n            <Label className=\"text-xs font-bold text-gray-800 mb-1 flex items-center gap-1\">\r\n              <FileText className=\"h-3 w-3\" />\r\n              Reference\r\n            </Label>\r\n            <div className=\"inline-flex items-center gap-2\">\r\n              {/* Task ID chip */}\r\n              <span className=\"px-2 py-0.5 rounded-full bg-blue-500 text-white text-xs\">\r\n                {bugDetails.taskRef}\r\n              </span>\r\n              {/* Redirect icon with tooltip */}\r\n              <span className=\"relative group cursor-pointer text-blue-500\">\r\n                <ExternalLinkIcon className=\"w-4 h-4\" />\r\n                <span className=\"absolute -top-7 left-1/2 transform -translate-x-1/2 px-2 py-1 text-xs bg-gray-800 text-white rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap\">\r\n                  Click to view full task\r\n                </span>\r\n                <span\r\n                  onClick={() => router.push(`/task/${bugDetails.taskRef}`)}\r\n                  className=\"absolute inset-0\"\r\n                />\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Title - Larger Area */}\r\n          <div className=\"sm:col-span-2 lg:col-span-3 flex flex-col\">\r\n            <Label className=\"text-xs font-bold text-gray-800 mb-1 flex items-center gap-1\">\r\n              <FileText className=\"h-3 w-3\" />\r\n              Title\r\n            </Label>\r\n            <p className=\"text-sm text-black p-3\">{bugDetails.title}</p>\r\n          </div>\r\n\r\n          {/* Description - Larger Area */}\r\n          {bugDetails.description && (\r\n            <div className=\"sm:col-span-2 lg:col-span-3 flex flex-col\">\r\n              <Label className=\"text-xs font-bold text-gray-800 mb-1 flex items-center gap-1\">\r\n                <FileText className=\"h-3 w-3\" />\r\n                Description\r\n              </Label>\r\n              <p className=\"text-sm text-black p-3 rounded-md border border-gray-200 whitespace-pre-wrap break-words\">\r\n                {bugDetails.description}\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Delay Reason - View or Input, Larger Area */}\r\n          {(isOverdue && !isResolved && isAssignedToCurrentUser) || bugDetails.delayReason ? (\r\n            <div className=\"sm:col-span-2 lg:col-span-3 flex flex-col\">\r\n              <Label className=\"text-xs font-bold text-gray-800 mb-1 flex items-center gap-1\">\r\n                <Clock className=\"h-3 w-3\" />\r\n                Delay Reason\r\n              </Label>\r\n              {isResolved || bugDetails.delayReason ? (\r\n                <p className=\"text-sm text-black p-3 rounded-md border border-gray-200\">\r\n                  {bugDetails.delayReason || \"N/A\"}\r\n                </p>\r\n              ) : (\r\n                <Textarea\r\n                  className=\"text-sm text-black p-3 rounded-md border border-gray-200 min-h-[4rem] max-h-40 resize-y focus:border-gray-500 focus:ring focus:ring-gray-200\"\r\n                  value={delayReason}\r\n                  onChange={(e) => setDelayReason(e.target.value)}\r\n                  placeholder=\"Enter reason for delay\"\r\n                />\r\n              )}\r\n            </div>\r\n          ) : null}\r\n\r\n          {/* Resolution Note - Input if Resolving, View if Resolved, Larger Area */}\r\n          {(!isResolved && isAssignedToCurrentUser) || bugDetails.resolutionNote ? (\r\n            <div className=\"sm:col-span-2 lg:col-span-3 flex flex-col\">\r\n              <Label className=\"text-xs font-bold text-gray-800 mb-sticky top-0 1 flex items-center gap-1\">\r\n                <CheckCircle className=\"h-3 w-3\" />\r\n                Resolution Note\r\n              </Label>\r\n              {!isResolved && isAssignedToCurrentUser ? (\r\n                <Textarea\r\n                  className=\"text-sm text-black p-3 rounded-md border border-gray-200 min-h-[6rem] max-h-40 resize-y focus:border-gray-500 focus:ring focus:ring-gray-200\"\r\n                  value={resolutionNote}\r\n                  onChange={(e) => setResolutionNote(e.target.value)}\r\n                  placeholder=\"Enter resolution note\"\r\n                />\r\n              ) : (\r\n                <p className=\"text-sm text-black p-3 rounded-md border border-gray-200\">\r\n                  {bugDetails.resolutionNote}\r\n                </p>\r\n              )}\r\n            </div>\r\n          ) : null}\r\n\r\n          {/* Error Message */}\r\n          {error && (\r\n            <div className=\"sm:col-span-2 lg:col-span-3 text-xs text-red-600 font-medium bg-red-50 border border-red-200 rounded p-3\">\r\n              {error}\r\n            </div>\r\n          )}\r\n        </div>\r\n        <DialogFooter className=\"px-4 sm:px-6 py-4 border-t border-gray-200\">\r\n          {!isResolved && isAssignedToCurrentUser && (\r\n            <Button\r\n              onClick={handleResolveBug}\r\n              className=\"bg-blue-700 text-white hover:bg-blue-700 font-semibold\"\r\n              disabled={loading}\r\n            >\r\n              {loading ? (\r\n                <>\r\n                  <Loader2 className=\"h-4 w-4 animate-spin mr-2\" />\r\n                  Resolving...\r\n                </>\r\n              ) : (\r\n                \"Resolve Bug\"\r\n              )}\r\n            </Button>\r\n          )}\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default BugDetailsViewModal;\r\n\r\n\r\n\r\n\r\n\r\n"],"names":[],"mappings":";;;;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAbA;;;;;;;;;;;;;;AAeA,MAAM,sBAAsB,CAAC,EAAE,MAAM,EAAE,YAAY,EAAE,KAAK,EAAE;IAC1D,MAAM,EAAE,WAAW,EAAE,GAAG,CAAA,GAAA,8HAAA,CAAA,iBAAc,AAAD;IACrC,MAAM,WAAW,CAAA,GAAA,yJAAA,CAAA,cAAW,AAAD;IAC3B,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,EAAE,UAAU,EAAE,GAAG,CAAA,GAAA,yJAAA,CAAA,cAAW,AAAD,EAAE,CAAC,QAAU,MAAM,IAAI;IACxD,MAAM,UAAU,CAAA,GAAA,yJAAA,CAAA,cAAW,AAAD,EAAE,CAAC,QAAU,MAAM,IAAI,CAAC,OAAO,EAAE;IAC3D,MAAM,QAAQ,CAAA,GAAA,yJAAA,CAAA,cAAW,AAAD,EAAE,CAAC,QAAU,MAAM,IAAI,CAAC,KAAK,EAAE;IACvD,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,YAAY,eAAe;IAC1E,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAErD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,OAAO;YACT,SAAS,CAAA,GAAA,uKAAA,CAAA,aAAU,AAAD,EAAE;QACtB;IACF,GAAG;QAAC;QAAU;KAAM;IAGpB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,UAAU,YAAY;YACxB,eAAe,YAAY,eAAe;YAC1C,kBAAkB;QACpB;QAEA,OAAO;YACL,IAAI,OAAO;gBACT,SAAS,CAAA,GAAA,uKAAA,CAAA,cAAW,AAAD;YACrB;QACF;IACF,GAAG;QAAC;QAAU;QAAQ;QAAY;KAAM;IAExC,MAAM,mBAAmB;QACvB,IAAI,CAAC,YAAY;QAEjB,IAAI,CAAC,eAAe,IAAI,IAAI;YAC1B,wIAAA,CAAA,QAAK,CAAC,KAAK,CAAC;YACZ;QACF;QAEA,sCAAsC;QACtC,MAAM,kBAAkB,IAAI,KAAK,WAAW,QAAQ;QACpD,4BAA4B;QAC5B,MAAM,MAAM,IAAI;QAChB,+BAA+B;QAC/B,MAAM,iBAAiB,MAAM;QAE7B,0BAA0B;QAC1B,MAAM,iBAAiB,gBAAgB,WAAW;QAClD,MAAM,SAAS,IAAI,WAAW;QAE9B,IAAI,kBAAkB,CAAC,YAAY,IAAI,IAAI;YACzC,wIAAA,CAAA,QAAK,CAAC,KAAK,CAAC;YACZ;QACF;QAEA,MAAM,UAAU;YACd,OAAO,WAAW,MAAM;YACxB;YACA,GAAI,kBAAkB;gBAAE;YAAY,CAAC;QACvC;QAEA,SAAS,CAAA,GAAA,uKAAA,CAAA,aAAU,AAAD,EAAE,UAAU,IAAI,CAAC,CAAC;YAClC,IAAI,OAAO,KAAK,EAAE;gBAChB,wIAAA,CAAA,QAAK,CAAC,KAAK,CAAC,CAAC,uBAAuB,EAAE,OAAO,KAAK,CAAC,OAAO,EAAE;YAC9D,OAAO;gBACL,wIAAA,CAAA,QAAK,CAAC,OAAO,CAAC;gBACd,aAAa;YACf;QACF;IACF;IAEA,IAAI,CAAC,YAAY;QACf,OAAO;IACT;IAEA,MAAM,0BAA0B,aAAa,OAAO,YAAY;IAChE,MAAM,aAAa,CAAC,YAAY,UAAU,EAAE,EAAE,WAAW,OAAO;IAChE,wDAAwD;IAExD,sCAAsC;IACtC,MAAM,kBAAkB,WAAW,QAAQ,GAAG,IAAI,KAAK,WAAW,QAAQ,IAAI;IAC9E,4BAA4B;IAC5B,MAAM,MAAM,IAAI;IAChB,+BAA+B;IAC/B,MAAM,YAAY,mBAAmB,MAAM;IAE3C,0BAA0B;IAC1B,IAAI,iBAAiB;QACnB,MAAM,iBAAiB,gBAAgB,WAAW;QAClD,MAAM,SAAS,IAAI,WAAW;IAChC;IAEA,qBACE,8OAAC,kIAAA,CAAA,SAAM;QAAC,MAAM;QAAQ,cAAc;kBAClC,cAAA,8OAAC,kIAAA,CAAA,gBAAa;YAAC,WAAU;;8BACvB,8OAAC,kIAAA,CAAA,eAAY;oBAAC,WAAU;8BACtB,cAAA,8OAAC,kIAAA,CAAA,cAAW;wBAAC,WAAU;;0CACrB,8OAAC,gMAAA,CAAA,MAAG;gCAAC,WAAU;;;;;;4BAAY;;;;;;;;;;;;8BAI/B,8OAAC;oBAAI,WAAU;;sCAEb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,iIAAA,CAAA,QAAK;oCAAC,WAAU;;sDACf,8OAAC,8MAAA,CAAA,WAAQ;4CAAC,WAAU;;;;;;wCAAY;;;;;;;8CAGlC,8OAAC;oCAAE,WAAU;8CAA0B,WAAW,MAAM;;;;;;;;;;;;sCAI1D,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,iIAAA,CAAA,QAAK;oCAAC,WAAU;;sDACf,8OAAC,2NAAA,CAAA,cAAW;4CAAC,WAAU;;;;;;wCAAY;;;;;;;8CAGrC,8OAAC;oCAAE,WAAU;8CAA0B,WAAW,MAAM,IAAI;;;;;;;;;;;;sCAI9D,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,iIAAA,CAAA,QAAK;oCAAC,WAAU;;sDACf,8OAAC,oNAAA,CAAA,cAAW;4CAAC,WAAU;;;;;;wCAAY;;;;;;;8CAGrC,8OAAC;oCAAE,WAAU;8CAA0B,WAAW,QAAQ,IAAI;;;;;;;;;;;;wBAI/D,WAAW,QAAQ,kBAClB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,iIAAA,CAAA,QAAK;oCAAC,WAAU;;sDACf,8OAAC,0MAAA,CAAA,WAAQ;4CAAC,WAAU;;;;;;wCAAY;;;;;;;8CAGlC,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAE,WAAU;sDACV,CAAA,GAAA,0HAAA,CAAA,oBAAiB,AAAD,EAAE,WAAW,QAAQ,KAAK;;;;;;wCAG5C,aAAa,YAAY,WAAW,4BACnC,8OAAC;4CAAK,WAAU;;8DACd,8OAAC,oNAAA,CAAA,cAAW;oDAAC,WAAU;;;;;;gDAAY;;;;;;;;;;;;;;;;;;;wBAS5C,YAAY,mBAAmB,4BAC9B,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,iIAAA,CAAA,QAAK;oCAAC,WAAU;;sDACf,8OAAC,kMAAA,CAAA,OAAI;4CAAC,WAAU;;;;;;wCAAY;;;;;;;8CAG9B,8OAAC;oCAAE,WAAU;8CAA0B,WAAW,iBAAiB,CAAC,UAAU;;;;;;;;;;;;wBAKjF,WAAW,SAAS,kBACnB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,iIAAA,CAAA,QAAK;oCAAC,WAAU;;sDACf,8OAAC,8MAAA,CAAA,WAAQ;4CAAC,WAAU;;;;;;wCAAY;;;;;;;8CAGlC,8OAAC;oCAAE,WAAU;8CAA0B,WAAW,SAAS;;;;;;;;;;;;wBAK9D,WAAW,SAAS,kBACnB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,iIAAA,CAAA,QAAK;oCAAC,WAAU;;sDACf,8OAAC,oMAAA,CAAA,QAAS;4CAAC,WAAU;;;;;;wCAAY;;;;;;;8CAGnC,8OAAC;oCAAE,WAAU;8CAA0B,CAAA,GAAA,0HAAA,CAAA,oBAAiB,AAAD,EAAE,WAAW,SAAS;;;;;;;;;;;;wBAKhF,WAAW,eAAe,kBACzB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,iIAAA,CAAA,QAAK;oCAAC,WAAU;8CAAuC;;;;;;8CACxD,8OAAC;oCACC,MAAM,WAAW,eAAe;oCAChC,QAAQ;oCACR,WAAU;;sDAEV,8OAAC;4CACC,OAAM;4CACN,WAAU;4CACV,MAAK;4CACL,SAAQ;4CACR,QAAO;sDAEP,cAAA,8OAAC;gDAAK,eAAc;gDAAQ,gBAAe;gDAAQ,aAAa;gDAAG,GAAE;;;;;;;;;;;sDAEvE,8OAAC;sDAAK;;;;;;;;;;;;;;;;;;sCAMZ,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,iIAAA,CAAA,QAAK;oCAAC,WAAU;;sDACf,8OAAC,8MAAA,CAAA,WAAQ;4CAAC,WAAU;;;;;;wCAAY;;;;;;;8CAGlC,8OAAC;oCAAI,WAAU;;sDAEb,8OAAC;4CAAK,WAAU;sDACb,WAAW,OAAO;;;;;;sDAGrB,8OAAC;4CAAK,WAAU;;8DACd,8OAAC,0NAAA,CAAA,mBAAgB;oDAAC,WAAU;;;;;;8DAC5B,8OAAC;oDAAK,WAAU;8DAA8K;;;;;;8DAG9L,8OAAC;oDACC,SAAS,IAAM,OAAO,IAAI,CAAC,CAAC,MAAM,EAAE,WAAW,OAAO,EAAE;oDACxD,WAAU;;;;;;;;;;;;;;;;;;;;;;;;sCAOlB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,iIAAA,CAAA,QAAK;oCAAC,WAAU;;sDACf,8OAAC,8MAAA,CAAA,WAAQ;4CAAC,WAAU;;;;;;wCAAY;;;;;;;8CAGlC,8OAAC;oCAAE,WAAU;8CAA0B,WAAW,KAAK;;;;;;;;;;;;wBAIxD,WAAW,WAAW,kBACrB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,iIAAA,CAAA,QAAK;oCAAC,WAAU;;sDACf,8OAAC,8MAAA,CAAA,WAAQ;4CAAC,WAAU;;;;;;wCAAY;;;;;;;8CAGlC,8OAAC;oCAAE,WAAU;8CACV,WAAW,WAAW;;;;;;;;;;;;wBAM3B,aAAa,CAAC,cAAc,2BAA4B,WAAW,WAAW,iBAC9E,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,iIAAA,CAAA,QAAK;oCAAC,WAAU;;sDACf,8OAAC,oMAAA,CAAA,QAAK;4CAAC,WAAU;;;;;;wCAAY;;;;;;;gCAG9B,cAAc,WAAW,WAAW,iBACnC,8OAAC;oCAAE,WAAU;8CACV,WAAW,WAAW,IAAI;;;;;yDAG7B,8OAAC,oIAAA,CAAA,WAAQ;oCACP,WAAU;oCACV,OAAO;oCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;oCAC9C,aAAY;;;;;;;;;;;mCAIhB;wBAGF,CAAC,cAAc,2BAA4B,WAAW,cAAc,iBACpE,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,iIAAA,CAAA,QAAK;oCAAC,WAAU;;sDACf,8OAAC,2NAAA,CAAA,cAAW;4CAAC,WAAU;;;;;;wCAAY;;;;;;;gCAGpC,CAAC,cAAc,wCACd,8OAAC,oIAAA,CAAA,WAAQ;oCACP,WAAU;oCACV,OAAO;oCACP,UAAU,CAAC,IAAM,kBAAkB,EAAE,MAAM,CAAC,KAAK;oCACjD,aAAY;;;;;yDAGd,8OAAC;oCAAE,WAAU;8CACV,WAAW,cAAc;;;;;;;;;;;mCAI9B;wBAGH,uBACC,8OAAC;4BAAI,WAAU;sCACZ;;;;;;;;;;;;8BAIP,8OAAC,kIAAA,CAAA,eAAY;oBAAC,WAAU;8BACrB,CAAC,cAAc,yCACd,8OAAC,kIAAA,CAAA,SAAM;wBACL,SAAS;wBACT,WAAU;wBACV,UAAU;kCAET,wBACC;;8CACE,8OAAC,iNAAA,CAAA,UAAO;oCAAC,WAAU;;;;;;gCAA8B;;2CAInD;;;;;;;;;;;;;;;;;;;;;;AAQhB;uCAEe","debugId":null}},
    {"offset": {"line": 3829, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/issues/components/bug/BugEditModal.jsx"],"sourcesContent":["\r\n\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogClose,\r\n} from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\r\nimport { Calendar } from \"@/components/ui/calendar\";\r\nimport { Bug, X, Loader, Flag, CalendarIcon, Clock, Info } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { format, parseISO } from \"date-fns\";\r\nimport { getBugById, editBug } from \"@/modules/project-management/issues/slices/bugSlice\";\r\n\r\nconst EditBugModal = ({bugId, isOpen, onOpenChange }) => {\r\n    \r\n\r\n \r\n   \r\n\r\n  const dispatch = useDispatch();\r\n  const { bugDetails, loading } = useSelector((state) => state.bugs);\r\n\r\n  const [bugTitle, setBugTitle] = useState(\"\");\r\n  const [bugDescription, setBugDescription] = useState(\"\");\r\n  const [priority, setPriority] = useState(\"Medium\");\r\n  const [selectedDate, setSelectedDate] = useState(null);\r\n  const [selectedTime, setSelectedTime] = useState(\"\");\r\n  const [attachment, setAttachment] = useState(null);\r\n  const [errors, setErrors] = useState({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  // Fetch bug details when modal opens or bugId changes\r\n  useEffect(() => {\r\n   \r\n    \r\n    if (bugId && isOpen) {\r\n      dispatch(getBugById(bugId));\r\n    }\r\n  }, [bugId, isOpen, dispatch]);\r\n\r\n  \r\n   \r\n  // Auto-fill form when bugDetails are loaded\r\n  useEffect(() => {\r\n    if (bugDetails) {\r\n      setBugTitle(bugDetails.title || \"\");\r\n      setBugDescription(bugDetails.description || \"\");\r\n      setPriority(bugDetails.priority || \"Medium\");\r\n\r\n      if (bugDetails.deadline) {\r\n        const dateObj = parseISO(bugDetails.deadline);\r\n        setSelectedDate(dateObj);\r\n        setSelectedTime(`${String(dateObj.getHours()).padStart(2, \"0\")}:${String(dateObj.getMinutes()).padStart(2, \"0\")}`);\r\n      }\r\n\r\n      // Cannot prefill file input for security reasons\r\n      setAttachment(null);\r\n    }\r\n  }, [bugDetails]);\r\n\r\n  const resetForm = () => {\r\n    setBugTitle(\"\");\r\n    setBugDescription(\"\");\r\n    setPriority(\"Medium\");\r\n    setSelectedDate(null);\r\n    setSelectedTime(\"\");\r\n    setAttachment(null);\r\n    setErrors({});\r\n  };\r\n\r\n  const handleClose = () => {\r\n    resetForm();\r\n    onOpenChange(false);\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n    if (!bugTitle.trim()) newErrors.title = \"Bug title is required.\";\r\n    if (!bugDescription.trim()) newErrors.description = \"Bug description is required.\";\r\n    if (!priority) newErrors.priority = \"Please select a priority.\";\r\n    if (!selectedDate) newErrors.deadline = \"Please select a deadline date.\";\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleEditBug = async () => {\r\n    if (!validateForm()) return;\r\n\r\n    setIsSubmitting(true);\r\n\r\n    const pad = (n) => (n < 10 ? \"0\" + n : n);\r\n\r\n    let combinedDateTime = null;\r\n    if (selectedDate) {\r\n      const dateObj = new Date(selectedDate);\r\n      const [hours, minutes] = selectedTime\r\n        ? selectedTime.split(\":\").map(Number)\r\n        : [23, 59];\r\n      dateObj.setHours(hours, minutes, 0, 0);\r\n      combinedDateTime =\r\n        dateObj.getFullYear() +\r\n        \"-\" +\r\n        pad(dateObj.getMonth() + 1) +\r\n        \"-\" +\r\n        pad(dateObj.getDate()) +\r\n        \"T\" +\r\n        pad(dateObj.getHours()) +\r\n        \":\" +\r\n        pad(dateObj.getMinutes()) +\r\n        \":\" +\r\n        pad(dateObj.getSeconds());\r\n    }\r\n\r\n    const bugData = {\r\n      title: bugTitle.trim(),\r\n      description: bugDescription.trim(),\r\n      priority,\r\n      deadline: combinedDateTime,\r\n      attachment,\r\n    };\r\n\r\n    try {\r\n      await dispatch(editBug({ bugId, bugData })).unwrap();\r\n      \r\n      toast.success(\"Bug updated successfully!\");\r\n      handleClose();\r\n    } catch (err) {\r\n      toast.error(err || \"Failed to update bug.\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const isFormValid =\r\n    bugTitle.trim() && bugDescription.trim() && priority && selectedDate;\r\n  const isDisabled = isSubmitting || !isFormValid || loading.bugDetailsFetch;\r\n\r\n  return (\r\n    <Dialog open={isOpen} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"w-full max-w-full h-[100vh] sm:max-w-6xl sm:max-h-[85vh] bg-white shadow-lg border border-gray-200 rounded-lg p-2\">\r\n        <DialogHeader className=\"bg-gradient-to-r from-blue-50 to-indigo-50 px-4 py-3 border-b border-gray-200 sticky top-0 z-10 h-16 flex items-center\">\r\n          <div className=\"flex justify-between items-center w-full\">\r\n            <DialogTitle className=\"text-base sm:text-lg font-bold text-gray-800 flex items-center\">\r\n              <Bug className=\"mr-2 h-4 w-4 text-blue-500\" /> Edit Bug\r\n            </DialogTitle>\r\n            <DialogClose asChild>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                className=\"text-gray-500 hover:bg-gray-100 rounded-full h-8 w-8\"\r\n                onClick={handleClose}\r\n              >\r\n                <X className=\"h-4 w-4\" />\r\n              </Button>\r\n            </DialogClose>\r\n          </div>\r\n        </DialogHeader>\r\n\r\n        <div className=\"px-4 sm:px-6 overflow-y-auto max-h-[calc(85vh-64px)]\">\r\n          <form\r\n            onSubmit={(e) => {\r\n              e.preventDefault();\r\n              handleEditBug();\r\n            }}\r\n            className=\"space-y-4\"\r\n          >\r\n            {/* Title */}\r\n            <div>\r\n              <label className=\"flex items-center text-sm font-medium mb-2\">\r\n                <Bug className=\"h-4 w-4 text-blue-500 mr-2\" /> Title{\" \"}\r\n                <span className=\"text-red-500 ml-1\">*</span>\r\n              </label>\r\n              <Textarea\r\n                value={bugTitle}\r\n                onChange={(e) => {\r\n                  setBugTitle(e.target.value);\r\n                  setErrors((prev) => ({ ...prev, title: \"\" }));\r\n                }}\r\n                className=\"w-full border rounded-lg p-3 text-sm\"\r\n                placeholder=\"Enter bug title\"\r\n                disabled={isSubmitting}\r\n              />\r\n              {errors.title && (\r\n                <p className=\"text-red-500 text-xs mt-1 flex items-center\">\r\n                  <X className=\"h-3 w-3 mr-1\" />\r\n                  {errors.title}\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Priority / Date / Time */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n              <div>\r\n                <label className=\"flex items-center text-sm font-medium mb-2\">\r\n                  <Flag className=\"h-4 w-4 text-blue-500 mr-2\" /> Priority{\" \"}\r\n                  <span className=\"text-red-500 ml-1\">*</span>\r\n                </label>\r\n                <Select\r\n                  value={priority}\r\n                  onValueChange={setPriority}\r\n                  disabled={isSubmitting}\r\n                >\r\n                  <SelectTrigger className=\"w-full h-10\">\r\n                    <SelectValue placeholder=\"Select priority\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"Low\">Low</SelectItem>\r\n                    <SelectItem value=\"Medium\">Medium</SelectItem>\r\n                    <SelectItem value=\"High\">High</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"flex items-center text-sm font-medium mb-2\">\r\n                  <CalendarIcon className=\"h-4 w-4 text-blue-500 mr-2\" /> Deadline{\" \"}\r\n                  <span className=\"text-red-500 ml-1\">*</span>\r\n                </label>\r\n                <Popover>\r\n                  <PopoverTrigger asChild>\r\n                    <Button variant=\"outline\" className=\"w-full h-10\">\r\n                      {selectedDate\r\n                        ? format(selectedDate, \"MMM dd, yyyy\")\r\n                        : \"Select date\"}\r\n                    </Button>\r\n                  </PopoverTrigger>\r\n                  <PopoverContent>\r\n                    <Calendar\r\n                      mode=\"single\"\r\n                      selected={selectedDate}\r\n                      onSelect={setSelectedDate}\r\n                    />\r\n                  </PopoverContent>\r\n                </Popover>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"flex items-center text-sm font-medium mb-2\">\r\n                  <Clock className=\"h-4 w-4 text-blue-500 mr-2\" /> Time\r\n                </label>\r\n                <Input\r\n                  type=\"time\"\r\n                  value={selectedTime}\r\n                  onChange={(e) => setSelectedTime(e.target.value)}\r\n                  className=\"w-full h-10\"\r\n                  disabled={isSubmitting}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Description */}\r\n            <div>\r\n              <label className=\"flex items-center text-sm font-medium mb-2\">\r\n                <Info className=\"h-4 w-4 text-blue-500 mr-2\" /> Description{\" \"}\r\n                <span className=\"text-red-500 ml-1\">*</span>\r\n              </label>\r\n              <Textarea\r\n                value={bugDescription}\r\n                onChange={(e) => setBugDescription(e.target.value)}\r\n                className=\"w-full h-[40vh] p-3\"\r\n                placeholder=\"Describe the issue...\"\r\n                disabled={isSubmitting}\r\n              />\r\n            </div>\r\n\r\n            {/* Attachment */}\r\n            <div>\r\n              <label className=\"flex items-center text-sm font-medium mb-2\">\r\n                Attachment (optional)\r\n              </label>\r\n              <Input\r\n                type=\"file\"\r\n                accept=\"image/*,application/pdf,.doc,.docx\"\r\n                onChange={(e) => setAttachment(e.target.files[0] || null)}\r\n                disabled={isSubmitting}\r\n              />\r\n              {bugDetails?.attachmentUrl && !attachment && (\r\n                <p className=\"text-xs mt-1\">\r\n                  Current file:{\" \"}\r\n                  <a\r\n                    href={bugDetails.attachmentUrl}\r\n                    target=\"_blank\"\r\n                    className=\"text-blue-600 underline\"\r\n                  >\r\n                    View\r\n                  </a>\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Actions */}\r\n            <div className=\"flex justify-end gap-3 pt-4 border-t mt-4\">\r\n              <DialogClose asChild>\r\n                <Button type=\"button\" variant=\"outline\" disabled={isSubmitting}>\r\n                  Cancel\r\n                </Button>\r\n              </DialogClose>\r\n              <Button\r\n                className=\"bg-blue-700\"\r\n                type=\"submit\"\r\n                disabled={isDisabled}\r\n              >\r\n                {isSubmitting ? (\r\n                  <Loader className=\"animate-spin h-4 w-4 mr-2\" />\r\n                ) : (\r\n                  \"Update Bug\"\r\n                )}\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default EditBugModal;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4477, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/issues/components/bug/BugAssignModal.jsx"],"sourcesContent":["\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// \"use client\";\r\n\r\n// import { useState, useEffect, useMemo } from \"react\";\r\n// import { useDispatch, useSelector } from \"react-redux\";\r\n// import {\r\n//   Dialog,\r\n//   DialogContent,\r\n//   DialogHeader,\r\n//   DialogTitle,\r\n//   DialogClose,\r\n// } from \"@/components/ui/dialog\";\r\n// import {\r\n//   Select,\r\n//   SelectContent,\r\n//   SelectItem,\r\n//   SelectTrigger,\r\n//   SelectValue,\r\n// } from \"@/components/ui/select\";\r\n// import { Button } from \"@/components/ui/button\";\r\n// import { Loader2, Users, User, Calendar, X } from \"lucide-react\";\r\n// import { toast } from \"sonner\";\r\n// import { fetchTeamByProjectId } from \"@/modules/project-management/team/slices/teamSlice\";\r\n// import { assignBug } from \"@/modules/project-management/issues/slices/bugSlice\";\r\n\r\n// const BugAssignModal = ({ isOpen, onOpenChange, bug, bugId, projectId, onAssign }) => {\r\n//   const dispatch = useDispatch();\r\n//   const { teamsByProject: teams, status: teamStatus } = useSelector(\r\n//     (state) => state.team\r\n//   );\r\n\r\n//   const [selectedTeam, setSelectedTeam] = useState(null);\r\n//   const [selectedMember, setSelectedMember] = useState(\"\");\r\n//   const [deadline, setDeadline] = useState(\"\");\r\n//   const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n//   useEffect(() => {\r\n//     if (projectId && isOpen) dispatch(fetchTeamByProjectId(projectId));\r\n//   }, [dispatch, projectId, isOpen]);\r\n\r\n//   useEffect(() => {\r\n//     if (!isOpen) {\r\n//       setSelectedTeam(null);\r\n//       setSelectedMember(\"\");\r\n//       setDeadline(\"\");\r\n//       setIsSubmitting(false);\r\n//     }\r\n//   }, [isOpen]);\r\n\r\n//   const handleTeamSelect = (value) => {\r\n//     const team = teams.find((t) => t.teamId === value);\r\n//     setSelectedTeam(team);\r\n//     setSelectedMember(\"\");\r\n//   };\r\n\r\n//   const handleAssign = async () => {\r\n//     if (!selectedTeam) return toast.error(\"Please select a team\");\r\n//     if (!selectedMember) return toast.error(\"Please select a team member\");\r\n//     if (!deadline) return toast.error(\"Please select a deadline\");\r\n\r\n//     const payload = {\r\n//       assignedTo: selectedMember,\r\n//       deadline,\r\n//     };\r\n\r\n//     setIsSubmitting(true);\r\n//     try {\r\n//       await dispatch(assignBug({ bug_id: bugId, payload })).unwrap();\r\n\r\n//       toast.success(\"Bug assigned successfully!\");\r\n//       if (onAssign) onAssign({ ...payload, bug_id: bugId });\r\n//       onOpenChange(false);\r\n//     } catch (error) {\r\n//       toast.error(error || \"Failed to assign bug\");\r\n//     } finally {\r\n//       setIsSubmitting(false);\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <Dialog open={isOpen} onOpenChange={onOpenChange}>\r\n//       <DialogContent className=\"max-w-[95vw] sm:max-w-md bg-white shadow-lg border border-gray-200 rounded-lg p-6\">\r\n//         <DialogHeader>\r\n//           <DialogTitle className=\"text-lg font-semibold text-gray-900 flex items-center justify-between\">\r\n//             <span>\r\n//               Assign Bug:{\" \"}\r\n//               {bug?.title\r\n//                 ? bug.title.slice(0, 30) + (bug.title.length > 30 ? \"...\" : \"\")\r\n//                 : \"N/A\"}\r\n//             </span>\r\n//             <DialogClose asChild>\r\n//               <Button\r\n//                 variant=\"ghost\"\r\n//                 size=\"icon\"\r\n//                 className=\"text-gray-500 hover:bg-gray-100 rounded-full h-7 w-7\"\r\n//               >\r\n//                 <X className=\"h-4 w-4\" />\r\n//               </Button>\r\n//             </DialogClose>\r\n//           </DialogTitle>\r\n//         </DialogHeader>\r\n\r\n//         {/* FORM FIELDS */}\r\n//         <div className=\"space-y-4 mt-4\">\r\n//           {/* Select Team */}\r\n//           <div>\r\n//             <label className=\"text-sm font-medium text-gray-700 flex items-center mb-2\">\r\n//               <Users className=\"h-4 w-4 text-blue-500 mr-2\" />\r\n//               Select Team\r\n//             </label>\r\n//             <Select\r\n//               value={selectedTeam?.teamId || \"\"}\r\n//               onValueChange={handleTeamSelect}\r\n//               disabled={teamStatus === \"loading\"}\r\n//             >\r\n//               <SelectTrigger className=\"w-full border border-gray-300 rounded-lg text-sm h-10\">\r\n//                 <SelectValue\r\n//                   placeholder={\r\n//                     teamStatus === \"loading\" ? \"Loading teams...\" : \"Select team\"\r\n//                   }\r\n//                 />\r\n//               </SelectTrigger>\r\n//               <SelectContent className=\"bg-white shadow-lg border border-gray-200 rounded-lg text-black max-h-48\">\r\n//                 {teams.map((team) => (\r\n//                   <SelectItem key={team.teamId} value={team.teamId}>\r\n//                     {team.teamName}\r\n//                   </SelectItem>\r\n//                 ))}\r\n//               </SelectContent>\r\n//             </Select>\r\n\r\n//             {/* Inline Team Members Display */}\r\n//             {selectedTeam && (\r\n//               <div className=\"mt-3 pl-2 border-l-2 border-blue-200\">\r\n//                 <p className=\"text-sm font-medium text-gray-700 mb-2 flex items-center\">\r\n//                   <User className=\"h-4 w-4 text-blue-500 mr-2\" />\r\n//                   Team Members\r\n//                 </p>\r\n//                 {selectedTeam.teamMembers?.length > 0 ? (\r\n//                   <div className=\"flex flex-wrap gap-2\">\r\n//                     {selectedTeam.teamMembers.map((member) => (\r\n//                       <button\r\n//                         key={member.memberId}\r\n//                         onClick={() => setSelectedMember(member.memberId)}\r\n//                         className={`px-3 py-1.5 rounded-lg text-sm border transition ${\r\n//                           selectedMember === member.memberId\r\n//                             ? \"bg-blue-600 text-white border-blue-600\"\r\n//                             : \"border-gray-300 hover:bg-gray-100\"\r\n//                         }`}\r\n//                       >\r\n//                         {member.memberName}\r\n//                       </button>\r\n//                     ))}\r\n//                   </div>\r\n//                 ) : (\r\n//                   <p className=\"text-sm text-gray-500\">No members in this team.</p>\r\n//                 )}\r\n//               </div>\r\n//             )}\r\n//           </div>\r\n\r\n//           {/* Deadline (Date & Time) */}\r\n//           <div>\r\n//             <label className=\"text-sm font-medium text-gray-700 flex items-center mb-2\">\r\n//               <Calendar className=\"h-4 w-4 text-blue-500 mr-2\" />\r\n//               Deadline (Date & Time)\r\n//             </label>\r\n//             <input\r\n//               type=\"datetime-local\"\r\n//               value={deadline}\r\n//               onChange={(e) => setDeadline(e.target.value)}\r\n//               className=\"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n//             />\r\n//           </div>\r\n//         </div>\r\n\r\n//         {/* Action Buttons */}\r\n//         <div className=\"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200\">\r\n//           <DialogClose asChild>\r\n//             <Button\r\n//               variant=\"outline\"\r\n//               className=\"text-gray-700 border border-gray-300 hover:bg-gray-50\"\r\n//             >\r\n//               Cancel\r\n//             </Button>\r\n//           </DialogClose>\r\n//           <Button\r\n//             onClick={handleAssign}\r\n//             disabled={isSubmitting || teamStatus === \"loading\"}\r\n//             className=\"bg-blue-600 hover:bg-blue-700 text-white flex items-center gap-2\"\r\n//           >\r\n//             {isSubmitting ? (\r\n//               <>\r\n//                 <Loader2 className=\"h-4 w-4 animate-spin\" /> Assigning...\r\n//               </>\r\n//             ) : (\r\n//               \"Assign Bug\"\r\n//             )}\r\n//           </Button>\r\n//         </div>\r\n//       </DialogContent>\r\n//     </Dialog>\r\n//   );\r\n// };\r\n\r\n// export default BugAssignModal;\r\n\r\n\r\n\r\n\r\n\r\n\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogClose,\r\n} from \"@/components/ui/dialog\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Loader2, Users, User, Calendar, X } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\n\r\nimport { fetchTeamByProjectId } from \"@/modules/project-management/team/slices/teamSlice\";\r\nimport { assignBug, fetchBugByProjectId } from \"@/modules/project-management/issues/slices/bugSlice\";\r\n\r\nconst BugAssignModal = ({ isOpen, onOpenChange, bug, bugId, projectId, onAssign }) => {\r\n  const dispatch = useDispatch();\r\n  const { teamsByProject: teams, status: teamStatus } = useSelector(\r\n    (state) => state.team\r\n  );\r\n\r\n  const [selectedTeam, setSelectedTeam] = useState(null);\r\n  const [selectedMember, setSelectedMember] = useState(\"\");\r\n  const [deadline, setDeadline] = useState(\"\");\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  // Fetch team when modal opens\r\n  useEffect(() => {\r\n    if (projectId && isOpen) dispatch(fetchTeamByProjectId(projectId));\r\n  }, [dispatch, projectId, isOpen]);\r\n\r\n  // Reset state on modal close\r\n  useEffect(() => {\r\n    if (!isOpen) {\r\n      setSelectedTeam(null);\r\n      setSelectedMember(\"\");\r\n      setDeadline(\"\");\r\n      setIsSubmitting(false);\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const handleTeamSelect = (value) => {\r\n    const team = teams.find((t) => t.teamId === value);\r\n    setSelectedTeam(team);\r\n    setSelectedMember(\"\");\r\n  };\r\n\r\n  const handleAssign = async () => {\r\n    if (!selectedTeam) return toast.error(\"Please select a team\");\r\n    if (!selectedMember) return toast.error(\"Please select a team member\");\r\n    if (!deadline) return toast.error(\"Please select a deadline\");\r\n\r\n    const payload = {\r\n      assignedTo: selectedMember,\r\n      deadline,\r\n    };\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      await dispatch(assignBug({ bug_id: bugId, payload })).unwrap();\r\n\r\n      // ✅ Refresh bug list after success\r\n      await dispatch(fetchBugByProjectId(projectId));\r\n\r\n      toast.success(\"Bug assigned successfully!\");\r\n      if (onAssign) onAssign({ ...payload, bug_id: bugId });\r\n\r\n      onOpenChange(false);\r\n    } catch (error) {\r\n      toast.error(error || \"Failed to assign bug\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={isOpen} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-[95vw] sm:max-w-md bg-white shadow-lg border border-gray-200 rounded-lg p-6\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"text-lg font-semibold text-gray-900 flex items-center justify-between\">\r\n            <span>\r\n              Assign Bug:{\" \"}\r\n              {bug?.title\r\n                ? bug.title.slice(0, 30) + (bug.title.length > 30 ? \"...\" : \"\")\r\n                : \"N/A\"}\r\n            </span>\r\n            <DialogClose asChild>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                className=\"text-gray-500 hover:bg-gray-100 rounded-full h-7 w-7\"\r\n              >\r\n                <X className=\"h-4 w-4\" />\r\n              </Button>\r\n            </DialogClose>\r\n          </DialogTitle>\r\n        </DialogHeader>\r\n\r\n        {/* FORM FIELDS */}\r\n        <div className=\"space-y-4 mt-4\">\r\n          {/* Select Team */}\r\n          <div>\r\n            <label className=\"text-sm font-medium text-gray-700 flex items-center mb-2\">\r\n              <Users className=\"h-4 w-4 text-blue-500 mr-2\" />\r\n              Select Team\r\n            </label>\r\n            <Select\r\n              value={selectedTeam?.teamId || \"\"}\r\n              onValueChange={handleTeamSelect}\r\n              disabled={teamStatus === \"loading\"}\r\n            >\r\n              <SelectTrigger className=\"w-full border border-gray-300 rounded-lg text-sm h-10\">\r\n                <SelectValue\r\n                  placeholder={\r\n                    teamStatus === \"loading\" ? \"Loading teams...\" : \"Select team\"\r\n                  }\r\n                />\r\n              </SelectTrigger>\r\n              <SelectContent className=\"bg-white shadow-lg border border-gray-200 rounded-lg text-black max-h-48\">\r\n                {teams.map((team) => (\r\n                  <SelectItem key={team.teamId} value={team.teamId}>\r\n                    {team.teamName}\r\n                  </SelectItem>\r\n                ))}\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n          {/* Select Team Member (Dropdown) */}\r\n          {selectedTeam && (\r\n            <div>\r\n              <label className=\"text-sm font-medium text-gray-700 flex items-center mb-2\">\r\n                <User className=\"h-4 w-4 text-blue-500 mr-2\" />\r\n                Select Team Member\r\n              </label>\r\n              {selectedTeam.teamMembers?.length > 0 ? (\r\n                <Select\r\n                  value={selectedMember || \"\"}\r\n                  onValueChange={setSelectedMember}\r\n                >\r\n                  <SelectTrigger className=\"w-full border border-gray-300 rounded-lg text-sm h-10\">\r\n                    <SelectValue placeholder=\"Select member\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent className=\"bg-white shadow-lg border border-gray-200 rounded-lg text-black max-h-48\">\r\n                    {selectedTeam.teamMembers.map((member) => (\r\n                      <SelectItem key={member.memberId} value={member.memberId}>\r\n                        {member.memberName}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              ) : (\r\n                <p className=\"text-sm text-gray-500\">No members in this team.</p>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Deadline */}\r\n          <div>\r\n            <label className=\"text-sm font-medium text-gray-700 flex items-center mb-2\">\r\n              <Calendar className=\"h-4 w-4 text-blue-500 mr-2\" />\r\n              Deadline (Date & Time)\r\n            </label>\r\n            <input\r\n              type=\"datetime-local\"\r\n              value={deadline}\r\n              onChange={(e) => setDeadline(e.target.value)}\r\n              className=\"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200\">\r\n          <DialogClose asChild>\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"text-gray-700 border border-gray-300 hover:bg-gray-50\"\r\n            >\r\n              Cancel\r\n            </Button>\r\n          </DialogClose>\r\n          <Button\r\n            onClick={handleAssign}\r\n            disabled={isSubmitting || teamStatus === \"loading\"}\r\n            className=\"bg-blue-600 hover:bg-blue-700 text-white flex items-center gap-2\"\r\n          >\r\n            {isSubmitting ? (\r\n              <>\r\n                <Loader2 className=\"h-4 w-4 animate-spin\" /> Assigning...\r\n              </>\r\n            ) : (\r\n              \"Assign Bug\"\r\n            )}\r\n          </Button>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default BugAssignModal;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5053, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/issues/components/bug/ReportIssueForm.jsx"],"sourcesContent":["\r\n\r\n\r\n\r\n\r\n\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogClose,\r\n} from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { toast } from \"sonner\";\r\nimport { createIssue } from \"@/modules/project-management/issues/slices/issuesSlice\";\r\nimport { FileText, Loader2, Paperclip, X, File, Image as ImageIcon } from \"lucide-react\";\r\n\r\nconst ReportIssueForm = ({ onClose, projectData, onIssueReported, isOpen = true }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const [title, setTitle] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [priority, setPriority] = useState(\"Medium\");\r\n  const [attachment, setAttachment] = useState(null);\r\n  const [previewUrl, setPreviewUrl] = useState(null);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n\r\n  const resetForm = () => {\r\n    setTitle(\"\");\r\n    setDescription(\"\");\r\n    setPriority(\"Medium\");\r\n    setAttachment(null);\r\n    setPreviewUrl(null);\r\n    setErrors({});\r\n  };\r\n\r\n  const handleClose = () => {\r\n    resetForm();\r\n    onClose();\r\n  };\r\n\r\n  // ✅ Validate form\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n    if (!title.trim()) newErrors.title = \"Title is required.\";\r\n    if (!description.trim()) newErrors.description = \"Description is required.\";\r\n    if (!projectData?.projectId) newErrors.projectId = \"Project ID is required.\";\r\n    if (!projectData?.projectName) newErrors.projectName = \"Project Name is required.\";\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  // 📎 Handle file select and preview\r\n  const handleFileSelect = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n\r\n    const allowed = [\r\n      \"application/pdf\",\r\n      \"image/jpeg\",\r\n      \"image/png\",\r\n      \"application/msword\",\r\n      \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\r\n    ];\r\n\r\n    if (!allowed.includes(file.type)) {\r\n      toast.error(\"Only PDF, JPG, PNG, and DOC/DOCX files are allowed.\");\r\n      return;\r\n    }\r\n\r\n    setAttachment(file);\r\n\r\n    // Show preview if image\r\n    if (file.type.startsWith(\"image/\")) {\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => setPreviewUrl(reader.result);\r\n      reader.readAsDataURL(file);\r\n    } else {\r\n      setPreviewUrl(null);\r\n    }\r\n  };\r\n\r\n  // 🚀 Submit\r\n  const handleSubmit = async () => {\r\n    if (!validateForm()) return;\r\n    setIsSubmitting(true);\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"projectId\", projectData.projectId);\r\n    formData.append(\"projectName\", projectData.projectName);\r\n    formData.append(\"title\", title.trim());\r\n    formData.append(\"description\", description.trim());\r\n    formData.append(\"priority\", priority);\r\n\r\n    if (attachment) {\r\n      formData.append(\"attachment\", attachment);\r\n    }\r\n\r\n    try {\r\n      await dispatch(createIssue(formData)).unwrap();\r\n      toast.success(\"Issue reported successfully!\");\r\n      resetForm();\r\n      onIssueReported?.();\r\n      onClose();\r\n    } catch (err) {\r\n      toast.error(err?.message || \"Failed to report issue.\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const isDisabled = isSubmitting || !title.trim() || !description.trim();\r\n\r\n  return (\r\n    <Dialog open={isOpen} onOpenChange={(open) => !open && handleClose()}>\r\n      <DialogContent className=\"max-w-3xl bg-white border border-gray-200 rounded-xl shadow-lg p-4 sm:p-6\">\r\n        <DialogHeader className=\"border-b pb-3\">\r\n          <DialogTitle className=\"text-lg font-semibold text-gray-800 flex items-center\">\r\n            <FileText className=\"mr-2 h-5 w-5 text-blue-500\" /> Report Issue\r\n          </DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <form\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n            handleSubmit();\r\n          }}\r\n          className=\"space-y-5 mt-4\"\r\n        >\r\n          {/* Title */}\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-2 block\">\r\n              Title <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <Input\r\n              value={title}\r\n              onChange={(e) => setTitle(e.target.value)}\r\n              placeholder=\"Enter issue title\"\r\n              disabled={isSubmitting}\r\n            />\r\n          </div>\r\n\r\n          {/* Priority */}\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-2 block\">\r\n              Priority <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <Select value={priority} onValueChange={setPriority} disabled={isSubmitting}>\r\n              <SelectTrigger className=\"w-full\">\r\n                <SelectValue placeholder=\"Select priority\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"Low\">Low</SelectItem>\r\n                <SelectItem value=\"Medium\">Medium</SelectItem>\r\n                <SelectItem value=\"High\">High</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n          {/* Description */}\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-2 block\">\r\n              Description <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <Textarea\r\n              value={description}\r\n              onChange={(e) => setDescription(e.target.value)}\r\n              placeholder=\"Describe the issue in detail...\"\r\n              className=\"min-h-[150px]\"\r\n              disabled={isSubmitting}\r\n            />\r\n          </div>\r\n\r\n          {/* Attachment + Preview */}\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-2 block\">\r\n              Attachment (PDF, JPG, PNG, DOCX)\r\n            </label>\r\n            <Input\r\n              type=\"file\"\r\n              accept=\".pdf,image/*,.doc,.docx\"\r\n              onChange={handleFileSelect}\r\n              disabled={isSubmitting}\r\n            />\r\n\r\n            {attachment && (\r\n              <div className=\"mt-3 p-3 border rounded-lg bg-gray-50 flex items-start justify-between\">\r\n                <div className=\"flex items-start gap-3\">\r\n                  {previewUrl ? (\r\n                    <img\r\n                      src={previewUrl}\r\n                      alt=\"Preview\"\r\n                      className=\"w-16 h-16 object-cover rounded-md border\"\r\n                    />\r\n                  ) : (\r\n                    <div className=\"flex items-center justify-center w-16 h-16 border rounded-md bg-white\">\r\n                      {attachment.type === \"application/pdf\" ? (\r\n                        <FileText className=\"text-red-500\" size={24} />\r\n                      ) : (\r\n                        <File className=\"text-gray-400\" size={24} />\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-gray-700\">{attachment.name}</p>\r\n                    <p className=\"text-xs text-gray-500\">\r\n                      {(attachment.size / 1024).toFixed(1)} KB\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    setAttachment(null);\r\n                    setPreviewUrl(null);\r\n                  }}\r\n                  className=\"text-red-500 hover:text-red-700\"\r\n                >\r\n                  <X size={16} />\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Actions */}\r\n          <div className=\"flex justify-end gap-3 pt-4 border-t border-gray-100\">\r\n            <DialogClose asChild>\r\n              <Button type=\"button\" variant=\"outline\" disabled={isSubmitting}>\r\n                Cancel\r\n              </Button>\r\n            </DialogClose>\r\n            <Button\r\n              type=\"submit\"\r\n              className=\"bg-blue-600 hover:bg-blue-700 text-white\"\r\n              disabled={isDisabled}\r\n            >\r\n              {isSubmitting ? (\r\n                <>\r\n                  <Loader2 className=\"h-4 w-4 animate-spin mr-2\" /> Submitting...\r\n                </>\r\n              ) : (\r\n                \"Report Issue\"\r\n              )}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default ReportIssueForm;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5549, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/issues/components/bug/ProjectbugList.js"],"sourcesContent":["\r\n\r\n\r\n\r\n\r\n\r\n\"use client\";\r\n\r\nimport { format } from \"date-fns\";\r\nimport { useEffect, useState, useMemo } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport {\r\n  fetchBugByProjectId,\r\n  downloadBugsByProjectId,\r\n  downloadBugsByMemberId,\r\n  fetchEmployeeProjectBugs,\r\n} from \"@/modules/project-management/issues/slices/bugSlice\";\r\nimport { fetchProjectById } from \"@/modules/project-management/project/slices/projectSlice\";\r\nimport { getTeamMembersByProjectId } from \"@/modules/project-management/team/slices/teamSlice\";\r\nimport {\r\n  X,\r\n  CalendarIcon,\r\n  Filter,\r\n  Download,\r\n  Edit,\r\n  Plus,\r\n} from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Popover,\r\n  PopoverContent,\r\n  PopoverTrigger,\r\n} from \"@/components/ui/popover\";\r\nimport { Calendar } from \"@/components/ui/calendar\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from \"@/components/ui/table\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { formatDateTimeIST } from \"@/utils/formatDate\";\r\nimport { useCurrentUser } from \"@/hooks/useCurrentUser\";\r\nimport BugDetailsViewModal from \"./BugDetailsViewModal\";\r\nimport BugEditModal from \"./BugEditModal\";\r\nimport BugAssignModal from \"./BugAssignModal\"; // Import the new component\r\nimport ReportIssueForm from \"./ReportIssueForm\";\r\n\r\nconst ProjectbugList = ({ projectId, teamLeadId }) => {\r\n  const { currentUser, isTeamLead } = useCurrentUser(teamLeadId);\r\n  const { project: { data: projectData } } = useSelector((state) => state.project);\r\n  const dispatch = useDispatch();\r\n  const router = useRouter();\r\n\r\n  /* ----------  STATE  ---------- */\r\n  const [showFilterDialog, setShowFilterDialog] = useState(false);\r\n  const [showViewModal, setShowViewModal] = useState(false);\r\n  const [selectedBug, setSelectedBug] = useState(null);\r\n  const [showEditModal, setShowEditModal] = useState(false);\r\n  const [selectedBugForEdit, setSelectedBugForEdit] = useState(null);\r\n  const [showAssignModal, setShowAssignModal] = useState(false); // New state for assign modal\r\n  const [selectedBugForAssign, setSelectedBugForAssign] = useState(null); // New state for selected bug to assign\r\n  const [viewMode, setViewMode] = useState(\"all\");\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [tempPriorityFilter, setTempPriorityFilter] = useState(\"all\");\r\n  const [tempStatusFilter, setTempStatusFilter] = useState(\"all\");\r\n  const [tempAssignedToFilter, setTempAssignedToFilter] = useState(\"all\");\r\n  const [tempDateFrom, setTempDateFrom] = useState(null);\r\n  const [tempDateTo, setTempDateTo] = useState(null);\r\n  const [priorityFilter, setPriorityFilter] = useState(\"all\");\r\n  const [statusFilter, setStatusFilter] = useState(\"all\");\r\n  const [assignedToFilter, setAssignedToFilter] = useState(\"all\");\r\n  const [dateFrom, setDateFrom] = useState(null);\r\n  const [dateTo, setDateTo] = useState(null);\r\n  const [sortConfig, setSortConfig] = useState({ key: \"\", direction: \"asc\" });\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const bugsPerPage = 10;\r\n  const [showCreateIssue, setShowCreateIssue] = useState(false);\r\n\r\n  /* ----------  REDUX SELECTORS  ---------- */\r\n  const bugsByProjectId = useSelector((state) => state.bugs.bugsByProjectId);\r\n  const employeeProjectBugs = useSelector((state) => state.bugs.employeeProjectBugs);\r\n  const teamMembersByProjectId = useSelector((state) => state.team.teamMembersByProjectId);\r\n  const loading = useSelector((state) => state.bugs.loading);\r\n\r\n  const employeeId = currentUser?.id;\r\n\r\n  /* ----------  FETCH DATA  ---------- */\r\n  useEffect(() => {\r\n    if (projectId) {\r\n      dispatch(fetchBugByProjectId(projectId));\r\n      dispatch(getTeamMembersByProjectId(projectId));\r\n    }\r\n  }, [dispatch, projectId]);\r\n\r\n  useEffect(() => {\r\n    if (viewMode === \"my\" && employeeId) {\r\n      dispatch(fetchEmployeeProjectBugs({ projectId, employeeId }));\r\n    } else {\r\n      dispatch(fetchBugByProjectId(projectId));\r\n    }\r\n  }, [dispatch, viewMode, employeeId,projectId]);\r\n\r\n  /* ----------  ROLE LOGIC  ---------- */\r\n  const isCpc = currentUser?.role === \"cpc\";\r\n  const showAllViewOption = isCpc || isTeamLead;\r\n  const showAssignedFilter = showAllViewOption && viewMode === \"all\";\r\n  const showActionColumn = viewMode === \"all\" && (isCpc || isTeamLead);\r\n\r\n  useEffect(() => {\r\n    if (!showAllViewOption) setViewMode(\"my\");\r\n  }, [showAllViewOption]);\r\n\r\n  /* ----------  BUG LIST  ---------- */\r\n  const bugs = useMemo(() => {\r\n    return viewMode === \"my\" ? employeeProjectBugs || [] : bugsByProjectId || [];\r\n  }, [viewMode, employeeProjectBugs, bugsByProjectId]);\r\n\r\n  /* ----------  HELPERS  ---------- */\r\n  const getInitials = (name) => {\r\n    if (!name) return \"N/A\";\r\n    if (name === currentUser?.name && viewMode === \"my\") return \"Me\";\r\n    const parts = name.split(\" \");\r\n    return parts.length > 1\r\n      ? `${parts[0][0]}${parts[1][0]}`.toUpperCase()\r\n      : name.slice(0, 2).toUpperCase();\r\n  };\r\n  const truncate = (s) => (s?.length > 50 ? `${s.slice(0, 50)}...` : s || \"\");\r\n\r\n  const assignedMembersMap = useMemo(() => {\r\n    const map = {};\r\n    (teamMembersByProjectId || []).forEach((m) => {\r\n      map[m.memberName] = m.memberId;\r\n    });\r\n    return map;\r\n  }, [teamMembersByProjectId]);\r\n\r\n  /* ----------  FILTER / SORT / SEARCH  ---------- */\r\n  const filteredBugs = useMemo(() => {\r\n    let list = [...bugs];\r\n    if (searchQuery) {\r\n      const q = searchQuery.toLowerCase();\r\n      list = list.filter(\r\n        (b) =>\r\n          b.title?.toLowerCase().includes(q) ||\r\n          b.bug_id?.toLowerCase().includes(q) ||\r\n          b?.assignedToDetails?.memberName?.toLowerCase().includes(q)\r\n      );\r\n    }\r\n    if (priorityFilter !== \"all\") list = list.filter((b) => b.priority === priorityFilter);\r\n    if (statusFilter !== \"all\") list = list.filter((b) => b.status === statusFilter);\r\n    if (assignedToFilter !== \"all\")\r\n      list = list.filter((b) => b?.assignedToDetails?.memberName === assignedToFilter);\r\n    if (dateFrom || dateTo) {\r\n      list = list.filter((b) => {\r\n        const d = new Date(b.createdAt);\r\n        return (!dateFrom || d >= dateFrom) && (!dateTo || d <= dateTo);\r\n      });\r\n    }\r\n    if (sortConfig.key) {\r\n      list.sort((a, b) => {\r\n        const getVal = (obj, path) =>\r\n          path.split(\".\").reduce((o, k) => (o ? o[k] : \"\"), obj);\r\n        const aVal = getVal(a, sortConfig.key);\r\n        const bVal = getVal(b, sortConfig.key);\r\n        const cmp = String(aVal || \"\").localeCompare(String(bVal || \"\"));\r\n        return sortConfig.direction === \"asc\" ? cmp : -cmp;\r\n      });\r\n    }\r\n    return list;\r\n  }, [\r\n    bugs,\r\n    searchQuery,\r\n    priorityFilter,\r\n    statusFilter,\r\n    assignedToFilter,\r\n    dateFrom,\r\n    dateTo,\r\n    sortConfig,\r\n  ]);\r\n\r\n  /* ----------  HANDLERS  ---------- */\r\n  const handleViewBug = (bug) => {\r\n    setSelectedBug(bug);\r\n    setShowViewModal(true);\r\n  };\r\n  const handleEditBug = (bug) => {\r\n    setSelectedBugForEdit(bug);\r\n    setShowEditModal(true);\r\n  };\r\n  const handleAssignBug = (bug) => {\r\n    setSelectedBugForAssign(bug);\r\n    setShowAssignModal(true);\r\n  };\r\n  const handleSort = (key) => {\r\n    setSortConfig((prev) => ({\r\n      key,\r\n      direction: prev.key === key && prev.direction === \"asc\" ? \"desc\" : \"asc\",\r\n    }));\r\n    setCurrentPage(1);\r\n  };\r\n  const handleResetFilters = () => {\r\n    setSearchQuery(\"\");\r\n    setPriorityFilter(\"all\");\r\n    setStatusFilter(\"all\");\r\n    setAssignedToFilter(\"all\");\r\n    setDateFrom(null);\r\n    setDateTo(null);\r\n    setTempPriorityFilter(\"all\");\r\n    setTempStatusFilter(\"all\");\r\n    setTempAssignedToFilter(\"all\");\r\n    setTempDateFrom(null);\r\n    setTempDateTo(null);\r\n    setSortConfig({ key: \"\", direction: \"asc\" });\r\n    setCurrentPage(1);\r\n  };\r\n  const handleApplyFilters = () => {\r\n    setPriorityFilter(tempPriorityFilter);\r\n    setStatusFilter(tempStatusFilter);\r\n    if (showAssignedFilter) setAssignedToFilter(tempAssignedToFilter);\r\n    setDateFrom(tempDateFrom);\r\n    setDateTo(tempDateTo);\r\n    setShowFilterDialog(false);\r\n    setCurrentPage(1);\r\n  };\r\n  const handleDownloadReport = async () => {\r\n    try {\r\n      if (assignedToFilter !== \"all\" && assignedMembersMap[assignedToFilter]) {\r\n        await dispatch(\r\n          downloadBugsByMemberId({\r\n            projectId,\r\n            memberId: assignedMembersMap[assignedToFilter],\r\n          })\r\n        ).unwrap();\r\n      } else {\r\n        await dispatch(downloadBugsByProjectId(projectId)).unwrap();\r\n      }\r\n      toast.success(\"Report downloaded!\");\r\n    } catch {\r\n      toast.error(\"No Bug Found\");\r\n    }\r\n  };\r\n  const onIssueCreated = () => {\r\n    dispatch(fetchBugByProjectId(projectId));\r\n    toast.success(\"Issue created – it will appear in the list shortly.\");\r\n  };\r\n\r\n  /* ----------  PAGINATION  ---------- */\r\n  const totalPages = Math.max(1, Math.ceil(filteredBugs.length / bugsPerPage));\r\n  const paginatedBugs = filteredBugs.slice(\r\n    (currentPage - 1) * bugsPerPage,\r\n    currentPage * bugsPerPage\r\n  );\r\n\r\n  const getPaginationButtons = () => {\r\n    const maxButtons = 8;\r\n    const buttons = [];\r\n    let startPage = Math.max(1, currentPage - Math.floor(maxButtons / 2));\r\n    let endPage = Math.min(totalPages, startPage + maxButtons - 1);\r\n    if (endPage - startPage + 1 < maxButtons) {\r\n      startPage = Math.max(1, endPage - maxButtons + 1);\r\n    }\r\n    for (let page = startPage; page <= endPage; page++) buttons.push(page);\r\n    return buttons;\r\n  };\r\n\r\n  return (\r\n    <TooltipProvider delayDuration={150} skipDelayDuration={0}>\r\n      <div className=\"w-full bg-white\">\r\n        <div className=\"space-y-2\">\r\n          {/* ---------- TOP BAR ---------- */}\r\n          <div className=\"flex flex-wrap gap-4\">\r\n            <div className=\"flex-1 min-w-[180px]\">\r\n              <div className=\"relative w-full\">\r\n                <Input\r\n                  placeholder=\"Search bugs...\"\r\n                  value={searchQuery}\r\n                  onChange={(e) => setSearchQuery(e.target.value)}\r\n                  className=\"pl-10 text-sm w-full bg-white border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 rounded-lg\"\r\n                />\r\n              </div>\r\n            </div>\r\n            {showAllViewOption && (\r\n              <div className=\"flex-1 min-w-[140px]\">\r\n                <Select value={viewMode} onValueChange={setViewMode}>\r\n                  <SelectTrigger className=\"text-sm w-full bg-white border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 rounded-lg\">\r\n                    <SelectValue placeholder=\"View Mode\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent className=\"bg-white shadow-lg border-gray-200 rounded-lg\">\r\n                    <SelectItem value=\"my\">My Bugs</SelectItem>\r\n                    <SelectItem value=\"all\">All Bugs</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n            )}\r\n            <div className=\"flex-1 min-w-[140px]\">\r\n              <Button\r\n                variant=\"outline\"\r\n                className=\"w-full bg-white text-black border-gray-300 hover:bg-gray-100 rounded-lg text-sm flex items-center justify-center\"\r\n                onClick={() => setShowFilterDialog(true)}\r\n              >\r\n                Apply Filters <Filter className=\"w-4 h-4 ml-2\" />\r\n              </Button>\r\n            </div>\r\n            <div className=\"flex-1 min-w-[140px]\">\r\n              <Button\r\n                variant=\"outline\"\r\n                className=\"w-full bg-white text-black border-gray-300 hover:bg-gray-100 rounded-lg text-sm flex items-center justify-center\"\r\n                onClick={handleResetFilters}\r\n              >\r\n                Reset Filters <X className=\"w-4 h-4 ml-2\" />\r\n              </Button>\r\n            </div>\r\n            {showAllViewOption && (\r\n              <div className=\"flex-1 min-w-[140px]\">\r\n                <Button\r\n                  variant=\"default\"\r\n                  className=\"w-full bg-blue-600 text-white hover:bg-blue-700 rounded-lg flex items-center justify-center\"\r\n                  onClick={handleDownloadReport}\r\n                >\r\n                  Download <Download className=\"w-4 h-4 ml-2\" />\r\n                </Button>\r\n              </div>\r\n            )}\r\n            <Button\r\n              className=\"bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm flex items-center gap-2\"\r\n              onClick={() => setShowCreateIssue(true)}\r\n            >\r\n              <Plus className=\"h-4 w-4\" />\r\n              Create Issue\r\n            </Button>\r\n          </div>\r\n\r\n          {/* ---------- FILTER DIALOG ---------- */}\r\n          <Dialog open={showFilterDialog} onOpenChange={setShowFilterDialog}>\r\n            <DialogContent className=\"max-w-[95vw] sm:max-w-md bg-white shadow-lg border-gray-200 rounded-lg\">\r\n              <DialogHeader>\r\n                <DialogTitle className=\"text-lg font-semibold text-gray-900\">Filter Bugs</DialogTitle>\r\n              </DialogHeader>\r\n              <div className=\"grid gap-4 py-4\">\r\n                <Select value={tempPriorityFilter} onValueChange={setTempPriorityFilter}>\r\n                  <SelectTrigger className=\"w-full bg-white border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 rounded-lg text-sm\">\r\n                    <SelectValue placeholder=\"Priority\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent className=\"bg-white shadow-lg border-gray-200 rounded-lg\">\r\n                    <SelectItem value=\"all\">All Priorities</SelectItem>\r\n                    <SelectItem value=\"Low\">Low</SelectItem>\r\n                    <SelectItem value=\"Medium\">Medium</SelectItem>\r\n                    <SelectItem value=\"High\">High</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n                <Select value={tempStatusFilter} onValueChange={setTempStatusFilter}>\r\n                  <SelectTrigger className=\"w-full bg-white border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 rounded-lg text-sm\">\r\n                    <SelectValue placeholder=\"Status\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent className=\"bg-white shadow-lg border-gray-200 rounded-lg\">\r\n                    <SelectItem value=\"all\">All Statuses</SelectItem>\r\n                    <SelectItem value=\"Pending\">Pending</SelectItem>\r\n                    <SelectItem value=\"In Progress\">In Progress</SelectItem>\r\n                    <SelectItem value=\"Resolved\">Resolved</SelectItem>\r\n                    <SelectItem value=\"Completed\">Completed</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n                {showAssignedFilter && (\r\n                  <Select value={tempAssignedToFilter} onValueChange={setTempAssignedToFilter}>\r\n                    <SelectTrigger className=\"w-full bg-white border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 rounded-lg text-sm\">\r\n                      <SelectValue placeholder=\"Assigned To\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent className=\"bg-white shadow-lg border-gray-200 rounded-lg\">\r\n                      <SelectItem value=\"all\">All Assigned</SelectItem>\r\n                      {(teamMembersByProjectId || []).map((m) => (\r\n                        <SelectItem key={m.memberId} value={m.memberName}>\r\n                          {m.memberName}\r\n                        </SelectItem>\r\n                      ))}\r\n                    </SelectContent>\r\n                  </Select>\r\n                )}\r\n                <Popover>\r\n                  <PopoverTrigger asChild>\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      className={cn(\r\n                        \"w-full justify-between bg-white border-gray-300 hover:bg-gray-100 rounded-lg text-sm\",\r\n                        !tempDateFrom && \"text-gray-500\"\r\n                      )}\r\n                    >\r\n                      {tempDateFrom ? format(tempDateFrom, \"PPP\") : <span>From Date</span>}\r\n                      <CalendarIcon className=\"ml-2 h-4 w-4 text-black\" />\r\n                    </Button>\r\n                  </PopoverTrigger>\r\n                  <PopoverContent className=\"w-auto p-0 bg-white shadow-lg border-gray-200 rounded-lg\">\r\n                    <Calendar\r\n                      mode=\"single\"\r\n                      selected={tempDateFrom}\r\n                      onSelect={setTempDateFrom}\r\n                      initialFocus\r\n                      className=\"rounded-lg text-black\"\r\n                    />\r\n                  </PopoverContent>\r\n                </Popover>\r\n                <Popover>\r\n                  <PopoverTrigger asChild>\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      className={cn(\r\n                        \"w-full justify-between bg-white border-gray-300 hover:bg-gray-100 rounded-lg text-sm\",\r\n                        !tempDateTo && \"text-gray-500\"\r\n                      )}\r\n                    >\r\n                      {tempDateTo ? format(tempDateTo, \"PPP\") : <span>To Date</span>}\r\n                      <CalendarIcon className=\"ml-2 h-4 w-4 text-black\" />\r\n                    </Button>\r\n                  </PopoverTrigger>\r\n                  <PopoverContent className=\"w-auto p-0 bg-white shadow-lg border-gray-200 rounded-lg\">\r\n                    <Calendar\r\n                      mode=\"single\"\r\n                      selected={tempDateTo}\r\n                      onSelect={setTempDateTo}\r\n                      initialFocus\r\n                      className=\"rounded-lg text-black\"\r\n                    />\r\n                  </PopoverContent>\r\n                </Popover>\r\n                <Button\r\n                  onClick={handleApplyFilters}\r\n                  className=\"bg-blue-600 text-white hover:bg-blue-700 rounded-lg text-sm\"\r\n                >\r\n                  Apply Filters\r\n                </Button>\r\n              </div>\r\n            </DialogContent>\r\n          </Dialog>\r\n\r\n          {/* ---------- TABLE ---------- */}\r\n          <div className=\"overflow-x-auto rounded-md border\">\r\n            <Table>\r\n              <TableHeader>\r\n                <TableRow className=\"bg-gray-50 text-xs sm:text-sm\">\r\n                  <TableHead className=\"font-bold text-gray-700 w-[60px]\">S.N</TableHead>\r\n                  <TableHead\r\n                    className=\"font-bold text-gray-700 cursor-pointer w-[300px] sm:w-[400px]\"\r\n                    onClick={() => handleSort(\"title\")}\r\n                  >\r\n                    Title\r\n                  </TableHead>\r\n                  <TableHead\r\n                    className=\"font-bold text-gray-700 cursor-pointer w-[100px]\"\r\n                    onClick={() => handleSort(\"assignedToDetails.memberName\")}\r\n                  >\r\n                    Assignee\r\n                  </TableHead>\r\n                  <TableHead\r\n                    className=\"font-bold text-gray-700 cursor-pointer w-[100px]\"\r\n                    onClick={() => handleSort(\"priority\")}\r\n                  >\r\n                    Priority\r\n                  </TableHead>\r\n                  <TableHead\r\n                    className=\"font-bold text-gray-700 cursor-pointer w-[150px]\"\r\n                    onClick={() => handleSort(\"deadline\")}\r\n                  >\r\n                    Deadline\r\n                  </TableHead>\r\n                  <TableHead\r\n                    className=\"font-bold text-gray-700 cursor-pointer w-[100px]\"\r\n                    onClick={() => handleSort(\"status\")}\r\n                  >\r\n                    Status\r\n                  </TableHead>\r\n                  {showActionColumn && <TableHead className=\"font-bold text-gray-700 w-[60px]\">Action</TableHead>}\r\n                </TableRow>\r\n              </TableHeader>\r\n              <TableBody>\r\n                {paginatedBugs.length === 0 ? (\r\n                  <TableRow>\r\n                    <TableCell\r\n                      colSpan={showActionColumn ? 7 : 6}\r\n                      className=\"text-center text-gray-500 py-6 text-sm\"\r\n                    >\r\n                      No bugs found\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ) : (\r\n                  paginatedBugs.map((bug, index) => (\r\n                    <TableRow\r\n                      key={bug._id}\r\n                      className=\"text-xs sm:text-sm cursor-pointer transition-all duration-300 ease-in-out hover:bg-gray-600 hover:bg-opacity-100 hover:shadow-md\"\r\n                      onClick={() => handleViewBug(bug)}\r\n                    >\r\n                      <TableCell>{(currentPage - 1) * bugsPerPage + index + 1}</TableCell>\r\n                      <TableCell>\r\n                        <span className=\"line-clamp-1\">{truncate(bug.title)}</span>\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        {bug?.assignedToDetails?.memberName ? (\r\n                          <Tooltip>\r\n                            <TooltipTrigger>\r\n                              <div className=\"w-8 h-8 rounded-full bg-blue-100 text-blue-700 flex items-center justify-center text-xs font-medium\">\r\n                                {getInitials(bug.assignedToDetails.memberName)}\r\n                              </div>\r\n                            </TooltipTrigger>\r\n                            <TooltipContent className=\"bg-gradient-to-br from-blue-50 to-indigo-50/80 backdrop-blur-sm border border-blue-100/50 shadow-xl shadow-blue-100/20 max-w-[300px] p-4 rounded-xl\">\r\n                              <p className=\"text-xs text-gray-700\">\r\n                                {bug.assignedToDetails.memberName}\r\n                              </p>\r\n                            </TooltipContent>\r\n                          </Tooltip>\r\n                        ) : (\r\n                          showActionColumn && (\r\n                            <Button\r\n                              variant=\"outline\"\r\n                              size=\"sm\"\r\n                              className=\"h-8 px-2 text-xs bg-white border-gray-300 hover:bg-gray-100\"\r\n                              onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                handleAssignBug(bug);\r\n                              }}\r\n                            >\r\n                              Assign\r\n                            </Button>\r\n                          )\r\n                        )}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <span\r\n                          className={cn(\r\n                            \"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium\",\r\n                            bug.priority === \"Low\"\r\n                              ? \"bg-green-200 text-green-800\"\r\n                              : bug.priority === \"Medium\"\r\n                              ? \"bg-yellow-200 text-yellow-800\"\r\n                              : bug.priority === \"High\"\r\n                              ? \"bg-red-200 text-red-800\"\r\n                              : \"bg-gray-200 text-gray-800\"\r\n                          )}\r\n                        >\r\n                          {bug.priority || \"N/A\"}\r\n                        </span>\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <p className=\"text-xs text-gray-700\">{formatDateTimeIST(bug.deadline) || \"N/A\"}</p>\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <span\r\n                          className={cn(\r\n                            \"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium\",\r\n                            bug.status === \"Pending\"\r\n                              ? \"bg-yellow-200 text-yellow-800\"\r\n                              : bug.status === \"In Progress\"\r\n                              ? \"bg-blue-200 text-blue-800\"\r\n                              : bug.status === \"Resolved\"\r\n                              ? \"bg-purple-200 text-purple-800\"\r\n                              : bug.status === \"Completed\"\r\n                              ? \"bg-green-200 text-green-800\"\r\n                              : \"bg-gray-200 text-gray-800\"\r\n                          )}\r\n                        >\r\n                          {bug.status || \"N/A\"}\r\n                        </span>\r\n                      </TableCell>\r\n                      {showActionColumn && (\r\n                        <TableCell>\r\n                          <Button\r\n                            title=\"Edit Bug\"\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            className=\"h-6 w-6 sm:h-8 sm:w-8 p-0\"\r\n                            onClick={(e) => {\r\n                              e.stopPropagation();\r\n                              handleEditBug(bug);\r\n                            }}\r\n                          >\r\n                            <Edit className=\"h-4 w-4 text-green-700\" />\r\n                          </Button>\r\n                        </TableCell>\r\n                      )}\r\n                    </TableRow>\r\n                  ))\r\n                )}\r\n              </TableBody>\r\n            </Table>\r\n          </div>\r\n\r\n          {/* ---------- PAGINATION ---------- */}\r\n          <div className=\"flex flex-col sm:flex-row items-center justify-between px-2 py-4 gap-4 sm:gap-0\">\r\n            <div className=\"text-xs sm:text-sm text-gray-700\">\r\n              Showing {Math.min((currentPage - 1) * bugsPerPage + 1, filteredBugs.length)}-\r\n              {Math.min(currentPage * bugsPerPage, filteredBugs.length)} of {filteredBugs.length} bugs\r\n            </div>\r\n            {totalPages > 1 && (\r\n              <div className=\"flex items-center gap-2\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => setCurrentPage((p) => Math.max(1, p - 1))}\r\n                  disabled={currentPage === 1}\r\n                  className=\"bg-white text-black border-gray-300 hover:bg-gray-100 rounded-lg text-xs sm:text-sm\"\r\n                >\r\n                  Previous\r\n                </Button>\r\n                {getPaginationButtons().map((page) => (\r\n                  <Button\r\n                    key={page}\r\n                    variant={currentPage === page ? \"default\" : \"outline\"}\r\n                    size=\"sm\"\r\n                    onClick={() => setCurrentPage(page)}\r\n                    className={cn(\r\n                      \"w-8 h-8 p-0\",\r\n                      currentPage === page\r\n                        ? \"bg-blue-600 text-white hover:bg-blue-700\"\r\n                        : \"bg-white text-black border-gray-300 hover:bg-gray-100\",\r\n                      \"rounded-lg text-xs sm:text-sm\"\r\n                    )}\r\n                  >\r\n                    {page}\r\n                  </Button>\r\n                ))}\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => setCurrentPage((p) => Math.min(totalPages, p + 1))}\r\n                  disabled={currentPage === totalPages}\r\n                  className=\"bg-white text-black border-gray-300 hover:bg-gray-100 rounded-lg text-xs sm:text-sm\"\r\n                >\r\n                  Next\r\n                </Button>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* ---------- CREATE ISSUE MODAL ---------- */}\r\n          <ReportIssueForm\r\n            projectData={projectData}\r\n            isOpen={showCreateIssue}\r\n            onClose={() => setShowCreateIssue(false)}\r\n            onIssueReported={onIssueCreated}\r\n          />\r\n\r\n          {/* ---------- VIEW / EDIT / ASSIGN MODALS ---------- */}\r\n          <BugDetailsViewModal\r\n            isOpen={showViewModal}\r\n            onOpenChange={setShowViewModal}\r\n            bug={selectedBug}\r\n            bugId={selectedBug?.bug_id}\r\n          />\r\n          <BugEditModal\r\n            isOpen={showEditModal}\r\n            onOpenChange={setShowEditModal}\r\n            bug={selectedBugForEdit}\r\n            bugId={selectedBugForEdit?.bug_id}\r\n          />\r\n          <BugAssignModal\r\n            isOpen={showAssignModal}\r\n            onOpenChange={setShowAssignModal}\r\n            bug={selectedBugForAssign}\r\n            bugId={selectedBugForAssign?.bug_id}\r\n            teamMembers={teamMembersByProjectId || []}\r\n          />\r\n        </div>\r\n      </div>\r\n    </TooltipProvider>\r\n  );\r\n};\r\n\r\nexport default ProjectbugList;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6759, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/analytics/components/ProjectMetrics.jsx"],"sourcesContent":["\r\n\r\n\r\n\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { Chart as ChartJS, ArcElement, Tooltip, Legend, BarElement, CategoryScale, LinearScale, LineElement, PointElement, RadialLinearScale, Filler } from \"chart.js\";\r\nimport { Pie, Doughnut, Bar, Line } from \"react-chartjs-2\";\r\nimport { fetchProjectAnalytics, fetchEmployeeAnalytics } from \"@/modules/project-management/analytics/slices/projectAnalyticsSlice\";\r\nimport { useCurrentUser } from \"@/hooks/useCurrentUser\";\r\n\r\n// Register Chart.js components\r\nChartJS.register(ArcElement, Tooltip, Legend, BarElement, CategoryScale, LinearScale, LineElement, PointElement, RadialLinearScale, Filler);\r\n\r\n// Colors for charts\r\nconst MIXED_COLORS = [\"#3b82f6\", \"#22c55e\", \"#ef4444\", \"#eab308\", \"#f97316\"];\r\n\r\n// Chart rendering function\r\nfunction renderChart(type, data, isTaskChart = false, noDataMessage = 'No data available') {\r\n  // Check for no valid data\r\n  if (!data || data.length === 0 || data.every((d) => !d || d.value == null || d.value === 0)) {\r\n    return (\r\n      <div className=\"w-full h-full flex items-center justify-center text-gray-500 text-sm\">\r\n        {noDataMessage}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const labels = data.map((d) => d.name || \"Unknown\");\r\n  const values = data.map((d) => Number(d.value) || 0);\r\n  const chartData = {\r\n    labels,\r\n    datasets: [\r\n      {\r\n        data: values,\r\n        backgroundColor: MIXED_COLORS.slice(0, values.length),\r\n        borderColor: MIXED_COLORS.slice(0, values.length).map((c) => c + \"cc\"),\r\n        borderWidth: 1,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const options = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: {\r\n      legend: {\r\n        position: \"bottom\",\r\n        labels: {\r\n          font: { size: 10, family: \"'Inter', sans-serif\" },\r\n          color: \"#1f2937\",\r\n          padding: 5,\r\n        },\r\n      },\r\n      tooltip: {\r\n        backgroundColor: \"#ffffff\",\r\n        titleColor: \"#1f2937\",\r\n        bodyColor: \"#1f2937\",\r\n        borderColor: \"#e5e7eb\",\r\n        borderWidth: 1,\r\n        cornerRadius: 4,\r\n        padding: 6,\r\n        callbacks: {\r\n          label: function (context) {\r\n            const label = context.dataset.label || context.label || \"\";\r\n            const value = context.raw || 0;\r\n            return `${label}: ${value}`;\r\n          },\r\n          title: function (context) {\r\n            return context[0].label || \"\";\r\n          },\r\n        },\r\n      },\r\n      datalabels: isTaskChart\r\n        ? {\r\n            display: true,\r\n            color: \"#1f2937\",\r\n            font: { size: 10, family: \"'Inter', sans-serif\" },\r\n            formatter: (value, context) => `${context.chart.data.labels[context.dataIndex]}: ${value}`,\r\n            anchor: \"center\",\r\n            align: \"center\",\r\n          }\r\n        : { display: false },\r\n    },\r\n    hover: {\r\n      mode: \"nearest\",\r\n      intersect: true,\r\n    },\r\n    interaction: {\r\n      mode: \"index\",\r\n      intersect: false,\r\n    },\r\n  };\r\n\r\n  switch (type) {\r\n    case \"pie\": return <Pie data={chartData} options={options} />;\r\n    case \"doughnut\": return <Doughnut data={chartData} options={{ ...options, cutout: \"50%\" }} />;\r\n    case \"bar\": return <Bar data={chartData} options={options} />;\r\n    case \"line\": return <Line data={chartData} options={options} />;\r\n    default: return null;\r\n  }\r\n}\r\n\r\n// Skeleton for loading state\r\nfunction ChartSkeleton() {\r\n  return <Skeleton className=\"w-full h-[150px] rounded-lg\" />;\r\n}\r\n\r\nexport default function ProjectMetrics({ projectId }) {\r\n  const dispatch = useDispatch();\r\n  const { analytics, employeeAnalytics, loading: analyticsLoading } = useSelector((state) => state.projectAnalytics);\r\n  const { project } = useSelector((state) => state.project);\r\n  const { currentUser, isTeamLead } = useCurrentUser(project?.data?.teamLeadId);\r\n\r\n  // Determine if user can toggle between full and personal views\r\n  // Toggle is only shown when isTeamLead is true\r\n  const canViewBoth = isTeamLead === true;\r\n\r\n  // Set view mode based on user role/position\r\n  // - Team Lead (isTeamLead === true): Can toggle, default to 'full'\r\n  // - CPC or position 'Team Lead' but not isTeamLead: Only 'full' view\r\n  // - Otherwise: Only 'personal' view\r\n  const initialViewMode = canViewBoth\r\n    ? 'full'\r\n    : (currentUser?.role === 'cpc' || currentUser?.position === 'Team Lead')\r\n      ? 'full'\r\n      : 'personal';\r\n  const [viewMode, setViewMode] = useState(initialViewMode);\r\n\r\n  // Fetch analytics based on view mode\r\n  useEffect(() => {\r\n    if (projectId && currentUser?.id) {\r\n      if (viewMode === 'full') {\r\n        dispatch(fetchProjectAnalytics(projectId));\r\n      } else {\r\n        dispatch(fetchEmployeeAnalytics({ projectId, employeeId: currentUser.id }));\r\n      }\r\n    }\r\n  }, [projectId, dispatch, viewMode, currentUser?.id]);\r\n\r\n  const chartData = viewMode === 'full' ? analytics : employeeAnalytics;\r\n\r\n  // Dynamic titles and messages based on view mode\r\n  const isPersonal = viewMode === 'personal';\r\n  const tasksTitle = isPersonal ? 'My Tasks' : 'All Tasks';\r\n  const bugsTitle = isPersonal ? 'My Bugs' : 'All Bugs';\r\n  const teamTitle = isPersonal ? 'Active Teams' : 'Active Teams';\r\n  const momTitle = isPersonal ? 'All MOM' : 'All MOM';\r\n\r\n  const tasksNoDataMessage = isPersonal ? 'No tasks assigned' : 'No tasks';\r\n  const bugsNoDataMessage = isPersonal ? 'No bugs assigned' : 'No bugs';\r\n  const teamNoDataMessage = isPersonal ? 'No teams involved' : 'No teams';\r\n  const momNoDataMessage = isPersonal ? 'No MOM available' : 'No MOM';\r\n\r\n  // Chart data functions\r\n  const getTaskChartData = () =>\r\n    chartData?.summary?.taskStatusCounts\r\n      ? Object.entries(chartData.summary.taskStatusCounts)\r\n          .map(([name, value]) => ({ name, value: Number(value) }))\r\n          .filter((item) => item?.name && item.value != null && item.value >= 0)\r\n      : [];\r\n\r\n  const getBugChartData = () =>\r\n    chartData?.summary?.bugStatusCounts\r\n      ? Object.entries(chartData.summary.bugStatusCounts)\r\n          .map(([name, value]) => ({ name, value: Number(value) }))\r\n          .filter((item) => item?.name && item.value != null && item.value >= 0)\r\n      : [];\r\n\r\n  const getTeamChartData = () => {\r\n    if (chartData?.summary?.teamCount != null && chartData.summary.teamCount >= 0) {\r\n      return [{ name: \"Active Teams\", value: Number(chartData.summary.teamCount) }];\r\n    }\r\n    return [];\r\n  };\r\n\r\n  const getMomChartData = () =>\r\n    chartData?.summary?.mom\r\n      ? [\r\n          { name: \"Online\", value: Number(chartData.summary.mom.online) || 0 },\r\n          { name: \"Offline\", value: Number(chartData.summary.mom.offline) || 0 },\r\n        ].filter((item) => item?.name && item.value != null && item.value >= 0)\r\n      : [];\r\n\r\n  return (\r\n    <section className=\"space-y-4\">\r\n      {canViewBoth && (\r\n        <div className=\"flex justify-end items-center mb-4 cursor-pointer\">\r\n          <Switch\r\n            checked={viewMode === \"full\"}\r\n            onCheckedChange={(checked) =>\r\n              setViewMode(checked ? \"full\" : \"personal\")\r\n            }\r\n            title={\r\n              viewMode === \"full\"\r\n                ? \"Show My Analytics\"\r\n                : \"Show Full Project Analytics\"\r\n            }\r\n            className=\"data-[state=checked]:bg-blue-500 transition\"\r\n          />\r\n        </div>\r\n      )}\r\n      {analyticsLoading ? (\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n          {Array(4).fill(0).map((_, index) => (\r\n            <Card key={index} className=\"bg-gradient-to-br from-gray-50 to-gray-100 border border-gray-200/50 rounded-xl overflow-hidden shadow-md\">\r\n              <CardHeader className=\"pb-2 bg-gray-200/50\">\r\n                <CardTitle className=\"text-sm font-medium text-gray-900\"></CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"p-4\" style={{ height: \"180px\" }}>\r\n                <ChartSkeleton />\r\n              </CardContent>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n      ) : !chartData?.summary ? (\r\n        <div className=\"w-full h-[180px] text-center text-gray-500\">\r\n          No analytics data available\r\n        </div>\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n          <Card className=\"bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200/50 rounded-xl overflow-hidden shadow-md\">\r\n            <CardHeader className=\"pb-2 bg-blue-200/50\">\r\n              <CardTitle className=\"text-sm font-medium text-blue-900\">{tasksTitle}</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"p-4\" style={{ height: \"180px\" }}>\r\n              {renderChart(\"pie\", getTaskChartData(), true, tasksNoDataMessage)}\r\n            </CardContent>\r\n          </Card>\r\n          <Card className=\"bg-gradient-to-br from-red-50 to-red-100 border border-red-200/50 rounded-xl overflow-hidden shadow-md\">\r\n            <CardHeader className=\"pb-2 bg-red-200/50\">\r\n              <CardTitle className=\"text-sm font-medium text-red-900\">{bugsTitle}</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"p-4\" style={{ height: \"180px\" }}>\r\n              {renderChart(\"doughnut\", getBugChartData(), false, bugsNoDataMessage)}\r\n            </CardContent>\r\n          </Card>\r\n          <Card className=\"bg-gradient-to-br from-green-50 to-green-100 border border-green-200/50 rounded-xl overflow-hidden shadow-md\">\r\n            <CardHeader className=\"pb-2 bg-green-200/50\">\r\n              <CardTitle className=\"text-sm font-medium text-green-900\">{teamTitle}</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"p-4\" style={{ height: \"180px\" }}>\r\n              {renderChart(\"pie\", getTeamChartData(), false, teamNoDataMessage)}\r\n            </CardContent>\r\n          </Card>\r\n\r\n          \r\n          <Card className=\"bg-gradient-to-br from-purple-50 to-purple-100 border border-purple-200/50 rounded-xl overflow-hidden shadow-md\">\r\n            <CardHeader className=\"pb-2 bg-purple-200/50\">\r\n              <CardTitle className=\"text-sm font-medium text-purple-900\">{momTitle}</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"p-4\" style={{ height: \"180px\" }}>\r\n              {renderChart(\"pie\", getMomChartData(), false, momNoDataMessage)}\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7236, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/team/components/CreateTeamModal.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect, useMemo, useRef } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { fetchTeamMembers, createTeam } from \"@/modules/project-management/team/slices/teamSlice\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { DialogContent } from \"@/components/ui/dialog\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { Users, Check, Loader2, Trash2 } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { fetchTeamByProjectId } from \"@/modules/project-management/team/slices/viewTeamByProjectIdSlice\";\r\n\r\nexport default function CreateTeamModal({ projectId, onClose, isOpen }) {\r\n  const dispatch = useDispatch();\r\n  const { allMembers, createTeamError } = useSelector((state) => state.team);\r\n  const { project } = useSelector((state) => state.project);\r\n  const {\r\n    teamsByProject: teams,\r\n    status,\r\n    error,\r\n  } = useSelector((state) => state.team);\r\n\r\n  const [selectedMembers, setSelectedMembers] = useState([]);\r\n  const [teamName, setTeamName] = useState(\"\");\r\n  const [formErrors, setFormErrors] = useState({});\r\n  const [successMessage, setSuccessMessage] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [isSelectOpen, setIsSelectOpen] = useState(false);\r\n  const selectRef = useRef(null);\r\n  const searchInputRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchTeamMembers());\r\n    if (projectId) {\r\n      dispatch(fetchTeamByProjectId(projectId));\r\n    }\r\n  }, [dispatch, projectId]);\r\n\r\n  // Flatten existing members from teams\r\n  const existingMember = teams.flatMap((team) => team.teamMembers);\r\n\r\n  // Step 1: Filter unique members by memberId, ensuring it's defined\r\n  const uniqueMembers = Array.from(\r\n    new Map(\r\n      existingMember\r\n        .filter((member) => member.memberId) // Filter out invalid entries\r\n        .map((member) => [member.memberId.trim(), member])\r\n    ).values()\r\n  );\r\n\r\n  // Step 2: Create a set of memberIds from uniqueMembers\r\n  const uniqueMemberIds = new Set(\r\n    uniqueMembers.map((member) => member.memberId.trim())\r\n  );\r\n\r\n  // Step 3: Filter allMembers to exclude members already in uniqueMembers\r\n  const finalMembers = allMembers.filter((member) => {\r\n    if (!member.employeeID) {\r\n      // console.warn(\"Member missing employeeID:\", member);\r\n      return true; // Keep or handle as needed\r\n    }\r\n    const id = member.employeeID.trim();\r\n    return !uniqueMemberIds.has(id);\r\n  });\r\n\r\n  // Step 4: Log the results\r\n  // console.log(\"All Members\", allMembers);\r\n  // console.log(\"Unique Existing Members\", uniqueMembers);\r\n  // console.log(\"Final Members after excluding existing\", finalMembers);\r\n\r\n  const memberOptions = useMemo(() => {\r\n    if (!finalMembers || !Array.isArray(finalMembers)) return [];\r\n\r\n    return finalMembers.map((member) => ({\r\n      value: member.employeeID,\r\n      label: member.name || `${member.firstName} ${member.lastName}`.trim(),\r\n      email: member.email,\r\n      firstName: member.firstName,\r\n      lastName: member.lastName,\r\n      id: member.employeeID,\r\n      designation: member.designation || \"Not specified\",\r\n    }));\r\n  }, [finalMembers]);\r\n\r\n  const availableMembers = useMemo(() => {\r\n    return memberOptions.filter(\r\n      (member) =>\r\n        !selectedMembers.some((selected) => selected.value === member.value) &&\r\n        (searchQuery === \"\" ||\r\n          member.label.toLowerCase().includes(searchQuery.toLowerCase()))\r\n    );\r\n  }, [memberOptions, selectedMembers, searchQuery]);\r\n\r\n  const validateForm = () => {\r\n    const errors = {};\r\n    if (!teamName.trim()) errors.teamName = \"Team name is required\";\r\n    if (selectedMembers.length === 0)\r\n      errors.teamMembers = \"Please select at least one team member\";\r\n    return errors;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const errors = validateForm();\r\n    if (Object.keys(errors).length > 0) {\r\n      setFormErrors(errors);\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setFormErrors({});\r\n    setSuccessMessage(\"\");\r\n\r\n    const formattedTeamMembers = selectedMembers.map((member) => ({\r\n      memberId: member.value,\r\n      memberName: member.label,\r\n      role: member.designation,\r\n      email: member.email,\r\n    }));\r\n\r\n    const teamData = {\r\n      projectId,\r\n      teamName: teamName.trim(),\r\n      projectName: project?.data?.name || \"N/A\",\r\n      teamLeadName: project?.data?.teamLeadName?.trim() || \"N/A\",\r\n      teamLeadId: project?.data?.teamLeadId?.trim() || \"N/A\",\r\n      teamMembers: formattedTeamMembers,\r\n    };\r\n\r\n\r\n\r\n    try {\r\n      const resultAction = await dispatch(createTeam(teamData));\r\n\r\n      if (createTeam.fulfilled.match(resultAction)) {\r\n        toast.success(\r\n          resultAction.payload?.message || \"Team created successfully!\"\r\n        );\r\n        await dispatch(fetchTeamByProjectId(projectId)); // ✅ Only here, after success\r\n        setTeamName(\"\");\r\n        setSelectedMembers([]);\r\n        setSearchQuery(\"\");\r\n        onClose();\r\n      } else {\r\n        throw new Error(\r\n          resultAction.payload?.message || \"Failed to create team\"\r\n        );\r\n      }\r\n    } catch (err) {\r\n      toast.error(err.message || createTeamError || \"Failed to create team\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const addTeamMember = (value) => {\r\n    const selected = memberOptions.find((member) => member.value === value);\r\n    if (selected && !selectedMembers.some((m) => m.value === selected.value)) {\r\n      setSelectedMembers([...selectedMembers, selected]);\r\n      setFormErrors((prev) => ({ ...prev, teamMembers: \"\" }));\r\n      setSuccessMessage(\"\");\r\n      setSearchQuery(\"\"); // Clear search query after selection\r\n      setIsSelectOpen(true); // Keep dropdown open\r\n      setTimeout(() => {\r\n        if (searchInputRef.current) {\r\n          searchInputRef.current.focus(); // Refocus on search input\r\n        }\r\n      }, 0);\r\n    }\r\n  };\r\n\r\n  const removeTeamMember = (memberToRemove) => {\r\n    setSelectedMembers(\r\n      selectedMembers.filter((member) => member.value !== memberToRemove.value)\r\n    );\r\n    setFormErrors((prev) => ({ ...prev, teamMembers: \"\" }));\r\n    setSuccessMessage(\"\");\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setTeamName(\"\");\r\n    setSelectedMembers([]);\r\n    setFormErrors({});\r\n    setSuccessMessage(\"\");\r\n    setSearchQuery(\"\");\r\n    setIsSelectOpen(false);\r\n    onClose();\r\n    \r\n  };\r\n\r\n  const handleSearchInputChange = (e) => {\r\n    setSearchQuery(e.target.value);\r\n    setIsSelectOpen(true); // Keep dropdown open while typing\r\n  };\r\n\r\n  const handleSelectTriggerClick = () => {\r\n    setIsSelectOpen(true);\r\n    setTimeout(() => {\r\n      if (searchInputRef.current) {\r\n        searchInputRef.current.focus(); // Focus on search input when trigger is clicked\r\n      }\r\n    }, 0);\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <DialogContent className=\"h-[90vh] max-w-full sm:max-w-4xl md:max-w-5xl lg:max-w-6xl p-0 border-none overflow-y-auto max-h-[85vh]\">\r\n      <Card className=\"w-full bg-white border border-gray-200 shadow-lg rounded-xl\">\r\n        <CardHeader className=\"sticky top-0 bg-white px-6 py-4 border-b border-gray-200 z-10\">\r\n          <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 sm:gap-0\">\r\n            <CardTitle className=\"text-xl font-bold text-black flex items-center gap-2\">\r\n              <Users className=\"h-6 w-6 text-black\" /> Create Team\r\n            </CardTitle>\r\n            <div className=\"flex items-center gap-3\">\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={handleClose}\r\n                className=\"px-4 py-2 bg-white text-black border border-gray-300 rounded-md hover:bg-gray-100 text-sm font-medium transition-colors\"\r\n                aria-label=\"Cancel\"\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                type=\"submit\"\r\n                onClick={handleSubmit}\r\n                disabled={isLoading}\r\n                className=\"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700 disabled:bg-indigo-400 disabled:cursor-not-allowed transition-colors\"\r\n                aria-label=\"Create team\"\r\n              >\r\n                {isLoading ? (\r\n                  <>\r\n                    <Loader2 className=\"inline-block mr-2 animate-spin h-4 w-4\" />\r\n                    Creating...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Check className=\"inline-block mr-2 h-4 w-4\" />\r\n                    Create Team\r\n                  </>\r\n                )}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent className=\"p-6 bg-white\">\r\n          <form className=\"space-y-6\">\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-6\">\r\n              <div>\r\n                <Label className=\"block text-sm font-bold text-black mb-2 flex items-center gap-1.5\">\r\n                  <Users className=\"h-4 w-4 text-black\" /> Team Name\r\n                  {formErrors.teamName && (\r\n                    <span className=\"text-xs ml-2 text-red-500\">\r\n                      ({formErrors.teamName})\r\n                    </span>\r\n                  )}\r\n                </Label>\r\n                <Input\r\n                  type=\"text\"\r\n                  value={teamName}\r\n                  onChange={(e) => {\r\n                    setTeamName(e.target.value);\r\n                    setFormErrors((prev) => ({ ...prev, teamName: \"\" }));\r\n                    setSuccessMessage(\"\");\r\n                  }}\r\n                  placeholder=\"Enter team name\"\r\n                  className=\"w-full h-10 px-3 rounded-md border border-gray-300 text-sm text-black focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white transition-colors\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label className=\"block text-sm font-bold text-black mb-2 flex items-center gap-1.5\">\r\n                  <Users className=\"h-4 w-4 text-black\" /> Add Member\r\n                  {formErrors.teamMembers && (\r\n                    <span className=\"text-xs ml-2 text-red-500\">\r\n                      ({formErrors.teamMembers})\r\n                    </span>\r\n                  )}\r\n                </Label>\r\n                <Select\r\n                  open={isSelectOpen}\r\n                  onOpenChange={(open) => {\r\n                    setIsSelectOpen(open);\r\n                    if (open && searchInputRef.current) {\r\n                      setTimeout(() => searchInputRef.current.focus(), 0);\r\n                    }\r\n                  }}\r\n                  onValueChange={addTeamMember}\r\n                >\r\n                  <SelectTrigger\r\n                    ref={selectRef}\r\n                    onClick={handleSelectTriggerClick}\r\n                    className={`w-full h-10 border ${\r\n                      formErrors.teamMembers\r\n                        ? \"border-red-300\"\r\n                        : \"border-gray-300\"\r\n                    } bg-white text-black focus:ring-indigo-500 relative`}\r\n                  >\r\n                    <span className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm pointer-events-none\">\r\n                      Search and add Team members\r\n                    </span>\r\n                    <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContent className=\"bg-white border border-gray-200 max-h-60 overflow-y-auto\">\r\n                    <div className=\"p-2 border-b border-gray-200\">\r\n                      <Input\r\n                        ref={searchInputRef}\r\n                        type=\"text\"\r\n                        value={searchQuery}\r\n                        onChange={handleSearchInputChange}\r\n                        placeholder=\"Search Team Members\"\r\n                        className=\"w-full h-10 px-3 rounded-md border border-gray-300 text-sm text-black focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white transition-colors\"\r\n                        onKeyDown={(e) => e.stopPropagation()} // Prevent dropdown from closing on keypress\r\n                      />\r\n                    </div>\r\n                    <div className=\"p-2 text-sm text-green-600 font-medium border-b border-gray-200\">\r\n                      Available Members ({availableMembers.length} )\r\n                    </div>\r\n                    {isLoading ? (\r\n                      <div className=\"p-2 text-sm text-black\">Loading...</div>\r\n                    ) : availableMembers.length === 0 ? (\r\n                      <div className=\"p-2 text-sm text-black\">\r\n                        {searchQuery\r\n                          ? \"No matching team members found\"\r\n                          : \"No team members available\"}\r\n                      </div>\r\n                    ) : (\r\n                      availableMembers.map((member) => (\r\n                        <SelectItem\r\n                          key={member.value}\r\n                          value={member.value}\r\n                          className=\"text-black hover:bg-gray-100 focus:bg-gray-100\"\r\n                        >\r\n                          {member.label}\r\n                        </SelectItem>\r\n                      ))\r\n                    )}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex flex-col\">\r\n              <div className=\"flex justify-between items-center mb-3\">\r\n                <h3 className=\"text-sm font-bold text-black flex items-center gap-1.5\">\r\n                  <Users className=\"h-4 w-4 text-black\" /> Selected Team Members\r\n                </h3>\r\n                <span className=\"text-sm text-green-600 font-medium\">\r\n                  Total: {selectedMembers.length}{\" \"}\r\n                  {selectedMembers.length === 1 ? \"member\" : \"members\"}\r\n                </span>\r\n              </div>\r\n              {selectedMembers.length === 0 ? (\r\n                <div className=\"flex flex-col items-center justify-center py-12 text-black bg-white rounded-lg border border-gray-200 shadow-sm\">\r\n                  <Users className=\"h-8 w-8 mb-2 text-gray-400\" />\r\n                  <p className=\"text-sm font-medium\">\r\n                    No team members selected\r\n                  </p>\r\n                  <p className=\"text-xs text-gray-400\">\r\n                    Add team members using the selector above\r\n                  </p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"flex flex-wrap gap-4\">\r\n                  {selectedMembers.map((member) => (\r\n                    <div\r\n                      key={member.value}\r\n                      className=\"flex items-center gap-4 p-4 bg-white rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow w-full sm:w-[calc(50%-0.5rem)] lg:w-[calc(33.33%-0.67rem)]\"\r\n                    >\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"text-sm font-medium text-black\">\r\n                          {member.label}\r\n                        </div>\r\n                        <div className=\"text-sm text-black\">{member.email}</div>\r\n                        <div className=\"text-sm text-black\">\r\n                          {member.designation}\r\n                        </div>\r\n                      </div>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"icon\"\r\n                        onClick={() => removeTeamMember(member)}\r\n                        className=\"text-red-500 hover:text-red-700 hover:bg-red-50\"\r\n                        aria-label={`Remove ${member.label}`}\r\n                      >\r\n                        <Trash2 className=\"h-5 w-5\" />\r\n                      </Button>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {formErrors.general && (\r\n              <div className=\"mt-4 p-4 bg-red-50 border border-red-200 rounded-md\">\r\n                <p className=\"text-sm text-red-600 font-medium\">\r\n                  {formErrors.general}\r\n                </p>\r\n              </div>\r\n            )}\r\n            {successMessage && (\r\n              <div className=\"mt-4 p-4 bg-green-50 border border-green-200 rounded-md\">\r\n                <p className=\"text-sm text-green-600 font-medium\">\r\n                  {successMessage}\r\n                </p>\r\n              </div>\r\n            )}\r\n          </form>\r\n        </CardContent>\r\n      </Card>\r\n    </DialogContent>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7942, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/team/components/EditTeamModal.jsx"],"sourcesContent":["\r\n\r\nimport { useState, useEffect, useMemo, useRef } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { updateTeam } from '@/modules/project-management/team/slices/teamMembersSlice';\r\nimport { fetchTeamDetails, fetchTeamMembers } from \"@/modules/project-management/team/slices/teamSlice\";\r\nimport { fetchTeamByProjectId } from \"@/modules/project-management/team/slices/viewTeamByProjectIdSlice\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { DialogContent } from \"@/components/ui/dialog\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { Users, Check, Loader2, Trash2 } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\n\r\nexport default function EditTeamModal({ projectId, teamId, onClose }) {\r\n  const dispatch = useDispatch();\r\n  const selectedTeam = useSelector((state) => state.team.selectedTeam);\r\n  const { allMembers } = useSelector((state) => state.team);\r\n  const { teamsByProject: teams, status } = useSelector((state) => state.team);\r\n  const updateTeamError = useSelector((state) => state.teamMembers.error || \"\");\r\n\r\n  const [selectedMembers, setSelectedMembers] = useState([]);\r\n  const [teamName, setTeamName] = useState(\"\");\r\n  const [teamLeadName, setTeamLeadName] = useState(\"\");\r\n  const [teamLeadId, setTeamLeadId] = useState(\"\"); // Add teamLeadId state\r\n  const [formErrors, setFormErrors] = useState({});\r\n  const [successMessage, setSuccessMessage] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [isSelectOpen, setIsSelectOpen] = useState(false);\r\n  const selectRef = useRef(null);\r\n  const searchInputRef = useRef(null);\r\n\r\n  // Fetch team details, all members, and teams by project\r\n  useEffect(() => {\r\n    if (teamId) {\r\n      dispatch(fetchTeamDetails(teamId));\r\n    }\r\n    dispatch(fetchTeamMembers());\r\n    if (projectId) {\r\n      dispatch(fetchTeamByProjectId(projectId));\r\n    }\r\n  }, [dispatch, teamId, projectId]);\r\n\r\n  // Populate form data when selectedTeam changes\r\n  useEffect(() => {\r\n    if (selectedTeam && selectedTeam.teamId === teamId) {\r\n      setTeamName(selectedTeam.teamName || \"\");\r\n      setTeamLeadName(selectedTeam.teamLeadName || \"\");\r\n      setTeamLeadId(selectedTeam.teamLeadId || \"N/A\"); // Set teamLeadId\r\n      setSelectedMembers(\r\n        (selectedTeam.teamMembers || []).map((member) => ({\r\n          value: member.memberId,\r\n          label: member.memberName,\r\n          email: member.email || \"N/A\",\r\n          designation: member.role || \"Not specified\",\r\n        }))\r\n      );\r\n    }\r\n  }, [selectedTeam, teamId]);\r\n\r\n  // Filter unique members from other teams\r\n  const existingMember = teams\r\n    .filter((team) => team.teamId !== teamId)\r\n    .flatMap((team) => team.teamMembers);\r\n\r\n  const uniqueMembers = Array.from(\r\n    new Map(\r\n      existingMember\r\n        .filter((member) => member.memberId)\r\n        .map((member) => [member.memberId.trim(), member])\r\n    ).values()\r\n  );\r\n\r\n  const uniqueMemberIds = new Set(uniqueMembers.map((member) => member.memberId.trim()));\r\n\r\n  const finalMembers = allMembers.filter((member) => {\r\n    if (!member.employeeID) return false;\r\n    return !uniqueMemberIds.has(member.employeeID.trim());\r\n  });\r\n\r\n  const memberOptions = useMemo(() => {\r\n    if (!finalMembers || !Array.isArray(finalMembers)) return [];\r\n    return finalMembers.map((member) => ({\r\n      value: member.employeeID,\r\n      label: member.name || `${member.firstName} ${member.lastName}`.trim(),\r\n      email: member.email || \"N/A\",\r\n      firstName: member.firstName,\r\n      lastName: member.lastName,\r\n      id: member.employeeID,\r\n      designation: member.designation || \"Not specified\",\r\n    }));\r\n  }, [finalMembers]);\r\n\r\n  const availableMembers = useMemo(() => {\r\n    return memberOptions.filter(\r\n      (member) =>\r\n        !selectedMembers.some((selected) => selected.value === member.value) &&\r\n        (searchQuery === \"\" ||\r\n          member.label.toLowerCase().includes(searchQuery.toLowerCase()))\r\n    );\r\n  }, [memberOptions, selectedMembers, searchQuery]);\r\n\r\n  const validateForm = () => {\r\n    const errors = {};\r\n    if (!teamName.trim()) errors.teamName = \"Team name is required\";\r\n    if (!teamLeadName.trim()) errors.teamLeadName = \"Team lead name is required\";\r\n    if (selectedMembers.length === 0) errors.teamMembers = \"Please select at least one team member\";\r\n    return errors;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const errors = validateForm();\r\n    if (Object.keys(errors).length > 0) {\r\n      setFormErrors(errors);\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setFormErrors({});\r\n    setSuccessMessage(\"\");\r\n\r\n    const formattedTeamMembers = selectedMembers.map((member) => ({\r\n      memberId: member.value,\r\n      memberName: member.label,\r\n      role: member.designation,\r\n      email: member.email,\r\n    }));\r\n\r\n    const teamData = {\r\n      teamId,\r\n      teamName: teamName.trim(),\r\n      projectId: selectedTeam?.projectId || projectId || \"\", // Ensure projectId is included\r\n      projectName: selectedTeam?.projectName || \"N/A\", // Include projectName if available\r\n      teamLeadName: teamLeadName.trim(),\r\n      teamLeadId: teamLeadId || \"N/A\", // Include teamLeadId\r\n      teamMembers: formattedTeamMembers,\r\n    };\r\n\r\n    try {\r\n      const resultAction = await dispatch(updateTeam({ teamId, teamData }));\r\n      dispatch(fetchTeamByProjectId(projectId));\r\n      if (updateTeam.fulfilled.match(resultAction)) {\r\n        toast.success(resultAction.payload?.message || \"Team updated successfully!\");\r\n        setTeamName(\"\");\r\n        setTeamLeadName(\"\");\r\n        setTeamLeadId(\"\");\r\n        setSelectedMembers([]);\r\n        setSearchQuery(\"\");\r\n        onClose();\r\n      } else {\r\n        throw new Error(resultAction.payload?.message || \"Failed to update team\");\r\n      }\r\n    } catch (err) {\r\n      toast.error(err.message || updateTeamError || \"Failed to update team\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const addTeamMember = (value) => {\r\n    const selected = memberOptions.find((member) => member.value === value);\r\n    if (selected && !selectedMembers.some((m) => m.value === selected.value)) {\r\n      setSelectedMembers([...selectedMembers, selected]);\r\n      setFormErrors((prev) => ({ ...prev, teamMembers: \"\" }));\r\n      setSuccessMessage(\"\");\r\n      setSearchQuery(\"\");\r\n      setIsSelectOpen(true);\r\n      setTimeout(() => {\r\n        if (searchInputRef.current) {\r\n          searchInputRef.current.focus();\r\n        }\r\n      }, 0);\r\n    }\r\n  };\r\n\r\n  const removeTeamMember = (memberToRemove) => {\r\n    setSelectedMembers(selectedMembers.filter((member) => member.value !== memberToRemove.value));\r\n    setFormErrors((prev) => ({ ...prev, teamMembers: \"\" }));\r\n    setSuccessMessage(\"\");\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setTeamName(\"\");\r\n    setTeamLeadName(\"\");\r\n    setTeamLeadId(\"\");\r\n    setSelectedMembers([]);\r\n    setFormErrors({});\r\n    setSuccessMessage(\"\");\r\n    setSearchQuery(\"\");\r\n    setIsSelectOpen(false);\r\n    onClose();\r\n  };\r\n\r\n  const handleSearchInputChange = (e) => {\r\n    setSearchQuery(e.target.value);\r\n    setIsSelectOpen(true);\r\n  };\r\n\r\n  const handleSelectTriggerClick = () => {\r\n    setIsSelectOpen(true);\r\n    setTimeout(() => {\r\n      if (searchInputRef.current) {\r\n        searchInputRef.current.focus();\r\n      }\r\n    }, 0);\r\n  };\r\n\r\n  // Loading state\r\n  if (!selectedTeam || selectedTeam.teamId !== teamId || status === \"loading\") {\r\n    return (\r\n      <DialogContent>\r\n        <div>Loading...</div>\r\n      </DialogContent>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <DialogContent className=\"h-[90vh] max-w-full sm:max-w-4xl md:max-w-5xl lg:max-w-6xl p-0 border-none overflow-y-auto max-h-[85vh]\">\r\n      <Card className=\"w-full bg-white border border-gray-200 shadow-lg rounded-xl\">\r\n        <CardHeader className=\"sticky top-0 bg-white px-6 py-4 border-b border-gray-200 z-10\">\r\n          <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 sm:gap-0\">\r\n            <CardTitle className=\"text-xl font-bold text-black flex items-center gap-2\">\r\n              <Users className=\"h-6 w-6 text-black\" /> Edit Team\r\n            </CardTitle>\r\n            <div className=\"flex items-center gap-3\">\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={handleClose}\r\n                className=\"px-4 py-2 bg-white text-black border border-gray-300 rounded-md hover:bg-gray-100 text-sm font-medium transition-colors\"\r\n                aria-label=\"Cancel\"\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                type=\"submit\"\r\n                onClick={handleSubmit}\r\n                disabled={isLoading}\r\n                className=\"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700 disabled:bg-indigo-400 disabled:cursor-not-allowed transition-colors\"\r\n                aria-label=\"Update team\"\r\n              >\r\n                {isLoading ? (\r\n                  <>\r\n                    <Loader2 className=\"inline-block mr-2 animate-spin h-4 w-4\" />\r\n                    Updating...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Check className=\"inline-block mr-2 h-4 w-4\" />\r\n                    Update Team\r\n                  </>\r\n                )}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent className=\"p-6 bg-white\">\r\n          <form className=\"space-y-6\">\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-6\">\r\n              <div>\r\n                <Label className=\"block text-sm font-bold text-black mb-2 flex items-center gap-1.5\">\r\n                  <Users className=\"h-4 w-4 text-black\" /> Team Name\r\n                  {formErrors.teamName && (\r\n                    <span className=\"text-xs ml-2 text-red-500\">({formErrors.teamName})</span>\r\n                  )}\r\n                </Label>\r\n                <Input\r\n                  type=\"text\"\r\n                  value={teamName}\r\n                  onChange={(e) => {\r\n                    setTeamName(e.target.value);\r\n                    setFormErrors((prev) => ({ ...prev, teamName: \"\" }));\r\n                    setSuccessMessage(\"\");\r\n                  }}\r\n                  placeholder=\"Enter team name\"\r\n                  className=\"w-full h-10 px-3 rounded-md border border-gray-300 text-sm text-black focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white transition-colors\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label className=\"block text-sm font-bold text-black mb-2 flex items-center gap-1.5\">\r\n                  <Users className=\"h-4 w-4 text-black\" /> Team Lead Name\r\n                  {formErrors.teamLeadName && (\r\n                    <span className=\"text-xs ml-2 text-red-500\">({formErrors.teamLeadName})</span>\r\n                  )}\r\n                </Label>\r\n                <div className=\"w-full h-10 px-3 py-2 rounded-md border border-gray-300 text-sm text-black bg-gray-100\">\r\n                  {teamLeadName || \"N/A\"}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"grid grid-cols-1 gap-6\">\r\n              <div>\r\n                <Label className=\"block text-sm font-bold text-black mb-2 flex items-center gap-1.5\">\r\n                  <Users className=\"h-4 w-4 text-black\" /> Add Member\r\n                  {formErrors.teamMembers && (\r\n                    <span className=\"text-xs ml-2 text-red-500\">({formErrors.teamMembers})</span>\r\n                  )}\r\n                </Label>\r\n                <Select\r\n                  open={isSelectOpen}\r\n                  onOpenChange={(open) => {\r\n                    setIsSelectOpen(open);\r\n                    if (open && searchInputRef.current) {\r\n                      setTimeout(() => searchInputRef.current.focus(), 0);\r\n                    }\r\n                  }}\r\n                  onValueChange={addTeamMember}\r\n                >\r\n                  <SelectTrigger\r\n                    ref={selectRef}\r\n                    onClick={handleSelectTriggerClick}\r\n                    className={`w-full h-10 border ${formErrors.teamMembers ? \"border-red-300\" : \"border-gray-300\"} bg-white text-black focus:ring-indigo-500 relative`}\r\n                  >\r\n                    <span className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm pointer-events-none\">\r\n                      Search and add Team members\r\n                    </span>\r\n                    <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContent className=\"bg-white border border-gray-200 max-h-60 overflow-y-auto\">\r\n                    <div className=\"p-2 border-b border-gray-200\">\r\n                      <Input\r\n                        ref={searchInputRef}\r\n                        type=\"text\"\r\n                        value={searchQuery}\r\n                        onChange={handleSearchInputChange}\r\n                        placeholder=\"Search Team Members\"\r\n                        className=\"w-full h-10 px-3 rounded-md border border-gray-300 text-sm text-black focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white transition-colors\"\r\n                        onKeyDown={(e) => e.stopPropagation()}\r\n                      />\r\n                    </div>\r\n                    <div className=\"p-2 text-sm text-green-600 font-medium border-b border-gray-200\">\r\n                      Available Members ({availableMembers.length} )\r\n                    </div>\r\n                    {isLoading ? (\r\n                      <div className=\"p-2 text-sm text-black\">Loading...</div>\r\n                    ) : availableMembers.length === 0 ? (\r\n                      <div className=\"p-2 text-sm text-black\">\r\n                        {searchQuery ? \"No matching team members found\" : \"No team members available\"}\r\n                      </div>\r\n                    ) : (\r\n                      availableMembers.map((member) => (\r\n                        <SelectItem\r\n                          key={member.value}\r\n                          value={member.value}\r\n                          className=\"text-black hover:bg-gray-100 focus:bg-gray-100\"\r\n                        >\r\n                          {member.label}\r\n                        </SelectItem>\r\n                      ))\r\n                    )}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex flex-col\">\r\n              <div className=\"flex justify-between items-center mb-3\">\r\n                <h3 className=\"text-sm font-bold text-black flex items-center gap-1.5\">\r\n                  <Users className=\"h-4 w-4 text-black\" /> Selected Team Members\r\n                </h3>\r\n                <span className=\"text-sm text-green-600 font-medium\">\r\n                  Total: {selectedMembers.length} {selectedMembers.length === 1 ? \"member\" : \"members\"}\r\n                </span>\r\n              </div>\r\n              {selectedMembers.length === 0 ? (\r\n                <div className=\"flex flex-col items-center justify-center py-12 text-black bg-white rounded-lg border border-gray-200 shadow-sm\">\r\n                  <Users className=\"h-8 w-8 mb-2 text-gray-400\" />\r\n                  <p className=\"text-sm font-medium\">No team members selected</p>\r\n                  <p className=\"text-xs text-gray-400\">Add team members using the selector above</p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"flex flex-wrap gap-4\">\r\n                  {selectedMembers.map((member) => (\r\n                    <div\r\n                      key={member.value}\r\n                      className=\"flex items-center gap-4 p-4 bg-white rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow w-full sm:w-[calc(50%-0.5rem)] lg:w-[calc(33.33%-0.67rem)]\"\r\n                    >\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"text-sm font-medium text-black\">{member.label}</div>\r\n                        <div className=\"text-sm text-black\">{member.email}</div>\r\n                        <div className=\"text-sm text-black\">{member.designation}</div>\r\n                      </div>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"icon\"\r\n                        onClick={() => removeTeamMember(member)}\r\n                        className=\"text-red-500 hover:text-red-700 hover:bg-red-50\"\r\n                        aria-label={`Remove ${member.label}`}\r\n                      >\r\n                        <Trash2 className=\"h-5 w-5\" />\r\n                      </Button>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {formErrors.general && (\r\n              <div className=\"mt-4 p-4 bg-red-50 border border-red-200 rounded-md\">\r\n                <p className=\"text-sm text-red-600 font-medium\">{formErrors.general}</p>\r\n              </div>\r\n            )}\r\n            {successMessage && (\r\n              <div className=\"mt-4 p-4 bg-green-50 border border-green-200 rounded-md\">\r\n                <p className=\"text-sm text-green-600 font-medium\">{successMessage}</p>\r\n              </div>\r\n            )}\r\n          </form>\r\n        </CardContent>\r\n      </Card>\r\n    </DialogContent>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 8738, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/team/components/DeleteTeamModal.jsx"],"sourcesContent":["\r\n\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { DialogContent, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { FiTrash } from \"react-icons/fi\";\r\nimport { deleteTeam } from \"@/modules/project-management/team/slices/teamSlice\"; // Assuming deleteTeam action exists\r\n\r\nexport default function DeleteTeamModal({ teamId, onClose }) {\r\n  const dispatch = useDispatch();\r\n  const { teamsByProject: teams } = useSelector((state) => state.team);\r\n  const teamName = teams.find((t) => t.teamId === teamId)?.teamName || \"Unknown\";\r\n\r\n  const handleDelete = () => {\r\n    dispatch(deleteTeam(teamId)); // Dispatch delete action\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <DialogContent className=\"max-w-full sm:max-w-md md:max-w-lg p-6 border-none\">\r\n      <DialogHeader>\r\n        <DialogTitle className=\"text-lg font-semibold text-gray-800 flex items-center gap-2\">\r\n          <FiTrash aria-hidden=\"true\" />\r\n          Delete Team\r\n        </DialogTitle>\r\n      </DialogHeader>\r\n      <p className=\"text-sm text-gray-600\">\r\n        Are you sure you want to delete the team \"{teamName}\"? This action cannot be undone.\r\n      </p>\r\n      <DialogFooter className=\"mt-6\">\r\n        <Button\r\n          variant=\"outline\"\r\n          onClick={onClose}\r\n          className=\"border-gray-300 text-gray-800 hover:bg-gray-50 rounded-md text-sm h-10 px-4\"\r\n          aria-label=\"Cancel\"\r\n        >\r\n          Cancel\r\n        </Button>\r\n        <Button\r\n          onClick={handleDelete}\r\n          className=\"bg-red-500 hover:bg-red-600 text-white rounded-md text-sm h-10 px-4\"\r\n          aria-label=\"Delete team\"\r\n        >\r\n          Delete\r\n        </Button>\r\n      </DialogFooter>\r\n    </DialogContent>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA,kSAAiF,oCAAoC;;;;;;;AAEtG,SAAS,gBAAgB,EAAE,MAAM,EAAE,OAAO,EAAE;IACzD,MAAM,WAAW,CAAA,GAAA,yJAAA,CAAA,cAAW,AAAD;IAC3B,MAAM,EAAE,gBAAgB,KAAK,EAAE,GAAG,CAAA,GAAA,yJAAA,CAAA,cAAW,AAAD,EAAE,CAAC,QAAU,MAAM,IAAI;IACnE,MAAM,WAAW,MAAM,IAAI,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,SAAS,YAAY;IAErE,MAAM,eAAe;QACnB,SAAS,CAAA,GAAA,sKAAA,CAAA,aAAU,AAAD,EAAE,UAAU,yBAAyB;QACvD;IACF;IAEA,qBACE,8OAAC,kIAAA,CAAA,gBAAa;QAAC,WAAU;;0BACvB,8OAAC,kIAAA,CAAA,eAAY;0BACX,cAAA,8OAAC,kIAAA,CAAA,cAAW;oBAAC,WAAU;;sCACrB,8OAAC,8IAAA,CAAA,UAAO;4BAAC,eAAY;;;;;;wBAAS;;;;;;;;;;;;0BAIlC,8OAAC;gBAAE,WAAU;;oBAAwB;oBACQ;oBAAS;;;;;;;0BAEtD,8OAAC,kIAAA,CAAA,eAAY;gBAAC,WAAU;;kCACtB,8OAAC,kIAAA,CAAA,SAAM;wBACL,SAAQ;wBACR,SAAS;wBACT,WAAU;wBACV,cAAW;kCACZ;;;;;;kCAGD,8OAAC,kIAAA,CAAA,SAAM;wBACL,SAAS;wBACT,WAAU;wBACV,cAAW;kCACZ;;;;;;;;;;;;;;;;;;AAMT","debugId":null}},
    {"offset": {"line": 8842, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/team/components/TeamView.jsx"],"sourcesContent":["\r\n\r\n\r\n\r\nimport { useSelector } from \"react-redux\";\r\nimport { FiUser, FiBriefcase, FiMail, FiUsers, FiEdit, FiTrash } from \"react-icons/fi\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { useCurrentUser } from \"@/hooks/useCurrentUser\";\r\n\r\nexport default function ViewTeam({ teamId, project,onEdit, onDelete }) {\r\n  // Fetch team data from Redux store\r\n  const { teamsByProject: teams } = useSelector((state) => state.team);\r\n  const team = teams.find((t) => t.teamId === teamId);\r\n  const { currentUser, isTeamLead } = useCurrentUser(project?.data?.teamLeadId);\r\n\r\n  return (\r\n    <div className=\"p-3 bg-white  space-y-3\">\r\n      {team ? (\r\n        <>\r\n          <div className=\"flex  flex-col sm:flex-row justify-between items-start sm:items-center gap-2\">\r\n            <h3 className=\"text-base font-bold text-gray-900\">{team.teamName}</h3>\r\n            {\r\n              (currentUser?.role === \"cpc\" || isTeamLead || currentUser?.position === \"Team Lead\") &&(\r\n\r\n            <div className=\"flex gap-1.5\">\r\n\r\n              <Button\r\n                onClick={onEdit}\r\n                className=\"bg-blue-700 hover:bg-blue-800 text-white rounded-full p-1.5 h-7 w-7 flex items-center justify-center transition-colors duration-200\"\r\n                aria-label={`Edit team ${team.teamName}`}\r\n              >\r\n                <FiEdit className=\"h-3.5 w-3.5\" />\r\n              </Button>\r\n              <Button\r\n                onClick={onDelete}\r\n                className=\"bg-red-700 hover:bg-red-800 text-white rounded-full p-1.5 h-7 w-7 flex items-center justify-center transition-colors duration-200\"\r\n                aria-label={`Delete team ${team.teamName}`}\r\n              >\r\n                <FiTrash className=\"h-3.5 w-3.5\" />\r\n              </Button>\r\n            </div>\r\n              )\r\n            }\r\n          </div>\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2\">\r\n            <div className=\"space-y-0.5\">\r\n              <p className=\"text-xs font-medium text-gray-600 flex items-center gap-1\">\r\n                <FiBriefcase className=\"h-3 w-3\" aria-hidden=\"true\" />\r\n                Project Name\r\n              </p>\r\n              <p className=\"text-xs text-gray-800\">{team.projectName}</p>\r\n            </div>\r\n            <div className=\"space-y-0.5\">\r\n              <p className=\"text-xs font-medium text-gray-600 flex items-center gap-1\">\r\n                <FiUser className=\"h-3 w-3\" aria-hidden=\"true\" />\r\n                Team Lead\r\n              </p>\r\n              <p className=\"text-xs text-gray-800\">{team.teamLeadName}</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"space-y-1.5\">\r\n            <h4 className=\"text-sm font-bold text-gray-900 flex items-center gap-1\">\r\n              <FiUsers className=\"h-3.5 w-3.5\" aria-hidden=\"true\" />\r\n              All Members {team.teamMembers.length > 0 ? `(${team.teamMembers.length})` : \"\"}\r\n            </h4>\r\n            <div className=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2\">\r\n              {team.teamMembers.map((member) => (\r\n                <div\r\n                  key={member.memberId}\r\n                  className=\"p-2 bg-gray-50 rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow duration-200 space-y-0.5\"\r\n                >\r\n                  <p className=\"text-xs font-medium text-gray-900\">{member.memberName}</p>\r\n                  <p className=\"text-xs text-gray-600\">{member.role}</p>\r\n               \r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <p className=\"text-xs text-gray-600 text-center\">No team selected</p>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAIA;AACA;AACA;AACA;;;;;;AAEe,SAAS,SAAS,EAAE,MAAM,EAAE,OAAO,EAAC,MAAM,EAAE,QAAQ,EAAE;IACnE,mCAAmC;IACnC,MAAM,EAAE,gBAAgB,KAAK,EAAE,GAAG,CAAA,GAAA,yJAAA,CAAA,cAAW,AAAD,EAAE,CAAC,QAAU,MAAM,IAAI;IACnE,MAAM,OAAO,MAAM,IAAI,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK;IAC5C,MAAM,EAAE,WAAW,EAAE,UAAU,EAAE,GAAG,CAAA,GAAA,8HAAA,CAAA,iBAAc,AAAD,EAAE,SAAS,MAAM;IAElE,qBACE,8OAAC;QAAI,WAAU;kBACZ,qBACC;;8BACE,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,WAAU;sCAAqC,KAAK,QAAQ;;;;;;wBAE9D,CAAC,aAAa,SAAS,SAAS,cAAc,aAAa,aAAa,WAAW,mBAErF,8OAAC;4BAAI,WAAU;;8CAEb,8OAAC,kIAAA,CAAA,SAAM;oCACL,SAAS;oCACT,WAAU;oCACV,cAAY,CAAC,UAAU,EAAE,KAAK,QAAQ,EAAE;8CAExC,cAAA,8OAAC,8IAAA,CAAA,SAAM;wCAAC,WAAU;;;;;;;;;;;8CAEpB,8OAAC,kIAAA,CAAA,SAAM;oCACL,SAAS;oCACT,WAAU;oCACV,cAAY,CAAC,YAAY,EAAE,KAAK,QAAQ,EAAE;8CAE1C,cAAA,8OAAC,8IAAA,CAAA,UAAO;wCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;8BAMzB,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAE,WAAU;;sDACX,8OAAC,8IAAA,CAAA,cAAW;4CAAC,WAAU;4CAAU,eAAY;;;;;;wCAAS;;;;;;;8CAGxD,8OAAC;oCAAE,WAAU;8CAAyB,KAAK,WAAW;;;;;;;;;;;;sCAExD,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAE,WAAU;;sDACX,8OAAC,8IAAA,CAAA,SAAM;4CAAC,WAAU;4CAAU,eAAY;;;;;;wCAAS;;;;;;;8CAGnD,8OAAC;oCAAE,WAAU;8CAAyB,KAAK,YAAY;;;;;;;;;;;;;;;;;;8BAG3D,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,WAAU;;8CACZ,8OAAC,8IAAA,CAAA,UAAO;oCAAC,WAAU;oCAAc,eAAY;;;;;;gCAAS;gCACzC,KAAK,WAAW,CAAC,MAAM,GAAG,IAAI,CAAC,CAAC,EAAE,KAAK,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG;;;;;;;sCAE9E,8OAAC;4BAAI,WAAU;sCACZ,KAAK,WAAW,CAAC,GAAG,CAAC,CAAC,uBACrB,8OAAC;oCAEC,WAAU;;sDAEV,8OAAC;4CAAE,WAAU;sDAAqC,OAAO,UAAU;;;;;;sDACnE,8OAAC;4CAAE,WAAU;sDAAyB,OAAO,IAAI;;;;;;;mCAJ5C,OAAO,QAAQ;;;;;;;;;;;;;;;;;yCAY9B,8OAAC;YAAE,WAAU;sBAAoC;;;;;;;;;;;AAIzD","debugId":null}},
    {"offset": {"line": 9082, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/team/components/TeamManagement.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { FiUsers, FiPlus } from \"react-icons/fi\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\";\r\nimport { fetchTeamByProjectId } from \"@/modules/project-management/team/slices/teamSlice\";\r\nimport CreateTeamModal from \"./CreateTeamModal\";\r\nimport EditTeamModal from \"./EditTeamModal\";\r\nimport DeleteTeamModal from \"./DeleteTeamModal\";\r\nimport ViewTeam from \"./TeamView\";\r\nimport { useCurrentUser } from \"@/hooks/useCurrentUser\";\r\nimport {Tooltip, TooltipContent, TooltipTrigger } from \"@/components/ui/tooltip\";\r\n\r\nexport default function TeamManagement({ projectId, project }) {\r\n  const dispatch = useDispatch();\r\n  const [selectedTeamId, setSelectedTeamId] = useState(null);\r\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\r\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\r\n  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\r\n  const [isDetailsModalOpen, setIsDetailsModalOpen] = useState(false);\r\n\r\n  // Fetch teams from Redux store\r\n  const {\r\n    teamsByProject: teams,\r\n    status,\r\n    error,\r\n  } = useSelector((state) => state.team);\r\n  const { currentUser, isTeamLead } = useCurrentUser(project?.data?.teamLeadId);\r\n\r\n  // Fetch teams on mount and select first team for larger screens\r\n \r\n\r\n  useEffect(() => {\r\n    if (!isCreateModalOpen || !isEditModalOpen ) {\r\n      dispatch(fetchTeamByProjectId(projectId));\r\n    }\r\n  }, [isCreateModalOpen,isEditModalOpen, projectId, dispatch]);\r\n\r\n  // Automatically select the first team for larger screens when teams are loaded\r\n  useEffect(() => {\r\n    if (\r\n      status === \"succeeded\" &&\r\n      teams.length > 0 &&\r\n      !selectedTeamId &&\r\n      window.innerWidth >= 768\r\n    ) {\r\n      setSelectedTeamId(teams[0].teamId);\r\n    }\r\n  }, [status, teams, selectedTeamId]);\r\n\r\n  // Handle team selection\r\n  const handleTeamSelect = (teamId) => {\r\n    setSelectedTeamId(teamId);\r\n    if (window.innerWidth < 768) {\r\n      setIsDetailsModalOpen(true); // Open modal only on small screens when a team is selected\r\n    }\r\n  };\r\n\r\n  // Find selected team for ViewTeam\r\n  const selectedTeam = teams.find((team) => team.teamId === selectedTeamId);\r\n\r\n  return (\r\n    <Card className=\"bg-white border border-gray-200 shadow-md\">\r\n      <div className=\"grid grid-cols-1 md:grid-cols-[280px_1fr] gap-0\">\r\n        {/* Left Sidebar: Team List */}\r\n        <div className=\"bg-white border-r border-gray-200 h-screen overflow-y-auto\">\r\n          <div className=\"p-4 border-b border-gray-200 flex justify-between items-center\">\r\n            <h2 className=\"text-lg font-bold text-gray-800 flex items-center gap-2\">\r\n              <FiUsers aria-hidden=\"true\" />\r\n              Teams\r\n              <span className=\"text-sm text-green-600 ml-2\">\r\n                ({teams.length} Total)\r\n              </span>\r\n            </h2>\r\n            {/* {(currentUser?.role === \"cpc\" ||\r\n              isTeamLead ||\r\n              currentUser?.position === \"Team Lead\") && (\r\n              <Button\r\n                onClick={() => setIsCreateModalOpen(true)}\r\n                className=\"bg-blue-500 hover:bg-blue-600 text-white rounded-md text-sm p-2\"\r\n                aria-label=\"Create new team\"\r\n              >\r\n                <FiPlus className=\"h-5 w-5\" />\r\n              </Button>\r\n            )} */}\r\n{(currentUser?.role === \"cpc\" ||\r\n  isTeamLead ||\r\n  currentUser?.position === \"Team Lead\") && (\r\n  <Tooltip>\r\n    <TooltipTrigger asChild>\r\n      <Button\r\n        onClick={() => setIsCreateModalOpen(true)}\r\n        className=\"bg-blue-500 hover:bg-blue-600 text-white rounded-md text-sm p-2\"\r\n        aria-label=\"Create new team\"\r\n      >\r\n        <FiPlus className=\"h-5 w-5\" />\r\n      </Button>\r\n    </TooltipTrigger>\r\n    <TooltipContent\r\n      side=\"top\"\r\n      align=\"center\"\r\n      sideOffset={6}\r\n      className=\"text-white bg-black border border-gray-200 rounded-md p-2 text-xs shadow-sm\"\r\n    >\r\n      Create Team\r\n    </TooltipContent>\r\n  </Tooltip>\r\n)}\r\n\r\n        \r\n          </div>\r\n\r\n          {status === \"succeeded\" && teams.length === 0 && (\r\n            <p className=\"p-4 text-sm text-gray-600\">No teams found.</p>\r\n          )}\r\n          {teams.length > 0 && (\r\n            <ul className=\"divide-y divide-gray-200\">\r\n              {teams.map((team) => (\r\n                <li\r\n                  key={team.teamId}\r\n                  className={`p-4 cursor-pointer transition-colors duration-200 text-sm font-medium ${\r\n                    selectedTeamId === team.teamId\r\n                      ? \"bg-indigo-100 text-indigo-800\"\r\n                      : \"text-gray-800 hover:bg-gray-50\"\r\n                  }`}\r\n                  onClick={() => handleTeamSelect(team.teamId)}\r\n                  role=\"button\"\r\n                  tabIndex={0}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === \"Enter\" || e.key === \" \") {\r\n                      handleTeamSelect(team.teamId);\r\n                    }\r\n                  }}\r\n                  aria-label={`Select team ${team.teamName}`}\r\n                >\r\n                  {team.teamName}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n\r\n        {/* Right Content: Team Details (Large Screens Only) */}\r\n        {selectedTeam && (\r\n          <div className=\"hidden md:block\">\r\n            <CardHeader>\r\n              <CardTitle className=\"text-xl font-bold text-gray-800\">\r\n                Team Details\r\n              </CardTitle>\r\n            </CardHeader>\r\n            <ViewTeam\r\n              project={project}\r\n              teamId={selectedTeam.teamId}\r\n              onEdit={() => setIsEditModalOpen(true)}\r\n              onDelete={() => {\r\n                setIsDeleteModalOpen(true);\r\n              }}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Details Modal (Small Screens Only) */}\r\n      {selectedTeam && (\r\n        <Dialog open={isDetailsModalOpen} onOpenChange={setIsDetailsModalOpen}>\r\n          <DialogContent className=\"max-h-[80vh] w-full sm:max-w-md overflow-y-auto p-4\">\r\n            <ViewTeam\r\n              project={project}\r\n              teamId={selectedTeam.teamId}\r\n              onEdit={() => setIsEditModalOpen(true)}\r\n              onDelete={() => setIsDeleteModalOpen(true)}\r\n            />\r\n          </DialogContent>\r\n        </Dialog>\r\n      )}\r\n\r\n      {/* Create Team Modal */}\r\n      <Dialog open={isCreateModalOpen} onOpenChange={setIsCreateModalOpen}>\r\n        <DialogContent>\r\n          <CreateTeamModal\r\n            projectId={projectId}\r\n            isOpen={isCreateModalOpen}\r\n            onClose={() => setIsCreateModalOpen(false)}\r\n          />\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Edit Team Modal */}\r\n      {selectedTeam && (\r\n        <Dialog open={isEditModalOpen} onOpenChange={setIsEditModalOpen}>\r\n          <DialogContent>\r\n            <EditTeamModal\r\n              open={isEditModalOpen}\r\n              projectId={projectId}\r\n              teamId={selectedTeam.teamId}\r\n              onClose={() => setIsEditModalOpen(false)}\r\n            />\r\n          </DialogContent>\r\n        </Dialog>\r\n      )}\r\n\r\n      {/* Delete Team Modal */}\r\n      {selectedTeam && (\r\n        <Dialog open={isDeleteModalOpen} onOpenChange={setIsDeleteModalOpen}>\r\n          <DialogContent>\r\n            <DeleteTeamModal\r\n              teamId={selectedTeam.teamId}\r\n              onClose={() => {\r\n                setIsDeleteModalOpen(false);\r\n              }}\r\n            />\r\n          </DialogContent>\r\n        </Dialog>\r\n      )}\r\n    </Card>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 9431, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/project/components/ViewProjectById.js"],"sourcesContent":["\r\n\r\n\r\n\r\n\"use client\";\r\n\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  fetchProjectById,\r\n  changeProjectStatus,\r\n  resetSuccessMessage,\r\n} from \"@/modules/project-management/project/slices/projectSlice\";\r\nimport {\r\n  FiArrowLeft,\r\n  FiDownload,\r\n  FiUsers,\r\n  FiList,\r\n  FiFileText,\r\n  FiInfo,\r\n  FiCalendar,\r\n  FiUser,\r\n  FiPaperclip,\r\n  FiFile,\r\n} from \"react-icons/fi\";\r\nimport {\r\n  Briefcase,\r\n  TrendingUp,\r\n  FileStack,\r\n  BugIcon,\r\n  Dock,\r\n} from \"lucide-react\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport AllTaskListByProjectId from \"@/modules/project-management/task/components/AllTaskListByProjectId\";\r\nimport { toast } from \"sonner\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { LuFolderClock } from \"react-icons/lu\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogFooter,\r\n} from \"@/components/ui/dialog\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { useCurrentUser } from \"@/hooks/useCurrentUser\";\r\nimport ProjectbugList from \"../../issues/components/bug/ProjectbugList\";\r\nimport Spinner from \"@/components/loader/Spinner\";\r\nimport ProjectwiseAllMeetingAndMom from \"@/modules/meet/components/ProjectwiseAllmeetingMom\";\r\nimport { formatDateUTC } from \"@/utils/formatDate\";\r\nimport DocumentManager from \"@/modules/document/components/DocumentManager\";\r\nimport ProjectMetrics from \"../../analytics/components/ProjectMetrics\";\r\nimport TeamManagement from \"@/modules/project-management/team/components/TeamManagement\";\r\nimport {\r\n  Popover,\r\n  PopoverTrigger,\r\n  PopoverContent,\r\n} from \"@/components/ui/popover\";\r\n\r\nexport default function ViewProjectById({ projectId }) {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const initialTab = searchParams.get(\"tab\") || \"details\";\r\n  const [activeTab, setActiveTab] = useState(initialTab);\r\n  const [isProjectActive, setIsProjectActive] = useState(false);\r\n\r\n  // Dynamic tabs with overflow detection only on sm/md (below lg)\r\n  const tabsContainerRef = useRef(null);\r\n  const [visibleTabs, setVisibleTabs] = useState([]);\r\n  const [hiddenTabs, setHiddenTabs] = useState([]);\r\n  const [showMoreMenu, setShowMoreMenu] = useState(false);\r\n  const [isLargeScreen, setIsLargeScreen] = useState(true);\r\n\r\n  const tabs = [\r\n    { id: \"details\", label: \"Details\", icon: <FiInfo className=\"h-5 w-5\" /> },\r\n    { id: \"team\", label: \"Team\", icon: <FiUsers className=\"h-5 w-5\" /> },\r\n    { id: \"task\", label: \"Task\", icon: <FiList className=\"h-5 w-5\" /> },\r\n    { id: \"issues\", label: \"Issues\", icon: <BugIcon className=\"h-5 w-5\" /> },\r\n    { id: \"mom\", label: \"Mom\", icon: <LuFolderClock className=\"h-5 w-5\" /> },\r\n    { id: \"document\", label: \"Document\", icon: <Dock className=\"h-5 w-5\" /> },\r\n  ];\r\n\r\n  // Track screen size: lg+ shows all tabs, sm/md uses dynamic overflow\r\n  useEffect(() => {\r\n    const checkScreenSize = () => {\r\n      const large = window.innerWidth >= 1024; // Tailwind 'lg' breakpoint\r\n      setIsLargeScreen(large);\r\n      if (large) {\r\n        setVisibleTabs(tabs);\r\n        setHiddenTabs([]);\r\n      } else {\r\n        updateTabVisibility();\r\n      }\r\n    };\r\n\r\n    const updateTabVisibility = () => {\r\n      if (!tabsContainerRef.current) return;\r\n\r\n      const container = tabsContainerRef.current;\r\n      const containerWidth = container.offsetWidth;\r\n      const tabElements = container.querySelectorAll(\".tab-button\");\r\n      const moreButton = container.querySelector(\".more-button\");\r\n      const moreWidth = moreButton ? moreButton.offsetWidth + 24 : 100; // padding + margin\r\n\r\n      let totalWidth = 0;\r\n      let visibleCount = 0;\r\n\r\n      tabElements.forEach((btn, index) => {\r\n        const btnWidth = btn.offsetWidth + 16; // gap + padding\r\n        if (totalWidth + btnWidth < containerWidth - moreWidth) {\r\n          totalWidth += btnWidth;\r\n          visibleCount = index + 1;\r\n        }\r\n      });\r\n\r\n      setVisibleTabs(tabs.slice(0, visibleCount));\r\n      setHiddenTabs(tabs.slice(visibleCount));\r\n    };\r\n\r\n    checkScreenSize();\r\n    window.addEventListener(\"resize\", checkScreenSize);\r\n    return () => window.removeEventListener(\"resize\", checkScreenSize);\r\n  }, []);\r\n\r\n  // Recalculate visible/hidden on tab change or content load (for sm/md only)\r\n  useEffect(() => {\r\n    if (!isLargeScreen) {\r\n      const timer = setTimeout(() => {\r\n        if (tabsContainerRef.current) {\r\n          updateTabVisibility();\r\n        }\r\n      }, 50);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [activeTab, isLargeScreen,tabs]);\r\n\r\n  const updateTabVisibility = () => {}; // Defined inside useEffect above\r\n\r\n  useEffect(() => {\r\n    if (activeTab !== initialTab) {\r\n      const params = new URLSearchParams(window.location.search);\r\n      params.set(\"tab\", activeTab);\r\n      router.replace(`?${params.toString()}`, { scroll: false });\r\n    }\r\n  }, [activeTab, initialTab, router]);\r\n\r\n  const dispatch = useDispatch();\r\n  const { project, status, error, successMessage } = useSelector((state) => state.project);\r\n  const { currentUser, isTeamLead } = useCurrentUser(project?.data?.teamLeadId);\r\n\r\n  useEffect(() => {\r\n    if (projectId) {\r\n      dispatch(fetchProjectById(projectId));\r\n    }\r\n  }, [projectId, dispatch]);\r\n\r\n  const [newStatus, setNewStatus] = useState(\"\");\r\n  const [statusUpdateMessage, setStatusUpdateMessage] = useState(\"\");\r\n  const [isStatusModalOpen, setIsStatusModalOpen] = useState(false);\r\n  const [isConfirmModalOpen, setIsConfirmModalOpen] = useState(false);\r\n  const [isDownloading, setIsDownloading] = useState(false);\r\n  const [hasFetchedAfterStatusChange, setHasFetchedAfterStatusChange] = useState(false);\r\n  const [showLoader, setShowLoader] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (project?.data?.status && project.data.status !== \"Planned\") {\r\n      setIsProjectActive(true);\r\n    }\r\n  }, [project?.data?.status]);\r\n\r\n  useEffect(() => {\r\n    if (successMessage && !hasFetchedAfterStatusChange) {\r\n      setStatusUpdateMessage(successMessage);\r\n      setHasFetchedAfterStatusChange(true);\r\n      dispatch(fetchProjectById(projectId));\r\n      setNewStatus(\"\");\r\n      setTimeout(() => {\r\n        setStatusUpdateMessage(\"\");\r\n        dispatch(resetSuccessMessage());\r\n        setHasFetchedAfterStatusChange(false);\r\n      }, 3000);\r\n    }\r\n    if (error?.statusChange) {\r\n      setStatusUpdateMessage(error.statusChange);\r\n      setTimeout(() => setStatusUpdateMessage(\"\"), 3000);\r\n    }\r\n  }, [successMessage, error?.statusChange, dispatch, projectId, hasFetchedAfterStatusChange]);\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => setShowLoader(false), 1000);\r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n\r\n  const handleDownload = (url, filename) => {\r\n    setIsDownloading(true);\r\n    const link = document.createElement(\"a\");\r\n    link.href = url;\r\n    link.download = filename;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n    setTimeout(() => setIsDownloading(false), 1000);\r\n  };\r\n\r\n  const handleStatusSubmit = () => {\r\n    if (newStatus) {\r\n      setIsStatusModalOpen(false);\r\n      setIsConfirmModalOpen(true);\r\n    }\r\n  };\r\n\r\n  const handleConfirmStatusChange = () => {\r\n    if (newStatus && projectId) {\r\n      dispatch(changeProjectStatus({ projectId, status: newStatus }));\r\n      setIsConfirmModalOpen(false);\r\n      toast.success(\"Status Updated!\");\r\n      setIsProjectActive(true);\r\n    }\r\n  };\r\n\r\n  const statusOptions = [\"In Progress\", \"Completed\"];\r\n\r\n  const canEditStatus =\r\n    currentUser?.role?.toLowerCase() === \"cpc\" ||\r\n    isTeamLead ||\r\n    currentUser?.position === \"Team Lead\";\r\n\r\n  const getFileTypeInfo = (filename) => {\r\n    const ext = filename.split(\".\").pop().toLowerCase();\r\n    switch (ext) {\r\n      case \"pdf\":\r\n        return { icon: <FiFileText className=\"h-5 w-5 text-red-600\" />, bg: \"bg-red-50\" };\r\n      case \"doc\":\r\n      case \"docx\":\r\n        return { icon: <FiFileText className=\"h-5 w-5 text-blue-600\" />, bg: \"bg-blue-50\" };\r\n      case \"xls\":\r\n      case \"xlsx\":\r\n        return { icon: <FiFileText className=\"h-5 w-5 text-green-600\" />, bg: \"bg-green-50\" };\r\n      case \"ppt\":\r\n      case \"pptx\":\r\n        return { icon: <FiFileText className=\"h-5 w-5 text-orange-600\" />, bg: \"bg-orange-50\" };\r\n      case \"csv\":\r\n        return { icon: <FiFileText className=\"h-5 w-5 text-yellow-600\" />, bg: \"bg-yellow-50\" };\r\n      default:\r\n        return { icon: <FiFile className=\"h-5 w-5 text-gray-600\" />, bg: \"bg-gray-50\" };\r\n    }\r\n  };\r\n\r\n  if (status?.fetchProject === \"loading\" || showLoader) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center w-full h-[calc(100vh-64px)]\">\r\n        <Spinner />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <Card className=\"shadow-2xl border border-gray-200 mx-auto max-w-full\">\r\n        <CardHeader className=\"border-b border-gray-200 bg-white\">\r\n          {/* <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 \">\r\n            <div className=\"flex items-center gap-4\">\r\n              <button\r\n                onClick={() => router.back()}\r\n                className=\"inline-flex items-center gap-2 bg-blue-600 text-white font-medium text-sm px-4 py-2 rounded-md shadow-sm hover:bg-blue-700 transition-colors duration-200\"\r\n              >\r\n                <FiArrowLeft className=\"h-4 w-4\" />\r\n                Back\r\n              </button>\r\n              <CardTitle className=\"text-2xl font-bold text-gray-900\">\r\n                {project?.data?.projectName || \"Unnamed Project\"}\r\n              </CardTitle>\r\n            </div>\r\n            <div className=\"flex items-center gap-4\">\r\n              {statusUpdateMessage && (\r\n                <p\r\n                  className={`text-sm font-medium ${\r\n                    successMessage ? \"text-green-600\" : \"text-red-600\"\r\n                  }`}\r\n                >\r\n                  {statusUpdateMessage}\r\n                </p>\r\n              )}\r\n              {canEditStatus && (\r\n                <Button\r\n                  onClick={() => setIsStatusModalOpen(true)}\r\n                  className=\"bg-blue-600 text-white hover:bg-blue-700\"\r\n                >\r\n                  {isProjectActive ? \"Update Status\" : \"Start Project\"}\r\n                </Button>\r\n              )}\r\n            </div>\r\n          </div> */}\r\n          <div className=\"flex flex-wrap items-center justify-between gap-3 sm:gap-4\">\r\n  {/* Left side: Back + Project name */}\r\n  <div className=\"flex items-center min-w-0 gap-2 sm:gap-4\">\r\n    <Button\r\n      onClick={() => router.back()}\r\n      className=\"inline-flex shrink-0 items-center gap-2 bg-blue-600 text-white font-medium text-xs sm:text-sm px-3 sm:px-4 py-2 rounded-md shadow-sm hover:bg-blue-700 transition-colors duration-200\"\r\n    >\r\n      <FiArrowLeft className=\"h-4 w-4\" />\r\n      <span className=\"hidden sm:inline\">Back</span>\r\n    </Button>\r\n\r\n    <CardTitle\r\n      className=\"truncate text-base sm:text-xl font-semibold text-gray-900 max-w-[150px] sm:max-w-[250px] md:max-w-[400px]\"\r\n      title={project?.data?.projectName || \"Unnamed Project\"}\r\n    >\r\n      {project?.data?.projectName || \"Unnamed Project\"}\r\n    </CardTitle>\r\n  </div>\r\n\r\n  {/* Right side: Status + message */}\r\n  <div className=\"flex items-center flex-wrap justify-end gap-2 sm:gap-4 mt-2 sm:mt-0\">\r\n    {statusUpdateMessage && (\r\n      <p\r\n        className={`text-xs sm:text-sm font-medium ${\r\n          successMessage ? \"text-green-600\" : \"text-red-600\"\r\n        }`}\r\n      >\r\n        {statusUpdateMessage}\r\n      </p>\r\n    )}\r\n    {canEditStatus && (\r\n      <Button\r\n        onClick={() => setIsStatusModalOpen(true)}\r\n        className=\"bg-blue-600 text-white hover:bg-blue-700 text-xs sm:text-sm px-3 sm:px-4 py-2\"\r\n      >\r\n        {isProjectActive ? \"Update Status\" : \"Start Project\"}\r\n      </Button>\r\n    )}\r\n  </div>\r\n</div>\r\n\r\n        </CardHeader>\r\n\r\n        <CardContent className=\"p-0\">\r\n          {!isProjectActive && project?.data?.status === \"Planned\" && canEditStatus ? (\r\n            // <div className=\"p-16 text-center bg-gray-100 min-h-screen flex flex-col justify-center item-center\">\r\n            //   <h2 className=\"text-3xl font-bold text-gray-800 mb-6\">\r\n            //     Project is in Planned Stage\r\n            //   </h2>\r\n            //   <p className=\"text-lg text-gray-600 mb-10 max-w-3xl mx-auto\">\r\n            //     This project is currently in the planning phase. To access tasks, team, issues, documents, and other features, \r\n            //     please start the project by changing its status to In Progress.\r\n            //   </p>\r\n            //   <Button\r\n            //     onClick={() => {\r\n            //       setNewStatus(\"In Progress\");\r\n            //       setIsStatusModalOpen(true);\r\n            //     }}\r\n            //     className=\"bg-blue-600 text-white hover:bg-blue-700 text-lg px-8 py-4 rounded-xl shadow-lg w-[1\"\r\n            //   >\r\n            //     Start Project Now\r\n            //   </Button>\r\n            // </div>\r\n            <div className=\"min-h-screen flex items-center justify-center  p-6\">\r\n  <div className=\" p-10 max-w-md w-full text-center\">\r\n    <h2 className=\"text-2xl font-semibold text-gray-800 mb-4\">\r\n      Project is in Planned Stage\r\n    </h2>\r\n    <p className=\"text-gray-600 mb-8 leading-relaxed\">\r\n      This project is currently in the planning phase. To access tasks, team, issues, \r\n      documents, and other features, please start the project by changing its status \r\n      to <span className=\"font-medium text-blue-600\">In Progress</span>.\r\n    </p>\r\n    <Button\r\n      onClick={() => {\r\n        setNewStatus(\"In Progress\");\r\n        setIsStatusModalOpen(true);\r\n      }}\r\n      className=\"bg-blue-600 text-white hover:bg-blue-700 text-lg px-6 py-3 rounded-xl shadow-md transition-all duration-200 w-full\"\r\n    >\r\n      Start Project Now\r\n    </Button>\r\n  </div>\r\n</div>\r\n\r\n          ) : (\r\n            <>\r\n              {/* Responsive Tab Navigation - 3 dots only on sm/md */}\r\n              <div className=\"border-b border-gray-200 bg-white sticky top-0 z-10\">\r\n                <div\r\n                  ref={tabsContainerRef}\r\n                  className=\"flex overflow-x-auto scrollbar-hide px-4\"\r\n                  onScroll={() => setShowMoreMenu(false)}\r\n                >\r\n                  {visibleTabs.map((tab) => (\r\n                    <button\r\n                      key={tab.id}\r\n                      onClick={() => setActiveTab(tab.id)}\r\n                      className={`tab-button flex items-center gap-3 px-6 py-4 text-sm font-medium border-b-2 transition-all duration-300 flex-shrink-0 whitespace-nowrap ${\r\n                        activeTab === tab.id\r\n                          ? \"border-blue-600 text-blue-600 bg-blue-50\"\r\n                          : \"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300 hover:bg-gray-50\"\r\n                      }`}\r\n                    >\r\n                      {tab.icon}\r\n                      <span className=\"hidden sm:inline\">{tab.label}</span>\r\n                    </button>\r\n                  ))}\r\n\r\n                  {/* 3-dot More menu - only shows when needed on sm/md */}\r\n                  {!isLargeScreen && hiddenTabs.length > 0 && (\r\n                    <Popover open={showMoreMenu} onOpenChange={setShowMoreMenu}>\r\n                      <PopoverTrigger asChild>\r\n                        <button\r\n                          className={`more-button flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition-all duration-300 whitespace-nowrap ${\r\n                            showMoreMenu\r\n                              ? \"border-blue-600 text-blue-600 bg-blue-50\"\r\n                              : \"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300 hover:bg-gray-50\"\r\n                          }`}\r\n                        >\r\n                          <span className=\"text-2xl leading-none\">⋯</span>\r\n                          <span className=\"hidden sm:inline\">More</span>\r\n                        </button>\r\n                      </PopoverTrigger>\r\n                      <PopoverContent className=\"w-56 p-0 rounded-xl shadow-2xl border border-gray-200 mt-2\">\r\n                        <div className=\"py-2\">\r\n                          {hiddenTabs.map((tab) => (\r\n                            <button\r\n                              key={tab.id}\r\n                              onClick={() => {\r\n                                setActiveTab(tab.id);\r\n                                setShowMoreMenu(false);\r\n                              }}\r\n                              className=\"flex items-center gap-3 w-full px-4 py-3 text-sm text-left hover:bg-blue-50 hover:text-blue-600 transition-all duration-200 first:rounded-t-xl last:rounded-b-xl\"\r\n                            >\r\n                              {tab.icon}\r\n                              <span>{tab.label}</span>\r\n                            </button>\r\n                          ))}\r\n                        </div>\r\n                      </PopoverContent>\r\n                    </Popover>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Tab Content */}\r\n              <div className=\"p-2 min-h-screen\">\r\n                {activeTab === \"details\" && (\r\n                  <div className=\"space-y-12\">\r\n                    \r\n                      <ProjectMetrics projectId={projectId} />\r\n                  \r\n\r\n                    <div className=\"\">\r\n                      <h3 className=\"text-2xl font-bold text-gray-900 flex items-center gap-3 mb-8 border-b-2 border-gray-200 pb-4\">\r\n                        <FiInfo className=\"h-7 w-7 text-blue-600\" />\r\n                        Project Information\r\n                      </h3>\r\n                      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-10\">\r\n                        <div className=\"space-y-7\">\r\n                          <div className=\"flex items-start gap-5 p-4 bg-green-50 rounded-xl\">\r\n                            <div className=\"p-3 bg-green-100 rounded-lg\">\r\n                              <Briefcase className=\"h-6 w-6 text-green-600\" />\r\n                            </div>\r\n                            <div>\r\n                              <p className=\"text-sm font-semibold text-gray-600\">Project ID</p>\r\n                              <p className=\"text-xl font-bold text-gray-900 mt-1\">{project?.data?.projectId || \"N/A\"}</p>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"flex items-start gap-5 p-4 bg-green-50 rounded-xl\">\r\n                            <div className=\"p-3 bg-green-100 rounded-lg\">\r\n                              <FiPaperclip className=\"h-6 w-6 text-green-600\" />\r\n                            </div>\r\n                            <div>\r\n                              <p className=\"text-sm font-semibold text-gray-600\">Category</p>\r\n                              <p className=\"text-xl font-bold text-gray-900 mt-1\">\r\n                                {project?.data?.category\r\n                                  ? project.data.category\r\n                                      .toLowerCase()\r\n                                      .split(\" \")\r\n                                      .map((w) => w[0].toUpperCase() + w.slice(1))\r\n                                      .join(\" \")\r\n                                  : \"N/A\"}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                          {project?.data?.clientId?.trim() && (\r\n                            <div className=\"flex items-start gap-5 p-4 bg-green-50 rounded-xl\">\r\n                              <div className=\"p-3 bg-green-100 rounded-lg\">\r\n                                <FiUser className=\"h-6 w-6 text-green-600\" />\r\n                              </div>\r\n                              <div>\r\n                                <p className=\"text-sm font-semibold text-gray-600\">Client ID</p>\r\n                                <p className=\"text-xl font-bold text-gray-900 mt-1\">{project.data.clientId}</p>\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                          <div className=\"flex items-start gap-5 p-4 bg-green-50 rounded-xl\">\r\n                            <div className=\"p-3 bg-green-100 rounded-lg\">\r\n                              <FiUser className=\"h-6 w-6 text-green-600\" />\r\n                            </div>\r\n                            <div>\r\n                              <p className=\"text-sm font-semibold text-gray-600\">Team Lead</p>\r\n                              <p className=\"text-xl font-bold text-gray-900 mt-1\">{project?.data?.teamLeadName || \"Unassigned\"}</p>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-7\">\r\n                          <div className=\"flex items-start gap-5 p-4 bg-blue-50 rounded-xl\">\r\n                            <div className=\"p-3 bg-blue-100 rounded-lg\">\r\n                              <TrendingUp className=\"h-6 w-6 text-blue-600\" />\r\n                            </div>\r\n                            <div>\r\n                              <p className=\"text-sm font-semibold text-gray-600\">Status</p>\r\n                              <span\r\n                                className={`inline-flex items-center px-5 py-2 rounded-full text-sm font-bold mt-2 ${\r\n                                  project?.data?.status === \"Completed\"\r\n                                    ? \"bg-green-100 text-green-800\"\r\n                                    : project?.data?.status === \"In Progress\"\r\n                                    ? \"bg-blue-100 text-blue-800\"\r\n                                    : \"bg-gray-100 text-gray-800\"\r\n                                }`}\r\n                              >\r\n                                {project?.data?.status || \"N/A\"}\r\n                              </span>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"flex items-start gap-5 p-4 bg-purple-50 rounded-xl\">\r\n                            <div className=\"p-3 bg-purple-100 rounded-lg\">\r\n                              <FiCalendar className=\"h-6 w-6 text-purple-600\" />\r\n                            </div>\r\n                            <div>\r\n                              <p className=\"text-sm font-semibold text-gray-600\">Onboarding Date</p>\r\n                              <p className=\"text-xl font-bold text-gray-900 mt-1\">\r\n                                {project?.data?.createdAt ? formatDateUTC(project.data.createdAt) : \"N/A\"}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                          {project?.data?.startDate && (\r\n                            <div className=\"flex items-start gap-5 p-4 bg-indigo-50 rounded-xl\">\r\n                              <div className=\"p-3 bg-indigo-100 rounded-lg\">\r\n                                <FiCalendar className=\"h-6 w-6 text-indigo-600\" />\r\n                              </div>\r\n                              <div>\r\n                                <p className=\"text-sm font-semibold text-gray-600\">Start Date</p>\r\n                                <p className=\"text-xl font-bold text-gray-900 mt-1\">{formatDateUTC(project.data.startDate)}</p>\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                          {project?.data?.endDate && (\r\n                            <div className=\"flex items-start gap-5 p-4 bg-red-50 rounded-xl\">\r\n                              <div className=\"p-3 bg-red-100 rounded-lg\">\r\n                                <FiCalendar className=\"h-6 w-6 text-red-600\" />\r\n                              </div>\r\n                              <div>\r\n                                <p className=\"text-sm font-semibold text-gray-600\">End Date</p>\r\n                                <p className=\"text-xl font-bold text-gray-900 mt-1\">{formatDateUTC(project.data.endDate)}</p>\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                          {project?.data?.expectedEndDate && (\r\n                            <div className=\"flex items-start gap-5 p-4 bg-orange-50 rounded-xl\">\r\n                              <div className=\"p-3 bg-orange-100 rounded-lg\">\r\n                                <FiCalendar className=\"h-6 w-6 text-orange-600\" />\r\n                              </div>\r\n                              <div>\r\n                                <p className=\"text-sm font-semibold text-gray-600\">Expected End Date</p>\r\n                                <p className=\"text-xl font-bold text-gray-900 mt-1\">{formatDateUTC(project.data.expectedEndDate)}</p>\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {project?.data?.attachments?.length > 0 && (\r\n                      <div className=\"\">\r\n                        <h3 className=\"text-2xl font-bold text-gray-900 flex items-center gap-3 mb-8 border-b-2 border-gray-200 pb-4\">\r\n                          <FileStack className=\"h-7 w-7 text-blue-600\" />\r\n                          Attachments\r\n                        </h3>\r\n                        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\r\n                          {project.data.attachments.map((attachment, index) => {\r\n                            const fileInfo = getFileTypeInfo(attachment.filename);\r\n                            return (\r\n                              <div\r\n                                key={index}\r\n                                className=\"group relative bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl border border-gray-200 overflow-hidden hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300\"\r\n                              >\r\n                                <button\r\n                                  onClick={() => handleDownload(attachment.url, attachment.filename)}\r\n                                  disabled={isDownloading}\r\n                                  className=\"cursor-pointer w-full p-6 text-left space-y-4 hover:bg-white/50 transition-all\"\r\n                                >\r\n                                  <div className={`p-4 rounded-xl ${fileInfo.bg} w-fit shadow-md`}>\r\n                                    {fileInfo.icon}\r\n                                  </div>\r\n                                  <div>\r\n                                    <p className=\"font-semibold text-gray-900 truncate text-base\">{attachment.filename}</p>\r\n                                    <p className=\"text-sm text-gray-500 mt-1\">Click to download</p>\r\n                                  </div>\r\n                                  <div className=\"flex items-center gap-2 text-blue-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\r\n                                    <FiDownload className=\"h-5 w-5\" />\r\n                                    <span className=\"font-medium\">Download</span>\r\n                                  </div>\r\n                                </button>\r\n                              </div>\r\n                            );\r\n                          })}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    <div className=\"\">\r\n                      <h3 className=\"text-2xl font-bold text-gray-900 flex items-center gap-3 mb-8 border-b-2 border-gray-200 pb-4\">\r\n                        <FiFileText className=\"h-7 w-7 text-blue-600\" />\r\n                        Description\r\n                      </h3>\r\n                      <div className=\"prose prose-lg max-w-none\">\r\n                        {project?.data?.description ? (\r\n                          <p className=\"text-gray-700 whitespace-pre-wrap leading-relaxed text-base\">\r\n                            {project.data.description}\r\n                          </p>\r\n                        ) : (\r\n                          <p className=\"text-gray-500 italic text-lg\">No description provided for this project.</p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {activeTab === \"task\" && (\r\n                  <div className=\"\">\r\n                    <AllTaskListByProjectId project={project?.data} projectId={project?.data?.projectId} />\r\n                  </div>\r\n                )}\r\n\r\n                {activeTab === \"team\" && <TeamManagement project={project} projectId={projectId} />}\r\n\r\n                {activeTab === \"issues\" && (\r\n                  <div className=\"\">\r\n                    <ProjectbugList project={project} projectId={projectId} teamLeadId={project?.data?.teamLeadId} />\r\n                  </div>\r\n                )}\r\n\r\n                {activeTab === \"mom\" && (\r\n                  <div className=\"\">\r\n                    <ProjectwiseAllMeetingAndMom\r\n                      projectName={project?.data?.projectName}\r\n                      project={project?.data}\r\n                      projectId={projectId}\r\n                      teamLeadId={project?.data?.teamLeadId}\r\n                    />\r\n                  </div>\r\n                )}\r\n\r\n                {activeTab === \"document\" && (\r\n                  <div className=\"\">\r\n                    <DocumentManager\r\n                      project={project?.data}\r\n                      projectId={projectId}\r\n                      teamLeadId={project?.data?.teamLeadId}\r\n                    />\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Status Modals remain unchanged */}\r\n      <Dialog open={isStatusModalOpen} onOpenChange={setIsStatusModalOpen}>\r\n        <DialogContent className=\"sm:max-w-md rounded-2xl shadow-2xl\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"text-2xl font-bold text-gray-900\">\r\n              {project?.data?.status === \"Planned\" ? \"Start Project\" : \"Update Project Status\"}\r\n            </DialogTitle>\r\n          </DialogHeader>\r\n          <div className=\"py-6\">\r\n            <label className=\"block text-sm font-semibold text-gray-700 mb-3\">Select New Status</label>\r\n            <Select value={newStatus} onValueChange={setNewStatus}>\r\n              <SelectTrigger className=\"w-full h-12 text-base border-2\">\r\n                <SelectValue placeholder=\"Choose status\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                {statusOptions\r\n                  .filter((s) => s !== project?.data?.status)\r\n                  .map((s) => (\r\n                    <SelectItem key={s} value={s} className=\"text-base\">\r\n                      {s}\r\n                    </SelectItem>\r\n                  ))}\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n          <DialogFooter>\r\n            <Button variant=\"outline\" onClick={() => setIsStatusModalOpen(false)} className=\"px-6 py-3 text-base\">\r\n              Cancel\r\n            </Button>\r\n            <Button onClick={handleStatusSubmit} disabled={!newStatus} className=\"bg-blue-600 hover:bg-blue-700 px-8 py-3 text-base\">\r\n              Proceed\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <Dialog open={isConfirmModalOpen} onOpenChange={setIsConfirmModalOpen}>\r\n        <DialogContent className=\"sm:max-w-md rounded-2xl shadow-2xl\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"text-2xl font-bold text-gray-900\">Confirm Status Change</DialogTitle>\r\n          </DialogHeader>\r\n          <div className=\"py-6\">\r\n            <p className=\"text-lg text-gray-700\">\r\n              Are you sure you want to change the project status to{\" \"}\r\n              <span className=\"font-bold text-blue-600 text-xl\">{newStatus}</span>?\r\n            </p>\r\n          </div>\r\n          <DialogFooter>\r\n            <Button variant=\"outline\" onClick={() => setIsConfirmModalOpen(false)} className=\"px-6 py-3 text-base\">\r\n              Cancel\r\n            </Button>\r\n            <Button onClick={handleConfirmStatusChange} className=\"bg-blue-600 hover:bg-blue-700 px-8 py-3 text-base\">\r\n              Confirm\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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","debugId":null}}]
}