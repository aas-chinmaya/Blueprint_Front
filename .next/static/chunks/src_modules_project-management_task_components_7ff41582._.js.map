{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/task/components/CreateTaskModal.jsx"],"sourcesContent":["\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// \"use client\";\r\n\r\n// import { useState, useEffect, useMemo, useCallback } from \"react\";\r\n// import { useDispatch, useSelector } from \"react-redux\";\r\n// import { createTask } from \"@/modules/project-management/task/slices/taskSlice\";\r\n// import { fetchTeamByProjectId } from \"@/modules/project-management/team/slices/teamSlice\";\r\n// import { Edit, User, Flag, CalendarIcon, Info, X, Loader, Clock, AlertCircle } from \"lucide-react\";\r\n// import { toast } from \"sonner\";\r\n// import { Textarea } from \"@/components/ui/textarea\";\r\n// import { Button } from \"@/components/ui/button\";\r\n// import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\n// import { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\r\n// import { Calendar } from \"@/components/ui/calendar\";\r\n// import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogClose } from \"@/components/ui/dialog\";\r\n// import { Command, CommandEmpty, CommandGroup, CommandInput, CommandItem } from \"@/components/ui/command\";\r\n// import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n// import { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\r\n// import { format } from \"date-fns\";\r\n// import { cn } from \"@/lib/utils\";\r\n// import { Input } from \"@/components/ui/input\";\r\n\r\n// const priorityConfig = {\r\n//   Low: { color: \"bg-emerald-100 text-emerald-800\", icon: \"Low\", badge: \"Low\" },\r\n//   Medium: { color: \"bg-amber-100 text-amber-800\", icon: \"Medium\", badge: \"Medium\" },\r\n//   High: { color: \"bg-rose-100 text-rose-800\", icon: \"High\", badge: \"High\" },\r\n// };\r\n\r\n// const CreateTaskModal = ({ onTaskAssingn, projectId, project, onClose, isOpen }) => {\r\n//   const dispatch = useDispatch();\r\n//   const { teamsByProject: teams, status: teamStatus } = useSelector((state) => state.team);\r\n//   const { status: taskStatus, error: taskError } = useSelector((state) => state.task);\r\n\r\n//   const [formData, setFormData] = useState({\r\n//     title: \"\",\r\n//     description: \"\",\r\n//     priority: \"Medium\",\r\n//     projectId: projectId || \"\",\r\n//     projectName: project?.data?.name || \"\",\r\n//     teamId: \"\",\r\n//     assignedTo: [],        // ← NOW ARRAY OF FULL OBJECTS\r\n//     assignedBy: \"\",        // ← team lead name\r\n//   });\r\n\r\n//   const [selectedAssignees, setSelectedAssignees] = useState([]); // UI state\r\n//   const [errors, setErrors] = useState({});\r\n//   const [selectedTeam, setSelectedTeam] = useState(null);\r\n//   const [selectedDate, setSelectedDate] = useState(null);\r\n//   const [selectedTime, setSelectedTime] = useState(\"\");\r\n//   const [memberSearchQuery, setMemberSearchQuery] = useState(\"\");\r\n//   const [memberOpen, setMemberOpen] = useState(false);\r\n//   const [isInitialized, setIsInitialized] = useState(false);\r\n\r\n//   useEffect(() => {\r\n//     if (projectId && !isInitialized && isOpen) {\r\n//       dispatch(fetchTeamByProjectId(projectId));\r\n//       setIsInitialized(true);\r\n//     }\r\n//   }, [dispatch, projectId, isInitialized, isOpen]);\r\n\r\n//   useEffect(() => {\r\n//     if (isOpen) {\r\n//       setFormData({\r\n//         title: \"\",\r\n//         description: \"\",\r\n//         priority: \"\",\r\n//         projectId: projectId || \"\",\r\n//         projectName: project?.data?.name || \"\",\r\n//         teamId: \"\",\r\n//         assignedTo: [],\r\n//         assignedBy: \"\",\r\n//       });\r\n//       setSelectedAssignees([]);\r\n//       setErrors({});\r\n//       setSelectedTeam(null);\r\n//       setSelectedDate(null);\r\n//       setSelectedTime(\"\");\r\n//       setMemberSearchQuery(\"\");\r\n//     }\r\n//   }, [isOpen, projectId, project?.data?.name]);\r\n\r\n//   const handleTeamSelect = useCallback((value) => {\r\n//     const team = teams.find(t => t.teamId === value);\r\n//     setSelectedTeam(team);\r\n//     setFormData(prev => ({\r\n//       ...prev,\r\n//       teamId: value,\r\n//       assignedBy: team?.teamLeadName || \"Unknown\",\r\n//       assignedTo: [],\r\n//     }));\r\n//     setSelectedAssignees([]);\r\n//   }, [teams]);\r\n\r\n//   const availableMembers = useMemo(() => {\r\n//     if (!selectedTeam?.teamMembers) return [];\r\n//     const q = memberSearchQuery.toLowerCase();\r\n//     return selectedTeam.teamMembers\r\n//       .filter(m => \r\n//         m.memberName.toLowerCase().includes(q) &&\r\n//         !selectedAssignees.some(a => a.memberId === m.memberId)\r\n//       )\r\n//       .map(m => ({\r\n//         memberId: m.memberId,\r\n//         memberName: m.memberName,\r\n//         role: m.role || \"Member\",\r\n//       }));\r\n//   }, [selectedTeam, memberSearchQuery, selectedAssignees]);\r\n\r\n//   const toggleAssignee = useCallback((member) => {\r\n//     setSelectedAssignees(prev => {\r\n//       const exists = prev.some(a => a.memberId === member.memberId);\r\n//       const newList = exists\r\n//         ? prev.filter(a => a.memberId !== member.memberId)\r\n//         : [...prev, member];\r\n\r\n//       // Update assignedTo with full array of objects\r\n//       setFormData(f => ({\r\n//         ...f,\r\n//         assignedTo: newList,\r\n//       }));\r\n\r\n//       return newList;\r\n//     });\r\n//   }, []);\r\n\r\n//   const validate = useCallback(() => {\r\n//     const newErrors = {};\r\n//     if (!formData.title.trim()) newErrors.title = \"Title is required\";\r\n//     if (!formData.priority) newErrors.priority = \"Priority is required\";\r\n//     if (!selectedDate) newErrors.deadline = \"Deadline is required\";\r\n//     if (!formData.description.trim()) newErrors.description = \"Description is required\";\r\n//     if (!selectedTeam) newErrors.team = \"Team selection is required\";\r\n//     if (selectedAssignees.length === 0) newErrors.assignedTo = \"Assign at least one member\";\r\n//     setErrors(newErrors);\r\n//     return Object.keys(newErrors).length === 0;\r\n//   }, [formData, selectedDate, selectedTeam, selectedAssignees]);\r\n\r\n//   const handleSubmit = useCallback(async (e) => {\r\n//     e.preventDefault();\r\n//     if (!validate()) {\r\n//       toast.error(\"Please fill all required fields\");\r\n//       return;\r\n//     }\r\n\r\n//     const pad = (n) => (n < 10 ? \"0\" + n : n);\r\n//     let deadline = null;\r\n//     if (selectedDate) {\r\n//       const d = new Date(selectedDate);\r\n//       const [h, m] = selectedTime ? selectedTime.split(\":\").map(Number) : [23, 59];\r\n//       d.setHours(h, m, 0, 0);\r\n//       deadline = `${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())}T${pad(d.getHours())}:${pad(d.getMinutes())}:00`;\r\n//     }\r\n\r\n//     const payload = {\r\n//       ...formData,\r\n//       projectId: selectedTeam?.projectId || projectId,\r\n//       projectName: selectedTeam?.projectName || project?.data?.name || \"N/A\",\r\n//       teamId: selectedTeam?.teamId,\r\n//       deadline,\r\n//       assignedTo: formData.assignedTo,  // ← FULL ARRAY OF ALL ASSIGNEES\r\n//       assignedBy: formData.assignedBy,\r\n//     };\r\n\r\n//     try {\r\n//       await dispatch(createTask(payload)).unwrap();\r\n//       onTaskAssingn?.();\r\n//       toast.success(\"Task assigned successfully!\");\r\n//       onClose();\r\n//     } catch (err) {\r\n//       toast.error(taskError || \"Failed to assign task\");\r\n//     }\r\n//   }, [validate, formData, selectedDate, selectedTime, selectedTeam, dispatch, projectId, project, taskError, onTaskAssingn, onClose]);\r\n\r\n//   const displayDeadline = selectedDate\r\n//     ? `${format(selectedDate, \"MMM dd, yyyy\")}${selectedTime ? ` • ${selectedTime}` : \"\"}`\r\n//     : \"No deadline\";\r\n\r\n//   if (!isOpen) return null;\r\n\r\n//   return (\r\n//     <Dialog open={isOpen} onOpenChange={onClose}>\r\n//       <DialogContent className=\"w-full max-w-full h-[100vh] max-h-[100vh] sm:max-w-6xl sm:max-h-[85vh] bg-white shadow-lg border border-gray-200 rounded-lg text-black p-2\">\r\n//         <DialogHeader className=\"bg-gradient-to-r from-blue-50 to-indigo-50 px-4 py-2 border-b border-gray-200 sticky top-0 z-10\">\r\n//           <div className=\"flex justify-between items-center\">\r\n//             <DialogTitle className=\"text-base sm:text-lg font-bold text-gray-800 flex items-center\">\r\n//               <Edit className=\"mr-2 h-4 w-4 text-blue-500\" />\r\n//               Assign New Task\r\n//             </DialogTitle>\r\n//             <DialogClose asChild>\r\n//               <Button variant=\"ghost\" size=\"icon\" className=\"text-gray-500 hover:bg-gray-100 rounded-full h-7 w-7\">\r\n//                 <X className=\"h-3 w-3\" />\r\n//               </Button>\r\n//             </DialogClose>\r\n//           </div>\r\n//         </DialogHeader>\r\n\r\n//         <div className=\"p-4 sm:p-6 overflow-y-auto max-h-[calc(85vh-60px)]\">\r\n//           <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n\r\n//             {/* Title */}\r\n//             <div className=\"w-full\">\r\n//               <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n//                 <Edit className=\"h-4 w-4 text-blue-500 mr-2\" /> Task Title <span className=\"text-red-500 ml-1\">*</span>\r\n//               </label>\r\n//               <Textarea\r\n//                 value={formData.title}\r\n//                 onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n//                 className=\"w-full h-24 sm:h-28 md:h-32 bg-white border border-gray-300 rounded-lg text-sm resize-vertical focus:ring-2 focus:ring-blue-200 focus:border-blue-500 p-3\"\r\n//                 placeholder=\"Enter task title...\"\r\n//               />\r\n//               {errors.title && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><AlertCircle className=\"h-3 w-3 mr-1\" /> {errors.title}</p>}\r\n//             </div>\r\n\r\n//             {/* Grid */}\r\n//             <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n\r\n//               {/* Priority */}\r\n//               <div>\r\n//                 <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n//                   <Flag className=\"h-4 w-4 text-blue-500 mr-2\" /> Priority <span className=\"text-red-500 ml-1\">*</span>\r\n//                 </label>\r\n//                 <Select value={formData.priority} onValueChange={(v) => setFormData({ ...formData, priority: v })}>\r\n//                   <SelectTrigger className=\"w-full h-10 rounded-lg\">\r\n//                     <SelectValue>\r\n//                       {formData.priority && (\r\n//                         <div className=\"flex items-center gap-2\">\r\n                         \r\n//                           <span className={cn(\"px-2 py-1 rounded-full text-xs font-medium\", priorityConfig[formData.priority].color)}>\r\n//                             {priorityConfig[formData.priority].badge}\r\n//                           </span>\r\n//                         </div>\r\n//                       )}\r\n//                     </SelectValue>\r\n//                   </SelectTrigger>\r\n//                   <SelectContent>\r\n//                     {Object.entries(priorityConfig).map(([key, config]) => (\r\n//                       <SelectItem key={key} value={key}>\r\n//                         <div className=\"flex items-center gap-2\">\r\n                          \r\n//                           <span className={cn(\"px-2 py-1 rounded-full text-xs font-medium\", config.color)}>{config.badge}</span>\r\n//                         </div>\r\n//                       </SelectItem>\r\n//                     ))}\r\n//                   </SelectContent>\r\n//                 </Select>\r\n//               </div>\r\n\r\n//               {/* Deadline + Time */}\r\n//               <div>\r\n//                 <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n//                   <CalendarIcon className=\"h-4 w-4 text-blue-500 mr-2\" /> Deadline <span className=\"text-red-500 ml-1\">*</span>\r\n//                 </label>\r\n//                 <Popover>\r\n//                   <PopoverTrigger asChild>\r\n//                     <Button variant=\"outline\" className={cn(\"w-full justify-start h-10 rounded-lg\", !selectedDate && \"text-gray-500\")}>\r\n//                       <CalendarIcon className=\"mr-2 h-4 w-4\" />\r\n//                       {displayDeadline}\r\n//                     </Button>\r\n//                   </PopoverTrigger>\r\n//                   <PopoverContent className=\"w-auto p-0\" align=\"start\">\r\n//                     <Calendar mode=\"single\" selected={selectedDate} onSelect={setSelectedDate} initialFocus />\r\n//                     <div className=\"p-3 border-t flex items-center gap-2\">\r\n//                       <Clock className=\"h-4 w-4 text-gray-500\" />\r\n//                       <Input type=\"time\" value={selectedTime} onChange={(e) => setSelectedTime(e.target.value)} className=\"h-9\" />\r\n//                     </div>\r\n//                   </PopoverContent>\r\n//                 </Popover>\r\n//                 {errors.deadline && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><AlertCircle className=\"h-3 w-3 mr-1\" /> {errors.deadline}</p>}\r\n//               </div>\r\n\r\n//               {/* Team */}\r\n//               <div>\r\n//                 <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n//                   <User className=\"h-4 w-4 text-blue-500 mr-2\" /> Team <span className=\"text-red-500 ml-1\">*</span>\r\n//                 </label>\r\n//                 <Select value={selectedTeam?.teamId || \"\"} onValueChange={handleTeamSelect}>\r\n//                   <SelectTrigger className=\"w-full h-10 rounded-lg\">\r\n//                     <SelectValue placeholder={teamStatus === \"loading\" ? \"Loading teams...\" : \"Select team\"} />\r\n//                   </SelectTrigger>\r\n//                   <SelectContent>\r\n//                     {teams.map((team) => (\r\n//                       <SelectItem key={team.teamId} value={team.teamId}>{team.teamName}</SelectItem>\r\n//                     ))}\r\n//                   </SelectContent>\r\n//                 </Select>\r\n//               </div>\r\n//             </div>\r\n\r\n//             {/* Assigned To - Multiple in UI, assignedTo = full array */}\r\n//             <div>\r\n//               <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n//                 <User className=\"h-4 w-4 text-blue-500 mr-2\" /> Assigne <span className=\"text-red-500 ml-1\">*</span>\r\n//               </label>\r\n//               <div className=\"cursor-pointer flex flex-wrap items-center gap-3 min-h-10\">\r\n//                 <TooltipProvider>\r\n//                   {selectedAssignees.map((person) => (\r\n//                     <Tooltip key={person.memberId}>\r\n//                       <TooltipTrigger asChild>\r\n//                         <div className=\"relative group \">\r\n//                           <Avatar className=\"  h-10 w-10 ring-2 ring-white shadow\">\r\n//                             <AvatarFallback className=\"cursor-pointer bg-teal-600  text-white text-sm font-medium\">\r\n//                               {person.memberName.split(\" \").map((n) => n[0]).join(\"\").toUpperCase()}\r\n//                             </AvatarFallback>\r\n//                           </Avatar>\r\n//                           <button\r\n//                             type=\"button\"\r\n//                             onClick={() => toggleAssignee(person)}\r\n//                             className=\"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition\"\r\n//                           >\r\n//                             <X className=\"h-3 w-3\" />\r\n//                           </button>\r\n//                         </div>\r\n//                       </TooltipTrigger>\r\n//                       <TooltipContent>\r\n//                         <div>{person.memberName}</div>\r\n//                         <div className=\"text-xs text-gray-500\">{person.role}</div>\r\n//                       </TooltipContent>\r\n//                     </Tooltip>\r\n//                   ))}\r\n\r\n//                   <Popover open={memberOpen} onOpenChange={setMemberOpen}>\r\n//                     <PopoverTrigger asChild>\r\n//                       <button\r\n//                         type=\"button\"\r\n//                         disabled={!selectedTeam}\r\n//                         className={cn(\r\n//                           \"flex items-center justify-center w-10 h-10 rounded-full transition-all\",\r\n//                           selectedAssignees.length === 0\r\n//                             ? \"bg-gray-200 hover:bg-gray-300\"\r\n//                             : \"bg-gray-100 hover:bg-gray-200 border-2 border-dashed border-gray-300\"\r\n//                         )}\r\n//                       >\r\n//                         <User className=\"h-5 w-5 text-gray-500\" />\r\n//                       </button>\r\n//                     </PopoverTrigger>\r\n//                     <PopoverContent className=\"w-80 p-0\">\r\n//                       <Command>\r\n//                         <CommandInput placeholder=\"Search members...\" value={memberSearchQuery} onValueChange={setMemberSearchQuery} />\r\n//                         <CommandEmpty>No members found.</CommandEmpty>\r\n//                         <CommandGroup className=\"max-h-64 overflow-auto\">\r\n//                           {availableMembers.map((member) => (\r\n//                             <CommandItem key={member.memberId} onSelect={() => toggleAssignee(member)} className=\"cursor-pointer\">\r\n//                               <Avatar className=\"cursor-pointer h-8 w-8 mr-3\">\r\n//                                 <AvatarFallback className=\"text-xs\">{member.memberName.split(\" \").map(n => n[0]).join(\"\").toUpperCase()}</AvatarFallback>\r\n//                               </Avatar>\r\n//                               <div>\r\n//                                 <div className=\"font-medium\">{member.memberName}</div>\r\n//                                 <div className=\"text-xs text-gray-500\">{member.role}</div>\r\n//                               </div>\r\n//                             </CommandItem>\r\n//                           ))}\r\n//                         </CommandGroup>\r\n//                       </Command>\r\n//                     </PopoverContent>\r\n//                   </Popover>\r\n//                 </TooltipProvider>\r\n//               </div>\r\n//               {errors.assignedTo && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><AlertCircle className=\"h-3 w-3 mr-1\" /> {errors.assignedTo}</p>}\r\n//             </div>\r\n\r\n//             {/* Description */}\r\n//             <div className=\"w-full\">\r\n//               <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n//                 <Info className=\"h-4 w-4 text-blue-500 mr-2\" /> Description <span className=\"text-red-500 ml-1\">*</span>\r\n//               </label>\r\n//               <Textarea\r\n//                 value={formData.description}\r\n//                 onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n//                 className=\"w-full h-40 sm:h-48 md:h-52 bg-white border border-gray-300 rounded-lg text-sm resize-vertical focus:ring-2 focus:ring-blue-200 focus:border-blue-500 p-3\"\r\n//                 placeholder=\"Enter detailed task description...\"\r\n//               />\r\n//               {errors.description && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><AlertCircle className=\"h-3 w-3 mr-1\" /> {errors.description}</p>}\r\n//             </div>\r\n\r\n//             {/* Buttons */}\r\n//             <div className=\"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200 mt-6\">\r\n//               <Button type=\"button\" variant=\"outline\" onClick={onClose} className=\"w-full sm:w-auto bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 rounded-lg text-sm px-4 py-2 h-10\">\r\n//                 Cancel\r\n//               </Button>\r\n//               <Button\r\n//                 type=\"submit\"\r\n//                 disabled={!formData.title.trim() || !selectedDate || selectedAssignees.length === 0 || taskStatus === \"loading\"}\r\n//                 className=\"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm px-6 py-2 h-10 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed\"\r\n//               >\r\n//                 {taskStatus === \"loading\" ? (\r\n//                   <> <Loader className=\"h-4 w-4 animate-spin mr-2\" /> Assigning Task...</>\r\n//                 ) : (\r\n//                   \"Assign Task\"\r\n//                 )}\r\n//               </Button>\r\n//             </div>\r\n//           </form>\r\n//         </div>\r\n//       </DialogContent>\r\n//     </Dialog>\r\n//   );\r\n// };\r\n\r\n// export default CreateTaskModal;\r\n\r\n\r\n\r\n\"use client\";\r\n\r\nimport { useState, useEffect, useMemo, useCallback, useRef } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { createTask } from \"@/modules/project-management/task/slices/taskSlice\";\r\nimport { fetchTeamByProjectId } from \"@/modules/project-management/team/slices/teamSlice\";\r\nimport { Plus, User, Flag, CalendarIcon, Info, X, Loader } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\r\nimport { Calendar } from \"@/components/ui/calendar\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogClose } from \"@/components/ui/dialog\";\r\nimport { Command, CommandEmpty, CommandGroup, CommandInput, CommandItem } from \"@/components/ui/command\";\r\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\nimport { format } from \"date-fns\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { useCurrentUser } from \"@/hooks/useCurrentUser\";\r\n\r\nconst priorityConfig = {\r\n  Low: { color: \"bg-emerald-100 text-emerald-800\", badge: \"Low\" },\r\n  Medium: { color: \"bg-amber-100 text-amber-800\", badge: \"Medium\" },\r\n  High: { color: \"bg-rose-100 text-rose-800\", badge: \"High\" },\r\n};\r\n\r\nconst getInitials = (name = \"\") =>\r\n  name.trim().split(\" \").filter(Boolean).map((n) => n[0]).join(\"\").toUpperCase().slice(0, 2);\r\n\r\nconst CreateTaskModal = ({ onTaskAssingn, projectId, project, onClose, isOpen }) => {\r\n  const dispatch = useDispatch();\r\n  const { currentUser } = useCurrentUser();\r\n  const { teamsByProject: teams, status: teamStatus } = useSelector((state) => state.team);\r\n  const { status: taskStatus, error: taskError } = useSelector((state) => state.task);\r\n\r\n  const prevOpenRef = useRef(isOpen);\r\n\r\n  const [formData, setFormData] = useState({\r\n    title: \"\",\r\n    description: \"\",\r\n    priority: \"Medium\",\r\n    projectId: projectId || \"\",\r\n    projectName: project?.data?.name || \"\",\r\n    teamId: \"\",\r\n    assignedTo: [],\r\n    assignedBy: \"\",\r\n  });\r\n\r\n  const [selectedAssignees, setSelectedAssignees] = useState([]);\r\n  const [errors, setErrors] = useState({});\r\n  const [selectedTeam, setSelectedTeam] = useState(null);\r\n  const [selectedDateTime, setSelectedDateTime] = useState(null);\r\n  const [memberSearchQuery, setMemberSearchQuery] = useState(\"\");\r\n  const [memberOpen, setMemberOpen] = useState(false);\r\n  const [isInitialized, setIsInitialized] = useState(false);\r\n\r\n  // Reset form when modal truly opens\r\n  useEffect(() => {\r\n    const justOpened = isOpen && !prevOpenRef.current;\r\n    if (justOpened) {\r\n      setFormData({\r\n        title: \"\",\r\n        description: \"\",\r\n        priority: \"Medium\",\r\n        projectId: projectId || \"\",\r\n        projectName: project?.data?.name || \"\",\r\n        teamId: \"\",\r\n        assignedTo: [],\r\n        assignedBy: \"\",\r\n      });\r\n      setSelectedAssignees([]);\r\n      setErrors({});\r\n      setSelectedTeam(null);\r\n      setSelectedDateTime(null);\r\n      setMemberSearchQuery(\"\");\r\n      setMemberOpen(false);\r\n    }\r\n    prevOpenRef.current = isOpen;\r\n  }, [isOpen, projectId, project?.data?.name]);\r\n\r\n  useEffect(() => {\r\n    if (projectId && !isInitialized && isOpen) {\r\n      dispatch(fetchTeamByProjectId(projectId));\r\n      setIsInitialized(true);\r\n    }\r\n  }, [dispatch, projectId, isInitialized, isOpen]);\r\n\r\n  const handleTeamSelect = useCallback((value) => {\r\n    const team = teams.find(t => t.teamId === value);\r\n    setSelectedTeam(team);\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      teamId: value,\r\n      assignedBy: team?.teamLeadName || \"Unknown\",\r\n      assignedTo: [],\r\n    }));\r\n    setSelectedAssignees([]);\r\n  }, [teams]);\r\n\r\n  const availableMembers = useMemo(() => {\r\n    if (!selectedTeam?.teamMembers) return [];\r\n    const q = memberSearchQuery.toLowerCase();\r\n    return selectedTeam.teamMembers\r\n      .filter(m => \r\n        m.memberName.toLowerCase().includes(q) &&\r\n        !selectedAssignees.some(a => a.memberId === m.memberId)\r\n      )\r\n      .map(m => ({\r\n        memberId: m.memberId,\r\n        memberName: m.memberName,\r\n        role: m.role || \"Member\",\r\n      }));\r\n  }, [selectedTeam, memberSearchQuery, selectedAssignees]);\r\n\r\n  const toggleAssignee = useCallback((member) => {\r\n    setSelectedAssignees(prev => {\r\n      const exists = prev.some(a => a.memberId === member.memberId);\r\n      const newList = exists\r\n        ? prev.filter(a => a.memberId !== member.memberId)\r\n        : [...prev, member];\r\n\r\n      setFormData(f => ({ ...f, assignedTo: newList }));\r\n      return newList;\r\n    });\r\n  }, []);\r\n\r\n  const validate = useCallback(() => {\r\n    const newErrors = {};\r\n    if (!formData.title.trim()) newErrors.title = \"Title is required\";\r\n    if (!formData.priority) newErrors.priority = \"Priority is required\";\r\n    if (!selectedDateTime) newErrors.deadline = \"Deadline is required\";\r\n    if (!formData.description.trim()) newErrors.description = \"Description is required\";\r\n    if (!selectedTeam) newErrors.team = \"Team selection is required\";\r\n    if (selectedAssignees.length === 0) newErrors.assignedTo = \"Assign at least one member\";\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  }, [formData, selectedDateTime, selectedTeam, selectedAssignees]);\r\n\r\n  const handleSubmit = useCallback(async (e) => {\r\n    e.preventDefault();\r\n    if (!validate()) {\r\n      toast.error(\"Please fill all required fields\");\r\n      return;\r\n    }\r\n\r\n    const deadlineISO = selectedDateTime ? selectedDateTime.toISOString() : null;\r\n\r\n    const payload = {\r\n      ...formData,\r\n      projectId: selectedTeam?.projectId || projectId,\r\n      projectName: selectedTeam?.projectName || project?.data?.name || \"N/A\",\r\n      teamId: selectedTeam?.teamId,\r\n      deadline: deadlineISO,\r\n      assignedTo: formData.assignedTo,\r\n      assignedBy: formData.assignedBy,\r\n      // ← ONLY ADDED THIS (exact same format as subtask)\r\n      actionedBy: {\r\n        note: \"Task Created !\",\r\n        performedBy: currentUser?.name || currentUser?.email || \"Unknown User\",\r\n        timestamp: new Date().toISOString(),\r\n      },\r\n    };\r\n\r\n    try {\r\n      await dispatch(createTask(payload)).unwrap();\r\n      onTaskAssingn?.();\r\n      toast.success(\"Task assigned successfully!\");\r\n      onClose();\r\n    } catch (err) {\r\n      toast.error(taskError || \"Failed to assign task\");\r\n    }\r\n  }, [validate, formData, selectedDateTime, selectedTeam, dispatch, projectId, project, taskError, onTaskAssingn, onClose, currentUser]);\r\n\r\n  const displayDateTime = selectedDateTime\r\n    ? format(selectedDateTime, \"MMM dd, yyyy 'at' HH:mm\")\r\n    : \"Select date & time\";\r\n\r\n  const isSaveEnabled =\r\n    formData.title.trim() &&\r\n    formData.description.trim() &&\r\n    selectedDateTime &&\r\n    selectedTeam &&\r\n    selectedAssignees.length > 0;\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <Dialog open={isOpen} onOpenChange={onClose}>\r\n      <DialogContent className=\"w-full max-w-full h-[100vh] max-h-[100vh] sm:max-w-6xl sm:max-h-[85vh] bg-white shadow-lg border border-gray-200 rounded-lg text-black p-2\">\r\n        <DialogHeader className=\"bg-gradient-to-r from-blue-50 to-indigo-50 px-4 py-2 border-b border-gray-200 sticky top-0 z-10\">\r\n          <div className=\"flex justify-between items-center\">\r\n            <DialogTitle className=\"text-base sm:text-lg font-bold text-gray-800 flex items-center\">\r\n              <Plus className=\"mr-2 h-4 w-4 text-blue-500\" />\r\n              Assign New Task\r\n            </DialogTitle>\r\n            <DialogClose asChild>\r\n              <Button variant=\"ghost\" size=\"icon\" className=\"text-gray-500 hover:bg-gray-100 rounded-full h-7 w-7\">\r\n                <X className=\"h-3 w-3\" />\r\n              </Button>\r\n            </DialogClose>\r\n          </div>\r\n        </DialogHeader>\r\n\r\n        <div className=\"p-4 sm:p-6 overflow-y-auto max-h-[calc(85vh-60px)]\">\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n\r\n            {/* Title */}\r\n            <div className=\"w-full\">\r\n              <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n                <Plus className=\"h-4 w-4 text-blue-500 mr-2\" /> Task Title <span className=\"text-red-500 ml-1\">*</span>\r\n              </label>\r\n              <Textarea\r\n                value={formData.title}\r\n                onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n                className=\"w-full h-24 sm:h-28 md:h-32 bg-white border border-gray-300 rounded-lg text-sm resize-vertical focus:ring-2 focus:ring-blue-200 focus:border-blue-500 p-3\"\r\n                placeholder=\"Enter task title...\"\r\n              />\r\n              {errors.title && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.title}</p>}\r\n            </div>\r\n\r\n            {/* Priority & Deadline */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n                  <Flag className=\"h-4 w-4 text-blue-500 mr-2\" /> Priority\r\n                </label>\r\n                <Select value={formData.priority} onValueChange={(v) => setFormData({ ...formData, priority: v })}>\r\n                  <SelectTrigger className=\"w-full h-10\">\r\n                    <SelectValue>\r\n                      <span className={cn(\"px-2 py-1 rounded-full text-xs font-medium\", priorityConfig[formData.priority]?.color)}>\r\n                        {priorityConfig[formData.priority]?.badge}\r\n                      </span>\r\n                    </SelectValue>\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {Object.entries(priorityConfig).map(([key, config]) => (\r\n                      <SelectItem key={key} value={key}>\r\n                        <span className={cn(\"px-2 py-1 rounded-full text-xs font-medium\", config.color)}>\r\n                          {config.badge}\r\n                        </span>\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n                  <CalendarIcon className=\"h-4 w-4 text-blue-500 mr-2\" /> Deadline <span className=\"text-red-500 ml-1\">*</span>\r\n                </label>\r\n                <Popover>\r\n                  <PopoverTrigger asChild>\r\n                    <Button variant=\"outline\" className={cn(\"w-full justify-between h-10 text-sm\", !selectedDateTime && \"text-gray-500\")}>\r\n                      {displayDateTime}\r\n                    </Button>\r\n                  </PopoverTrigger>\r\n                  <PopoverContent className=\"w-auto p-0 bg-white border border-gray-200 rounded-lg shadow-lg\">\r\n                    <Calendar mode=\"single\" selected={selectedDateTime} onSelect={setSelectedDateTime} initialFocus className=\"rounded-lg\" />\r\n                    <div className=\"p-3 border-t flex items-center gap-2\">\r\n                      <input\r\n                        type=\"time\"\r\n                        value={selectedDateTime ? format(selectedDateTime, \"HH:mm\") : \"\"}\r\n                        onChange={(e) => {\r\n                          if (selectedDateTime) {\r\n                            const [h, m] = e.target.value.split(\":\");\r\n                            const newDt = new Date(selectedDateTime);\r\n                            newDt.setHours(parseInt(h), parseInt(m));\r\n                            setSelectedDateTime(newDt);\r\n                          }\r\n                        }}\r\n                        className=\"h-10 border rounded px-3 text-sm w-full\"\r\n                      />\r\n                    </div>\r\n                  </PopoverContent>\r\n                </Popover>\r\n                {errors.deadline && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.deadline}</p>}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Team */}\r\n            <div>\r\n              <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n                <User className=\"h-4 w-4 text-blue-500 mr-2\" /> Team <span className=\"text-red-500 ml-1\">*</span>\r\n              </label>\r\n              <Select value={selectedTeam?.teamId || \"\"} onValueChange={handleTeamSelect}>\r\n                <SelectTrigger className=\"w-full h-10\">\r\n                  <SelectValue placeholder={teamStatus === \"loading\" ? \"Loading teams...\" : \"Select team\"} />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  {teams.map((team) => (\r\n                    <SelectItem key={team.teamId} value={team.teamId}>{team.teamName}</SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n              {errors.team && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.team}</p>}\r\n            </div>\r\n\r\n            {/* Assign To */}\r\n            <div>\r\n              <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n                <User className=\"h-4 w-4 text-blue-500 mr-2\" /> Assign To <span className=\"text-red-500 ml-1\">*</span>\r\n              </label>\r\n              <div className=\"flex flex-wrap gap-3 items-center\">\r\n                \r\n                <Popover open={memberOpen} onOpenChange={setMemberOpen}>\r\n                  <PopoverTrigger asChild>\r\n                    <Button variant=\"outline\" disabled={!selectedTeam} className=\"h-12 w-full justify-between text-sm\">\r\n                      {selectedAssignees.length === 0 ? \"Select team members...\" : `${selectedAssignees.length} selected`}\r\n                      <User className=\"h-4 w-4 text-gray-500 ml-auto\" />\r\n                    </Button>\r\n                  </PopoverTrigger>\r\n                  <PopoverContent className=\"w-full p-0\" align=\"start\">\r\n                    <Command>\r\n                      <CommandInput placeholder=\"Search members...\" value={memberSearchQuery} onValueChange={setMemberSearchQuery} />\r\n                      <CommandEmpty>No members found</CommandEmpty>\r\n                      <CommandGroup className=\"max-h-64 overflow-auto\">\r\n                        {availableMembers.map((m) => (\r\n                          <CommandItem key={m.memberId} onSelect={() => toggleAssignee(m)}>\r\n                            <Avatar className=\"h-8 w-8 mr-3\">\r\n                              <AvatarFallback className=\"text-xs bg-teal-600 text-white\">\r\n                                {getInitials(m.memberName)}\r\n                              </AvatarFallback>\r\n                            </Avatar>\r\n                            <div>\r\n                              <div className=\"font-medium\">{m.memberName}</div>\r\n                              <div className=\"text-xs text-gray-500\">{m.role}</div>\r\n                            </div>\r\n                          </CommandItem>\r\n                        ))}\r\n                      </CommandGroup>\r\n                    </Command>\r\n                  </PopoverContent>\r\n                </Popover>\r\n                {selectedAssignees.map((person) => (\r\n                  <div key={person.memberId} className=\"relative group\">\r\n                    <Avatar className=\"h-10 w-10 ring-4 ring-white border-2 border-white cursor-pointer hover:z-10 transition-all hover:scale-110\">\r\n                      <AvatarFallback className=\"bg-teal-600 text-white text-sm font-bold\">\r\n                        {getInitials(person.memberName)}\r\n                      </AvatarFallback>\r\n                    </Avatar>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => toggleAssignee(person)}\r\n                      className=\"absolute -top-1 -right-1 bg-red-600 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition\"\r\n                    >\r\n                      <X className=\"h-3 w-3\" />\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n\r\n              </div>\r\n              {errors.assignedTo && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.assignedTo}</p>}\r\n            </div>\r\n\r\n            {/* Description */}\r\n            <div className=\"w-full\">\r\n              <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n                <Info className=\"h-4 w-4 text-blue-500 mr-2\" /> Description <span className=\"text-red-500 ml-1\">*</span>\r\n              </label>\r\n              <Textarea\r\n                value={formData.description}\r\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n                className=\"w-full h-40 sm:h-48 md:h-52 bg-white border border-gray-300 rounded-lg text-sm resize-vertical focus:ring-2 focus:ring-blue-200 focus:border-blue-500 p-3\"\r\n                placeholder=\"Enter detailed task description...\"\r\n              />\r\n              {errors.description && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.description}</p>}\r\n            </div>\r\n\r\n            {taskError && (\r\n              <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\r\n                <p className=\"text-red-600 text-sm flex items-center\">\r\n                  <X className=\"h-4 w-4 mr-2\" /> {taskError}\r\n                </p>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200 mt-6\">\r\n              <Button type=\"button\" variant=\"outline\" onClick={onClose}>\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                type=\"submit\"\r\n                disabled={!isSaveEnabled || taskStatus === \"loading\"}\r\n                className=\"bg-blue-600 hover:bg-blue-700 text-white\"\r\n              >\r\n                {taskStatus === \"loading\" ? (\r\n                  <>\r\n                    <Loader className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                    Assigning Task...\r\n                  </>\r\n                ) : (\r\n                  \"Assign Task\"\r\n                )}\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default CreateTaskModal;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1461, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/task/components/EditTaskModal.jsx"],"sourcesContent":["// \"use client\";\r\n\r\n// import { useState, useEffect, useMemo, useCallback } from \"react\";\r\n// import { useDispatch, useSelector } from \"react-redux\";\r\n// import { updateTask, fetchTaskById } from \"@/modules/project-management/task/slices/taskSlice\";\r\n// import { fetchTeamByProjectId } from \"@/modules/project-management/team/slices/teamSlice\";\r\n// import { Edit, User, Flag, CalendarIcon, Info, X, Loader, Clock, AlertCircle } from \"lucide-react\";\r\n// import { toast } from \"sonner\";\r\n// import { Textarea } from \"@/components/ui/textarea\";\r\n// import { Button } from \"@/components/ui/button\";\r\n// import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\n// import { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\r\n// import { Calendar } from \"@/components/ui/calendar\";\r\n// import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogClose } from \"@/components/ui/dialog\";\r\n// import { Command, CommandEmpty, CommandGroup, CommandInput, CommandItem } from \"@/components/ui/command\";\r\n// import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n// import { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\r\n// import { format } from \"date-fns\";\r\n// import { cn } from \"@/lib/utils\";\r\n// import { Input } from \"@/components/ui/input\";\r\n\r\n// const priorityConfig = {\r\n//   Low: { color: \"bg-emerald-100 text-emerald-800\", badge: \"Low\" },\r\n//   Medium: { color: \"bg-amber-100 text-amber-800\", badge: \"Medium\" },\r\n//   High: { color: \"bg-rose-100 text-rose-800\", badge: \"High\" },\r\n// };\r\n\r\n// const EditTaskModal = ({ taskId, isOpen, onClose, onTaskUpdated }) => {\r\n//   const dispatch = useDispatch();\r\n//   const task = useSelector((state) => state.task.currentTask);\r\n//   const { teamsByProject: teams } = useSelector((state) => state.team);\r\n//   const { status: taskStatus, error: taskError } = useSelector((state) => state.task);\r\n\r\n//   const [formData, setFormData] = useState({\r\n//     title: \"\",\r\n//     description: \"\",\r\n//     priority: \"Medium\",\r\n//     deadline: null,\r\n//     teamId: \"\",\r\n//     assignedTo: [],\r\n//   });\r\n\r\n//   const [selectedAssignees, setSelectedAssignees] = useState([]);\r\n//   const [selectedTeam, setSelectedTeam] = useState(null);\r\n//   const [selectedDate, setSelectedDate] = useState(null);\r\n//   const [selectedTime, setSelectedTime] = useState(\"\");\r\n//   const [memberSearchQuery, setMemberSearchQuery] = useState(\"\");\r\n//   const [memberOpen, setMemberOpen] = useState(false);\r\n//   const [errors, setErrors] = useState({});\r\n\r\n//   // Fetch task + team\r\n//   useEffect(() => {\r\n//     if (isOpen && taskId) {\r\n//       dispatch(fetchTaskById(taskId));\r\n//       if (task?.projectId) {\r\n//         dispatch(fetchTeamByProjectId(task.projectId));\r\n//       }\r\n//     }\r\n//   }, [isOpen, taskId, dispatch]);\r\n\r\n//   // Pre-fill form when task loads\r\n//   useEffect(() => {\r\n//     if (!task || !isOpen) return;\r\n\r\n//     const deadlineDate = task.deadline ? new Date(task.deadline) : null;\r\n\r\n//     setFormData({\r\n//       title: task.title || \"\",\r\n//       description: task.description || \"\",\r\n//       priority: task.priority || \"Medium\",\r\n//       deadline: deadlineDate,\r\n//       teamId: task.teamId || \"\",\r\n//     });\r\n\r\n//     setSelectedDate(deadlineDate);\r\n//     if (deadlineDate) {\r\n//       setSelectedTime(format(deadlineDate, \"HH:mm\"));\r\n//     }\r\n\r\n//     // Handle both old single assignee & new array format\r\n//     const assignees = Array.isArray(task.assignedTo)\r\n//       ? task.assignedTo.map(a => ({\r\n//           memberId: a.memberId || a._id,\r\n//           memberName: a.memberName,\r\n//           role: a.role || \"Member\",\r\n//         }))\r\n//       : task.assignedToDetails\r\n//       ? [{\r\n//           memberId: task.assignedToDetails.memberId,\r\n//           memberName: task.assignedToDetails.memberName,\r\n//           role: task.assignedToDetails.role || \"Member\",\r\n//         }]\r\n//       : [];\r\n\r\n//     setSelectedAssignees(assignees);\r\n\r\n//     const team = teams.find(t => t.teamId === task.teamId);\r\n//     setSelectedTeam(team || null);\r\n//   }, [task, teams, isOpen]);\r\n\r\n//   const handleTeamSelect = useCallback((value) => {\r\n//     const team = teams.find(t => t.teamId === value);\r\n//     setSelectedTeam(team);\r\n//     setSelectedAssignees([]);\r\n//   }, [teams]);\r\n\r\n//   const availableMembers = useMemo(() => {\r\n//     if (!selectedTeam?.teamMembers) return [];\r\n//     const q = memberSearchQuery.toLowerCase();\r\n//     return selectedTeam.teamMembers\r\n//       .filter(m =>\r\n//         m.memberName.toLowerCase().includes(q) &&\r\n//         !selectedAssignees.some(a => a.memberId === m.memberId)\r\n//       )\r\n//       .map(m => ({\r\n//         memberId: m.memberId,\r\n//         memberName: m.memberName,\r\n//         role: m.role || \"Member\",\r\n//       }));\r\n//   }, [selectedTeam, memberSearchQuery, selectedAssignees]);\r\n\r\n//   const toggleAssignee = useCallback((member) => {\r\n//     setSelectedAssignees(prev => {\r\n//       const exists = prev.some(a => a.memberId === member.memberId);\r\n//       const newList = exists\r\n//         ? prev.filter(a => a.memberId !== member.memberId)\r\n//         : [...prev, member];\r\n//       return newList;\r\n//     });\r\n//   }, []);\r\n\r\n//   const validate = useCallback(() => {\r\n//     const newErrors = {};\r\n//     if (!formData.title.trim()) newErrors.title = \"Title is required\";\r\n//     if (!formData.priority) newErrors.priority = \"Priority is required\";\r\n//     if (!selectedDate) newErrors.deadline = \"Deadline is required\";\r\n//     if (!formData.description.trim()) newErrors.description = \"Description is required\";\r\n//     if (!selectedTeam) newErrors.team = \"Team selection is required\";\r\n//     if (selectedAssignees.length === 0) newErrors.assignedTo = \"Assign at least one member\";\r\n//     setErrors(newErrors);\r\n//     return Object.keys(newErrors).length === 0;\r\n//   }, [formData, selectedDate, selectedTeam, selectedAssignees]);\r\n\r\n//   const handleSubmit = async (e) => {\r\n//     e.preventDefault();\r\n//     if (!validate()) {\r\n//       toast.error(\"Please fill all required fields\");\r\n//       return;\r\n//     }\r\n\r\n//     const pad = (n) => (n < 10 ? \"0\" + n : n);\r\n//     let deadline = null;\r\n//     if (selectedDate) {\r\n//       const d = new Date(selectedDate);\r\n//       const [h, m] = selectedTime ? selectedTime.split(\":\").map(Number) : [23, 59];\r\n//       d.setHours(h, m, 0, 0);\r\n//       deadline = `${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())}T${pad(d.getHours())}:${pad(d.getMinutes())}:00`;\r\n//     }\r\n\r\n//     const payload = {\r\n//       task_id: taskId,\r\n//       title: formData.title,\r\n//       description: formData.description,\r\n//       priority: formData.priority,\r\n//       deadline,\r\n//       teamId: selectedTeam.teamId,\r\n//       assignedTo: selectedAssignees,\r\n//     };\r\n\r\n//     try {\r\n//       await dispatch(updateTask(payload)).unwrap();\r\n//       toast.success(\"Task updated successfully!\");\r\n//       onTaskUpdated?.();\r\n//       onClose();\r\n//     } catch (err) {\r\n//       toast.error(taskError || \"Failed to update task\");\r\n//     }\r\n//   };\r\n\r\n//   const displayDeadline = selectedDate\r\n//     ? `${format(selectedDate, \"MMM dd, yyyy\")}${selectedTime ? ` • ${selectedTime}` : \"\"}`\r\n//     : \"No deadline\";\r\n\r\n//   if (!isOpen) return null;\r\n\r\n//   return (\r\n//     <Dialog open={isOpen} onOpenChange={onClose}>\r\n//       <DialogContent className=\"w-full max-w-full h-[100vh] max-h-[100vh] sm:max-w-6xl sm:max-h-[85vh] bg-white shadow-lg border border-gray-200 rounded-lg text-black p-2\">\r\n//         <DialogHeader className=\"bg-gradient-to-r from-blue-50 to-indigo-50 px-4 py-2 border-b border-gray-200 sticky top-0 z-10\">\r\n//           <div className=\"flex justify-between items-center\">\r\n//             <DialogTitle className=\"text-base sm:text-lg font-bold text-gray-800 flex items-center\">\r\n//               <Edit className=\"mr-2 h-4 w-4 text-blue-500\" />\r\n//               Edit Task\r\n//             </DialogTitle>\r\n//             <DialogClose asChild>\r\n//               <Button variant=\"ghost\" size=\"icon\" className=\"text-gray-500 hover:bg-gray-100 rounded-full h-7 w-7\">\r\n//                 <X className=\"h-3 w-3\" />\r\n//               </Button>\r\n//             </DialogClose>\r\n//           </div>\r\n//         </DialogHeader>\r\n\r\n//         <div className=\"p-4 sm:p-6 overflow-y-auto max-h-[calc(85vh-60px)]\">\r\n//           <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n\r\n//             {/* Title */}\r\n//             <div className=\"w-full\">\r\n//               <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n//                 <Edit className=\"h-4 w-4 text-blue-500 mr-2\" /> Task Title <span className=\"text-red-500 ml-1\">*</span>\r\n//               </label>\r\n//               <Textarea\r\n//                 value={formData.title}\r\n//                 onChange={(e) => setFormData(prev => ({ ...prev, title: e.target.value }))}\r\n//                 className=\"w-full h-24 sm:h-28 md:h-32 bg-white border border-gray-300 rounded-lg text-sm resize-vertical focus:ring-2 focus:ring-blue-200 focus:border-blue-500 p-3\"\r\n//                 placeholder=\"Enter task title...\"\r\n//               />\r\n//               {errors.title && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><AlertCircle className=\"h-3 w-3 mr-1\" /> {errors.title}</p>}\r\n//             </div>\r\n\r\n//             <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n//               {/* Priority */}\r\n//               <div>\r\n//                 <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n//                   <Flag className=\"h-4 w-4 text-blue-500 mr-2\" /> Priority <span className=\"text-red-500 ml-1\">*</span>\r\n//                 </label>\r\n//                 <Select value={formData.priority} onValueChange={(v) => setFormData(prev => ({ ...prev, priority: v }))}>\r\n//                   <SelectTrigger className=\"w-full h-10 rounded-lg\">\r\n//                     <SelectValue>\r\n//                       <span className={cn(\"px-2 py-1 rounded-full text-xs font-medium\", priorityConfig[formData.priority]?.color)}>\r\n//                         {priorityConfig[formData.priority]?.badge}\r\n//                       </span>\r\n//                     </SelectValue>\r\n//                   </SelectTrigger>\r\n//                   <SelectContent>\r\n//                     {Object.entries(priorityConfig).map(([k, c]) => (\r\n//                       <SelectItem key={k} value={k}>\r\n//                         <span className={cn(\"px-2 py-1 rounded-full text-xs font-medium\", c.color)}>{c.badge}</span>\r\n//                       </SelectItem>\r\n//                     ))}\r\n//                   </SelectContent>\r\n//                 </Select>\r\n//               </div>\r\n\r\n//               {/* Deadline */}\r\n//               <div>\r\n//                 <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n//                   <CalendarIcon className=\"h-4 w-4 text-blue-500 mr-2\" /> Deadline <span className=\"text-red-500 ml-1\">*</span>\r\n//                 </label>\r\n//                 <Popover>\r\n//                   <PopoverTrigger asChild>\r\n//                     <Button variant=\"outline\" className={cn(\"w-full justify-start h-10 rounded-lg\", !selectedDate && \"text-gray-500\")}>\r\n//                       <CalendarIcon className=\"mr-2 h-4 w-4\" />\r\n//                       {displayDeadline}\r\n//                     </Button>\r\n//                   </PopoverTrigger>\r\n//                   <PopoverContent className=\"w-auto p-0\" align=\"start\">\r\n//                     <Calendar mode=\"single\" selected={selectedDate} onSelect={setSelectedDate} initialFocus />\r\n//                     <div className=\"p-3 border-t flex items-center gap-2\">\r\n//                       <Clock className=\"h-4 w-4 text-gray-500\" />\r\n//                       <Input type=\"time\" value={selectedTime} onChange={(e) => setSelectedTime(e.target.value)} className=\"h-9\" />\r\n//                     </div>\r\n//                   </PopoverContent>\r\n//                 </Popover>\r\n//                 {errors.deadline && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><AlertCircle className=\"h-3 w-3 mr-1\" /> {errors.deadline}</p>}\r\n//               </div>\r\n\r\n//               {/* Team */}\r\n//               <div>\r\n//                 <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n//                   <User className=\"h-4 w-4 text-blue-500 mr-2\" /> Team <span className=\"text-red-500 ml-1\">*</span>\r\n//                 </label>\r\n//                 <Select value={selectedTeam?.teamId || \"\"} onValueChange={handleTeamSelect}>\r\n//                   <SelectTrigger className=\"w-full h-10 rounded-lg\">\r\n//                     <SelectValue placeholder=\"Select team\" />\r\n//                   </SelectTrigger>\r\n//                   <SelectContent>\r\n//                     {teams.map((team) => (\r\n//                       <SelectItem key={team.teamId} value={team.teamId}>{team.teamName}</SelectItem>\r\n//                     ))}\r\n//                   </SelectContent>\r\n//                 </Select>\r\n//               </div>\r\n//             </div>\r\n\r\n//             {/* Assignees */}\r\n//             <div>\r\n//               <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n//                 <User className=\"h-4 w-4 text-blue-500 mr-2\" /> Assigned To <span className=\"text-red-500 ml-1\">*</span>\r\n//               </label>\r\n//               <div className=\"flex flex-wrap items-center gap-3 min-h-12 p-3 border rounded-lg bg-gray-50\">\r\n//                 <TooltipProvider>\r\n//                   {selectedAssignees.map((person) => (\r\n//                     <Tooltip key={person.memberId}>\r\n//                       <TooltipTrigger asChild>\r\n//                         <div className=\"relative group\">\r\n//                           <Avatar className=\"h-10 w-10 ring-2 ring-white\">\r\n//                             <AvatarFallback className=\"bg-teal-600 text-white text-sm\">\r\n//                               {person.memberName.split(\" \").map(n => n[0]).join(\"\").toUpperCase()}\r\n//                             </AvatarFallback>\r\n//                           </Avatar>\r\n//                           <button\r\n//                             type=\"button\"\r\n//                             onClick={() => toggleAssignee(person)}\r\n//                             className=\"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition\"\r\n//                           >\r\n//                             <X className=\"h-3 w-3\" />\r\n//                           </button>\r\n//                         </div>\r\n//                       </TooltipTrigger>\r\n//                       <TooltipContent>\r\n//                         <div>{person.memberName}</div>\r\n//                         <div className=\"text-xs text-gray-500\">{person.role}</div>\r\n//                       </TooltipContent>\r\n//                     </Tooltip>\r\n//                   ))}\r\n\r\n//                   <Popover open={memberOpen} onOpenChange={setMemberOpen}>\r\n//                     <PopoverTrigger asChild>\r\n//                       <button\r\n//                         type=\"button\"\r\n//                         disabled={!selectedTeam}\r\n//                         className={cn(\r\n//                           \"flex items-center justify-center w-10 h-10 rounded-full transition-all\",\r\n//                           selectedAssignees.length === 0\r\n//                             ? \"bg-gray-200 hover:bg-gray-300\"\r\n//                             : \"bg-gray-100 hover:bg-gray-200 border-2 border-dashed border-gray-300\"\r\n//                         )}\r\n//                       >\r\n//                         <User className=\"h-5 w-5 text-gray-500\" />\r\n//                       </button>\r\n//                     </PopoverTrigger>\r\n//                     <PopoverContent className=\"w-80 p-0\">\r\n//                       <Command>\r\n//                         <CommandInput placeholder=\"Search members...\" value={memberSearchQuery} onValueChange={setMemberSearchQuery} />\r\n//                         <CommandEmpty>No members found.</CommandEmpty>\r\n//                         <CommandGroup className=\"max-h-64 overflow-auto\">\r\n//                           {availableMembers.map((member) => (\r\n//                             <CommandItem key={member.memberId} onSelect={() => toggleAssignee(member)} className=\"cursor-pointer\">\r\n//                               <Avatar className=\"h-8 w-8 mr-3\">\r\n//                                 <AvatarFallback className=\"text-xs\">\r\n//                                   {member.memberName.split(\" \").map(n => n[0]).join(\"\").toUpperCase()}\r\n//                                 </AvatarFallback>\r\n//                               </Avatar>\r\n//                               <div>\r\n//                                 <div className=\"font-medium\">{member.memberName}</div>\r\n//                                 <div className=\"text-xs text-gray-500\">{member.role}</div>\r\n//                               </div>\r\n//                             </CommandItem>\r\n//                           ))}\r\n//                         </CommandGroup>\r\n//                       </Command>\r\n//                     </PopoverContent>\r\n//                   </Popover>\r\n//                 </TooltipProvider>\r\n//               </div>\r\n//               {errors.assignedTo && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><AlertCircle className=\"h-3 w-3 mr-1\" /> {errors.assignedTo}</p>}\r\n//             </div>\r\n\r\n//             {/* Description */}\r\n//             <div className=\"w-full\">\r\n//               <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n//                 <Info className=\"h-4 w-4 text-blue-500 mr-2\" /> Description <span className=\"text-red-500 ml-1\">*</span>\r\n//               </label>\r\n//               <Textarea\r\n//                 value={formData.description}\r\n//                 onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\r\n//                 className=\"w-full h-40 sm:h-48 md:h-52 bg-white border border-gray-300 rounded-lg text-sm resize-vertical focus:ring-2 focus:ring-blue-200 focus:border-blue-500 p-3\"\r\n//                 placeholder=\"Enter detailed task description...\"\r\n//               />\r\n//               {errors.description && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><AlertCircle className=\"h-3 w-3 mr-1\" /> {errors.description}</p>}\r\n//             </div>\r\n\r\n//             <div className=\"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200 mt-6\">\r\n//               <Button type=\"button\" variant=\"outline\" onClick={onClose}>\r\n//                 Cancel\r\n//               </Button>\r\n//               <Button\r\n//                 type=\"submit\"\r\n//                 disabled={taskStatus === \"loading\"}\r\n//                 className=\"bg-blue-600 hover:bg-blue-700 text-white\"\r\n//               >\r\n//                 {taskStatus === \"loading\" ? (\r\n//                   <> <Loader className=\"h-4 w-4 animate-spin mr-2\" /> Updating...</>\r\n//                 ) : (\r\n//                   \"Update Task\"\r\n//                 )}\r\n//               </Button>\r\n//             </div>\r\n//           </form>\r\n//         </div>\r\n//       </DialogContent>\r\n//     </Dialog>\r\n//   );\r\n// };\r\n\r\n// export default EditTaskModal;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\"use client\";\r\n\r\nimport { useState, useEffect, useMemo, useCallback, useRef } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { updateTask, fetchTaskById } from \"@/modules/project-management/task/slices/taskSlice\";\r\nimport { fetchTeamByProjectId } from \"@/modules/project-management/team/slices/teamSlice\";\r\nimport { Edit, User, Flag, CalendarIcon, Info, X, Loader } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\r\nimport { Calendar } from \"@/components/ui/calendar\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogClose } from \"@/components/ui/dialog\";\r\nimport { Command, CommandEmpty, CommandGroup, CommandInput, CommandItem } from \"@/components/ui/command\";\r\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\nimport { format } from \"date-fns\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { useCurrentUser } from \"@/hooks/useCurrentUser\";\r\n\r\nconst priorityConfig = {\r\n  Low: { color: \"bg-emerald-100 text-emerald-800\", badge: \"Low\" },\r\n  Medium: { color: \"bg-amber-100 text-amber-800\", badge: \"Medium\" },\r\n  High: { color: \"bg-rose-100 text-rose-800\", badge: \"High\" },\r\n};\r\n\r\nconst getInitials = (name = \"\") =>\r\n  name.trim().split(\" \").filter(Boolean).map(n => n[0]).join(\"\").toUpperCase().slice(0, 2);\r\n\r\nconst EditTaskModal = ({ taskId, isOpen, onClose, onTaskUpdated }) => {\r\n  const dispatch = useDispatch();\r\n  const { currentUser } = useCurrentUser();\r\n  const task = useSelector(state => state.task.currentTask);\r\n  const { teamsByProject: teams } = useSelector(state => state.team);\r\n  const { status: taskStatus, error: taskError } = useSelector(state => state.task);\r\n\r\n  const prevOpenRef = useRef(isOpen);\r\n\r\n  const [formData, setFormData] = useState({ title: \"\", description: \"\", priority: \"Medium\" });\r\n  const [selectedAssignees, setSelectedAssignees] = useState([]);\r\n  const [selectedTeam, setSelectedTeam] = useState(null);\r\n  const [selectedDateTime, setSelectedDateTime] = useState(null);\r\n  const [memberSearchQuery, setMemberSearchQuery] = useState(\"\");\r\n  const [memberOpen, setMemberOpen] = useState(false);\r\n  const [hasUserInteracted, setHasUserInteracted] = useState(false); // ← NEW: prevents errors on first load\r\n  const [errors, setErrors] = useState({});\r\n\r\n  // Fetch data when modal opens\r\n  useEffect(() => {\r\n    const justOpened = isOpen && !prevOpenRef.current;\r\n    if (justOpened && taskId) {\r\n      dispatch(fetchTaskById(taskId));\r\n    }\r\n    prevOpenRef.current = isOpen;\r\n  }, [isOpen, taskId, dispatch]);\r\n\r\n  // Pre-fill form when task + teams are loaded\r\n  useEffect(() => {\r\n    if (!task || !isOpen) return;\r\n\r\n    const deadlineDate = task.deadline ? new Date(task.deadline) : null;\r\n\r\n    setFormData({\r\n      title: task.title || \"\",\r\n      description: task.description || \"\",\r\n      priority: task.priority || \"Medium\",\r\n    });\r\n    setSelectedDateTime(deadlineDate);\r\n\r\n    // 1. Find and set team FIRST\r\n    const currentTeam = teams.find(t => t.teamId === task.teamId);\r\n    setSelectedTeam(currentTeam || null);\r\n\r\n    // 2. Then set assignees\r\n    const assignees = Array.isArray(task.assignedTo)\r\n      ? task.assignedTo.map(a => ({\r\n          memberId: a.memberId || a._id,\r\n          memberName: a.memberName || a.name,\r\n          role: a.role || \"Member\",\r\n        }))\r\n      : task.assignedToDetails\r\n      ? [{\r\n          memberId: task.assignedToDetails.memberId,\r\n          memberName: task.assignedToDetails.memberName,\r\n          role: task.assignedToDetails.role || \"Member\",\r\n        }]\r\n      : [];\r\n\r\n    setSelectedAssignees(assignees);\r\n    setMemberSearchQuery(\"\");\r\n    setHasUserInteracted(false); // ← Reset interaction flag\r\n    setErrors({}); // ← Clear errors on load\r\n  }, [task, teams, isOpen]);\r\n\r\n  // Fetch teams when projectId is known\r\n  useEffect(() => {\r\n    if (task?.projectId && isOpen) {\r\n      dispatch(fetchTeamByProjectId(task.projectId));\r\n    }\r\n  }, [task?.projectId, isOpen, dispatch]);\r\n\r\n  const handleTeamSelect = useCallback((value) => {\r\n    const team = teams.find(t => t.teamId === value);\r\n    setSelectedTeam(team);\r\n    setSelectedAssignees([]); // clear assignees when team changes\r\n    setHasUserInteracted(true);\r\n  }, [teams]);\r\n\r\n  const availableMembers = useMemo(() => {\r\n    if (!selectedTeam?.teamMembers) return [];\r\n    const q = memberSearchQuery.toLowerCase();\r\n    return selectedTeam.teamMembers\r\n      .filter(m =>\r\n        m.memberName?.toLowerCase().includes(q) &&\r\n        !selectedAssignees.some(a => a.memberId === m.memberId)\r\n      )\r\n      .map(m => ({\r\n        memberId: m.memberId,\r\n        memberName: m.memberName,\r\n        role: m.role || \"Member\",\r\n      }));\r\n  }, [selectedTeam, memberSearchQuery, selectedAssignees]);\r\n\r\n  const toggleAssignee = useCallback((member) => {\r\n    setSelectedAssignees(prev => {\r\n      const exists = prev.some(a => a.memberId === member.memberId);\r\n      setHasUserInteracted(true);\r\n      return exists\r\n        ? prev.filter(a => a.memberId !== member.memberId)\r\n        : [...prev, member];\r\n    });\r\n  }, []);\r\n\r\n  const validate = useCallback(() => {\r\n    // Only show errors after user has interacted\r\n    if (!hasUserInteracted) return true;\r\n\r\n    const newErrors = {};\r\n    if (!formData.title.trim()) newErrors.title = \"Title is required\";\r\n    if (!formData.description.trim()) newErrors.description = \"Description is required\";\r\n    if (!selectedDateTime) newErrors.deadline = \"Deadline is required\";\r\n    if (!selectedTeam) newErrors.team = \"Team selection is required\";\r\n    if (selectedAssignees.length === 0) newErrors.assignedTo = \"Assign at least one member\";\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  }, [formData, selectedDateTime, selectedTeam, selectedAssignees, hasUserInteracted]);\r\n\r\n  const handleSubmit = useCallback(async (e) => {\r\n    e.preventDefault();\r\n    setHasUserInteracted(true);\r\n    if (!validate()) {\r\n      toast.error(\"Please fill all required fields\");\r\n      return;\r\n    }\r\n\r\n    const deadlineISO = selectedDateTime ? selectedDateTime.toISOString() : null;\r\n\r\n    const payload = {\r\n      task_id: taskId,\r\n      title: formData.title.trim(),\r\n      description: formData.description.trim(),\r\n      priority: formData.priority,\r\n      deadline: deadlineISO,\r\n      teamId: selectedTeam.teamId,\r\n      assignedTo: selectedAssignees.map(m => ({\r\n        memberId: m.memberId,\r\n        memberName: m.memberName,\r\n        role: m.role,\r\n      })),\r\n      actionedBy: {\r\n        note: \"Task Updated!\",\r\n        performedBy: currentUser?.name || currentUser?.email || \"Unknown User\",\r\n        timestamp: new Date().toISOString(),\r\n      },\r\n    };\r\n\r\n    try {\r\n      await dispatch(updateTask(payload)).unwrap();\r\n      toast.success(\"Task updated successfully!\");\r\n      onTaskUpdated?.();\r\n      onClose();\r\n    } catch (err) {\r\n      toast.error(taskError || \"Failed to update task\");\r\n    }\r\n  }, [validate, formData, selectedDateTime, selectedTeam, selectedAssignees, taskId, currentUser, dispatch, taskError, onTaskUpdated, onClose]);\r\n\r\n  const displayDateTime = selectedDateTime\r\n    ? format(selectedDateTime, \"MMM dd, yyyy 'at' HH:mm\")\r\n    : \"Select date & time\";\r\n\r\n  const isSaveEnabled = formData.title.trim() && formData.description.trim() && selectedDateTime && selectedTeam && selectedAssignees.length > 0;\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <Dialog open={isOpen} onOpenChange={onClose}>\r\n      <DialogContent className=\"w-full max-w-full h-[100vh] max-h-[100vh] sm:max-w-6xl sm:max-h-[85vh] bg-white shadow-lg border border-gray-200 rounded-lg text-black p-2\">\r\n        <DialogHeader className=\"bg-gradient-to-r from-blue-50 to-indigo-50 px-4 py-2 border-b border-gray-200 sticky top-0 z-10\">\r\n          <div className=\"flex justify-between items-center\">\r\n            <DialogTitle className=\"text-base sm:text-lg font-bold text-gray-800 flex items-center\">\r\n              <Edit className=\"mr-2 h-4 w-4 text-blue-500\" />\r\n              Edit Task\r\n            </DialogTitle>\r\n            <DialogClose asChild>\r\n              <Button variant=\"ghost\" size=\"icon\" className=\"text-gray-500 hover:bg-gray-100 rounded-full h-7 w-7\">\r\n                <X className=\"h-3 w-3\" />\r\n              </Button>\r\n            </DialogClose>\r\n          </div>\r\n        </DialogHeader>\r\n\r\n        <div className=\"p-4 sm:p-6 overflow-y-auto max-h-[calc(85vh-60px)]\">\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n\r\n            {/* Title */}\r\n            <div className=\"w-full\">\r\n              <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n                <Edit className=\"h-4 w-4 text-blue-500 mr-2\" /> Task Title <span className=\"text-red-500 ml-1\">*</span>\r\n              </label>\r\n              <Textarea\r\n                value={formData.title}\r\n                onChange={(e) => { setFormData(prev => ({ ...prev, title: e.target.value })); setHasUserInteracted(true); }}\r\n                className=\"w-full h-24 sm:h-28 md:h-32 bg-white border border-gray-300 rounded-lg text-sm resize-vertical focus:ring-2 focus:ring-blue-200 focus:border-blue-500 p-3\"\r\n                placeholder=\"Enter task title...\"\r\n              />\r\n              {errors.title && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.title}</p>}\r\n            </div>\r\n\r\n            {/* Priority & Deadline */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n                  <Flag className=\"h-4 w-4 text-blue-500 mr-2\" /> Priority\r\n                </label>\r\n                <Select value={formData.priority} onValueChange={(v) => { setFormData(prev => ({ ...prev, priority: v })); setHasUserInteracted(true); }}>\r\n                  <SelectTrigger className=\"w-full h-10\">\r\n                    <SelectValue>\r\n                      <span className={cn(\"px-2 py-1 rounded-full text-xs font-medium\", priorityConfig[formData.priority]?.color)}>\r\n                        {priorityConfig[formData.priority]?.badge}\r\n                      </span>\r\n                    </SelectValue>\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {Object.entries(priorityConfig).map(([key, config]) => (\r\n                      <SelectItem key={key} value={key}>\r\n                        <span className={cn(\"px-2 py-1 rounded-full text-xs font-medium\", config.color)}>\r\n                          {config.badge}\r\n                        </span>\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n                  <CalendarIcon className=\"h-4 w-4 text-blue-500 mr-2\" /> Deadline <span className=\"text-red-500 ml-1\">*</span>\r\n                </label>\r\n                <Popover>\r\n                  <PopoverTrigger asChild>\r\n                    <Button variant=\"outline\" className={cn(\"w-full justify-between h-10 text-sm\", !selectedDateTime && \"text-gray-500\")}>\r\n                      {displayDateTime}\r\n                    </Button>\r\n                  </PopoverTrigger>\r\n                  <PopoverContent className=\"w-auto p-0 bg-white border border-gray-200 rounded-lg shadow-lg\">\r\n                    <Calendar mode=\"single\" selected={selectedDateTime} onSelect={(date) => { setSelectedDateTime(date); setHasUserInteracted(true); }} initialFocus className=\"rounded-lg\" />\r\n                    <div className=\"p-3 border-t flex items-center gap-2\">\r\n                      <input\r\n                        type=\"time\"\r\n                        value={selectedDateTime ? format(selectedDateTime, \"HH:mm\") : \"\"}\r\n                        onChange={(e) => {\r\n                          if (selectedDateTime) {\r\n                            const [h, m] = e.target.value.split(\":\");\r\n                            const newDt = new Date(selectedDateTime);\r\n                            newDt.setHours(parseInt(h), parseInt(m));\r\n                            setSelectedDateTime(newDt);\r\n                            setHasUserInteracted(true);\r\n                          }\r\n                        }}\r\n                        className=\"h-10 border rounded px-3 text-sm w-full\"\r\n                      />\r\n                    </div>\r\n                  </PopoverContent>\r\n                </Popover>\r\n                {errors.deadline && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.deadline}</p>}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Team */}\r\n            <div>\r\n              <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n                <User className=\"h-4 w-4 text-blue-500 mr-2\" /> Team <span className=\"text-red-500 ml-1\">*</span>\r\n              </label>\r\n              <Select value={selectedTeam?.teamId || \"\"} onValueChange={handleTeamSelect}>\r\n                <SelectTrigger className=\"w-full h-10\">\r\n                  <SelectValue placeholder=\"Select team\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  {teams.map((team) => (\r\n                    <SelectItem key={team.teamId} value={team.teamId}>{team.teamName}</SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n              {errors.team && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.team}</p>}\r\n            </div>\r\n\r\n            {/* Assign To */}\r\n            <div>\r\n              <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n                <User className=\"h-4 w-4 text-blue-500 mr-2\" /> Assign To <span className=\"text-red-500 ml-1\">*</span>\r\n              </label>\r\n              <div className=\"flex flex-wrap gap-3 items-center\">\r\n                {selectedAssignees.map((person) => (\r\n                  <div key={person.memberId} className=\"relative group\">\r\n                    <Avatar className=\"h-10 w-10 ring-4 ring-white border-2 border-white cursor-pointer hover:scale-110 transition\">\r\n                      <AvatarFallback className=\"bg-teal-600 text-white text-sm font-bold\">\r\n                        {getInitials(person.memberName)}\r\n                      </AvatarFallback>\r\n                    </Avatar>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => toggleAssignee(person)}\r\n                      className=\"absolute -top-1 -right-1 bg-red-600 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition\"\r\n                    >\r\n                      <X className=\"h-3 w-3\" />\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n\r\n                <Popover open={memberOpen} onOpenChange={setMemberOpen}>\r\n                  <PopoverTrigger asChild>\r\n                    <Button variant=\"outline\" disabled={!selectedTeam} className=\"h-12 w-full justify-between text-sm\">\r\n                      {selectedAssignees.length === 0 ? \"Select team members...\" : `${selectedAssignees.length} selected`}\r\n                      <User className=\"h-4 w-4 text-gray-500 ml-auto\" />\r\n                    </Button>\r\n                  </PopoverTrigger>\r\n                  <PopoverContent className=\"w-full p-0\" align=\"start\">\r\n                    <Command>\r\n                      <CommandInput placeholder=\"Search members...\" value={memberSearchQuery} onValueChange={setMemberSearchQuery} />\r\n                      <CommandEmpty>No members found</CommandEmpty>\r\n                      <CommandGroup className=\"max-h-64 overflow-auto\">\r\n                        {availableMembers.map((m) => (\r\n                          <CommandItem key={m.memberId} onSelect={() => toggleAssignee(m)}>\r\n                            <Avatar className=\"h-8 w-8 mr-3\">\r\n                              <AvatarFallback className=\"text-xs bg-teal-600 text-white\">\r\n                                {getInitials(m.memberName)}\r\n                              </AvatarFallback>\r\n                            </Avatar>\r\n                            <div>\r\n                              <div className=\"font-medium\">{m.memberName}</div>\r\n                              <div className=\"text-xs text-gray-500\">{m.role}</div>\r\n                            </div>\r\n                          </CommandItem>\r\n                        ))}\r\n                      </CommandGroup>\r\n                    </Command>\r\n                  </PopoverContent>\r\n                </Popover>\r\n              </div>\r\n              {errors.assignedTo && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.assignedTo}</p>}\r\n            </div>\r\n\r\n            {/* Description */}\r\n            <div className=\"w-full\">\r\n              <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\r\n                <Info className=\"h-4 w-4 text-blue-500 mr-2\" /> Description <span className=\"text-red-500 ml-1\">*</span>\r\n              </label>\r\n              <Textarea\r\n                value={formData.description}\r\n                onChange={(e) => { setFormData(prev => ({ ...prev, description: e.target.value })); setHasUserInteracted(true); }}\r\n                className=\"w-full h-40 sm:h-48 md:h-52 bg-white border border-gray-300 rounded-lg text-sm resize-vertical focus:ring-2 focus:ring-blue-200 focus:border-blue-500 p-3\"\r\n                placeholder=\"Enter detailed task description...\"\r\n              />\r\n              {errors.description && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.description}</p>}\r\n            </div>\r\n\r\n            {taskError && (\r\n              <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\r\n                <p className=\"text-red-600 text-sm flex items-center\">\r\n                  <X className=\"h-4 w-4 mr-2\" /> {taskError}\r\n                </p>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200 mt-6\">\r\n              <Button type=\"button\" variant=\"outline\" onClick={onClose}>\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                type=\"submit\"\r\n                disabled={!isSaveEnabled || taskStatus === \"loading\"}\r\n                className=\"bg-blue-600 hover:bg-blue-700 text-white\"\r\n              >\r\n                {taskStatus === \"loading\" ? (\r\n                  <>\r\n                    <Loader className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                    Updating Task...\r\n                  </>\r\n                ) : (\r\n                  \"Update Task\"\r\n                )}\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default EditTaskModal;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2943, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/task/components/AllTaskListByProjectId.jsx"],"sourcesContent":["\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\"use client\";\r\n\r\nimport { format } from \"date-fns\";\r\nimport { useEffect, useState, useMemo } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport {\r\n  fetchTasksByProjectId,\r\n  deleteTask,\r\n  downloadTasksReport,\r\n  selectTasksByProjectId,\r\n  selectTaskStatus,\r\n  selectEmployeeProjectTasks,\r\n  fetchEmployeeProjectTasks,\r\n} from \"@/modules/project-management/task/slices/taskSlice\";\r\nimport {\r\n  MoreVertical,\r\n  CalendarIcon,\r\n  Filter,\r\n  Eye,\r\n  Edit,\r\n  Trash2,\r\n  Download,\r\n  Plus,\r\n  Search,\r\n  AlertCircle,\r\n  X,\r\n} from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\r\nimport { Calendar } from \"@/components/ui/calendar\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from \"@/components/ui/table\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { formatDateTimeIST } from \"@/utils/formatDate\";\r\nimport CreateTaskModal from \"./CreateTaskModal\";\r\nimport EditTaskModal from \"./EditTaskModal\";\r\nimport { useCurrentUser } from \"@/hooks/useCurrentUser\";\r\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n\r\nconst AllTaskListByProjectId = ({ projectId, project }) => {\r\n  const { currentUser, isTeamLead } = useCurrentUser(project?.teamLeadId);\r\n  const dispatch = useDispatch();\r\n  const router = useRouter();\r\n\r\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n  const [taskIdToDelete, setTaskIdToDelete] = useState(null);\r\n  const [showLoader, setShowLoader] = useState(true);\r\n  const [showCreateTaskModal, setShowCreateTaskModal] = useState(false);\r\n  const [showEditModal, setShowEditModal] = useState(false);\r\n  const [editingTaskId, setEditingTaskId] = useState(null);\r\n  const [showFilterDialog, setShowFilterDialog] = useState(false);\r\n\r\n  const isCpc = currentUser?.role === \"cpc\";\r\n  const isTeamLeadOrCpc = isCpc || isTeamLead;\r\n  const [viewMode, setViewMode] = useState(isTeamLeadOrCpc ? \"all\" : \"my\");\r\n\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [tempPriorityFilter, setTempPriorityFilter] = useState(\"all\");\r\n  const [tempStatusFilter, setTempStatusFilter] = useState(\"all\");\r\n  const [tempAssignedToFilter, setTempAssignedToFilter] = useState(\"all\");\r\n  const [tempDateFrom, setTempDateFrom] = useState(null);\r\n  const [tempDateTo, setTempDateTo] = useState(null);\r\n  const [priorityFilter, setPriorityFilter] = useState(\"all\");\r\n  const [statusFilter, setStatusFilter] = useState(\"all\");\r\n  const [assignedToFilter, setAssignedToFilter] = useState(\"all\");\r\n  const [dateFrom, setDateFrom] = useState(null);\r\n  const [dateTo, setDateTo] = useState(null);\r\n  const [sortConfig, setSortConfig] = useState({ key: \"\", direction: \"asc\" });\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const tasksPerPage = 10;\r\n\r\n  useEffect(() => {\r\n    if (projectId) {\r\n      setShowLoader(true);\r\n      dispatch(fetchTasksByProjectId(projectId))\r\n        .unwrap()\r\n        .finally(() => setShowLoader(false));\r\n    }\r\n  }, [dispatch, projectId]);\r\n\r\n  const employeeId = currentUser?.id;\r\n  const tasksFromStore = useSelector((state) => selectTasksByProjectId(state, projectId));\r\n  const status = useSelector(selectTaskStatus);\r\n  const employeeProjectTasks = useSelector((state) =>\r\n    selectEmployeeProjectTasks(state, projectId, employeeId)\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (projectId && employeeId && (!isTeamLeadOrCpc || viewMode === \"my\")) {\r\n      setShowLoader(true);\r\n      dispatch(fetchEmployeeProjectTasks({ projectId, employeeId }))\r\n        .unwrap()\r\n        .finally(() => setShowLoader(false));\r\n    }\r\n  }, [dispatch, projectId, employeeId, isTeamLeadOrCpc, viewMode]);\r\n\r\n  const tasks = useMemo(() => {\r\n    return (!isTeamLeadOrCpc || viewMode === \"my\") ? employeeProjectTasks || [] : tasksFromStore || [];\r\n  }, [isTeamLeadOrCpc, viewMode, tasksFromStore, employeeProjectTasks]);\r\n\r\n  const showAllViewOption = isTeamLeadOrCpc;\r\n  const showAssignedFilter = showAllViewOption && viewMode === \"all\";\r\n\r\n  const refreshTasks = () => {\r\n    dispatch(fetchTasksByProjectId(projectId));\r\n    if (!isTeamLeadOrCpc || viewMode === \"my\") {\r\n      dispatch(fetchEmployeeProjectTasks({ projectId, employeeId }));\r\n    }\r\n  };\r\n\r\n  const handleDeleteTask = async () => {\r\n    try {\r\n      await dispatch(deleteTask(taskIdToDelete)).unwrap();\r\n      toast.success(\"Task deleted successfully!\");\r\n      refreshTasks();\r\n    } catch (err) {\r\n      toast.error(\"Failed to delete task.\");\r\n    }\r\n    setShowDeleteModal(false);\r\n    setTaskIdToDelete(null);\r\n  };\r\n\r\n  const handleSort = (key) => {\r\n    setSortConfig((prev) => ({\r\n      key,\r\n      direction: prev.key === key && prev.direction === \"asc\" ? \"desc\" : \"asc\",\r\n    }));\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const handleViewModeChange = (newMode) => {\r\n    setViewMode(newMode);\r\n    setCurrentPage(1);\r\n    handleResetFilters();\r\n  };\r\n\r\n  const assignedMembers = useMemo(() => {\r\n    return Array.from(new Set(tasks.flatMap(t => t.assignedTo?.map(a => a.memberName) || []))).filter(Boolean);\r\n  }, [tasks]);\r\n\r\n  const filteredTasks = useMemo(() => {\r\n    let filtered = [...tasks];\r\n\r\n    if (searchQuery.trim()) {\r\n      const q = searchQuery.toLowerCase();\r\n      filtered = filtered.filter(t =>\r\n        t.title?.toLowerCase().includes(q) ||\r\n        t.task_id?.toLowerCase().includes(q) ||\r\n        t.assignedTo?.some(a => a.memberName?.toLowerCase().includes(q))\r\n      );\r\n    }\r\n\r\n    if (priorityFilter !== \"all\") filtered = filtered.filter(t => t.priority === priorityFilter);\r\n    if (statusFilter !== \"all\") filtered = filtered.filter(t => t.status === statusFilter);\r\n    if (assignedToFilter !== \"all\" && showAssignedFilter) {\r\n      filtered = filtered.filter(t => t.assignedTo?.some(a => a.memberName === assignedToFilter));\r\n    }\r\n    if (dateFrom || dateTo) {\r\n      filtered = filtered.filter(t => {\r\n        if (!t.deadline) return false;\r\n        const d = new Date(t.deadline);\r\n        return (!dateFrom || d >= dateFrom) && (!dateTo || d <= dateTo);\r\n      });\r\n    }\r\n\r\n    if (sortConfig.key) {\r\n      filtered.sort((a, b) => {\r\n        let aVal = sortConfig.key.includes(\".\") ? sortConfig.key.split(\".\").reduce((o, k) => o?.[k], a) : a[sortConfig.key];\r\n        let bVal = sortConfig.key.includes(\".\") ? sortConfig.key.split(\".\").reduce((o, k) => o?.[k], b) : b[sortConfig.key];\r\n        if (typeof aVal === \"string\") aVal = aVal.toLowerCase();\r\n        if (typeof bVal === \"string\") bVal = bVal.toLowerCase();\r\n        return (aVal < bVal ? -1 : 1) * (sortConfig.direction === \"asc\" ? 1 : -1);\r\n      });\r\n    }\r\n\r\n    return filtered;\r\n  }, [tasks, searchQuery, priorityFilter, statusFilter, assignedToFilter, dateFrom, dateTo, sortConfig, showAssignedFilter]);\r\n\r\n  const handleResetFilters = () => {\r\n    setSearchQuery(\"\");\r\n    setPriorityFilter(\"all\");\r\n    setStatusFilter(\"all\");\r\n    setAssignedToFilter(\"all\");\r\n    setDateFrom(null);\r\n    setDateTo(null);\r\n    setTempPriorityFilter(\"all\");\r\n    setTempStatusFilter(\"all\");\r\n    setTempAssignedToFilter(\"all\");\r\n    setTempDateFrom(null);\r\n    setTempDateTo(null);\r\n    setSortConfig({ key: \"\", direction: \"asc\" });\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const handleApplyFilters = () => {\r\n    setPriorityFilter(tempPriorityFilter);\r\n    setStatusFilter(tempStatusFilter);\r\n    setAssignedToFilter(tempAssignedToFilter);\r\n    setDateFrom(tempDateFrom);\r\n    setDateTo(tempDateTo);\r\n    setShowFilterDialog(false);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const totalPages = Math.max(1, Math.ceil(filteredTasks.length / tasksPerPage));\r\n  const paginatedTasks = filteredTasks.slice((currentPage - 1) * tasksPerPage, currentPage * tasksPerPage);\r\n\r\n  const getInitials = (name) => {\r\n    if (!name) return \"NA\";\r\n    const words = name.split(\" \");\r\n    return words.length > 1 ? `${words[0][0]}${words[1][0]}`.toUpperCase() : name.slice(0, 2).toUpperCase();\r\n  };\r\n\r\n  const truncateTitle = (title) => title?.length > 70 ? `${title.slice(0, 70)}...` : title || \"N/A\";\r\n\r\n  return (\r\n    <TooltipProvider>\r\n      <div className=\"w-full bg-white\">\r\n        <div className=\"space-y-2\">\r\n\r\n          <div className=\"flex flex-wrap gap-4\">\r\n            <div className=\"flex-1 min-w-[180px]\">\r\n              <div className=\"relative\">\r\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4\" />\r\n                <Input\r\n                  placeholder=\"Search tasks...\"\r\n                  value={searchQuery}\r\n                  onChange={(e) => setSearchQuery(e.target.value)}\r\n                  className=\"pl-10\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {showAllViewOption && (\r\n              <Select value={viewMode} onValueChange={handleViewModeChange}>\r\n                <SelectTrigger className=\"w-[140px]\">\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"my\">My Tasks</SelectItem>\r\n                  <SelectItem value=\"all\">All Tasks</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            )}\r\n\r\n            <Button variant=\"outline\" onClick={() => setShowFilterDialog(true)}>\r\n              <Filter className=\"w-4 h-4 mr-2\" /> Filter\r\n            </Button>\r\n            <Button variant=\"outline\" onClick={handleResetFilters}>\r\n              <X className=\"w-4 h-4 mr-2\" /> Reset\r\n            </Button>\r\n\r\n            {isTeamLeadOrCpc && (\r\n              <>\r\n                <Button variant=\"default\" onClick={() => dispatch(downloadTasksReport({ projectId }))}>\r\n                  <Download className=\"w-4 h-4 mr-2\" /> Download\r\n                </Button>\r\n                <Button variant=\"default\" onClick={() => setShowCreateTaskModal(true)}>\r\n                  <Plus className=\"w-4 h-4 mr-2\" /> Create Task\r\n                </Button>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"border rounded-lg overflow-hidden\">\r\n            <Table>\r\n              <TableHeader>\r\n                <TableRow className=\"bg-gray-50\">\r\n                  <TableHead className=\"w-16\">S.N</TableHead>\r\n                  <TableHead onClick={() => handleSort(\"title\")} className=\"cursor-pointer\">Title</TableHead>\r\n                  <TableHead>Assignee</TableHead>\r\n                  <TableHead onClick={() => handleSort(\"priority\")} className=\"cursor-pointer\">Priority</TableHead>\r\n                  <TableHead onClick={() => handleSort(\"deadline\")} className=\"cursor-pointer\">Deadline</TableHead>\r\n                  <TableHead onClick={() => handleSort(\"status\")} className=\"cursor-pointer\">Status</TableHead>\r\n                  <TableHead className=\"w-20\">Action</TableHead>\r\n                </TableRow>\r\n              </TableHeader>\r\n              <TableBody>\r\n                {showLoader ? (\r\n                  <TableRow><TableCell colSpan={7} className=\"text-center py-10\">Loading...</TableCell></TableRow>\r\n                ) : paginatedTasks.length === 0 ? (\r\n                  <TableRow><TableCell colSpan={7} className=\"text-center py-10 text-gray-500\">No tasks found</TableCell></TableRow>\r\n                ) : (\r\n                  paginatedTasks.map((task, idx) => (\r\n                    <TableRow key={task._id} className=\"hover:bg-gray-50 cursor-pointer\" onClick={() => router.push(`/workspace/task/${task.task_id}`)}>\r\n                      <TableCell>{(currentPage - 1) * tasksPerPage + idx + 1}</TableCell>\r\n                      <TableCell className=\"font-medium\">{truncateTitle(task.title)}</TableCell>\r\n\r\n                      <TableCell>\r\n                        {task.assignedTo?.length > 0 ? (\r\n                          <div className=\"flex -space-x-2\">\r\n                            {task.assignedTo.slice(0, 3).map((a) => (\r\n                              <Tooltip key={a.memberId || a._id}>\r\n                                <TooltipTrigger asChild>\r\n                                  <Avatar className=\"w-8 h-8 ring-2 ring-white\">\r\n                                    <AvatarFallback className=\"bg-teal-600 text-white text-xs\">\r\n                                      {getInitials(a.memberName)}\r\n                                    </AvatarFallback>\r\n                                  </Avatar>\r\n                                </TooltipTrigger>\r\n                                <TooltipContent>{a.memberName}</TooltipContent>\r\n                              </Tooltip>\r\n                            ))}\r\n                            {task.assignedTo.length > 3 && (\r\n                              <div className=\"w-8 h-8 rounded-full bg-gray-300 text-xs flex items-center justify-center ring-2 ring-white\">\r\n                                +{task.assignedTo.length - 3}\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        ) : \"—\"}\r\n                      </TableCell>\r\n\r\n                      <TableCell>\r\n                        <span className={cn(\r\n                          \"px-2.5 py-0.5 rounded-full text-xs font-medium\",\r\n                          task.priority === \"Low\" && \"bg-green-100 text-green-800\",\r\n                          task.priority === \"Medium\" && \"bg-yellow-100 text-yellow-800\",\r\n                          task.priority === \"High\" && \"bg-red-100 text-red-800\"\r\n                        )}>\r\n                          {task.priority}\r\n                        </span>\r\n                      </TableCell>\r\n\r\n                      <TableCell className=\"text-xs\">\r\n                        {formatDateTimeIST(task.deadline) || \"—\"}\r\n                      </TableCell>\r\n\r\n                      <TableCell>\r\n                        <span className={cn(\r\n                          \"px-2.5 py-0.5 rounded-full text-xs font-medium\",\r\n                          task.status === \"Pending\" && \"bg-yellow-100 text-yellow-800\",\r\n                          task.status === \"In Progress\" && \"bg-blue-100 text-blue-800\",\r\n                          task.status === \"Completed\" && \"bg-green-100 text-green-800\"\r\n                        )}>\r\n                          {task.status}\r\n                        </span>\r\n                      </TableCell>\r\n\r\n                      <TableCell onClick={(e) => e.stopPropagation()}>\r\n                        <DropdownMenu>\r\n                          <DropdownMenuTrigger asChild>\r\n                            <Button variant=\"ghost\" size=\"icon\"><MoreVertical className=\"h-4 w-4\" /></Button>\r\n                          </DropdownMenuTrigger>\r\n                          <DropdownMenuContent align=\"end\">\r\n                            <DropdownMenuItem onClick={() => router.push(`/workspace/task/${task.task_id}`)}>\r\n                              <Eye className=\"w-4 h-4 mr-2\" /> View\r\n                            </DropdownMenuItem>\r\n                            {isTeamLeadOrCpc && viewMode === \"all\" && (\r\n                              <>\r\n                                <DropdownMenuItem onClick={() => { setEditingTaskId(task.task_id); setShowEditModal(true); }}>\r\n                                  <Edit className=\"w-4 h-4 mr-2\" /> Edit\r\n                                </DropdownMenuItem>\r\n                                <DropdownMenuItem onClick={() => { setTaskIdToDelete(task.task_id); setShowDeleteModal(true); }} className=\"text-red-600\">\r\n                                  <Trash2 className=\"w-4 h-4 mr-2\" /> Delete\r\n                                </DropdownMenuItem>\r\n                              </>\r\n                            )}\r\n                          </DropdownMenuContent>\r\n                        </DropdownMenu>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))\r\n                )}\r\n              </TableBody>\r\n            </Table>\r\n          </div>\r\n\r\n          {totalPages > 1 && (\r\n            <div className=\"flex justify-center gap-2\">\r\n              <Button variant=\"outline\" size=\"sm\" disabled={currentPage === 1} onClick={() => setCurrentPage(p => p - 1)}>Previous</Button>\r\n              {Array.from({ length: Math.min(7, totalPages) }, (_, i) => {\r\n                const page = i + 1;\r\n                return (\r\n                  <Button key={page} variant={currentPage === page ? \"default\" : \"outline\"} size=\"sm\" onClick={() => setCurrentPage(page)}>\r\n                    {page}\r\n                  </Button>\r\n                );\r\n              })}\r\n              <Button variant=\"outline\" size=\"sm\" disabled={currentPage === totalPages} onClick={() => setCurrentPage(p => p + 1)}>Next</Button>\r\n            </div>\r\n          )}\r\n\r\n          <Dialog open={showDeleteModal} onOpenChange={setShowDeleteModal}>\r\n            <DialogContent>\r\n              <DialogHeader>\r\n                <DialogTitle className=\"flex items-center gap-2\">\r\n                  <AlertCircle className=\"w-5 h-5 text-red-600\" /> Delete Task\r\n                </DialogTitle>\r\n              </DialogHeader>\r\n              <p>Are you sure you want to delete this task? This action cannot be undone.</p>\r\n              <div className=\"flex justify-end gap-3 mt-4\">\r\n                <Button variant=\"outline\" onClick={() => setShowDeleteModal(false)}>Cancel</Button>\r\n                <Button variant=\"destructive\" onClick={handleDeleteTask}>Delete</Button>\r\n              </div>\r\n            </DialogContent>\r\n          </Dialog>\r\n\r\n          {isTeamLeadOrCpc && (\r\n            <CreateTaskModal\r\n              onTaskAssingn={refreshTasks}\r\n              projectId={projectId}\r\n              project={project}\r\n              isOpen={showCreateTaskModal}\r\n              onClose={() => setShowCreateTaskModal(false)}\r\n            />\r\n          )}\r\n\r\n          {isTeamLeadOrCpc && (\r\n            <EditTaskModal\r\n              taskId={editingTaskId}\r\n              isOpen={showEditModal}\r\n              onClose={() => { setShowEditModal(false); setEditingTaskId(null); }}\r\n              onTaskUpdated={refreshTasks}\r\n            />\r\n          )}\r\n        </div>\r\n      </div>\r\n    </TooltipProvider>\r\n  );\r\n};\r\n\r\nexport default AllTaskListByProjectId;"],"names":[],"mappings":"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","debugId":null}}]
}