{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/components/ui/card.jsx"],"sourcesContent":["// import * as React from \"react\"\r\n\r\n// import { cn } from \"@/lib/utils\"\r\n\r\n// function Card({\r\n//   className,\r\n//   ...props\r\n// }) {\r\n//   return (\r\n//     <div\r\n//       data-slot=\"card\"\r\n//       className={cn(\r\n//         \"bg-card text-card-foreground flex flex-col gap-6   py-6 shadow-sm\",\r\n//         className\r\n//       )}\r\n//       {...props} />\r\n//   );\r\n// }\r\n\r\n// function CardHeader({\r\n//   className,\r\n//   ...props\r\n// }) {\r\n//   return (\r\n//     <div\r\n//       data-slot=\"card-header\"\r\n//       className={cn(\r\n//         \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\r\n//         className\r\n//       )}\r\n//       {...props} />\r\n//   );\r\n// }\r\n\r\n// function CardTitle({\r\n//   className,\r\n//   ...props\r\n// }) {\r\n//   return (\r\n//     <div\r\n//       data-slot=\"card-title\"\r\n//       className={cn(\"leading-none font-semibold\", className)}\r\n//       {...props} />\r\n//   );\r\n// }\r\n\r\n// function CardDescription({\r\n//   className,\r\n//   ...props\r\n// }) {\r\n//   return (\r\n//     <div\r\n//       data-slot=\"card-description\"\r\n//       className={cn(\"text-muted-foreground text-sm\", className)}\r\n//       {...props} />\r\n//   );\r\n// }\r\n\r\n// function CardAction({\r\n//   className,\r\n//   ...props\r\n// }) {\r\n//   return (\r\n//     <div\r\n//       data-slot=\"card-action\"\r\n//       className={cn(\r\n//         \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\r\n//         className\r\n//       )}\r\n//       {...props} />\r\n//   );\r\n// }\r\n\r\n// function CardContent({\r\n//   className,\r\n//   ...props\r\n// }) {\r\n//   return (<div data-slot=\"card-content\" className={cn(\"px-6\", className)} {...props} />);\r\n// }\r\n\r\n// function CardFooter({\r\n//   className,\r\n//   ...props\r\n// }) {\r\n//   return (\r\n//     <div\r\n//       data-slot=\"card-footer\"\r\n//       className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\r\n//       {...props} />\r\n//   );\r\n// }\r\n\r\n// export {\r\n//   Card,\r\n//   CardHeader,\r\n//   CardFooter,\r\n//   CardTitle,\r\n//   CardAction,\r\n//   CardDescription,\r\n//   CardContent,\r\n// }\r\n'use client';\r\n\r\nimport * as React from 'react';\r\n\r\nimport { cn } from '@/lib/utils';\r\n\r\nexport const Card = React.forwardRef(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\r\n      'rounded-lg border bg-card text-card-foreground shadow-sm',\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nCard.displayName = 'Card';\r\nexport  function CardAction({\r\n  className,\r\n  ...props\r\n}) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-action\"\r\n      className={cn(\r\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\r\n        className\r\n      )}\r\n      {...props} />\r\n  );\r\n}\r\nexport const CardHeader = React.forwardRef(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn('flex flex-col space-y-1.5 p-6', className)}\r\n    {...props}\r\n  />\r\n));\r\nCardHeader.displayName = 'CardHeader';\r\n\r\nexport const CardTitle = React.forwardRef(({ className, ...props }, ref) => (\r\n  <h3\r\n    ref={ref}\r\n    className={cn(\r\n      'text-2xl font-semibold leading-none tracking-tight',\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nCardTitle.displayName = 'CardTitle';\r\n\r\nexport const CardDescription = React.forwardRef(({ className, ...props }, ref) => (\r\n  <p\r\n    ref={ref}\r\n    className={cn('text-sm text-muted-foreground', className)}\r\n    {...props}\r\n  />\r\n));\r\nCardDescription.displayName = 'CardDescription';\r\n\r\nexport const CardContent = React.forwardRef(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn('p-6 pt-0', className)} {...props} />\r\n));\r\nCardContent.displayName = 'CardContent';\r\n\r\nexport const CardFooter = React.forwardRef(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn('flex items-center p-6 pt-0', className)}\r\n    {...props}\r\n  />\r\n));\r\nCardFooter.displayName = 'CardFooter';"],"names":[],"mappings":"AAAA,iCAAiC;AAEjC,mCAAmC;AAEnC,kBAAkB;AAClB,eAAe;AACf,aAAa;AACb,OAAO;AACP,aAAa;AACb,WAAW;AACX,yBAAyB;AACzB,uBAAuB;AACvB,+EAA+E;AAC/E,oBAAoB;AACpB,WAAW;AACX,sBAAsB;AACtB,OAAO;AACP,IAAI;AAEJ,wBAAwB;AACxB,eAAe;AACf,aAAa;AACb,OAAO;AACP,aAAa;AACb,WAAW;AACX,gCAAgC;AAChC,uBAAuB;AACvB,wKAAwK;AACxK,oBAAoB;AACpB,WAAW;AACX,sBAAsB;AACtB,OAAO;AACP,IAAI;AAEJ,uBAAuB;AACvB,eAAe;AACf,aAAa;AACb,OAAO;AACP,aAAa;AACb,WAAW;AACX,+BAA+B;AAC/B,gEAAgE;AAChE,sBAAsB;AACtB,OAAO;AACP,IAAI;AAEJ,6BAA6B;AAC7B,eAAe;AACf,aAAa;AACb,OAAO;AACP,aAAa;AACb,WAAW;AACX,qCAAqC;AACrC,mEAAmE;AACnE,sBAAsB;AACtB,OAAO;AACP,IAAI;AAEJ,wBAAwB;AACxB,eAAe;AACf,aAAa;AACb,OAAO;AACP,aAAa;AACb,WAAW;AACX,gCAAgC;AAChC,uBAAuB;AACvB,4EAA4E;AAC5E,oBAAoB;AACpB,WAAW;AACX,sBAAsB;AACtB,OAAO;AACP,IAAI;AAEJ,yBAAyB;AACzB,eAAe;AACf,aAAa;AACb,OAAO;AACP,4FAA4F;AAC5F,IAAI;AAEJ,wBAAwB;AACxB,eAAe;AACf,aAAa;AACb,OAAO;AACP,aAAa;AACb,WAAW;AACX,gCAAgC;AAChC,6EAA6E;AAC7E,sBAAsB;AACtB,OAAO;AACP,IAAI;AAEJ,WAAW;AACX,UAAU;AACV,gBAAgB;AAChB,gBAAgB;AAChB,eAAe;AACf,gBAAgB;AAChB,qBAAqB;AACrB,iBAAiB;AACjB,IAAI;;;;;;;;;;;AAGJ;AAEA;AAJA;;;;AAMO,MAAM,qBAAO,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAAE,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC7D,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AACX,SAAS,WAAW,EAC1B,SAAS,EACT,GAAG,OACJ;IACC,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,kEACA;QAED,GAAG,KAAK;;;;;;AAEf;AACO,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAAE,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACnE,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAElB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAAE,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAClE,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAEjB,MAAM,gCAAkB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAAE,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxE,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAEvB,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAAE,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACpE,8OAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAAE,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACnE,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 192, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/components/ui/dialog.jsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\r\nimport { XIcon } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Dialog({\r\n  ...props\r\n}) {\r\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />;\r\n}\r\n\r\nfunction DialogTrigger({\r\n  ...props\r\n}) {\r\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />;\r\n}\r\n\r\nfunction DialogPortal({\r\n  ...props\r\n}) {\r\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />;\r\n}\r\n\r\nfunction DialogClose({\r\n  ...props\r\n}) {\r\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />;\r\n}\r\n\r\nfunction DialogOverlay({\r\n  className,\r\n  ...props\r\n}) {\r\n  return (\r\n    <DialogPrimitive.Overlay\r\n      data-slot=\"dialog-overlay\"\r\n      className={cn(\r\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\r\n        className\r\n      )}\r\n      {...props} />\r\n  );\r\n}\r\n\r\nfunction DialogContent({\r\n  className,\r\n  children,\r\n  showCloseButton = true,\r\n  ...props\r\n}) {\r\n  return (\r\n    <DialogPortal data-slot=\"dialog-portal\">\r\n      <DialogOverlay />\r\n      <DialogPrimitive.Content\r\n        data-slot=\"dialog-content\"\r\n        className={cn(\r\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg\",\r\n          className\r\n        )}\r\n        {...props}>\r\n        {children}\r\n        {showCloseButton && (\r\n          <DialogPrimitive.Close\r\n            data-slot=\"dialog-close\"\r\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\">\r\n            <XIcon />\r\n            <span className=\"sr-only\">Close</span>\r\n          </DialogPrimitive.Close>\r\n        )}\r\n      </DialogPrimitive.Content>\r\n    </DialogPortal>\r\n  );\r\n}\r\n\r\nfunction DialogHeader({\r\n  className,\r\n  ...props\r\n}) {\r\n  return (\r\n    <div\r\n      data-slot=\"dialog-header\"\r\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\r\n      {...props} />\r\n  );\r\n}\r\n\r\nfunction DialogFooter({\r\n  className,\r\n  ...props\r\n}) {\r\n  return (\r\n    <div\r\n      data-slot=\"dialog-footer\"\r\n      className={cn(\"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\", className)}\r\n      {...props} />\r\n  );\r\n}\r\n\r\nfunction DialogTitle({\r\n  className,\r\n  ...props\r\n}) {\r\n  return (\r\n    <DialogPrimitive.Title\r\n      data-slot=\"dialog-title\"\r\n      className={cn(\"text-lg leading-none font-semibold\", className)}\r\n      {...props} />\r\n  );\r\n}\r\n\r\nfunction DialogDescription({\r\n  className,\r\n  ...props\r\n}) {\r\n  return (\r\n    <DialogPrimitive.Description\r\n      data-slot=\"dialog-description\"\r\n      className={cn(\"text-muted-foreground text-sm\", className)}\r\n      {...props} />\r\n  );\r\n}\r\n\r\nexport {\r\n  Dialog,\r\n  DialogClose,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogOverlay,\r\n  DialogPortal,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OACJ;IACC,qBAAO,8OAAC,kKAAA,CAAA,OAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;AAEA,SAAS,cAAc,EACrB,GAAG,OACJ;IACC,qBAAO,8OAAC,kKAAA,CAAA,UAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;AAEA,SAAS,aAAa,EACpB,GAAG,OACJ;IACC,qBAAO,8OAAC,kKAAA,CAAA,SAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;AAEA,SAAS,YAAY,EACnB,GAAG,OACJ;IACC,qBAAO,8OAAC,kKAAA,CAAA,QAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACJ;IACC,qBACE,8OAAC,kKAAA,CAAA,UAAuB;QACtB,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,0JACA;QAED,GAAG,KAAK;;;;;;AAEf;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,kBAAkB,IAAI,EACtB,GAAG,OACJ;IACC,qBACE,8OAAC;QAAa,aAAU;;0BACtB,8OAAC;;;;;0BACD,8OAAC,kKAAA,CAAA,UAAuB;gBACtB,aAAU;gBACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,+WACA;gBAED,GAAG,KAAK;;oBACR;oBACA,iCACC,8OAAC,kKAAA,CAAA,QAAqB;wBACpB,aAAU;wBACV,WAAU;;0CACV,8OAAC,gMAAA,CAAA,QAAK;;;;;0CACN,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;AAEA,SAAS,aAAa,EACpB,SAAS,EACT,GAAG,OACJ;IACC,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAEf;AAEA,SAAS,aAAa,EACpB,SAAS,EACT,GAAG,OACJ;IACC,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,0DAA0D;QACvE,GAAG,KAAK;;;;;;AAEf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACJ;IACC,qBACE,8OAAC,kKAAA,CAAA,QAAqB;QACpB,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAEf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACJ;IACC,qBACE,8OAAC,kKAAA,CAAA,cAA2B;QAC1B,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAEf","debugId":null}},
    {"offset": {"line": 367, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/task/components/sub-task/SubTaskList.jsx"],"sourcesContent":["\r\n\r\n\r\n// \"use client\";\r\n\r\n// import { useState, useEffect } from \"react\";\r\n// import { Button } from \"@/components/ui/button\";\r\n// import { Badge } from \"@/components/ui/badge\";\r\n// import { Progress } from \"@/components/ui/progress\";\r\n// import { useDispatch, useSelector } from \"react-redux\";\r\n// import {\r\n//   Tooltip,\r\n//   TooltipContent,\r\n//   TooltipTrigger,\r\n// } from \"@/components/ui/tooltip\";\r\n// import {\r\n//   CheckCircle2,\r\n//   Edit,\r\n//   Eye,\r\n//   Plus,\r\n//   Trash2,\r\n//   ChevronLeft,\r\n//   ChevronRight,\r\n//   Lock,\r\n//   ListTodo,\r\n// } from \"lucide-react\";\r\n// import CreateSubtaskModal from \"@/modules/project-management/task/components/sub-task/CreateSubTaskModal\";\r\n// import EditSubtaskModal from \"@/modules/project-management/task/components/sub-task/EditSubTaskModal\";\r\n// import DeleteSubtaskModal from \"@/modules/project-management/task/components/sub-task/DeleteSubTaskModal\";\r\n// import { fetchSubTasksByTaskId } from \"@/modules/project-management/task/slices/subTaskSlice\";\r\n// import { useRouter } from \"next/navigation\";\r\n// import { useCurrentUser } from \"@/hooks/useCurrentUser\";\r\n// import { fetchProjectById } from \"@/modules/project-management/project/slices/projectSlice\";\r\n// import { cn } from \"@/lib/utils\";\r\n\r\n// const SubTaskList = ({ task, taskId, projectId, isTaskClosed }) => {\r\n//     const { project, status, successMessage } = useSelector(\r\n//     (state) => state.project\r\n//   );\r\n\r\n\r\n//     const { currentUser, isTeamLead } = useCurrentUser(project?.data?.teamLeadId);\r\n//   const router = useRouter();\r\n//   const dispatch = useDispatch();\r\n//   const { subtasks, loading, error } = useSelector((state) => state.subTask);\r\n\r\n//   // Pagination state\r\n//   const [currentPage, setCurrentPage] = useState(1);\r\n//   const subtasksPerPage = 5;\r\n//   const safeSubtasks = Array.isArray(subtasks) ? subtasks : [];\r\n//   const totalPages = Math.ceil(safeSubtasks.length / subtasksPerPage);\r\n//   const indexOfLastSubtask = currentPage * subtasksPerPage;\r\n//   const indexOfFirstSubtask = indexOfLastSubtask - subtasksPerPage;\r\n//   const currentSubtasks = safeSubtasks.slice(\r\n//     indexOfFirstSubtask,\r\n//     indexOfLastSubtask\r\n//   );\r\n\r\n//   // Fetch subtasks on mount and when taskId changes\r\n//   useEffect(() => {\r\n//     if (taskId) {\r\n//       dispatch(fetchSubTasksByTaskId(taskId));\r\n     \r\n      \r\n//     }\r\n       \r\n    \r\n//   }, [dispatch, subtasks?.length, taskId]);\r\n//   useEffect(() => {\r\n  \r\n//           dispatch(fetchProjectById(projectId));\r\n   \r\n    \r\n//   }, [dispatch]);\r\n\r\n//   // Modal states\r\n//   const [openEdit, setOpenEdit] = useState(false);\r\n//   const [openAdd, setOpenAdd] = useState(false);\r\n//   const [openDelete, setOpenDelete] = useState(false);\r\n//   const [selectedSubtask, setSelectedSubtask] = useState(null);\r\n\r\n//   // Calculate progress\r\n//   const completedSubtasks = safeSubtasks.filter(\r\n//     (st) => st.status === \"Completed\"\r\n//   ).length;\r\n//   const progress =\r\n//     safeSubtasks.length > 0\r\n//       ? (completedSubtasks / safeSubtasks.length) * 100\r\n//       : 0;\r\n\r\n//   // Handlers\r\n//   // const handleView = (subtask) => {\r\n//   //   router.push(`/task/${taskId}/${subtask.subtask_id}`);\r\n//   // };\r\n//   const handleView = (subtask) => {\r\n//     router.push(`/workspace/task/${taskId}/${subtask.subtask_id}`);\r\n//   };\r\n \r\n\r\n//   const handleEdit = (subtask) => {\r\n//     if (isTaskClosed) return;\r\n//     setSelectedSubtask(subtask);\r\n//     setOpenEdit(true);\r\n//   };\r\n\r\n//   const handleDelete = (subtask) => {\r\n//     if (isTaskClosed) return;\r\n//     setSelectedSubtask(subtask);\r\n//     setOpenDelete(true);\r\n//     // Adjust page if deleting the last subtask on the current page\r\n//     if (currentSubtasks.length === 1 && currentPage > 1) {\r\n//       setCurrentPage(currentPage - 1);\r\n//     }\r\n//   };\r\n\r\n//   const handlePrevPage = () => {\r\n//     if (currentPage > 1) setCurrentPage(currentPage - 1);\r\n//   };\r\n\r\n//   const handleNextPage = () => {\r\n//     if (currentPage < totalPages) setCurrentPage(currentPage + 1);\r\n//   };\r\n\r\n//   const getStatusVariant = (status) => {\r\n//     if (status === \"Completed\") return \"success\";\r\n//     if (status === \"In Progress\") return \"warning\";\r\n//     return \"secondary\"; // For Pending\r\n//   };\r\n\r\n//   return (\r\n//     <section>\r\n//       <div className=\"flex justify-between items-center mb-2\">\r\n//         <h3 className=\"text-base sm:text-lg font-semibold flex items-center\">\r\n//           <ListTodo className=\"mr-2 h-4 w-4 sm:h-5 sm:w-5 text-green-500\" />\r\n//           Subtasks\r\n//         </h3>\r\n      \r\n//         {/* {!isTaskClosed &&  currentUser?.role === \"cpc\"||currentUser?.role === \"Team Lead\" || isTeamLead ? (\r\n//           <Button\r\n//             className=\"bg-blue-600 hover:bg-blue-700 text-xs sm:text-sm px-2 sm:px-3 h-8 sm:h-9\"\r\n//             onClick={() => setOpenAdd(true)}\r\n//             disabled={isTaskClosed}\r\n//           >\r\n//             <Plus className=\"mr-1 h-3 w-3 sm:h-4 sm:w-4\" /> Add\r\n//           </Button>\r\n//         ) : (\r\n//           <Badge\r\n//             variant=\"secondary\"\r\n//             className=\"flex items-center text-xs sm:text-sm\"\r\n//           >\r\n//             <Lock className=\"mr-1 h-3 w-3 sm:h-4 sm:w-4\" /> Read-Only\r\n//           </Badge>\r\n//         )} */}\r\n//         {!isTaskClosed && (\r\n//   <Button\r\n//     className=\"bg-blue-600 hover:bg-blue-700 text-xs sm:text-sm px-2 sm:px-3 h-8 sm:h-9\"\r\n//     onClick={() => setOpenAdd(true)}\r\n//   >\r\n//     <Plus className=\"mr-1 h-3 w-3 sm:h-4 sm:w-4\" /> Add\r\n//   </Button>\r\n// )}\r\n\r\n//       </div>\r\n//       <div className=\"mb-3\">\r\n//         <div className=\"flex justify-between items-center mb-2\">\r\n//           <span className=\"font-medium text-xs sm:text-sm\">\r\n//             Progress: {progress.toFixed(0)}%\r\n//           </span>\r\n//           <Badge\r\n//             variant={progress === 100 ? \"success\" : \"default\"}\r\n//             className=\"text-xs sm:text-sm\"\r\n//           >\r\n//             {completedSubtasks}/{safeSubtasks.length} Completed\r\n//           </Badge>\r\n//         </div>\r\n//         <Progress value={progress} className=\"h-2 bg-gray-200\" />\r\n//       </div>\r\n//       {loading && (\r\n//         <div className=\"text-center text-sm text-gray-500\">\r\n//           Loading subtasks...\r\n//         </div>\r\n//       )}\r\n//       {!loading && !error && safeSubtasks.length === 0 && (\r\n//         <div className=\"text-center text-sm text-gray-500\">\r\n//           No subtasks available\r\n//         </div>\r\n//       )}\r\n//       {!loading && !error && safeSubtasks.length > 0 && (\r\n//         <ul className=\"space-y-2\">\r\n//           {currentSubtasks.map((st) => (\r\n//             <li\r\n//               key={st.subtask_id}\r\n//               className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 p-2 sm:p-3 border rounded-lg bg-muted/50 transition-all hover:shadow-md\"\r\n//             >\r\n//               <div className=\"flex-1 flex items-center\">\r\n//                 <CheckCircle2\r\n//                   className={`mr-2 h-3 w-3 sm:h-4 sm:w-4 ${\r\n//                     st.status === \"Completed\"\r\n//                       ? \"text-green-500\"\r\n//                       : st.status === \"In Progress\"\r\n//                       ? \"text-yellow-500\"\r\n//                       : \"text-gray-400\"\r\n//                   }`}\r\n//                 />\r\n//                 <span className=\"font-medium text-xs sm:text-sm\">\r\n//                   {st.title}\r\n//                 </span>\r\n                \r\n//               </div>\r\n//               <div className=\"flex items-center gap-1 sm:gap-2\">\r\n//                                            {st.isResolved === false && (\r\n//                   <Tooltip>\r\n//                     <TooltipTrigger asChild>\r\n//                       <span\r\n//                         className={cn(\r\n//                           \"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium whitespace-nowrap cursor-default\",\r\n//                           \"bg-red-100 text-red-700\"\r\n//                         )}\r\n//                       >\r\n//                         Bug Found\r\n//                       </span>\r\n//                     </TooltipTrigger>\r\n//                     <TooltipContent className=\"text-xs px-2 py-1 rounded shadow-md bg-red-600 text-white\">\r\n//                       Bug is active. Resolve now!\r\n//                     </TooltipContent>\r\n//                   </Tooltip>\r\n//                 )}\r\n//                 <Badge\r\n//                   variant={getStatusVariant(st.status)}\r\n//                   className=\"text-xs sm:text-sm\"\r\n//                 >\r\n//                   {st.status}\r\n//                 </Badge>\r\n//                 <Tooltip>\r\n//                   <TooltipTrigger asChild>\r\n//                     <Button\r\n//                       variant=\"ghost\"\r\n//                       size=\"icon\"\r\n//                       onClick={() => handleView(st)}\r\n//                       className=\"h-7 w-7 sm:h-8 sm:w-8\"\r\n//                     >\r\n//                       <Eye className=\"h-3 w-3 sm:h-4 sm:w-4 text-blue-500\" />\r\n//                     </Button>\r\n//                   </TooltipTrigger>\r\n//                   <TooltipContent>View</TooltipContent>\r\n//                 </Tooltip>\r\n//                 {!isTaskClosed && (\r\n//                   <>\r\n//                     <Tooltip>\r\n//                       <TooltipTrigger asChild>\r\n//                         <Button\r\n//                           variant=\"ghost\"\r\n//                           size=\"icon\"\r\n//                           onClick={() => handleEdit(st)}\r\n//                           disabled={isTaskClosed}\r\n//                           className=\"h-7 w-7 sm:h-8 sm:w-8\"\r\n//                         >\r\n//                           <Edit className=\"h-3 w-3 sm:h-4 sm:w-4 text-yellow-500\" />\r\n//                         </Button>\r\n//                       </TooltipTrigger>\r\n//                       <TooltipContent>Edit</TooltipContent>\r\n//                     </Tooltip>\r\n//                     <Tooltip>\r\n//                       <TooltipTrigger asChild>\r\n//                         <Button\r\n//                           variant=\"ghost\"\r\n//                           size=\"icon\"\r\n//                           onClick={() => handleDelete(st)}\r\n//                           disabled={isTaskClosed}\r\n//                           className=\"h-7 w-7 sm:h-8 sm:w-8\"\r\n//                         >\r\n//                           <Trash2 className=\"h-3 w-3 sm:h-4 sm:w-4 text-red-500\" />\r\n//                         </Button>\r\n//                       </TooltipTrigger>\r\n//                       <TooltipContent>Delete</TooltipContent>\r\n//                     </Tooltip>\r\n//                   </>\r\n//                 )}\r\n//               </div>\r\n//             </li>\r\n//           ))}\r\n//         </ul>\r\n//       )}\r\n//       {totalPages > 1 && (\r\n//         <div className=\"flex justify-center items-center gap-3 mt-3\">\r\n//           <Button\r\n//             variant=\"ghost\"\r\n//             size=\"icon\"\r\n//             onClick={handlePrevPage}\r\n//             disabled={currentPage === 1}\r\n//             className=\"h-8 w-8 sm:h-9 sm:w-9\"\r\n//           >\r\n//             <ChevronLeft className=\"h-4 w-4 sm:h-5 sm:w-5\" />\r\n//           </Button>\r\n//           <span className=\"text-xs sm:text-sm font-medium\">\r\n//             Page {currentPage} of {totalPages}\r\n//           </span>\r\n//           <Button\r\n//             variant=\"ghost\"\r\n//             size=\"icon\"\r\n//             onClick={handleNextPage}\r\n//             disabled={currentPage === totalPages}\r\n//             className=\"h-8 w-8 sm:h-9 sm:w-9\"\r\n//           >\r\n//             <ChevronRight className=\"h-4 w-4 sm:h-5 sm:w-5\" />\r\n//           </Button>\r\n//         </div>\r\n//       )}\r\n\r\n//       {/* Create, Edit, Delete Modals */}\r\n//       <CreateSubtaskModal\r\n//         open={openAdd}\r\n//         setOpen={setOpenAdd}\r\n//         taskDetails={task}\r\n//         taskId={taskId}\r\n//         projectId={projectId}\r\n//       />\r\n//       {selectedSubtask && (\r\n//         <EditSubtaskModal\r\n//         onSubtaskEdit={() => {\r\n  \r\n//       dispatch(fetchSubTasksByTaskId(taskId)); // optional if subtasks might change\r\n//     }}\r\n//           open={openEdit}\r\n//           setOpen={setOpenEdit}\r\n//           subtask={selectedSubtask}\r\n//           taskId={taskId}\r\n//           isTaskClosed={isTaskClosed}\r\n//           projectId={projectId}\r\n//         />\r\n//       )}\r\n//       {selectedSubtask && (\r\n//         <DeleteSubtaskModal\r\n//              onSubtaskDelete={() => {\r\n  \r\n//       dispatch(fetchSubTasksByTaskId(taskId)); // optional if subtasks might change\r\n//     }}\r\n//           open={openDelete}\r\n//           setOpen={setOpenDelete}\r\n//           subtask={selectedSubtask}\r\n//           taskId={taskId}\r\n//           isTaskClosed={isTaskClosed}\r\n//         />\r\n//       )}\r\n//     </section>\r\n//   );\r\n// };\r\n\r\n// export default SubTaskList;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// \"use client\";\r\n\r\n// import { useState, useEffect } from \"react\";\r\n// import { Button } from \"@/components/ui/button\";\r\n// import { Badge } from \"@/components/ui/badge\";\r\n// import { Progress } from \"@/components/ui/progress\";\r\n// import { useDispatch, useSelector } from \"react-redux\";\r\n// import {\r\n//   Tooltip,\r\n//   TooltipContent,\r\n//   TooltipTrigger,\r\n// } from \"@/components/ui/tooltip\";\r\n// import {\r\n//   CheckCircle2,\r\n//   Edit,\r\n//   Eye,\r\n//   Plus,\r\n//   Trash2,\r\n//   ChevronLeft,\r\n//   ChevronRight,\r\n//   Lock,\r\n//   ListTodo,\r\n// } from \"lucide-react\";\r\n// import CreateSubtaskModal from \"@/modules/project-management/task/components/sub-task/CreateSubTaskModal\";\r\n// import EditSubtaskModal from \"@/modules/project-management/task/components/sub-task/EditSubTaskModal\";\r\n// import DeleteSubtaskModal from \"@/modules/project-management/task/components/sub-task/DeleteSubTaskModal\";\r\n// import { fetchSubTasksByTaskId } from \"@/modules/project-management/task/slices/subTaskSlice\";\r\n// import { useRouter } from \"next/navigation\";\r\n// import { useCurrentUser } from \"@/hooks/useCurrentUser\";\r\n// import { fetchProjectById } from \"@/modules/project-management/project/slices/projectSlice\";\r\n// import { cn } from \"@/lib/utils\";\r\n\r\n// const SubTaskList = ({ task, taskId, projectId, isTaskClosed }) => {\r\n//     const { project, status, successMessage } = useSelector(\r\n//     (state) => state.project\r\n//   );\r\n\r\n\r\n//     const { currentUser, isTeamLead } = useCurrentUser(project?.data?.teamLeadId);\r\n//   const router = useRouter();\r\n//   const dispatch = useDispatch();\r\n//   const { subtasks, loading, error } = useSelector((state) => state.subTask);\r\n\r\n//   // Pagination state\r\n//   const [currentPage, setCurrentPage] = useState(1);\r\n//   const subtasksPerPage = 5;\r\n//   const safeSubtasks = Array.isArray(subtasks) ? subtasks : [];\r\n//   const totalPages = Math.ceil(safeSubtasks.length / subtasksPerPage);\r\n//   const indexOfLastSubtask = currentPage * subtasksPerPage;\r\n//   const indexOfFirstSubtask = indexOfLastSubtask - subtasksPerPage;\r\n//   const currentSubtasks = safeSubtasks.slice(\r\n//     indexOfFirstSubtask,\r\n//     indexOfLastSubtask\r\n//   );\r\n\r\n//   // Fetch subtasks on mount and when taskId changes\r\n//   useEffect(() => {\r\n//     if (taskId) {\r\n//       dispatch(fetchSubTasksByTaskId(taskId));\r\n     \r\n      \r\n//     }\r\n       \r\n    \r\n//   }, [dispatch, subtasks?.length, taskId]);\r\n//   useEffect(() => {\r\n  \r\n//           dispatch(fetchProjectById(projectId));\r\n   \r\n    \r\n//   }, [dispatch]);\r\n\r\n//   // Modal states\r\n//   const [openEdit, setOpenEdit] = useState(false);\r\n//   const [openAdd, setOpenAdd] = useState(false);\r\n//   const [openDelete, setOpenDelete] = useState(false);\r\n//   const [selectedSubtask, setSelectedSubtask] = useState(null);\r\n\r\n//   // Calculate progress\r\n//   const completedSubtasks = safeSubtasks.filter(\r\n//     (st) => st.status === \"Completed\"\r\n//   ).length;\r\n//   const progress =\r\n//     safeSubtasks.length > 0\r\n//       ? (completedSubtasks / safeSubtasks.length) * 100\r\n//       : 0;\r\n\r\n//   // Handlers\r\n//   // const handleView = (subtask) => {\r\n//   //   router.push(`/task/${taskId}/${subtask.subtask_id}`);\r\n//   // };\r\n//   const handleView = (subtask) => {\r\n//     router.push(`/workspace/task/${taskId}/${subtask.subtask_id}`);\r\n//   };\r\n \r\n\r\n//   const handleEdit = (subtask) => {\r\n//     if (isTaskClosed) return;\r\n//     setSelectedSubtask(subtask);\r\n//     setOpenEdit(true);\r\n//   };\r\n\r\n//   const handleDelete = (subtask) => {\r\n//     if (isTaskClosed) return;\r\n//     setSelectedSubtask(subtask);\r\n//     setOpenDelete(true);\r\n//     // Adjust page if deleting the last subtask on the current page\r\n//     if (currentSubtasks.length === 1 && currentPage > 1) {\r\n//       setCurrentPage(currentPage - 1);\r\n//     }\r\n//   };\r\n\r\n//   const handlePrevPage = () => {\r\n//     if (currentPage > 1) setCurrentPage(currentPage - 1);\r\n//   };\r\n\r\n//   const handleNextPage = () => {\r\n//     if (currentPage < totalPages) setCurrentPage(currentPage + 1);\r\n//   };\r\n\r\n//   const getStatusVariant = (status) => {\r\n//     if (status === \"Completed\") return \"success\";\r\n//     if (status === \"In Progress\") return \"warning\";\r\n//     return \"secondary\"; // For Pending\r\n//   };\r\n\r\n//   return (\r\n//     <section>\r\n//       <div className=\"flex justify-between items-center mb-2\">\r\n//         <h3 className=\"text-base sm:text-lg font-semibold flex items-center\">\r\n//           <ListTodo className=\"mr-2 h-4 w-4 sm:h-5 sm:w-5 text-green-500\" />\r\n//           Subtasks\r\n//         </h3>\r\n      \r\n\r\n// {/* Single Add Button – handles ALL cases with proper UI feedback */}\r\n// {isTeamLead && task?.status !== \"Completed\" && (\r\n//   <Tooltip>\r\n//     <TooltipTrigger asChild>\r\n//       <div className=\"inline-block\">\r\n//         <Button\r\n//           className={cn(\r\n//             \"bg-blue-600 text-xs sm:text-sm px-2 sm:px-3 h-8 sm:h-9 transition-all\",\r\n//             task?.status === \"Pending\" \r\n//               ? \"hover:bg-blue-600/80 cursor-not-allowed opacity-70\" \r\n//               : \"hover:bg-blue-700\"\r\n//           )}\r\n//           onClick={() => task?.status === \"In Progress\" && setOpenAdd(true)}\r\n//           disabled={task?.status !== \"In Progress\"}\r\n//         >\r\n//           <Plus className=\"mr-1 h-3 w-3 sm:h-4 sm:w-4\" /> Add\r\n//         </Button>\r\n//       </div>\r\n//     </TooltipTrigger>\r\n\r\n//     {/* Tooltip message changes based on task status */}\r\n//     {task?.status === \"Pending\" && (\r\n//       <TooltipContent className=\"text-xs\">\r\n//         Start the tasks to add subtasks\r\n//       </TooltipContent>\r\n//     )}\r\n//   </Tooltip>\r\n// )}\r\n\r\n//       </div>\r\n//       <div className=\"mb-3\">\r\n//         <div className=\"flex justify-between items-center mb-2\">\r\n//           <span className=\"font-medium text-xs sm:text-sm\">\r\n//             Progress: {progress.toFixed(0)}%\r\n//           </span>\r\n//           <Badge\r\n//             variant={progress === 100 ? \"success\" : \"default\"}\r\n//             className=\"text-xs sm:text-sm\"\r\n//           >\r\n//             {completedSubtasks}/{safeSubtasks.length} Completed\r\n//           </Badge>\r\n//         </div>\r\n//         <Progress value={progress} className=\"h-2 bg-gray-200\" />\r\n//       </div>\r\n//       {loading && (\r\n//         <div className=\"text-center text-sm text-gray-500\">\r\n//           Loading subtasks...\r\n//         </div>\r\n//       )}\r\n//       {!loading && !error && safeSubtasks.length === 0 && (\r\n//         <div className=\"text-center text-sm text-gray-500\">\r\n//           No subtasks available\r\n//         </div>\r\n//       )}\r\n//       {!loading && !error && safeSubtasks.length > 0 && (\r\n//         <ul className=\"space-y-2\">\r\n//           {currentSubtasks.map((st) => (\r\n//             <li\r\n//               key={st.subtask_id}\r\n//               className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 p-2 sm:p-3 border rounded-lg bg-muted/50 transition-all hover:shadow-md\"\r\n//             >\r\n//               <div className=\"flex-1 flex items-center\">\r\n//                 <CheckCircle2\r\n//                   className={`mr-2 h-3 w-3 sm:h-4 sm:w-4 ${\r\n//                     st.status === \"Completed\"\r\n//                       ? \"text-green-500\"\r\n//                       : st.status === \"In Progress\"\r\n//                       ? \"text-yellow-500\"\r\n//                       : \"text-gray-400\"\r\n//                   }`}\r\n//                 />\r\n//                 <span className=\"font-medium text-xs sm:text-sm\">\r\n//                   {st.title}\r\n//                 </span>\r\n                \r\n//               </div>\r\n//               <div className=\"flex items-center gap-1 sm:gap-2\">\r\n//                                            {st.isResolved === false && (\r\n//                   <Tooltip>\r\n//                     <TooltipTrigger asChild>\r\n//                       <span\r\n//                         className={cn(\r\n//                           \"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium whitespace-nowrap cursor-default\",\r\n//                           \"bg-red-100 text-red-700\"\r\n//                         )}\r\n//                       >\r\n//                         Bug Found\r\n//                       </span>\r\n//                     </TooltipTrigger>\r\n//                     <TooltipContent className=\"text-xs px-2 py-1 rounded shadow-md bg-red-600 text-white\">\r\n//                       Bug is active. Resolve now!\r\n//                     </TooltipContent>\r\n//                   </Tooltip>\r\n//                 )}\r\n//                 <Badge\r\n//                   variant={getStatusVariant(st.status)}\r\n//                   className=\"text-xs sm:text-sm\"\r\n//                 >\r\n//                   {st.status}\r\n//                 </Badge>\r\n//                 <Tooltip>\r\n//                   <TooltipTrigger asChild>\r\n//                     <Button\r\n//                       variant=\"ghost\"\r\n//                       size=\"icon\"\r\n//                       onClick={() => handleView(st)}\r\n//                       className=\"h-7 w-7 sm:h-8 sm:w-8\"\r\n//                     >\r\n//                       <Eye className=\"h-3 w-3 sm:h-4 sm:w-4 text-blue-500\" />\r\n//                     </Button>\r\n//                   </TooltipTrigger>\r\n//                   <TooltipContent>View</TooltipContent>\r\n//                 </Tooltip>\r\n//               {/* Edit & Delete - Only show if Team Lead AND task is exactly \"In Progress\" */}\r\n// {isTeamLead && task?.status === \"In Progress\" && (\r\n//   <>\r\n//     <Button\r\n//       variant=\"ghost\"\r\n//       size=\"icon\"\r\n//       onClick={() => handleEdit(st)}\r\n//       className=\"h-7 w-7 sm:h-8 sm:w-8\"\r\n//     >\r\n//       <Edit className=\"h-3 w-3 sm:h-4 sm:w-4 text-yellow-500\" />\r\n//     </Button>\r\n\r\n//     <Button\r\n//       variant=\"ghost\"\r\n//       size=\"icon\"\r\n//       onClick={() => handleDelete(st)}\r\n//       className=\"h-7 w-7 sm:h-8 sm:w-8\"\r\n//     >\r\n//       <Trash2 className=\"h-3 w-3 sm:h-4 sm:w-4 text-red-500\" />\r\n//     </Button>\r\n//   </>\r\n// )}\r\n//               </div>\r\n//             </li>\r\n//           ))}\r\n//         </ul>\r\n//       )}\r\n//       {totalPages > 1 && (\r\n//         <div className=\"flex justify-center items-center gap-3 mt-3\">\r\n//           <Button\r\n//             variant=\"ghost\"\r\n//             size=\"icon\"\r\n//             onClick={handlePrevPage}\r\n//             disabled={currentPage === 1}\r\n//             className=\"h-8 w-8 sm:h-9 sm:w-9\"\r\n//           >\r\n//             <ChevronLeft className=\"h-4 w-4 sm:h-5 sm:w-5\" />\r\n//           </Button>\r\n//           <span className=\"text-xs sm:text-sm font-medium\">\r\n//             Page {currentPage} of {totalPages}\r\n//           </span>\r\n//           <Button\r\n//             variant=\"ghost\"\r\n//             size=\"icon\"\r\n//             onClick={handleNextPage}\r\n//             disabled={currentPage === totalPages}\r\n//             className=\"h-8 w-8 sm:h-9 sm:w-9\"\r\n//           >\r\n//             <ChevronRight className=\"h-4 w-4 sm:h-5 sm:w-5\" />\r\n//           </Button>\r\n//         </div>\r\n//       )}\r\n\r\n//       {/* Create, Edit, Delete Modals */}\r\n//       <CreateSubtaskModal\r\n//         open={openAdd}\r\n//         setOpen={setOpenAdd}\r\n//         taskDetails={task}\r\n//         taskId={taskId}\r\n//         projectId={projectId}\r\n//       />\r\n//       {selectedSubtask && (\r\n//         <EditSubtaskModal\r\n//         onSubtaskEdit={() => {\r\n  \r\n//       dispatch(fetchSubTasksByTaskId(taskId)); // optional if subtasks might change\r\n//     }}\r\n//           open={openEdit}\r\n//           setOpen={setOpenEdit}\r\n//           subtask={selectedSubtask}\r\n//           taskId={taskId}\r\n//           isTaskClosed={isTaskClosed}\r\n//           projectId={projectId}\r\n//         />\r\n//       )}\r\n//       {selectedSubtask && (\r\n//         <DeleteSubtaskModal\r\n//              onSubtaskDelete={() => {\r\n  \r\n//       dispatch(fetchSubTasksByTaskId(taskId)); // optional if subtasks might change\r\n//     }}\r\n//           open={openDelete}\r\n//           setOpen={setOpenDelete}\r\n//           subtask={selectedSubtask}\r\n//           taskId={taskId}\r\n//           isTaskClosed={isTaskClosed}\r\n//         />\r\n//       )}\r\n//     </section>\r\n//   );\r\n// };\r\n\r\n// export default SubTaskList;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 997, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/utils/formatDate.js"],"sourcesContent":["// lib/formatRange.js\r\nexport function formatRange(start, end) {\r\n  const options = { month: 'short', day: 'numeric' };\r\n  const startStr = start.toLocaleDateString(undefined, options);\r\n  const endStr = end.toLocaleDateString(undefined, options);\r\n\r\n  return `${startStr} – ${endStr}`;\r\n}\r\n\r\n\r\n\r\n\r\n// utils/date.js\r\nexport function formatDateUTC(dateString) {\r\n    if (!dateString) return '';\r\n    return new Date(dateString).toLocaleDateString('en-GB', {\r\n        timeZone: 'UTC',\r\n        day: '2-digit',\r\n        month: 'short',\r\n        year: 'numeric'\r\n    });\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport function formatDateTimeIST(dateString) {\r\n  if (!dateString) return '';\r\n\r\n  const date = new Date(dateString);\r\n\r\n  return date.toLocaleString('en-GB', {\r\n    timeZone: 'Asia/Kolkata', // ✅ IST\r\n    day: '2-digit',\r\n    month: 'short',\r\n    year: 'numeric',\r\n    hour: '2-digit',\r\n    minute: '2-digit',\r\n    second: '2-digit',\r\n    hour12: true, // shows AM/PM\r\n  });\r\n}\r\n\r\nexport function formatDateTimeUTC(dateString) {\r\n  if (!dateString) return '';\r\n  return new Date(dateString).toLocaleString('en-GB', {\r\n    timeZone: 'UTC',\r\n    day: '2-digit',\r\n    month: 'short',\r\n    year: 'numeric',\r\n    hour: '2-digit',\r\n    minute: '2-digit',\r\n     second: '2-digit', \r\n    hour12: true, // ✅ shows AM/PM\r\n  });\r\n}\r\n"],"names":[],"mappings":"AAAA,qBAAqB;;;;;;;AACd,SAAS,YAAY,KAAK,EAAE,GAAG;IACpC,MAAM,UAAU;QAAE,OAAO;QAAS,KAAK;IAAU;IACjD,MAAM,WAAW,MAAM,kBAAkB,CAAC,WAAW;IACrD,MAAM,SAAS,IAAI,kBAAkB,CAAC,WAAW;IAEjD,OAAO,GAAG,SAAS,GAAG,EAAE,QAAQ;AAClC;AAMO,SAAS,cAAc,UAAU;IACpC,IAAI,CAAC,YAAY,OAAO;IACxB,OAAO,IAAI,KAAK,YAAY,kBAAkB,CAAC,SAAS;QACpD,UAAU;QACV,KAAK;QACL,OAAO;QACP,MAAM;IACV;AACJ;AAMO,SAAS,kBAAkB,UAAU;IAC1C,IAAI,CAAC,YAAY,OAAO;IAExB,MAAM,OAAO,IAAI,KAAK;IAEtB,OAAO,KAAK,cAAc,CAAC,SAAS;QAClC,UAAU;QACV,KAAK;QACL,OAAO;QACP,MAAM;QACN,MAAM;QACN,QAAQ;QACR,QAAQ;QACR,QAAQ;IACV;AACF;AAEO,SAAS,kBAAkB,UAAU;IAC1C,IAAI,CAAC,YAAY,OAAO;IACxB,OAAO,IAAI,KAAK,YAAY,cAAc,CAAC,SAAS;QAClD,UAAU;QACV,KAAK;QACL,OAAO;QACP,MAAM;QACN,MAAM;QACN,QAAQ;QACP,QAAQ;QACT,QAAQ;IACV;AACF","debugId":null}},
    {"offset": {"line": 1055, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/task/components/ViewTask.jsx"],"sourcesContent":["\r\n\r\n\r\n\r\n\r\n\r\n// \"use client\";\r\n\r\n// import { useEffect, useState } from \"react\";\r\n// import { useParams, useRouter } from \"next/navigation\";\r\n// import { Button } from \"@/components/ui/button\";\r\n// import { Card, CardContent } from \"@/components/ui/card\";\r\n// import { Separator } from \"@/components/ui/separator\";\r\n// import {\r\n//   Dialog,\r\n//   DialogContent,\r\n//   DialogHeader,\r\n//   DialogTitle,\r\n//   DialogFooter,\r\n// } from \"@/components/ui/dialog\";\r\n// import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n// import {\r\n//   ChevronLeft,\r\n//   Play,\r\n//   CheckCircle,\r\n//   RotateCcw,\r\n//   Clock,\r\n//   AlertCircle,\r\n//   User,\r\n//   Calendar,\r\n//   Flag,\r\n//   Tag,\r\n//   FileText,\r\n//   ChevronDown,\r\n//   ChevronUp,\r\n// } from \"lucide-react\";\r\n\r\n// import SubTaskList from \"@/modules/project-management/task/components/sub-task/SubTaskList\";\r\n// import { useDispatch, useSelector } from \"react-redux\";\r\n// import {\r\n//   fetchTaskById,\r\n//   updateTaskStatus,\r\n// } from \"@/modules/project-management/task/slices/taskSlice\";\r\n// import { fetchSubTasksByTaskId } from \"@/modules/project-management/task/slices/subTaskSlice\";\r\n// import { formatDateTimeIST } from \"@/utils/formatDate\";\r\n// import { useCurrentUser } from \"@/hooks/useCurrentUser\";\r\n// import { toast } from \"sonner\";\r\n\r\n// const TaskView = () => {\r\n//   const dispatch = useDispatch();\r\n//   const router = useRouter();\r\n//   const { id: task_id } = useParams();\r\n\r\n//   const task = useSelector((state) => state.task.currentTask);\r\n//   const { subtasks } = useSelector((state) => state.subTask);\r\n//   const loading = useSelector((state) => state.task.status === \"loading\");\r\n//   const updating = useSelector((state) => state.task.updating);\r\n//   const { currentUser } = useCurrentUser();\r\n\r\n//   const [showFullDesc, setShowFullDesc] = useState(false);\r\n//   const [delayDialog, setDelayDialog] = useState(false);\r\n//   const [delayReason, setDelayReason] = useState(\"\");\r\n//   const [confirmCompleteOpen, setConfirmCompleteOpen] = useState(false);\r\n//   const [initialLoading, setInitialLoading] = useState(true);\r\n//   const [assigneeOpen, setAssigneeOpen] = useState(false);\r\n//   const [selectedPerson, setSelectedPerson] = useState(null);\r\n//   const isTeamLead = task?.teamLeadId === currentUser?.id;\r\n//   const canEdit = isTeamLead;\r\n//   const allSubtasksDone = subtasks?.every((s) => s.status === \"Completed\") ?? true;\r\n\r\n//   useEffect(() => {\r\n//     const timer = setTimeout(() => setInitialLoading(false), 1200);\r\n//     return () => clearTimeout(timer);\r\n//   }, []);\r\n\r\n//   useEffect(() => {\r\n//     if (task_id) {\r\n//       dispatch(fetchTaskById(task_id));\r\n//       dispatch(fetchSubTasksByTaskId(task_id));\r\n//     }\r\n//   }, [task_id, dispatch]);\r\n\r\n//   const handleStatusChange = async (newStatus) => {\r\n//     if (updating || !canEdit) return;\r\n\r\n//     if (newStatus === \"Completed\") {\r\n//       setConfirmCompleteOpen(true);\r\n//       return;\r\n//     }\r\n\r\n//     if (newStatus === \"Pending\") {\r\n//       await dispatch(updateTaskStatus({ taskId: task_id, status: \"Pending\" }));\r\n//       toast.success(\"Task reopened successfully\");\r\n//       dispatch(fetchTaskById(task_id));\r\n//       return;\r\n//     }\r\n\r\n//     if (newStatus === \"In Progress\") {\r\n//       await dispatch(updateTaskStatus({ taskId: task_id, status: \"In Progress\" }));\r\n//       toast.success(\"Task is now In Progress\");\r\n//       dispatch(fetchTaskById(task_id));\r\n//     }\r\n//   };\r\n\r\n//   const confirmComplete = async () => {\r\n//     setConfirmCompleteOpen(false);\r\n\r\n//     if (task.deadline && new Date() > new Date(task.deadline)) {\r\n//       setDelayDialog(true);\r\n//       return;\r\n//     }\r\n\r\n//     await dispatch(updateTaskStatus({ taskId: task_id, status: \"Completed\" }));\r\n//     toast.success(\"Task marked as Completed\");\r\n//     dispatch(fetchTaskById(task_id));\r\n//   };\r\n\r\n//   const submitDelay = async () => {\r\n//     if (!delayReason.trim()) return;\r\n\r\n//     await dispatch(\r\n//       updateTaskStatus({\r\n//         taskId: task_id,\r\n//         status: \"Completed\",\r\n//         delayReason: delayReason.trim(),\r\n//       })\r\n//     );\r\n//     toast.success(\"Task completed with delay reason\");\r\n//     setDelayDialog(false);\r\n//     setDelayReason(\"\");\r\n//     dispatch(fetchTaskById(task_id));\r\n//   };\r\n\r\n//   const getInitials = (name = \"\") =>\r\n//     name.split(\" \").map((n) => n[0]).join(\"\").slice(0, 2).toUpperCase();\r\n\r\n//   // SMART ACTION BUTTON — Shows exact next step\r\n//   const getActionButton = () => {\r\n//     if (!canEdit || !task?.status) return null;\r\n\r\n//     if (task.status === \"Pending\") {\r\n//       return {\r\n//         text: \"Start Task\",\r\n//         subtitle: \"Move to In Progress\",\r\n//         color: \"bg-blue-600 hover:bg-blue-700\",\r\n//         icon: Play,\r\n//         next: \"In Progress\",\r\n//       };\r\n//     }\r\n\r\n//     if (task.status === \"In Progress\") {\r\n//       return {\r\n//         text: \"Mark Complete\",\r\n//         subtitle: \"Finish this task\",\r\n//         color: allSubtasksDone ? \"bg-teal-600 hover:bg-teal-700\" : \"bg-gray-500\",\r\n//         icon: CheckCircle,\r\n//         next: \"Completed\",\r\n//         disabled: !allSubtasksDone,\r\n//       };\r\n//     }\r\n\r\n//     if (task.status === \"Completed\") {\r\n//       return {\r\n//         text: \"Reopen Task\",\r\n//         subtitle: \"Back to Pending\",\r\n//         color: \"bg-purple-600 hover:bg-purple-700\",\r\n//         icon: RotateCcw,\r\n//         next: \"Pending\",\r\n//       };\r\n//     }\r\n\r\n//     return null;\r\n//   };\r\n\r\n//   const actionBtn = getActionButton();\r\n\r\n//   // Loading & Not Found\r\n//   if (initialLoading || loading) {\r\n//     return (\r\n//       <div className=\"min-h-screen bg-gray-50\">\r\n//         <div className=\"bg-teal-600 text-white py-8 px-6\">\r\n//           <div className=\"flex items-center gap-4\">\r\n//             <div className=\"h-10 w-28 bg-teal-700 rounded-lg animate-pulse\" />\r\n//             <div className=\"h-6 w-48 bg-teal-400 rounded animate-pulse\" />\r\n//           </div>\r\n//         </div>\r\n//         <Card className=\"shadow-xl border-0 min-h-screen\">\r\n//           <CardContent className=\"p-8 space-y-10 animate-pulse\">\r\n//             <div className=\"h-12 w-64 bg-gray-300 rounded-lg self-end\" />\r\n//             <div className=\"space-y-6\">\r\n//               <div className=\"h-8 w-96 bg-gray-200 rounded\" />\r\n//               <div className=\"space-y-3\">\r\n//                 <div className=\"h-5 w-32 bg-gray-300 rounded\" />\r\n//                 <div className=\"h-20 w-full bg-gray-200 rounded\" />\r\n//               </div>\r\n//             </div>\r\n//           </CardContent>\r\n//         </Card>\r\n//       </div>\r\n//     );\r\n//   }\r\n\r\n//   if (!task) {\r\n//     return (\r\n//       <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n//         <Card className=\"text-center p-12 shadow-xl\">\r\n//           <h1 className=\"text-3xl font-bold text-gray-800 mb-4\">Task Not Found</h1>\r\n//           <Button onClick={() => router.back()} className=\"bg-teal-600 hover:bg-teal-700\">\r\n//             Back\r\n//           </Button>\r\n//         </Card>\r\n//       </div>\r\n//     );\r\n//   }\r\n\r\n//   return (\r\n//     <div className=\"min-h-screen bg-gray-50\">\r\n//       {/* Clean Header */}\r\n//       <div className=\"bg-teal-600 text-white py-8 px-6\">\r\n        \r\n//         <div className=\"flex items-center gap-4\">\r\n//             <Button size=\"sm\" onClick={() => router.back()} className=\"bg-teal-700 hover:bg-teal-800 rounded-lg\">\r\n//                       <ChevronLeft className=\"w-5 h-5 mr-1\" /> Back\r\n//                     </Button>\r\n//           <p className=\"text-teal-100 text-sm\">Task ID: {task.task_id}</p>\r\n//         </div>\r\n//       </div>\r\n\r\n//       <Card className=\"shadow-xl border-0 min-h-screen\">\r\n//         <CardContent className=\"p-6 sm:p-8 space-y-5\">\r\n\r\n//           {/* Smart Action Button — Tells user exactly what’s next */}\r\n//           {actionBtn && (\r\n//             <div className=\"flex justify-end\">\r\n//               <div className=\"text-right\">\r\n//                 <Button\r\n//                   onClick={() => handleStatusChange(actionBtn.next)}\r\n//                   disabled={updating || actionBtn.disabled}\r\n//                   className={`${actionBtn.color} text-white font-medium px-6 py-3`}\r\n//                 >\r\n//                   <actionBtn.icon className=\"w-5 h-5 mr-2\" />\r\n//                   {actionBtn.text}\r\n//                 </Button>\r\n//                 <p className=\"text-xs text-gray-500 mt-2\">\r\n//                   {actionBtn.subtitle}\r\n//                   {actionBtn.disabled && \" — Complete all subtasks first\"}\r\n//                 </p>\r\n//               </div>\r\n//             </div>\r\n//           )}\r\n\r\n//           {/* Task Title */}\r\n//           <div>\r\n//             <p className=\"text-sm  font-bold text-gray-900\"> Title</p>\r\n//             <h1 className=\"text-sm text-gray-900\">{task.title}</h1>\r\n//           </div>\r\n\r\n//           {/* Description */}\r\n//           {task.description && (\r\n//             <div>\r\n//               <p className=\"text-sm text-gray-900  font-bold\">Description</p>\r\n//               <div className=\"text-gray-700 leading-relaxed prose max-w-none\">\r\n//                 {task.description.length > 600 && !showFullDesc ? (\r\n//                   <>\r\n//                     <div dangerouslySetInnerHTML={{ __html: task.description.slice(0, 600).replace(/\\n/g, \"<br/>\") + \"...\" }} />\r\n//                     <button onClick={() => setShowFullDesc(true)} className=\"text-teal-600 text-sm font-medium mt-3 flex items-center hover:underline\">\r\n//                       Show more <ChevronDown className=\"w-4 h-4 ml-1\" />\r\n//                     </button>\r\n//                   </>\r\n//                 ) : (\r\n//                   <>\r\n//                     <div dangerouslySetInnerHTML={{ __html: task.description.replace(/\\n/g, \"<br/>\") }} />\r\n//                     {task.description.length > 600 && (\r\n//                       <button onClick={() => setShowFullDesc(false)} className=\"text-teal-600 text-sm font-medium mt-3 flex items-center hover:underline\">\r\n//                         Show less <ChevronUp className=\"w-4 h-4 ml-1\" />\r\n//                       </button>\r\n//                     )}\r\n//                   </>\r\n//                 )}\r\n//               </div>\r\n//             </div>\r\n//           )}\r\n\r\n//           {/* Info Grid */}\r\n//           <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 text-sm\">\r\n//             {task.projectName && (\r\n//               <div><p className=\"text-gray-900  font-bold\">Project</p><p className=\"font-medium text-gray-800 mt-0.5\">{task.projectName}</p></div>\r\n//             )}\r\n//             {task.priority && (\r\n//               <div><p className=\"text-gray-900  font-bold\">Priority</p>\r\n//                 <span className={`mt-1 inline-block px-3 py-1 rounded-full text-xs font-medium text-white ${\r\n//                   task.priority === \"High\" ? \"bg-red-600\" : task.priority === \"Medium\" ? \"bg-amber-500\" : \"bg-emerald-600\"\r\n//                 }`}>{task.priority}</span>\r\n//               </div>\r\n//             )}\r\n//             <div>\r\n//               <p className=\"text-gray-900  font-bold\">Status</p>\r\n//               <span className={`mt-1 inline-block px-3 py-1 rounded-full text-xs font-medium text-white ${\r\n//                 task.status === \"Completed\" ? \"bg-gray-700\" :\r\n//                 task.status === \"In Progress\" ? \"bg-blue-600\" : \"bg-orange-600\"\r\n//               }`}>\r\n//                 {task.status}\r\n//               </span>\r\n//             </div>\r\n//             <div>\r\n//               <p className=\"text-gray-900  font-bold\">Assigne</p>\r\n//               <div className=\"flex -space-x-3 mt-1.5\">\r\n//                 {task.assignedTo?.length > 0 ? task.assignedTo.map((p) => (\r\n//                   <Avatar key={p._id || p.memberId} className=\"w-10 h-10 ring-4 ring-white border-2 border-white cursor-pointer hover:z-10 transition-all\" onClick={() => { setSelectedPerson(p); setAssigneeOpen(true); }}>\r\n//                     <AvatarFallback className=\"bg-teal-600 text-white text-sm font-bold\">\r\n//                       {getInitials(p.memberName || p.name || \"NA\")}\r\n//                     </AvatarFallback>\r\n//                   </Avatar>\r\n//                 )) : <span className=\"text-gray-500 text-sm mt-1\">Unassigned</span>}\r\n//               </div>\r\n//             </div>\r\n//             <div><p className=\"text-gray-900  font-bold\">Created</p><p className=\"font-medium text-gray-800 mt-0.5\">{formatDateTimeIST(task.createdAt)}</p></div>\r\n//             {task.deadline && <div><p className=\"text-gray-900  font-bold\">Deadline</p><p className=\"font-medium text-gray-800 mt-0.5\">{formatDateTimeIST(task.deadline)}</p></div>}\r\n//           </div>\r\n\r\n//           {task.delayReason && (\r\n//             <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-6\">\r\n//               <p className=\"text-gray-900 flex items-center gap-2  font-bold\">\r\n//                 <AlertCircle className=\"w-5 h-5\" /> Delay Reason\r\n//               </p>\r\n//               <p className=\"mt-2 text-amber-800 leading-relaxed\">{task.delayReason}</p>\r\n//             </div>\r\n//           )}\r\n\r\n//           <Separator className=\"my-10\" />\r\n\r\n//           {/* Subtasks */}\r\n//           <div>\r\n//             <h3 className=\"text-xl font-semibold text-gray-900 mb-6\">Subtasks</h3>\r\n//             <SubTaskList\r\n//               isTaskClosed={task.status === \"Completed\"}\r\n//               task={task}\r\n//               taskId={task.task_id}\r\n//               projectId={task.projectId}\r\n//             />\r\n//           </div>\r\n//         </CardContent>\r\n//       </Card>\r\n\r\n//       {/* Dialogs */}\r\n//       <Dialog open={assigneeOpen} onOpenChange={setAssigneeOpen}>\r\n//         <DialogContent>\r\n//           <DialogHeader><DialogTitle>Team Member Details</DialogTitle></DialogHeader>\r\n//           {selectedPerson && (\r\n//             <div className=\"flex items-center gap-6 py-6\">\r\n//               <Avatar className=\"w-24 h-24\"><AvatarFallback className=\"bg-teal-600 text-white text-3xl font-bold\">{getInitials(selectedPerson.memberName || selectedPerson.name)}</AvatarFallback></Avatar>\r\n//               <div>\r\n//                 <p className=\"text-2xl font-bold\">{selectedPerson.memberName || selectedPerson.name || \"Unknown\"}</p>\r\n//                 <p className=\"text-gray-600 text-lg\">{selectedPerson.role || \"Team Member\"}</p>\r\n//                 <p className=\"text-sm text-gray-500 mt-2\">ID: {selectedPerson.memberId || selectedPerson._id || \"—\"}</p>\r\n//               </div>\r\n//             </div>\r\n//           )}\r\n//         </DialogContent>\r\n//       </Dialog>\r\n\r\n//       <Dialog open={confirmCompleteOpen} onOpenChange={setConfirmCompleteOpen}>\r\n//         <DialogContent>\r\n//           <DialogHeader><DialogTitle>Mark Task as Complete?</DialogTitle></DialogHeader>\r\n//           <p className=\"text-gray-600 text-lg\">Are you sure all work is finished and this task should be marked as <strong>Completed</strong>?</p>\r\n//           <DialogFooter className=\"mt-6\">\r\n//             <Button variant=\"outline\" onClick={() => setConfirmCompleteOpen(false)}>Cancel</Button>\r\n//             <Button onClick={confirmComplete} className=\"bg-teal-600 hover:bg-teal-700\">Yes, Mark Complete</Button>\r\n//           </DialogFooter>\r\n//         </DialogContent>\r\n//       </Dialog>\r\n\r\n//       <Dialog open={delayDialog} onOpenChange={setDelayDialog}>\r\n//         <DialogContent>\r\n//           <DialogHeader><DialogTitle className=\"text-red-600\">Deadline Missed</DialogTitle></DialogHeader>\r\n//           <div className=\"py-4\">\r\n//             <label className=\"text-sm font-medium block mb-2\">Reason for delay (required)</label>\r\n//             <textarea value={delayReason} onChange={(e) => setDelayReason(e.target.value)}\r\n//               className=\"w-full p-4 border rounded-lg min-h-32 resize-none focus:ring-2 focus:ring-teal-500\"\r\n//               placeholder=\"Please explain why this task was completed after the deadline...\" />\r\n//           </div>\r\n//           <DialogFooter>\r\n//             <Button variant=\"outline\" onClick={() => setDelayDialog(false)}>Cancel</Button>\r\n//             <Button onClick={submitDelay} disabled={!delayReason.trim()} className=\"bg-teal-600 hover:bg-teal-700\">\r\n//               Complete with Reason\r\n//             </Button>\r\n//           </DialogFooter>\r\n//         </DialogContent>\r\n//       </Dialog>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default TaskView;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// \"use client\";\r\n\r\n// import { useEffect, useState, useMemo } from \"react\";\r\n// import { useParams, useRouter } from \"next/navigation\";\r\n// import { Button } from \"@/components/ui/button\";\r\n// import { Card, CardContent } from \"@/components/ui/card\";\r\n// import {\r\n//   Dialog,\r\n//   DialogContent,\r\n//   DialogHeader,\r\n//   DialogTitle,\r\n//   DialogFooter,\r\n// } from \"@/components/ui/dialog\";\r\n// import { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\n// import { Badge } from \"@/components/ui/badge\";\r\n// import {\r\n//   ChevronLeft,\r\n//   Play,\r\n//   CheckCircle,\r\n//   RotateCcw,\r\n//   Clock,\r\n//   AlertCircle,\r\n//   User,\r\n//   Calendar,\r\n//   Flag,\r\n//   Tag,\r\n//   FileText,\r\n//   AlignLeft,\r\n//   AlertTriangle,\r\n//   ChevronDown,\r\n//   ChevronUp,\r\n//   Edit,\r\n// } from \"lucide-react\";\r\n\r\n// import SubTaskList from \"@/modules/project-management/task/components/sub-task/SubTaskList\";\r\n// import { useDispatch, useSelector } from \"react-redux\";\r\n// import {\r\n//   fetchTaskById,\r\n//   updateTaskStatus,\r\n// } from \"@/modules/project-management/task/slices/taskSlice\";\r\n// import { fetchSubTasksByTaskId } from \"@/modules/project-management/task/slices/subTaskSlice\";\r\n// import { formatDateTimeIST } from \"@/utils/formatDate\";\r\n// import { useCurrentUser } from \"@/hooks/useCurrentUser\";\r\n// import { toast } from \"sonner\";\r\n\r\n// const TaskView = () => {\r\n//   const dispatch = useDispatch();\r\n//   const router = useRouter();\r\n//   const { id: task_id } = useParams();\r\n\r\n//   const task = useSelector((state) => state.task.currentTask);\r\n//   const { subtasks } = useSelector((state) => state.subTask);\r\n//   const loading = useSelector((state) => state.task.status === \"loading\");\r\n//   const updating = useSelector((state) => state.task.updating);\r\n//   const { currentUser } = useCurrentUser();\r\n\r\n//   const [showFullDesc, setShowFullDesc] = useState(false);\r\n//   const [delayDialog, setDelayDialog] = useState(false);\r\n//   const [delayReason, setDelayReason] = useState(\"\");\r\n//   const [confirmCompleteOpen, setConfirmCompleteOpen] = useState(false);\r\n//   const [initialLoading, setInitialLoading] = useState(true);\r\n//   const [assigneeOpen, setAssigneeOpen] = useState(false);\r\n//   const [selectedPerson, setSelectedPerson] = useState(null);\r\n//   const [activeTab, setActiveTab] = useState(\"subtasks\"); // New: Tabs\r\n\r\n//   const isTeamLead = task?.teamLeadId === currentUser?.id;\r\n//   const canEdit = isTeamLead;\r\n//   const allSubtasksDone = subtasks?.every((s) => s.status === \"Completed\") ?? true;\r\n\r\n//   useEffect(() => {\r\n//     const timer = setTimeout(() => setInitialLoading(false), 1500);\r\n//     return () => clearTimeout(timer);\r\n//   }, []);\r\n\r\n//   useEffect(() => {\r\n//     if (task_id) {\r\n//       dispatch(fetchTaskById(task_id));\r\n//       dispatch(fetchSubTasksByTaskId(task_id));\r\n//     }\r\n//   }, [task_id, dispatch]);\r\n\r\n//   const getInitials = (name = \"\") =>\r\n//     name.split(\" \").map((n) => n[0]).join(\"\").slice(0, 2).toUpperCase();\r\n\r\n//   const assignees = useMemo(() => {\r\n//     if (!task?.assignedTo) return [];\r\n//     return Array.isArray(task.assignedTo) ? task.assignedTo : [task.assignedTo];\r\n//   }, [task?.assignedTo]);\r\n\r\n//   // Smart Action Button\r\n//   const getActionButton = () => {\r\n//     if (!canEdit || !task?.status) return null;\r\n\r\n//     if (task.status === \"Pending\")\r\n//       return { text: \"Start Task\", color: \"bg-blue-600\", icon: Play, next: \"In Progress\" };\r\n//     if (task.status === \"In Progress\")\r\n//       return {\r\n//         text: \"Mark Complete\",\r\n//         color: allSubtasksDone ? \"bg-teal-600\" : \"bg-gray-500\",\r\n//         icon: CheckCircle,\r\n//         next: \"Completed\",\r\n//         disabled: !allSubtasksDone,\r\n//       };\r\n//     if (task.status === \"Completed\")\r\n//       return { text: \"Reopen Task\", color: \"bg-purple-600\", icon: RotateCcw, next: \"Pending\" };\r\n\r\n//     return null;\r\n//   };\r\n\r\n//   const actionBtn = getActionButton();\r\n\r\n//   const handleStatusChange = async (newStatus) => {\r\n//     if (updating || !canEdit) return;\r\n\r\n//     if (newStatus === \"Completed\") {\r\n//       setConfirmCompleteOpen(true);\r\n//       return;\r\n//     }\r\n\r\n//     await dispatch(updateTaskStatus({ taskId: task_id, status: newStatus })).unwrap();\r\n//     toast.success(`Task is now ${newStatus}`);\r\n//     dispatch(fetchTaskById(task_id));\r\n//   };\r\n\r\n//   const confirmComplete = async () => {\r\n//     setConfirmCompleteOpen(false);\r\n//     if (task.deadline && new Date() > new Date(task.deadline)) {\r\n//       setDelayDialog(true);\r\n//       return;\r\n//     }\r\n//     await dispatch(updateTaskStatus({ taskId: task_id, status: \"Completed\" })).unwrap();\r\n//     toast.success(\"Task marked as Completed\");\r\n//     dispatch(fetchTaskById(task_id));\r\n//   };\r\n\r\n//   const submitDelay = async () => {\r\n//     if (!delayReason.trim()) {\r\n//       toast.error(\"Please provide a reason\");\r\n//       return;\r\n//     }\r\n//     await dispatch(\r\n//       updateTaskStatus({\r\n//         taskId: task_id,\r\n//         status: \"Completed\",\r\n//         delayReason: delayReason.trim(),\r\n//       })\r\n//     ).unwrap();\r\n//     toast.success(\"Task completed with delay reason\");\r\n//     setDelayDialog(false);\r\n//     setDelayReason(\"\");\r\n//     dispatch(fetchTaskById(task_id));\r\n//   };\r\n\r\n//   // Activity Log from task + subtasks (you can enhance this later)\r\n//   const activityLog = useMemo(() => {\r\n//     const logs = [];\r\n\r\n//     if (task?.actionedBy) {\r\n//       logs.push(...task.actionedBy.map((a) => ({ ...a, type: \"task\" })));\r\n//     }\r\n\r\n//     subtasks?.forEach((st) => {\r\n//       if (st.actionedBy) {\r\n//         logs.push(...st.actionedBy.map((a) => ({ ...a, subtaskTitle: st.title, type: \"subtask\" })));\r\n//       }\r\n//     });\r\n\r\n//     return logs.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));\r\n//   }, [task?.actionedBy, subtasks]);\r\n\r\n//   if (initialLoading || loading) {\r\n//     return (\r\n//       <div className=\"min-h-screen bg-gray-50\">\r\n//         <div className=\"bg-teal-600 text-white py-8 px-6\">\r\n//           <div className=\"flex items-center gap-4\">\r\n//             <div className=\"h-9 w-24 bg-teal-700 rounded-lg animate-pulse\" />\r\n//             <div className=\"h-8 w-64 bg-teal-500 rounded animate-pulse\" />\r\n//           </div>\r\n//         </div>\r\n//         <Card className=\"min-h-screen mx-auto mt-8 shadow-xl border-0\">\r\n//           <CardContent className=\"p-8 space-y-10 animate-pulse\">\r\n//             <div className=\"h-10 w-40 bg-gray-300 rounded-lg\" />\r\n//             <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n//               {[1, 2, 3, 4].map((i) => (\r\n//                 <div key={i} className=\"space-y-2\">\r\n//                   <div className=\"h-4 w-24 bg-gray-300 rounded\" />\r\n//                   <div className=\"h-6 w-32 bg-gray-200 rounded\" />\r\n//                 </div>\r\n//               ))}\r\n//             </div>\r\n//           </CardContent>\r\n//         </Card>\r\n//       </div>\r\n//     );\r\n//   }\r\n\r\n//   if (!task) {\r\n//     return (\r\n//       <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n//         <Card className=\"text-center p-12 shadow-xl\">\r\n//           <h1 className=\"text-3xl font-bold text-gray-800 mb-4\">Task Not Found</h1>\r\n//           <Button onClick={() => router.back()} className=\"bg-teal-600 hover:bg-teal-700\">\r\n//             <ChevronLeft className=\"mr-2\" /> Go Back\r\n//           </Button>\r\n//         </Card>\r\n//       </div>\r\n//     );\r\n//   }\r\n\r\n//   return (\r\n//     <div className=\"min-h-screen bg-gray-50\">\r\n//       {/* Header */}\r\n//       <div className=\"bg-teal-600 text-white py-6 px-6\">\r\n//         <Button\r\n//           size=\"sm\"\r\n//           onClick={() => router.back()}\r\n//           className=\"bg-teal-700 hover:bg-teal-800 rounded-lg\"\r\n//         >\r\n//           <ChevronLeft className=\"w-5 h-5 mr-1\" /> Back\r\n//         </Button>\r\n//       </div>\r\n\r\n//       <Card className=\"shadow-xl border-0 min-h-screen\">\r\n//         <CardContent className=\"p-6 sm:p-8 space-y-8\">\r\n\r\n//           {/* Action Buttons */}\r\n//           <div className=\"flex flex-wrap justify-end gap-3\">\r\n//             {actionBtn && (\r\n//               <Button\r\n//                 onClick={() => handleStatusChange(actionBtn.next)}\r\n//                 disabled={updating || actionBtn.disabled}\r\n//                 className={`${actionBtn.color} text-white`}\r\n//               >\r\n//                 <actionBtn.icon className=\"w-4 h-4 mr-2\" />\r\n//                 {actionBtn.text}\r\n//               </Button>\r\n//             )}\r\n//           </div>\r\n\r\n//           <div className=\"space-y-10\">\r\n\r\n        \r\n//   {/* Title */}\r\n//             {task.title && (\r\n//               <div>\r\n//                 <div className=\"flex items-center gap-2 mb-1\">\r\n//                   <FileText className=\"w-4 h-4 text-gray-600\" />\r\n//                   <p className=\"text-sm font-medium text-gray-600\">Title</p>\r\n//                 </div>\r\n//                 <h1 className=\"text-sm font-semibold text-gray-600\">\r\n//                   {task.title}\r\n//                 </h1>\r\n//               </div>\r\n//             )}\r\n\r\n//             {/* Description */}\r\n//             {task.description && (\r\n//               <div>\r\n//                 <div className=\"flex items-center gap-2 mb-1\">\r\n//                   <AlignLeft className=\"w-4 h-4 text-gray-600\" />\r\n//                   <p className=\"text-sm font-semibold text-gray-600\">\r\n//                     Description\r\n//                   </p>\r\n//                 </div>\r\n\r\n//                 <div className=\"text-sm font-semibold text-gray-600 leading-relaxed prose max-w-none mt-1\">\r\n//                   {task.description.length > 600 && !showFullDesc ? (\r\n//                     <>\r\n//                       <div\r\n//                         dangerouslySetInnerHTML={{\r\n//                           __html:\r\n//                             task.description\r\n//                               .slice(0, 600)\r\n//                               .replace(/\\n/g, \"<br/>\") + \"...\",\r\n//                         }}\r\n//                       />\r\n//                       <button\r\n//                         onClick={() => setShowFullDesc(true)}\r\n//                         className=\"text-teal-600 text-sm font-semibold mt-3 flex items-center hover:underline\"\r\n//                       >\r\n//                         Show more <ChevronDown className=\"w-4 h-4 ml-1\" />\r\n//                       </button>\r\n//                     </>\r\n//                   ) : (\r\n//                     <>\r\n//                       <div\r\n//                         dangerouslySetInnerHTML={{\r\n//                           __html: task.description.replace(/\\n/g, \"<br/>\"),\r\n//                         }}\r\n//                       />\r\n//                       {task.description.length > 600 && showFullDesc && (\r\n//                         <button\r\n//                           onClick={() => setShowFullDesc(false)}\r\n//                           className=\"text-teal-600 text-sm font-medium mt-3 flex items-center hover:underline\"\r\n//                         >\r\n//                           Show less <ChevronUp className=\"w-4 h-4 ml-1\" />\r\n//                         </button>\r\n//                       )}\r\n//                     </>\r\n//                   )}\r\n//                 </div>\r\n//               </div>\r\n//             )}\r\n//             {/* Info Section */}\r\n//             <div className=\"space-y-5\">\r\n//               {task.projectName && (\r\n//                 <div className=\"flex items-center gap-3\">\r\n//                   <Flag className=\"w-4 h-4 text-gray-600\" />\r\n//                   <p className=\"text-sm text-gray-600 font-medium w-32\">Project</p>\r\n//                   <p className=\"font-medium text-gray-900\">{task.projectName}</p>\r\n//                 </div>\r\n//               )}\r\n\r\n//               {task.priority && (\r\n//                 <div className=\"flex items-center gap-3\">\r\n//                   <AlertTriangle className=\"w-4 h-4 text-gray-600\" />\r\n//                   <p className=\"text-sm text-gray-600 font-medium w-32\">Priority</p>\r\n//                   <span\r\n//                     className={`text-xs px-2 py-1 rounded font-medium text-white ${\r\n//                       task.priority === \"High\"\r\n//                         ? \"bg-red-600\"\r\n//                         : task.priority === \"Medium\"\r\n//                         ? \"bg-amber-500\"\r\n//                         : \"bg-emerald-600\"\r\n//                     }`}\r\n//                   >\r\n//                     {task.priority}\r\n//                   </span>\r\n//                 </div>\r\n//               )}\r\n\r\n//               <div className=\"flex items-center gap-3\">\r\n//                 <Tag className=\"w-4 h-4 text-gray-600\" />\r\n//                 <p className=\"text-sm text-gray-600 font-medium w-32\">Status</p>\r\n//                 <span\r\n//                   className={`text-xs px-2 py-1 rounded font-medium text-white ${\r\n//                     task.status === \"Completed\"\r\n//                       ? \"bg-gray-700\"\r\n//                       : task.status === \"In Progress\"\r\n//                       ? \"bg-blue-600\"\r\n//                       : \"bg-orange-600\"\r\n//                   }`}\r\n//                 >\r\n//                   {task.status === \"Completed\" ? \"Complete\" : task.status}\r\n//                 </span>\r\n//               </div>\r\n\r\n//               <div className=\"flex items-center gap-3\">\r\n//                 <User className=\"w-4 h-4 text-gray-600\" />\r\n//                 <p className=\"text-sm text-gray-600 font-medium w-32\">Assigned to</p>\r\n//                 <div className=\"flex -space-x-3\">\r\n//                   {assignees.length > 0 ? (\r\n//                     assignees.map((person, i) => (\r\n//                       <Avatar\r\n//                         key={i}\r\n//                         className=\"w-10 h-10 ring-4 ring-white border-2 border-white cursor-pointer hover:z-10 transition-all transform hover:scale-110\"\r\n//                         onClick={() => {\r\n//                           setSelectedPerson(person);\r\n//                           setAssigneeOpen(true);\r\n//                         }}\r\n//                       >\r\n//                         <AvatarImage src={person.avatar} />\r\n//                         <AvatarFallback className=\"bg-teal-600 text-white text-sm font-bold\">\r\n//                           {getInitials(person.memberName || person.name || \"NA\")}\r\n//                         </AvatarFallback>\r\n//                       </Avatar>\r\n//                     ))\r\n//                   ) : (\r\n//                     <span className=\"text-gray-500 text-sm\">Unassigned</span>\r\n//                   )}\r\n//                 </div>\r\n//               </div>\r\n\r\n//               {task.deadline && (\r\n//                 <div className=\"flex items-center gap-3\">\r\n//                   <Calendar className=\"w-4 h-4 text-gray-600\" />\r\n//                   <p className=\"text-sm text-gray-600 font-medium w-32\">Deadline</p>\r\n//                   <p className=\"text-sm text-gray-900 font-medium\">\r\n//                     {formatDateTimeIST(task.deadline)}\r\n//                   </p>\r\n//                 </div>\r\n//               )}\r\n\r\n//               <div className=\"flex items-center gap-3\">\r\n//                 <Clock className=\"w-4 h-4 text-gray-600\" />\r\n//                 <p className=\"text-sm text-gray-600 font-medium w-32\">Created At</p>\r\n//                 <p className=\"text-sm text-gray-900 font-medium\">\r\n//                   {formatDateTimeIST(task.createdAt)}\r\n//                 </p>\r\n//               </div>\r\n\r\n//               {task.delayReason && (\r\n//                 <div className=\"flex items-center gap-3\">\r\n//                   <AlertCircle className=\"w-4 h-4 text-gray-600\" />\r\n//                   <p className=\"text-sm text-gray-600 font-medium w-32\">Delay Reason</p>\r\n//                   <p className=\"text-sm text-gray-900 font-medium max-w-lg\">{task.delayReason}</p>\r\n//                 </div>\r\n//               )}\r\n//                  {task.task_id && (\r\n//                 <div className=\"flex items-center gap-3 cursor-pointer\">\r\n//                   <Edit className=\"w-4 h-4 text-gray-600\" />\r\n//                   <p className=\"text-sm text-gray-600 font-medium w-32\">\r\n//                     Task Id\r\n//                   </p>\r\n//                   <p className=\"text-sm font-medium text-green-900 hover:underline\">\r\n//                     #{task.task_id}\r\n//                   </p>\r\n//                 </div>\r\n//               )}\r\n//             </div>\r\n//           </div>\r\n\r\n//           {/* Tabs: Subtasks & Activity */}\r\n//           <div>\r\n//             <div className=\"flex border-b border-gray-200 mb-6\">\r\n//               <button\r\n//                 onClick={() => setActiveTab(\"subtasks\")}\r\n//                 className={`px-6 py-3 text-sm font-semibold transition-all relative ${\r\n//                   activeTab === \"subtasks\"\r\n//                     ? \"text-teal-600 after:absolute after:bottom-0 after:left-0 after:right-0 after:h-0.5 after:bg-teal-600\"\r\n//                     : \"text-gray-600 hover:text-gray-900\"\r\n//                 }`}\r\n//               >\r\n//                 Subtasks ({subtasks?.length || 0})\r\n//               </button>\r\n//               <button\r\n//                 onClick={() => setActiveTab(\"activity\")}\r\n//                 className={`px-6 py-3 text-sm font-semibold transition-all relative ${\r\n//                   activeTab === \"activity\"\r\n//                     ? \"text-teal-600 after:absolute after:bottom-0 after:left-0 after:right-0 after:h-0.5 after:bg-teal-600\"\r\n//                     : \"text-gray-600 hover:text-gray-900\"\r\n//                 }`}\r\n//               >\r\n//                 Activity\r\n//               </button>\r\n//             </div>\r\n\r\n//             <div className=\"py-4\">\r\n//               {activeTab === \"subtasks\" && (\r\n//                 <SubTaskList\r\n//                   isTaskClosed={task.status === \"Completed\"}\r\n//                   task={task}\r\n//                   taskId={task.task_id}\r\n//                   projectId={task.projectId}\r\n//                 />\r\n//               )}\r\n\r\n//               {activeTab === \"activity\" && (\r\n//                 <div className=\"space-y-4\">\r\n//                   {activityLog.length > 0 ? (\r\n//                     activityLog.map((act, i) => (\r\n//                       <div key={i} className=\"flex gap-4\">\r\n//                         <Avatar className=\"w-10 h-10 ring-2 ring-white flex-shrink-0\">\r\n//                           <AvatarFallback className=\"bg-teal-600 text-white text-sm font-medium\">\r\n//                             {getInitials(act.performedBy || \"User\")}\r\n//                           </AvatarFallback>\r\n//                         </Avatar>\r\n//                         <div className=\"flex-1 text-sm\">\r\n//                           <p className=\"text-gray-900\">\r\n//                             <span className=\"font-medium\">\r\n//                               {act.performedBy || \"User\"}\r\n//                             </span>{\" \"}\r\n//                             - {act.note}\r\n//                           </p>\r\n//                           <p className=\"text-xs text-gray-500 mt-1\">\r\n//                             {formatDateTimeIST(act.timestamp)}\r\n//                           </p>\r\n//                         </div>\r\n//                       </div>\r\n//                     ))\r\n//                   ) : (\r\n//                     <p className=\"text-center text-gray-500 py-12\">No activity recorded yet.</p>\r\n//                   )}\r\n//                 </div>\r\n//               )}\r\n//             </div>\r\n//           </div>\r\n//         </CardContent>\r\n//       </Card>\r\n\r\n//       {/* Dialogs */}\r\n//       <Dialog open={assigneeOpen} onOpenChange={setAssigneeOpen}>\r\n//         <DialogContent className=\"sm:max-w-md\">\r\n//           <DialogHeader>\r\n//             <DialogTitle>Team Member</DialogTitle>\r\n//           </DialogHeader>\r\n//           {selectedPerson && (\r\n//             <div className=\"flex items-center gap-6 py-4\">\r\n//               <Avatar className=\"w-24 h-24\">\r\n//                 <AvatarImage src={selectedPerson.avatar} />\r\n//                 <AvatarFallback className=\"bg-teal-600 text-white text-3xl font-bold\">\r\n//                   {getInitials(selectedPerson.memberName || selectedPerson.name || \"NA\")}\r\n//                 </AvatarFallback>\r\n//               </Avatar>\r\n//               <div className=\"space-y-3\">\r\n//                 <p className=\"text-2xl font-bold text-gray-900\">\r\n//                   {selectedPerson.memberName || selectedPerson.name || \"Unknown\"}\r\n//                 </p>\r\n//                 <p className=\"text-lg text-gray-600\">\r\n//                   {selectedPerson.role || selectedPerson.position || \"Team Member\"}\r\n//                 </p>\r\n//                 {selectedPerson.email && (\r\n//                   <p className=\"text-sm text-gray-500\">{selectedPerson.email}</p>\r\n//                 )}\r\n//                 <p className=\"text-xs text-gray-500 mt-4\">\r\n//                  Memeber ID: {selectedPerson.memberId }\r\n//                 </p>\r\n//               </div>\r\n//             </div>\r\n//           )}\r\n//         </DialogContent>\r\n//       </Dialog>\r\n\r\n//       <Dialog open={confirmCompleteOpen} onOpenChange={setConfirmCompleteOpen}>\r\n//         <DialogContent>\r\n//           <DialogHeader><DialogTitle>Complete Task?</DialogTitle></DialogHeader>\r\n//           <p className=\"text-gray-600\">Are you sure this task is fully done?</p>\r\n//           <DialogFooter className=\"mt-6\">\r\n//             <Button variant=\"outline\" onClick={() => setConfirmCompleteOpen(false)}>Cancel</Button>\r\n//             <Button onClick={confirmComplete} className=\"bg-teal-600 hover:bg-teal-700\">Yes, Complete</Button>\r\n//           </DialogFooter>\r\n//         </DialogContent>\r\n//       </Dialog>\r\n\r\n//       <Dialog open={delayDialog} onOpenChange={setDelayDialog}>\r\n//         <DialogContent>\r\n//           <DialogHeader><DialogTitle className=\"text-red-600\">Deadline Missed</DialogTitle></DialogHeader>\r\n//           <div className=\"py-4\">\r\n//             <label className=\"text-sm font-medium block mb-2\">Reason for delay (required)</label>\r\n//             <textarea\r\n//               value={delayReason}\r\n//               onChange={(e) => setDelayReason(e.target.value)}\r\n//               className=\"w-full p-3 border rounded-lg min-h-32 resize-none focus:ring-2 focus:ring-teal-500\"\r\n//               placeholder=\"Explain why this was completed after the deadline...\"\r\n//             />\r\n//           </div>\r\n//           <DialogFooter>\r\n//             <Button variant=\"outline\" onClick={() => setDelayDialog(false)}>Cancel</Button>\r\n//             <Button onClick={submitDelay} disabled={!delayReason.trim()} className=\"bg-teal-600 hover:bg-teal-700\">\r\n//               Complete with Reason\r\n//             </Button>\r\n//           </DialogFooter>\r\n//         </DialogContent>\r\n//       </Dialog>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default TaskView;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\"use client\";\r\n\r\nimport { useEffect, useState, useMemo } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogFooter,\r\n} from \"@/components/ui/dialog\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport {\r\n  ChevronLeft,\r\n  Play,\r\n  CheckCircle,\r\n  RotateCcw,\r\n  Clock,\r\n  AlertCircle,\r\n  User,\r\n  Calendar,\r\n  Flag,\r\n  Tag,\r\n  FileText,\r\n  AlignLeft,\r\n  AlertTriangle,\r\n  ChevronDown,\r\n  ChevronUp,\r\n  Edit,\r\n} from \"lucide-react\";\r\n\r\nimport SubTaskList from \"@/modules/project-management/task/components/sub-task/SubTaskList\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  fetchTaskById,\r\n  updateTaskStatus,\r\n} from \"@/modules/project-management/task/slices/taskSlice\";\r\nimport { fetchSubTasksByTaskId } from \"@/modules/project-management/task/slices/subTaskSlice\";\r\nimport { formatDateTimeIST } from \"@/utils/formatDate\";\r\nimport { useCurrentUser } from \"@/hooks/useCurrentUser\";\r\nimport { toast } from \"sonner\";\r\n\r\nconst TaskView = () => {\r\n  const dispatch = useDispatch();\r\n  const router = useRouter();\r\n  const { id: task_id } = useParams();\r\n\r\n  const task = useSelector((state) => state.task.currentTask);\r\n  const { subtasks } = useSelector((state) => state.subTask);\r\n  const loading = useSelector((state) => state.task.status === \"loading\");\r\n  const updating = useSelector((state) => state.task.updating);\r\n  const { currentUser } = useCurrentUser();\r\n\r\n  const [showFullDesc, setShowFullDesc] = useState(false);\r\n  const [delayDialog, setDelayDialog] = useState(false);\r\n  const [delayReason, setDelayReason] = useState(\"\");\r\n  const [confirmCompleteOpen, setConfirmCompleteOpen] = useState(false);\r\n  const [initialLoading, setInitialLoading] = useState(true);\r\n  const [assigneeOpen, setAssigneeOpen] = useState(false);\r\n  const [selectedPerson, setSelectedPerson] = useState(null);\r\n  const [activeTab, setActiveTab] = useState(\"subtasks\");\r\n\r\n  const isTeamLead = task?.teamLeadId === currentUser?.id;\r\n  const canEdit = isTeamLead;\r\n  const allSubtasksDone = subtasks?.every((s) => s.status === \"Completed\") ?? true;\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => setInitialLoading(false), 1500);\r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (task_id) {\r\n      dispatch(fetchTaskById(task_id));\r\n      dispatch(fetchSubTasksByTaskId(task_id));\r\n    }\r\n  }, [task_id, dispatch]);\r\n\r\n  const getInitials = (name = \"\") =>\r\n    name.split(\" \").map((n) => n[0]).join(\"\").slice(0, 2).toUpperCase();\r\n\r\n  const assignees = useMemo(() => {\r\n    if (!task?.assignedTo) return [];\r\n    return Array.isArray(task.assignedTo) ? task.assignedTo : [task.assignedTo];\r\n  }, [task?.assignedTo]);\r\n\r\n  // Smart Action Button\r\n  const getActionButton = () => {\r\n    if (!canEdit || !task?.status) return null;\r\n\r\n    if (task.status === \"Pending\")\r\n      return { text: \"Start Task\", color: \"bg-blue-600\", icon: Play, next: \"In Progress\" };\r\n    if (task.status === \"In Progress\")\r\n      return {\r\n        text: \"Mark Complete\",\r\n        color: allSubtasksDone ? \"bg-teal-600\" : \"bg-gray-500\",\r\n        icon: CheckCircle,\r\n        next: \"Completed\",\r\n        disabled: !allSubtasksDone,\r\n      };\r\n    if (task.status === \"Completed\")\r\n      return { text: \"Reopen Task\", color: \"bg-purple-600\", icon: RotateCcw, next: \"Pending\" };\r\n\r\n    return null;\r\n  };\r\n\r\n  const actionBtn = getActionButton();\r\n\r\n  // Helper function to create actionedBy object (same as subtask)\r\n  const createActionedBy = (note) => ({\r\n    note,\r\n    performedBy: currentUser?.name || currentUser?.email || \"User\",\r\n    timestamp: new Date().toISOString(),\r\n  });\r\n\r\n  const handleStatusChange = async (newStatus) => {\r\n    if (updating || !canEdit) return;\r\n\r\n    // Create proper actionedBy object (same format as subtask)\r\n    const actionedBy = createActionedBy(\r\n      newStatus === \"Pending\" \r\n        ? \"Reopened task\" \r\n        : `Changed status to ${newStatus}`\r\n    );\r\n\r\n    if (newStatus === \"Completed\") {\r\n      setConfirmCompleteOpen(true);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await dispatch(\r\n        updateTaskStatus({ \r\n          taskId: task_id, \r\n          status: newStatus,\r\n          actionedBy, // ← Added this\r\n        })\r\n      ).unwrap();\r\n      toast.success(`Task is now ${newStatus}`);\r\n      dispatch(fetchTaskById(task_id));\r\n    } catch (err) {\r\n      toast.error(\"Failed to update status\");\r\n    }\r\n  };\r\n\r\n  const confirmComplete = async () => {\r\n    setConfirmCompleteOpen(false);\r\n    \r\n    if (task.deadline && new Date() > new Date(task.deadline)) {\r\n      setDelayDialog(true);\r\n      return;\r\n    }\r\n\r\n    // Create proper actionedBy object\r\n    const actionedBy = createActionedBy(\"Task marked as Completed\");\r\n\r\n    try {\r\n      await dispatch(\r\n        updateTaskStatus({ \r\n          taskId: task_id, \r\n          status: \"Completed\",\r\n          actionedBy, // ← Added this\r\n        })\r\n      ).unwrap();\r\n      toast.success(\"Task marked as Completed\");\r\n      dispatch(fetchTaskById(task_id));\r\n    } catch (err) {\r\n      toast.error(\"Failed to complete task\");\r\n    }\r\n  };\r\n\r\n  const submitDelay = async () => {\r\n    if (!delayReason.trim()) {\r\n      toast.error(\"Please provide a reason\");\r\n      return;\r\n    }\r\n\r\n    // Create proper actionedBy object\r\n    const actionedBy = createActionedBy(\"Task Completed with delay\");\r\n\r\n    try {\r\n      await dispatch(\r\n        updateTaskStatus({\r\n          taskId: task_id,\r\n          status: \"Completed\",\r\n          delayReason: delayReason.trim(),\r\n          actionedBy, // ← Added this\r\n        })\r\n      ).unwrap();\r\n      toast.success(\"Task completed with delay reason\");\r\n      setDelayDialog(false);\r\n      setDelayReason(\"\");\r\n      dispatch(fetchTaskById(task_id));\r\n    } catch (err) {\r\n      toast.error(\"Failed to save delay reason\");\r\n    }\r\n  };\r\n\r\n  // Activity Log from task + subtasks\r\n  const activityLog = useMemo(() => {\r\n    const logs = [];\r\n\r\n    if (task?.actionedBy) {\r\n      logs.push(...task.actionedBy.map((a) => ({ ...a, type: \"task\" })));\r\n    }\r\n\r\n    subtasks?.forEach((st) => {\r\n      if (st.actionedBy) {\r\n        logs.push(...st.actionedBy.map((a) => ({ ...a, subtaskTitle: st.title, type: \"subtask\" })));\r\n      }\r\n    });\r\n\r\n    return logs.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));\r\n  }, [task?.actionedBy, subtasks]);\r\n\r\n  if (initialLoading || loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50\">\r\n        <div className=\"bg-teal-600 text-white py-8 px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <div className=\"h-9 w-24 bg-teal-700 rounded-lg animate-pulse\" />\r\n            <div className=\"h-8 w-64 bg-teal-500 rounded animate-pulse\" />\r\n          </div>\r\n        </div>\r\n        <Card className=\"min-h-screen mx-auto mt-8 shadow-xl border-0\">\r\n          <CardContent className=\"p-8 space-y-10 animate-pulse\">\r\n            <div className=\"h-10 w-40 bg-gray-300 rounded-lg\" />\r\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n              {[1, 2, 3, 4].map((i) => (\r\n                <div key={i} className=\"space-y-2\">\r\n                  <div className=\"h-4 w-24 bg-gray-300 rounded\" />\r\n                  <div className=\"h-6 w-32 bg-gray-200 rounded\" />\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!task) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <Card className=\"text-center p-12 shadow-xl\">\r\n          <h1 className=\"text-3xl font-bold text-gray-800 mb-4\">Task Not Found</h1>\r\n          <Button onClick={() => router.back()} className=\"bg-teal-600 hover:bg-teal-700\">\r\n            <ChevronLeft className=\"mr-2\" /> Go Back\r\n          </Button>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Header */}\r\n      <div className=\"bg-teal-600 text-white py-6 px-6\">\r\n        <Button\r\n          size=\"sm\"\r\n          onClick={() => router.back()}\r\n          className=\"bg-teal-700 hover:bg-teal-800 rounded-lg\"\r\n        >\r\n          <ChevronLeft className=\"w-5 h-5 mr-1\" /> Back\r\n        </Button>\r\n      </div>\r\n\r\n      <Card className=\"shadow-xl border-0 min-h-screen\">\r\n        <CardContent className=\"p-6 sm:p-8 space-y-8\">\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"flex flex-wrap justify-end gap-3\">\r\n            {actionBtn && (\r\n              <Button\r\n                onClick={() => handleStatusChange(actionBtn.next)}\r\n                disabled={updating || actionBtn.disabled}\r\n                className={`${actionBtn.color} text-white`}\r\n              >\r\n                <actionBtn.icon className=\"w-4 h-4 mr-2\" />\r\n                {actionBtn.text}\r\n              </Button>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"space-y-10\">\r\n\r\n            {/* Title */}\r\n            {task.title && (\r\n              <div>\r\n                <div className=\"flex items-center gap-2 mb-1\">\r\n                  <FileText className=\"w-4 h-4 text-gray-600\" />\r\n                  <p className=\"text-sm font-medium text-gray-600\">Title</p>\r\n                </div>\r\n                <h1 className=\"text-2xl font-bold text-gray-900\">{task.title}</h1>\r\n              </div>\r\n            )}\r\n\r\n            {/* Description */}\r\n            {task.description && (\r\n              <div>\r\n                <div className=\"flex items-center gap-2 mb-1\">\r\n                  <AlignLeft className=\"w-4 h-4 text-gray-600\" />\r\n                  <p className=\"text-sm font-semibold text-gray-600\">Description</p>\r\n                </div>\r\n                <div className=\"text-gray-700 leading-relaxed prose max-w-none mt-1\">\r\n                  {task.description.length > 600 && !showFullDesc ? (\r\n                    <>\r\n                      <div\r\n                        dangerouslySetInnerHTML={{\r\n                          __html: task.description.slice(0, 600).replace(/\\n/g, \"<br/>\") + \"...\",\r\n                        }}\r\n                      />\r\n                      <button\r\n                        onClick={() => setShowFullDesc(true)}\r\n                        className=\"text-teal-600 text-sm font-semibold mt-3 flex items-center hover:underline\"\r\n                      >\r\n                        Show more <ChevronDown className=\"w-4 h-4 ml-1\" />\r\n                      </button>\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <div\r\n                        dangerouslySetInnerHTML={{\r\n                          __html: task.description.replace(/\\n/g, \"<br/>\"),\r\n                        }}\r\n                      />\r\n                      {task.description.length > 600 && showFullDesc && (\r\n                        <button\r\n                          onClick={() => setShowFullDesc(false)}\r\n                          className=\"text-teal-600 text-sm font-medium mt-3 flex items-center hover:underline\"\r\n                        >\r\n                          Show less <ChevronUp className=\"w-4 h-4 ml-1\" />\r\n                        </button>\r\n                      )}\r\n                    </>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Info Section */}\r\n            <div className=\"space-y-5\">\r\n              {task.projectName && (\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Flag className=\"w-4 h-4 text-gray-600\" />\r\n                  <p className=\"text-sm text-gray-600 font-medium w-32\">Project</p>\r\n                  <p className=\"font-medium text-gray-900\">{task.projectName}</p>\r\n                </div>\r\n              )}\r\n\r\n              {task.priority && (\r\n                <div className=\"flex items-center gap-3\">\r\n                  <AlertTriangle className=\"w-4 h-4 text-gray-600\" />\r\n                  <p className=\"text-sm text-gray-600 font-medium w-32\">Priority</p>\r\n                  <span\r\n                    className={`text-xs px-2 py-1 rounded font-medium text-white ${\r\n                      task.priority === \"High\"\r\n                        ? \"bg-red-600\"\r\n                        : task.priority === \"Medium\"\r\n                        ? \"bg-amber-500\"\r\n                        : \"bg-emerald-600\"\r\n                    }`}\r\n                  >\r\n                    {task.priority}\r\n                  </span>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"flex items-center gap-3\">\r\n                <Tag className=\"w-4 h-4 text-gray-600\" />\r\n                <p className=\"text-sm text-gray-600 font-medium w-32\">Status</p>\r\n                <span\r\n                  className={`text-xs px-2 py-1 rounded font-medium text-white ${\r\n                    task.status === \"Completed\"\r\n                      ? \"bg-gray-700\"\r\n                      : task.status === \"In Progress\"\r\n                      ? \"bg-blue-600\"\r\n                      : \"bg-orange-600\"\r\n                  }`}\r\n                >\r\n                  {task.status === \"Completed\" ? \"Complete\" : task.status}\r\n                </span>\r\n              </div>\r\n\r\n              <div className=\"flex items-center gap-3\">\r\n                <User className=\"w-4 h-4 text-gray-600\" />\r\n                <p className=\"text-sm text-gray-600 font-medium w-32\">Assigned to</p>\r\n                <div className=\"flex -space-x-3\">\r\n                  {assignees.length > 0 ? (\r\n                    assignees.map((person, i) => (\r\n                      <Avatar\r\n                        key={i}\r\n                        className=\"w-10 h-10 ring-4 ring-white border-2 border-white cursor-pointer hover:z-10 transition-all transform hover:scale-110\"\r\n                        onClick={() => {\r\n                          setSelectedPerson(person);\r\n                          setAssigneeOpen(true);\r\n                        }}\r\n                      >\r\n                        <AvatarImage src={person.avatar} />\r\n                        <AvatarFallback className=\"bg-teal-600 text-white text-sm font-bold\">\r\n                          {getInitials(person.memberName || person.name || \"NA\")}\r\n                        </AvatarFallback>\r\n                      </Avatar>\r\n                    ))\r\n                  ) : (\r\n                    <span className=\"text-gray-500 text-sm\">Unassigned</span>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {task.deadline && (\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Calendar className=\"w-4 h-4 text-gray-600\" />\r\n                  <p className=\"text-sm text-gray-600 font-medium w-32\">Deadline</p>\r\n                  <p className=\"text-sm text-gray-900 font-medium\">\r\n                    {formatDateTimeIST(task.deadline)}\r\n                  </p>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"flex items-center gap-3\">\r\n                <Clock className=\"w-4 h-4 text-gray-600\" />\r\n                <p className=\"text-sm text-gray-600 font-medium w-32\">Created At</p>\r\n                <p className=\"text-sm text-gray-900 font-medium\">\r\n                  {formatDateTimeIST(task.createdAt)}\r\n                </p>\r\n              </div>\r\n\r\n              {task.delayReason && (\r\n                <div className=\"flex items-center gap-3\">\r\n                  <AlertCircle className=\"w-4 h-4 text-gray-600\" />\r\n                  <p className=\"text-sm text-gray-600 font-medium w-32\">Delay Reason</p>\r\n                  <p className=\"text-sm text-gray-900 font-medium max-w-lg\">{task.delayReason}</p>\r\n                </div>\r\n              )}\r\n\r\n              {task.task_id && (\r\n                <div className=\"flex items-center gap-3 cursor-pointer\">\r\n                  <Edit className=\"w-4 h-4 text-gray-600\" />\r\n                  <p className=\"text-sm text-gray-600 font-medium w-32\">Task Id</p>\r\n                  <p className=\"text-sm font-medium text-green-900 hover:underline\">\r\n                    #{task.task_id}\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Tabs: Subtasks & Activity */}\r\n          <div>\r\n            <div className=\"flex border-b border-gray-200 mb-6\">\r\n              <button\r\n                onClick={() => setActiveTab(\"subtasks\")}\r\n                className={`px-6 py-3 text-sm font-semibold transition-all relative ${\r\n                  activeTab === \"subtasks\"\r\n                    ? \"text-teal-600 after:absolute after:bottom-0 after:left-0 after:right-0 after:h-0.5 after:bg-teal-600\"\r\n                    : \"text-gray-600 hover:text-gray-900\"\r\n                }`}\r\n              >\r\n                Subtasks ({subtasks?.length || 0})\r\n              </button>\r\n              <button\r\n                onClick={() => setActiveTab(\"activity\")}\r\n                className={`px-6 py-3 text-sm font-semibold transition-all relative ${\r\n                  activeTab === \"activity\"\r\n                    ? \"text-teal-600 after:absolute after:bottom-0 after:left-0 after:right-0 after:h-0.5 after:bg-teal-600\"\r\n                    : \"text-gray-600 hover:text-gray-900\"\r\n                }`}\r\n              >\r\n                Activity\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"py-4\">\r\n              {activeTab === \"subtasks\" && (\r\n                <SubTaskList\r\n                  isTaskClosed={task.status === \"Completed\"}\r\n                  task={task}\r\n                  taskId={task.task_id}\r\n                  projectId={task.projectId}\r\n                />\r\n              )}\r\n\r\n              {activeTab === \"activity\" && (\r\n                <div className=\"space-y-4\">\r\n                  {activityLog.length > 0 ? (\r\n                    activityLog.map((act, i) => (\r\n                      <div key={i} className=\"flex gap-4\">\r\n                        <Avatar className=\"w-10 h-10 ring-2 ring-white flex-shrink-0\">\r\n                          <AvatarFallback className=\"bg-teal-600 text-white text-sm font-medium\">\r\n                            {getInitials(act.performedBy || \"User\")}\r\n                          </AvatarFallback>\r\n                        </Avatar>\r\n                        <div className=\"flex-1 text-sm\">\r\n                          <p className=\"text-gray-900\">\r\n                            <span className=\"font-medium\">\r\n                              {act.performedBy || \"User\"}\r\n                            </span>{\" \"}\r\n                            {act.subtaskTitle ? `on subtask \"${act.subtaskTitle}\"` : \"\"} - {act.note}\r\n                          </p>\r\n                          <p className=\"text-xs text-gray-500 mt-1\">\r\n                            {formatDateTimeIST(act.timestamp)}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    ))\r\n                  ) : (\r\n                    <p className=\"text-center text-gray-500 py-12\">No activity recorded yet.</p>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Dialogs */}\r\n      <Dialog open={assigneeOpen} onOpenChange={setAssigneeOpen}>\r\n        <DialogContent className=\"sm:max-w-md\">\r\n          <DialogHeader>\r\n            <DialogTitle>Team Member</DialogTitle>\r\n          </DialogHeader>\r\n          {selectedPerson && (\r\n            <div className=\"flex items-center gap-6 py-4\">\r\n              <Avatar className=\"w-24 h-24\">\r\n                <AvatarImage src={selectedPerson.avatar} />\r\n                <AvatarFallback className=\"bg-teal-600 text-white text-3xl font-bold\">\r\n                  {getInitials(selectedPerson.memberName || selectedPerson.name || \"NA\")}\r\n                </AvatarFallback>\r\n              </Avatar>\r\n              <div className=\"space-y-3\">\r\n                <p className=\"text-2xl font-bold text-gray-900\">\r\n                  {selectedPerson.memberName || selectedPerson.name || \"Unknown\"}\r\n                </p>\r\n                <p className=\"text-lg text-gray-600\">\r\n                  {selectedPerson.role || selectedPerson.position || \"Team Member\"}\r\n                </p>\r\n                {selectedPerson.email && (\r\n                  <p className=\"text-sm text-gray-500\">{selectedPerson.email}</p>\r\n                )}\r\n                <p className=\"text-xs text-gray-500 mt-4\">\r\n                  Member ID: {selectedPerson.memberId || selectedPerson._id || \"—\"}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <Dialog open={confirmCompleteOpen} onOpenChange={setConfirmCompleteOpen}>\r\n        <DialogContent>\r\n          <DialogHeader><DialogTitle>Complete Task?</DialogTitle></DialogHeader>\r\n          <p className=\"text-gray-600\">Are you sure this task is fully done?</p>\r\n          <DialogFooter className=\"mt-6\">\r\n            <Button variant=\"outline\" onClick={() => setConfirmCompleteOpen(false)}>Cancel</Button>\r\n            <Button onClick={confirmComplete} className=\"bg-teal-600 hover:bg-teal-700\">Yes, Complete</Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <Dialog open={delayDialog} onOpenChange={setDelayDialog}>\r\n        <DialogContent>\r\n          <DialogHeader><DialogTitle className=\"text-red-600\">Deadline Missed</DialogTitle></DialogHeader>\r\n          <div className=\"py-4\">\r\n            <label className=\"text-sm font-medium block mb-2\">Reason for delay (required)</label>\r\n            <textarea\r\n              value={delayReason}\r\n              onChange={(e) => setDelayReason(e.target.value)}\r\n              className=\"w-full p-3 border rounded-lg min-h-32 resize-none focus:ring-2 focus:ring-teal-500\"\r\n              placeholder=\"Explain why this was completed after the deadline...\"\r\n            />\r\n          </div>\r\n          <DialogFooter>\r\n            <Button variant=\"outline\" onClick={() => setDelayDialog(false)}>Cancel</Button>\r\n            <Button onClick={submitDelay} disabled={!delayReason.trim() || updating} className=\"bg-teal-600 hover:bg-teal-700\">\r\n              Complete with Reason\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TaskView;\r\n"],"names":[],"mappings":"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","debugId":null}}]
}