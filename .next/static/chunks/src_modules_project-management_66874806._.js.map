{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/task/components/AllTaskListByProjectId.jsx"],"sourcesContent":["\r\n\r\n// \"use client\";\r\n\r\n// import { format } from \"date-fns\";\r\n// import { useEffect, useState, useMemo } from \"react\";\r\n// import { useSelector, useDispatch } from \"react-redux\";\r\n// import { useRouter } from \"next/navigation\";\r\n// import {\r\n//   fetchTasksByProjectId,\r\n//   deleteTask,\r\n//   downloadTasksReport,\r\n//   selectTasksByProjectId,\r\n//   selectTaskStatus,\r\n//   selectEmployeeProjectTasks,\r\n//   fetchEmployeeProjectTasks,\r\n// } from \"@/modules/project-management/task/slices/taskSlice\";\r\n// import {\r\n//   MoreVertical,\r\n//   CalendarIcon,\r\n//   Filter,\r\n//   Eye,\r\n//   Edit,\r\n//   Trash2,\r\n//   Download,\r\n//   Plus,\r\n//   Search,\r\n//   AlertCircle,\r\n//   X,\r\n// } from \"lucide-react\";\r\n// import { toast } from \"sonner\";\r\n// import { Input } from \"@/components/ui/input\";\r\n// import {\r\n//   Select,\r\n//   SelectContent,\r\n//   SelectItem,\r\n//   SelectTrigger,\r\n//   SelectValue,\r\n// } from \"@/components/ui/select\";\r\n// import { Button } from \"@/components/ui/button\";\r\n// import { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\r\n// import { Calendar } from \"@/components/ui/calendar\";\r\n// import {\r\n//   Table,\r\n//   TableBody,\r\n//   TableCell,\r\n//   TableHead,\r\n//   TableHeader,\r\n//   TableRow,\r\n// } from \"@/components/ui/table\";\r\n// import {\r\n//   Dialog,\r\n//   DialogContent,\r\n//   DialogHeader,\r\n//   DialogTitle,\r\n// } from \"@/components/ui/dialog\";\r\n// import {\r\n//   DropdownMenu,\r\n//   DropdownMenuContent,\r\n//   DropdownMenuItem,\r\n//   DropdownMenuTrigger,\r\n// } from \"@/components/ui/dropdown-menu\";\r\n// import {\r\n//   Tooltip,\r\n//   TooltipContent,\r\n//   TooltipProvider,\r\n//   TooltipTrigger,\r\n// } from \"@/components/ui/tooltip\";\r\n// import { cn } from \"@/lib/utils\";\r\n// import { formatDateTimeIST } from \"@/utils/formatDate\";\r\n// import CreateTaskModal from \"./CreateTaskModal\";\r\n// import { useCurrentUser } from \"@/hooks/useCurrentUser\";\r\n// import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n\r\n// const AllTaskListByProjectId = ({ projectId, project }) => {\r\n//   const { currentUser, isTeamLead } = useCurrentUser(project?.teamLeadId);\r\n//   const dispatch = useDispatch();\r\n//   const router = useRouter();\r\n//   const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n//   const [taskIdToDelete, setTaskIdToDelete] = useState(null);\r\n//   const [showLoader, setShowLoader] = useState(true);\r\n//   const [showCreateTaskModal, setShowCreateTaskModal] = useState(false);\r\n//   const [showFilterDialog, setShowFilterDialog] = useState(false);\r\n//   const isCpc = currentUser?.role === \"cpc\";\r\n//   const isTeamLeadOrCpc = isCpc || isTeamLead;\r\n//   const [viewMode, setViewMode] = useState(isTeamLeadOrCpc ? \"all\" : \"my\");\r\n//   const [searchQuery, setSearchQuery] = useState(\"\");\r\n//   const [tempPriorityFilter, setTempPriorityFilter] = useState(\"all\");\r\n//   const [tempStatusFilter, setTempStatusFilter] = useState(\"all\");\r\n//   const [tempAssignedToFilter, setTempAssignedToFilter] = useState(\"all\");\r\n//   const [tempDateFrom, setTempDateFrom] = useState(null);\r\n//   const [tempDateTo, setTempDateTo] = useState(null);\r\n//   const [priorityFilter, setPriorityFilter] = useState(\"all\");\r\n//   const [statusFilter, setStatusFilter] = useState(\"all\");\r\n//   const [assignedToFilter, setAssignedToFilter] = useState(\"all\");\r\n//   const [dateFrom, setDateFrom] = useState(null);\r\n//   const [dateTo, setDateTo] = useState(null);\r\n//   const [sortConfig, setSortConfig] = useState({ key: \"\", direction: \"asc\" });\r\n//   const [currentPage, setCurrentPage] = useState(1);\r\n//   const tasksPerPage = 10;\r\n\r\n//   // Fetch tasks\r\n//   useEffect(() => {\r\n//     if (projectId) {\r\n//       setShowLoader(true);\r\n//       dispatch(fetchTasksByProjectId(projectId))\r\n//         .unwrap()\r\n//         .then(() => setShowLoader(false))\r\n//         .catch((err) => {\r\n//           toast.error(\"Failed to fetch tasks: \" + err);\r\n//           setShowLoader(false);\r\n//         });\r\n//     }\r\n//   }, [dispatch, projectId]);\r\n\r\n//   const employeeId = currentUser?.id;\r\n//   const tasksFromStore = useSelector((state) => selectTasksByProjectId(state, projectId));\r\n//   const status = useSelector(selectTaskStatus);\r\n//   const employeeProjectTasks = useSelector((state) =>\r\n//     selectEmployeeProjectTasks(state, projectId, employeeId)\r\n//   );\r\n\r\n//   // Fetch employee tasks for non-CPC, non-team-lead users or when viewMode is \"my\"\r\n//   useEffect(() => {\r\n//     if (projectId && employeeId && (!isTeamLeadOrCpc || viewMode === \"my\")) {\r\n//       setShowLoader(true);\r\n//       dispatch(fetchEmployeeProjectTasks({ projectId, employeeId }))\r\n//         .unwrap()\r\n//         .then(() => setShowLoader(false))\r\n//         .catch((err) => {\r\n//           toast.error(\"Failed to fetch employee tasks: \" + err);\r\n//           setShowLoader(false);\r\n//         });\r\n//     }\r\n//   }, [dispatch, projectId, employeeId, isTeamLeadOrCpc, viewMode]);\r\n\r\n//   const tasks = useMemo(() => {\r\n//     if (!isTeamLeadOrCpc || viewMode === \"my\") {\r\n//       return employeeProjectTasks || [];\r\n//     }\r\n//     return tasksFromStore || [];\r\n//   }, [isTeamLeadOrCpc, viewMode, tasksFromStore, employeeProjectTasks]);\r\n\r\n//   const showAllViewOption = isTeamLeadOrCpc;\r\n//   const showAssignedFilter = showAllViewOption && viewMode === \"all\";\r\n\r\n//   const handleDeleteTask = async () => {\r\n//     try {\r\n//       await dispatch(deleteTask(taskIdToDelete)).unwrap();\r\n//       toast.success(\"Task deleted successfully!\");\r\n//       setCurrentPage(1);\r\n//     } catch (err) {\r\n//       toast.error(err || \"Failed to delete task.\");\r\n//     }\r\n//     setShowDeleteModal(false);\r\n//     setTaskIdToDelete(null);\r\n//   };\r\n\r\n//   const handleSort = (key) => {\r\n//     setSortConfig((prev) => ({\r\n//       key,\r\n//       direction: prev.key === key && prev.direction === \"asc\" ? \"desc\" : \"asc\",\r\n//     }));\r\n//     setCurrentPage(1);\r\n//   };\r\n\r\n//   const handleViewModeChange = (newMode) => {\r\n//     setViewMode(newMode);\r\n//     setCurrentPage(1);\r\n//     handleResetFilters();\r\n//   };\r\n\r\n//   const assignedMembers = useMemo(() => {\r\n//     if (!Array.isArray(tasks)) return [];\r\n//     return Array.from(\r\n//       new Set(tasks.map((t) => t?.assignedToDetails?.memberName).filter(Boolean))\r\n//     );\r\n//   }, [tasks]);\r\n\r\n//   const assignedMembersMap = useMemo(() => {\r\n//     if (!Array.isArray(tasks)) return {};\r\n//     return tasks.reduce((map, task) => {\r\n//       if (task.assignedToDetails?.memberName && task.assignedTo) {\r\n//         map[task.assignedToDetails.memberName] = task.assignedTo;\r\n//       }\r\n//       return map;\r\n//     }, {});\r\n//   }, [tasks]);\r\n\r\n//   const filteredTasks = useMemo(() => {\r\n//     let filtered = Array.isArray(tasks) ? [...tasks] : [];\r\n\r\n//     if (searchQuery.trim()) {\r\n//       const query = searchQuery.toLowerCase();\r\n//       filtered = filtered.filter(\r\n//         (task) =>\r\n//           task.title?.toLowerCase().includes(query) ||\r\n//           task.task_id?.toLowerCase().includes(query) ||\r\n//           task?.assignedToDetails?.memberName?.toLowerCase().includes(query)\r\n//       );\r\n//     }\r\n\r\n//     if (priorityFilter !== \"all\") filtered = filtered.filter((task) => task.priority === priorityFilter);\r\n//     if (statusFilter !== \"all\") filtered = filtered.filter((task) => task.status === statusFilter);\r\n//     if (assignedToFilter !== \"all\" && showAssignedFilter) {\r\n//       filtered = filtered.filter((task) => task?.assignedToDetails?.memberName === assignedToFilter);\r\n//     }\r\n//     if (dateFrom || dateTo) {\r\n//       filtered = filtered.filter((task) => {\r\n//         if (!task.deadline) return false;\r\n//         const taskDate = new Date(task.deadline);\r\n//         return (!dateFrom || taskDate >= dateFrom) && (!dateTo || taskDate <= dateTo);\r\n//       });\r\n//     }\r\n\r\n//     if (sortConfig.key) {\r\n//       filtered.sort((a, b) => {\r\n//         let aValue = sortConfig.key.includes(\".\")\r\n//           ? sortConfig.key.split(\".\").reduce((obj, key) => obj?.[key], a)\r\n//           : a[sortConfig.key];\r\n//         let bValue = sortConfig.key.includes(\".\")\r\n//           ? sortConfig.key.split(\".\").reduce((obj, key) => obj?.[key], b)\r\n//           : b[sortConfig.key];\r\n\r\n//         if (typeof aValue === \"string\") aValue = aValue.toLowerCase();\r\n//         if (typeof bValue === \"string\") bValue = bValue.toLowerCase();\r\n\r\n//         return aValue < bValue\r\n//           ? sortConfig.direction === \"asc\" ? -1 : 1\r\n//           : aValue > bValue\r\n//           ? sortConfig.direction === \"asc\" ? 1 : -1\r\n//           : 0;\r\n//       });\r\n//     }\r\n\r\n//     return filtered;\r\n//   }, [tasks, searchQuery, priorityFilter, statusFilter, assignedToFilter, dateFrom, dateTo, sortConfig, showAssignedFilter]);\r\n\r\n//   const handleResetFilters = () => {\r\n//     setSearchQuery(\"\");\r\n//     setPriorityFilter(\"all\");\r\n//     setStatusFilter(\"all\");\r\n//     setAssignedToFilter(\"all\");\r\n//     setDateFrom(null);\r\n//     setDateTo(null);\r\n//     setTempPriorityFilter(\"all\");\r\n//     setTempStatusFilter(\"all\");\r\n//     setTempAssignedToFilter(\"all\");\r\n//     setTempDateFrom(null);\r\n//     setTempDateTo(null);\r\n//     setSortConfig({ key: \"\", direction: \"asc\" });\r\n//     setCurrentPage(1);\r\n//   };\r\n\r\n//   const handleApplyFilters = () => {\r\n//     setPriorityFilter(tempPriorityFilter);\r\n//     setStatusFilter(tempStatusFilter);\r\n//     setAssignedToFilter(tempAssignedToFilter);\r\n//     setDateFrom(tempDateFrom);\r\n//     setDateTo(tempDateTo);\r\n//     setShowFilterDialog(false);\r\n//     setCurrentPage(1);\r\n//   };\r\n\r\n//   const handleDownloadReport = async () => {\r\n//     const filterObj = {\r\n//       search: searchQuery || undefined,\r\n//       priority: priorityFilter !== \"all\" ? priorityFilter : undefined,\r\n//       status: statusFilter !== \"all\" ? statusFilter : undefined,\r\n//       assignedTo: assignedToFilter !== \"all\" ? assignedMembersMap[assignedToFilter] : undefined,\r\n//       dateFrom: dateFrom ? format(dateFrom, \"yyyy-MM-dd\") : undefined,\r\n//       dateTo: dateTo ? format(dateTo, \"yyyy-MM-dd\") : undefined,\r\n//     };\r\n//     const sortKey = sortConfig.key ? `${sortConfig.key}_${sortConfig.direction}` : undefined;\r\n//     try {\r\n//       await dispatch(downloadTasksReport({ projectId, assignedTo: filterObj.assignedTo, filterObj, sortKey })).unwrap();\r\n//       toast.success(\"Report downloaded successfully!\");\r\n//     } catch (err) {\r\n//       toast.error(err || \"Failed to download report.\");\r\n//     }\r\n//   };\r\n\r\n//   const totalPages = Math.max(1, Math.ceil(filteredTasks.length / tasksPerPage));\r\n//   const paginatedTasks = filteredTasks.slice(\r\n//     (currentPage - 1) * tasksPerPage,\r\n//     currentPage * tasksPerPage\r\n//   );\r\n\r\n//   const handlePageChange = (page) => {\r\n//     if (page >= 1 && page <= totalPages) {\r\n//       setCurrentPage(page);\r\n//     }\r\n//   };\r\n\r\n//   const getPaginationButtons = () => {\r\n//     const maxButtons = 8;\r\n//     const buttons = [];\r\n//     let startPage = Math.max(1, currentPage - Math.floor(maxButtons / 2));\r\n//     let endPage = Math.min(totalPages, startPage + maxButtons - 1);\r\n\r\n//     if (endPage - startPage + 1 < maxButtons) {\r\n//       startPage = Math.max(1, endPage - maxButtons + 1);\r\n//     }\r\n\r\n//     for (let page = startPage; page <= endPage; page++) {\r\n//       buttons.push(page);\r\n//     }\r\n\r\n//     return buttons;\r\n//   };\r\n\r\n//   const getInitials = (name) => {\r\n//     if (!name) return \"N/A\";\r\n//     if (name === currentUser?.name && (!isTeamLeadOrCpc || viewMode === \"my\")) return \"Me\";\r\n//     const words = name.split(\" \");\r\n//     return words.length > 1\r\n//       ? `${words[0][0]}${words[1][0]}`.toUpperCase()\r\n//       : name.slice(0, 2).toUpperCase();\r\n//   };\r\n\r\n//   const truncateTitle = (title) => {\r\n//     if (!title) return \"N/A\";\r\n//     return title.length > 70 ? `${title.slice(0, 70)}...` : title;\r\n//   };\r\n\r\n//   return (\r\n//     <TooltipProvider delayDuration={150} skipDelayDuration={0}>\r\n//       <div className=\"w-full bg-white\">\r\n//         <div className=\"space-y-2\">\r\n//           {/* Search and Controls */}\r\n//           <div className=\"flex flex-wrap gap-4\">\r\n//             <div className=\"flex-1 min-w-[180px]\">\r\n//               <div className=\"relative w-full\">\r\n//                 <Search\r\n//                   className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\"\r\n//                 />\r\n//                 <Input\r\n//                   placeholder=\"Search tasks...\"\r\n//                   value={searchQuery}\r\n//                   onChange={(e) => setSearchQuery(e.target.value)}\r\n//                   className=\"pl-10 text-sm w-full bg-white border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 rounded-lg\"\r\n//                 />\r\n//               </div>\r\n//             </div>\r\n//             {showAllViewOption && (\r\n//               <div className=\"flex-1 min-w-[140px]\">\r\n//                 <Select value={viewMode} onValueChange={handleViewModeChange}>\r\n//                   <SelectTrigger\r\n//                     className=\"text-sm w-full bg-white border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 rounded-lg\"\r\n//                   >\r\n//                     <SelectValue placeholder=\"View Mode\" />\r\n//                   </SelectTrigger>\r\n//                   <SelectContent className=\"bg-white shadow-lg border-gray-200 rounded-lg\">\r\n//                     <SelectItem value=\"my\">My Tasks</SelectItem>\r\n//                     <SelectItem value=\"all\">All Tasks</SelectItem>\r\n//                   </SelectContent>\r\n//                 </Select>\r\n//               </div>\r\n//             )}\r\n//             <div className=\"flex-1 min-w-[140px]\">\r\n//               <Button\r\n//                 variant=\"outline\"\r\n//                 className=\"w-full bg-white text-black border-gray-300 hover:bg-gray-100 rounded-lg h-[38px] text-sm flex items-center justify-center\"\r\n//                 onClick={() => setShowFilterDialog(true)}\r\n//               >\r\n//                 <Filter className=\"w-4 h-4 mr-2\" />\r\n//                 Filter\r\n//               </Button>\r\n//             </div>\r\n//             <div className=\"flex-1 min-w-[140px]\">\r\n//               <Button\r\n//                 variant=\"outline\"\r\n//                 className=\"w-full bg-white text-black border-gray-300 hover:bg-gray-100 rounded-lg h-[38px] text-sm flex items-center justify-center\"\r\n//                 onClick={handleResetFilters}\r\n//               >\r\n//                 <X className=\"w-4 h-4 mr-2\" />\r\n//                 Reset\r\n//               </Button>\r\n//             </div>\r\n//             {isTeamLeadOrCpc && (\r\n//               <>\r\n//                 <div className=\"flex-1 min-w-[140px]\">\r\n//                   <Button\r\n//                     variant=\"default\"\r\n//                     className=\"w-full bg-blue-600 text-white hover:bg-blue-700 rounded-lg h-[38px] text-sm flex items-center justify-center\"\r\n//                     onClick={handleDownloadReport}\r\n//                   >\r\n//                     <Download className=\"w-4 h-4 mr-2\" />\r\n//                     Download\r\n//                   </Button>\r\n//                 </div>\r\n//                 <div className=\"flex-1 min-w-[140px]\">\r\n//                   <Button\r\n//                     variant=\"default\"\r\n//                     className=\"w-full bg-blue-600 text-white hover:bg-blue-700 rounded-lg h-[38px] text-sm flex items-center justify-center\"\r\n//                     onClick={() => setShowCreateTaskModal(true)}\r\n//                   >\r\n//                     <Plus className=\"w-4 h-4 mr-2\" />\r\n//                     Create Task\r\n//                   </Button>\r\n//                 </div>\r\n//               </>\r\n//             )}\r\n//           </div>\r\n\r\n//           {/* Filter Dialog */}\r\n//           <Dialog open={showFilterDialog} onOpenChange={setShowFilterDialog}>\r\n//             <DialogContent className=\"max-w-[95vw] sm:max-w-md bg-white shadow-lg border-gray-200 rounded-lg\">\r\n//               <DialogHeader>\r\n//                 <DialogTitle className=\"text-lg font-semibold text-gray-900\">\r\n//                   Filter Tasks\r\n//                 </DialogTitle>\r\n//               </DialogHeader>\r\n//               <div className=\"grid gap-4 py-4\">\r\n//                 <Select value={tempPriorityFilter} onValueChange={setTempPriorityFilter}>\r\n//                   <SelectTrigger className=\"w-full bg-white border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 rounded-lg text-sm\">\r\n//                     <SelectValue placeholder=\"Priority\" />\r\n//                   </SelectTrigger>\r\n//                   <SelectContent className=\"bg-white shadow-lg border-gray-200 rounded-lg\">\r\n//                     <SelectItem value=\"all\">All Priorities</SelectItem>\r\n//                     <SelectItem value=\"Low\">Low</SelectItem>\r\n//                     <SelectItem value=\"Medium\">Medium</SelectItem>\r\n//                     <SelectItem value=\"High\">High</SelectItem>\r\n//                   </SelectContent>\r\n//                 </Select>\r\n//                 <Select value={tempStatusFilter} onValueChange={setTempStatusFilter}>\r\n//                   <SelectTrigger className=\"w-full bg-white border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 rounded-lg text-sm\">\r\n//                     <SelectValue placeholder=\"Status\" />\r\n//                   </SelectTrigger>\r\n//                   <SelectContent className=\"bg-white shadow-lg border-gray-200 rounded-lg\">\r\n//                     <SelectItem value=\"all\">All Statuses</SelectItem>\r\n//                     <SelectItem value=\"Pending\">Pending</SelectItem>\r\n//                     <SelectItem value=\"In Progress\">In Progress</SelectItem>\r\n//                     <SelectItem value=\"Completed\">Completed</SelectItem>\r\n//                   </SelectContent>\r\n//                 </Select>\r\n//                 {showAssignedFilter && (\r\n//                   <Select value={tempAssignedToFilter} onValueChange={setTempAssignedToFilter}>\r\n//                     <SelectTrigger className=\"w-full bg-white border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 rounded-lg text-sm\">\r\n//                       <SelectValue placeholder=\"Assignee\" />\r\n//                     </SelectTrigger>\r\n//                     <SelectContent className=\"bg-white shadow-lg border-gray-200 rounded-lg\">\r\n//                       <SelectItem value=\"all\">All Assignees</SelectItem>\r\n//                       {assignedMembers.map((name) => (\r\n//                         <SelectItem key={name} value={name}>\r\n//                           {name}\r\n//                         </SelectItem>\r\n//                       ))}\r\n//                     </SelectContent>\r\n//                   </Select>\r\n//                 )}\r\n//                 <Popover>\r\n//                   <PopoverTrigger asChild>\r\n//                     <Button\r\n//                       variant=\"outline\"\r\n//                       className={cn(\r\n//                         \"w-full justify-between bg-white border-gray-300 hover:bg-gray-100 rounded-lg text-sm\",\r\n//                         !tempDateFrom && \"text-gray-500\"\r\n//                       )}\r\n//                     >\r\n//                       {tempDateFrom ? format(tempDateFrom, \"PPP\") : <span>From Date</span>}\r\n//                       <CalendarIcon className=\"ml-2 h-4 w-4 text-black\" />\r\n//                     </Button>\r\n//                   </PopoverTrigger>\r\n//                   <PopoverContent className=\"w-auto p-0 bg-white shadow-lg border-gray-200 rounded-lg\">\r\n//                     <Calendar\r\n//                       mode=\"single\"\r\n//                       selected={tempDateFrom}\r\n//                       onSelect={setTempDateFrom}\r\n//                       initialFocus\r\n//                       className=\"rounded-lg text-black\"\r\n//                     />\r\n//                   </PopoverContent>\r\n//                 </Popover>\r\n//                 <Popover>\r\n//                   <PopoverTrigger asChild>\r\n//                     <Button\r\n//                       variant=\"outline\"\r\n//                       className={cn(\r\n//                         \"w-full justify-between bg-white border-gray-300 hover:bg-gray-100 rounded-lg text-sm\",\r\n//                         !tempDateTo && \"text-gray-500\"\r\n//                       )}\r\n//                     >\r\n//                       {tempDateTo ? format(tempDateTo, \"PPP\") : <span>To Date</span>}\r\n//                       <CalendarIcon className=\"ml-2 h-4 w-4 text-black\" />\r\n//                     </Button>\r\n//                   </PopoverTrigger>\r\n//                   <PopoverContent className=\"w-auto p-0 bg-white shadow-lg border-gray-200 rounded-lg\">\r\n//                     <Calendar\r\n//                       mode=\"single\"\r\n//                       selected={tempDateTo}\r\n//                       onSelect={setTempDateTo}\r\n//                       initialFocus\r\n//                       className=\"rounded-lg text-black\"\r\n//                     />\r\n//                   </PopoverContent>\r\n//                 </Popover>\r\n//                 <Button\r\n//                   onClick={handleApplyFilters}\r\n//                   className=\"bg-blue-600 text-white hover:bg-blue-700 rounded-lg text-sm\"\r\n//                 >\r\n//                   Apply Filters\r\n//                 </Button>\r\n//               </div>\r\n//             </DialogContent>\r\n//           </Dialog>\r\n\r\n//           {/* Table */}\r\n//           <div className=\"overflow-x-auto rounded-md border\">\r\n//             <Table>\r\n//               <TableHeader>\r\n//                 <TableRow className=\"bg-gray-50 text-xs sm:text-sm\">\r\n//                   <TableHead className=\"font-bold text-gray-700 w-[60px]\">S.N</TableHead>\r\n//                   <TableHead\r\n//                     className=\"font-bold text-gray-700 cursor-pointer w-[300px] sm:w-[400px]\"\r\n//                     onClick={() => handleSort(\"title\")}\r\n//                   >\r\n//                     Title\r\n//                   </TableHead>\r\n//                   <TableHead\r\n//                     className=\"font-bold text-gray-700 cursor-pointer w-[100px]\"\r\n//                     onClick={() => handleSort(\"assignedToDetails.memberName\")}\r\n//                   >\r\n//                     Assignee\r\n//                   </TableHead>\r\n//                   <TableHead\r\n//                     className=\"font-bold text-gray-700 cursor-pointer w-[100px]\"\r\n//                     onClick={() => handleSort(\"priority\")}\r\n//                   >\r\n//                     Priority\r\n//                   </TableHead>\r\n//                   <TableHead\r\n//                     className=\"font-bold text-gray-700 cursor-pointer w-[150px]\"\r\n//                     onClick={() => handleSort(\"deadline\")}\r\n//                   >\r\n//                     Deadline\r\n//                   </TableHead>\r\n//                   <TableHead\r\n//                     className=\"font-bold text-gray-700 cursor-pointer w-[100px]\"\r\n//                     onClick={() => handleSort(\"status\")}\r\n//                   >\r\n//                     Status\r\n//                   </TableHead>\r\n//                   <TableHead className=\"font-bold text-gray-700 w-[60px]\">Action</TableHead>\r\n//                 </TableRow>\r\n//               </TableHeader>\r\n//               <TableBody>\r\n//                 {showLoader ? (\r\n//                   <TableRow>\r\n//                     <TableCell colSpan={7} className=\"text-center text-gray-500 py-6 text-sm\">\r\n//                       Loading tasks...\r\n//                     </TableCell>\r\n//                   </TableRow>\r\n//                 ) : status === \"failed\" ? (\r\n//                   <TableRow>\r\n//                     <TableCell colSpan={7} className=\"text-center text-red-500 py-6 text-sm\">\r\n//                       Failed to load tasks. Please try again.\r\n//                     </TableCell>\r\n//                   </TableRow>\r\n//                 ) : paginatedTasks.length === 0 ? (\r\n//                   <TableRow>\r\n//                     <TableCell colSpan={7} className=\"text-center text-gray-500 py-6 text-sm\">\r\n//                       No tasks found\r\n//                     </TableCell>\r\n//                   </TableRow>\r\n//                 ) : (\r\n//                   paginatedTasks.map((task, index) => (\r\n//                     <TableRow\r\n//                       key={task._id}\r\n//                       className=\"\r\n//                         text-xs sm:text-sm cursor-pointer\r\n//                         transition-all duration-300 ease-in-out\r\n//                         hover:bg-gray-600 hover:bg-opacity-100\r\n//                         hover:shadow-md\r\n//                       \"\r\n//                       onClick={() => router.push(`/workspace/task/${task.task_id}`)}\r\n//                     >\r\n//                       <TableCell>{(currentPage - 1) * tasksPerPage + index + 1}</TableCell>\r\n//                       <TableCell>\r\n//                         <span className=\"line-clamp-1\">{truncateTitle(task.title)}</span>\r\n//                       </TableCell>\r\n                     \r\n// <TableCell>\r\n//   {task?.assignedTo?.length > 0 ? (\r\n//     <div className=\"flex -space-x-2 mt-1\">\r\n//       {task.assignedTo.slice(0, 3).map((p) => (\r\n//         <Tooltip key={p._id}>\r\n//           <TooltipTrigger>\r\n//             <Avatar\r\n//               className=\"w-8 h-8 ring-2 ring-white cursor-pointer hover:ring-teal-400 transition-all hover:z-10\"\r\n//               onClick={() => {\r\n//                 setSelectedPerson(p);\r\n//                 setAssigneeOpen(true);\r\n//               }}\r\n//             >\r\n//               <AvatarFallback className=\"bg-teal-600 text-white text-xs font-bold\">\r\n//                 {getInitials(p.memberName)}\r\n//               </AvatarFallback>\r\n//             </Avatar>\r\n//           </TooltipTrigger>\r\n//           <TooltipContent className=\"bg-gray-50 text-gray-800 text-xs rounded-lg p-2 shadow-md\">\r\n//             {p.memberName}\r\n//           </TooltipContent>\r\n//         </Tooltip>\r\n//       ))}\r\n\r\n//       {task.assignedTo.length > 3 && (\r\n//         <Tooltip>\r\n//           <TooltipTrigger>\r\n//             <div className=\"w-8 h-8 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-xs font-bold ring-2 ring-white cursor-pointer hover:ring-teal-400 transition-all hover:z-10\">\r\n//               +{task.assignedTo.length - 3}\r\n//             </div>\r\n//           </TooltipTrigger>\r\n//           <TooltipContent className=\"bg-gray-50 text-gray-800 text-xs rounded-lg p-2 shadow-md max-w-[200px]\">\r\n//             {task.assignedTo.slice(3).map((p) => p.memberName).join(\", \")}\r\n//           </TooltipContent>\r\n//         </Tooltip>\r\n//       )}\r\n//     </div>\r\n//   ) : (\r\n//     <span className=\"text-gray-400 text-sm\">â€”</span>\r\n//   )}\r\n// </TableCell>\r\n\r\n\r\n\r\n//                       <TableCell>\r\n//                         <span\r\n//                           className={cn(\r\n//                             \"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium\",\r\n//                             task.priority === \"Low\"\r\n//                               ? \"bg-green-200 text-green-800\"\r\n//                               : task.priority === \"Medium\"\r\n//                               ? \"bg-yellow-200 text-yellow-800\"\r\n//                               : task.priority === \"High\"\r\n//                               ? \"bg-red-200 text-red-800\"\r\n//                               : \"bg-gray-200 text-gray-800\"\r\n//                           )}\r\n//                         >\r\n//                           {task.priority || \"N/A\"}\r\n//                         </span>\r\n//                       </TableCell>\r\n//                       <TableCell>\r\n//                         <p className=\"text-xs text-gray-700\">\r\n//                           {formatDateTimeIST(task.deadline) || \"N/A\"}\r\n//                         </p>\r\n//                       </TableCell>\r\n//                       <TableCell>\r\n//                         <span\r\n//                           className={cn(\r\n//                             \"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium\",\r\n//                             task.status === \"Pending\"\r\n//                               ? \"bg-yellow-200 text-yellow-800\"\r\n//                               : task.status === \"In Progress\"\r\n//                               ? \"bg-blue-200 text-blue-800\"\r\n//                               : task.status === \"Completed\"\r\n//                               ? \"bg-green-200 text-green-800\"\r\n//                               : \"bg-gray-200 text-gray-800\"\r\n//                           )}\r\n//                         >\r\n//                           {task.status || \"N/A\"}\r\n//                         </span>\r\n//                         {task.isResolved === false && (\r\n//                           <Tooltip>\r\n//                             <TooltipTrigger asChild>\r\n//                               <span\r\n//                                 className={cn(\r\n//                                   \"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium whitespace-nowrap cursor-default\",\r\n//                                   \"bg-red-100 text-red-700\"\r\n//                                 )}\r\n//                               >\r\n//                                 Bug Found\r\n//                               </span>\r\n//                             </TooltipTrigger>\r\n//                             <TooltipContent className=\"text-xs px-2 py-1 rounded shadow-md bg-red-600 text-white\">\r\n//                               Bug is active. Resolve now!\r\n//                             </TooltipContent>\r\n//                           </Tooltip>\r\n//                         )}\r\n//                       </TableCell>\r\n//                       <TableCell onClick={(e) => e.stopPropagation()}>\r\n//                         <DropdownMenu>\r\n//                           <DropdownMenuTrigger asChild>\r\n//                             <Button\r\n//                               variant=\"ghost\"\r\n//                               size=\"sm\"\r\n//                               className=\"h-6 w-6 sm:h-8 sm:w-8 p-0\"\r\n//                               onClick={(e) => e.stopPropagation()}\r\n//                             >\r\n//                               <MoreVertical className=\"h-4 w-4 text-gray-600\" />\r\n//                             </Button>\r\n//                           </DropdownMenuTrigger>\r\n//                           <DropdownMenuContent\r\n//                             align=\"end\"\r\n//                             className=\"bg-white shadow-lg border-gray-200 rounded-lg\"\r\n//                           >\r\n//                             <DropdownMenuItem\r\n//                               onClick={(e) => {\r\n//                                 e.stopPropagation();\r\n//                                 router.push(`/workspace/task/${task.task_id}`);\r\n//                               }}\r\n//                               className=\"flex items-center gap-2 cursor-pointer focus:bg-blue-50 text-sm\"\r\n//                             >\r\n//                               <Eye className=\"w-4 h-4 text-blue-700\" />\r\n//                               View\r\n//                             </DropdownMenuItem>\r\n//                             {isTeamLeadOrCpc && viewMode === \"all\" && (\r\n//                               <>\r\n//                                 <DropdownMenuItem\r\n//                                   onClick={(e) => {\r\n//                                     e.stopPropagation();\r\n//                                     router.push(`/workspace/task/edit/${task.task_id}`);\r\n//                                   }}\r\n//                                   className=\"flex items-center gap-2 cursor-pointer focus:bg-green-50 text-sm\"\r\n//                                 >\r\n//                                   <Edit className=\"w-4 h-4 text-green-700\" />\r\n//                                   Edit\r\n//                                 </DropdownMenuItem>\r\n//                                 <DropdownMenuItem\r\n//                                   onClick={(e) => {\r\n//                                     e.stopPropagation();\r\n//                                     setTaskIdToDelete(task.task_id);\r\n//                                     setShowDeleteModal(true);\r\n//                                   }}\r\n//                                   className=\"flex items-center gap-2 cursor-pointer focus:bg-red-50 text-sm\"\r\n//                                 >\r\n//                                   <Trash2 className=\"w-4 h-4 text-red-700\" />\r\n//                                   Delete\r\n//                                 </DropdownMenuItem>\r\n//                               </>\r\n//                             )}\r\n//                           </DropdownMenuContent>\r\n//                         </DropdownMenu>\r\n//                       </TableCell>\r\n//                     </TableRow>\r\n//                   ))\r\n//                 )}\r\n//               </TableBody>\r\n//             </Table>\r\n//           </div>\r\n\r\n//           {/* Pagination */}\r\n//           <div className=\"flex flex-col sm:flex-row items-center justify-between px-2 py-4 gap-4 sm:gap-0\">\r\n//             <div className=\"text-xs sm:text-sm text-gray-700\">\r\n//               Showing {Math.min((currentPage - 1) * tasksPerPage + 1, filteredTasks.length)}-\r\n//               {Math.min(currentPage * tasksPerPage, filteredTasks.length)} of {filteredTasks.length} tasks\r\n//             </div>\r\n//             {totalPages > 1 && (\r\n//               <div className=\"flex items-center gap-2\">\r\n//                 <Button\r\n//                   variant=\"outline\"\r\n//                   size=\"sm\"\r\n//                   onClick={() => handlePageChange(currentPage - 1)}\r\n//                   disabled={currentPage === 1}\r\n//                   className=\"bg-white text-black border-gray-300 hover:bg-gray-100 rounded-lg text-xs sm:text-sm\"\r\n//                 >\r\n//                   Previous\r\n//                 </Button>\r\n//                 {getPaginationButtons().map((page) => (\r\n//                   <Button\r\n//                     key={page}\r\n//                     variant={currentPage === page ? \"default\" : \"outline\"}\r\n//                     size=\"sm\"\r\n//                     onClick={() => handlePageChange(page)}\r\n//                     className={cn(\r\n//                       \"w-8 h-8 p-0\",\r\n//                       currentPage === page\r\n//                         ? \"bg-blue-600 text-white hover:bg-blue-700\"\r\n//                         : \"bg-white text-black border-gray-300 hover:bg-gray-100\",\r\n//                       \"rounded-lg text-xs sm:text-sm\"\r\n//                     )}\r\n//                   >\r\n//                     {page}\r\n//                   </Button>\r\n//                 ))}\r\n//                 <Button\r\n//                   variant=\"outline\"\r\n//                   size=\"sm\"\r\n//                   onClick={() => handlePageChange(currentPage + 1)}\r\n//                   disabled={currentPage === totalPages}\r\n//                   className=\"bg-white text-black border-gray-300 hover:bg-gray-100 rounded-lg text-xs sm:text-sm\"\r\n//                 >\r\n//                   Next\r\n//                 </Button>\r\n//               </div>\r\n//             )}\r\n//           </div>\r\n\r\n//           {/* Delete Confirmation Dialog */}\r\n//           {isTeamLeadOrCpc && viewMode === \"all\" && (\r\n//             <Dialog\r\n//               open={showDeleteModal}\r\n//               onOpenChange={() => {\r\n//                 setShowDeleteModal(false);\r\n//                 setTaskIdToDelete(null);\r\n//               }}\r\n//             >\r\n//               <DialogContent className=\"max-w-[95vw] sm:max-w-md\">\r\n//                 <DialogHeader>\r\n//                   <DialogTitle className=\"text-lg font-semibold text-gray-900 flex items-center gap-2\">\r\n//                     <AlertCircle className=\"w-5 h-5 text-red-500\" />\r\n//                     Delete Task\r\n//                   </DialogTitle>\r\n//                   <p className=\"text-sm text-gray-600\">\r\n//                     Are you sure you want to delete this task? This action cannot be undone.\r\n//                   </p>\r\n//                 </DialogHeader>\r\n//                 <div className=\"flex gap-3 pt-4\">\r\n//                   <Button\r\n//                     variant=\"outline\"\r\n//                     onClick={() => {\r\n//                       setShowDeleteModal(false);\r\n//                       setTaskIdToDelete(null);\r\n//                     }}\r\n//                     className=\"flex-1 text-sm bg-white text-black border-gray-300 hover:bg-gray-100 rounded-lg\"\r\n//                   >\r\n//                     Cancel\r\n//                   </Button>\r\n//                   <Button\r\n//                     variant=\"destructive\"\r\n//                     onClick={handleDeleteTask}\r\n//                     className=\"flex-1 text-sm bg-red-600 text-white hover:bg-red-700 rounded-lg\"\r\n//                   >\r\n//                     <Trash2 className=\"w-4 h-4 mr-2\" />\r\n//                     Delete\r\n//                   </Button>\r\n//                 </div>\r\n//               </DialogContent>\r\n//             </Dialog>\r\n//           )}\r\n\r\n//           {/* Create Task Modal */}\r\n//           {isTeamLeadOrCpc && (\r\n//             <CreateTaskModal\r\n//               onTaskAssingn={() => {\r\n//                 dispatch(fetchTasksByProjectId(projectId));\r\n//                 if (!isTeamLeadOrCpc || viewMode === \"my\") {\r\n//                   dispatch(fetchEmployeeProjectTasks({ projectId, employeeId }));\r\n//                 }\r\n//               }}\r\n//               projectId={projectId}\r\n//               project={project}\r\n//               isOpen={showCreateTaskModal}\r\n//               onClose={() => setShowCreateTaskModal(false)}\r\n//             />\r\n//           )}\r\n//         </div>\r\n//       </div>\r\n//     </TooltipProvider>\r\n//   );\r\n// };\r\n\r\n// export default AllTaskListByProjectId;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 824, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/issues/components/bug/BugDetailsViewModal.jsx"],"sourcesContent":["\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\"use client\";\r\n\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter } from \"@/components/ui/dialog\";\r\nimport { formatDateTimeIST } from \"@/utils/formatDate\";\r\nimport { useCurrentUser } from \"@/hooks/useCurrentUser\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { resolveBug, clearErrors, getBugById } from \"@/modules/project-management/issues/slices/bugSlice\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Loader2, Bug, Calendar, User, Clock, AlertCircle, FileText, CheckCircle, Clock as ClockIcon, ExternalLinkIcon } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nconst BugDetailsViewModal = ({ isOpen, onOpenChange, bugId }) => {\r\n  const { currentUser } = useCurrentUser();\r\n  const dispatch = useDispatch();\r\n  const router = useRouter();\r\n\r\n  const { bugDetails } = useSelector((state) => state.bugs);\r\n  const loading = useSelector((state) => state.bugs.loading?.bugResolve);\r\n  const error = useSelector((state) => state.bugs.error?.bugResolve);\r\n  const [delayReason, setDelayReason] = useState(bugDetails?.delayReason || \"\");\r\n  const [resolutionNote, setResolutionNote] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (bugId) {\r\n      dispatch(getBugById(bugId));\r\n    }\r\n  }, [dispatch, bugId]);\r\n\r\n\r\n  useEffect(() => {\r\n    if (isOpen && bugDetails) {\r\n      setDelayReason(bugDetails?.delayReason || \"\");\r\n      setResolutionNote(\"\");\r\n    }\r\n\r\n    return () => {\r\n      if (error) {\r\n        dispatch(clearErrors());\r\n      }\r\n    };\r\n  }, [dispatch, isOpen, bugDetails, error]);\r\n\r\n  const handleResolveBug = () => {\r\n    if (!bugDetails) return;\r\n\r\n    if (!resolutionNote.trim()) {\r\n      toast.error(\"Please provide a resolution note.\");\r\n      return;\r\n    }\r\n\r\n    // Convert bug deadline to Date object\r\n    const bugDeadlineDate = new Date(bugDetails.deadline);\r\n    // Get current date and time\r\n    const now = new Date();\r\n    // Check if deadline has passed\r\n    const isPastDeadline = now > bugDeadlineDate;\r\n\r\n    // ISO strings for logging\r\n    const bugDeadlineISO = bugDeadlineDate.toISOString();\r\n    const nowISO = now.toISOString();\r\n\r\n    if (isPastDeadline && !delayReason.trim()) {\r\n      toast.error(\"Please provide a reason for the delay.\");\r\n      return;\r\n    }\r\n    \r\n    const payload = {\r\n      bugId: bugDetails.bug_id,\r\n      resolutionNote,\r\n      ...(isPastDeadline && { delayReason }),\r\n    };\r\n\r\n    dispatch(resolveBug(payload)).then((result) => {\r\n      if (result.error) {\r\n        toast.error(`Failed to resolve bug: ${result.error.message}`);\r\n      } else {\r\n        toast.success(\"Issue resolved successfully!\");\r\n        onOpenChange(false);\r\n      }\r\n    });\r\n  };\r\n\r\n  if (!bugDetails) {\r\n    return null;\r\n  }\r\n\r\n  const isAssignedToCurrentUser = currentUser?.id === bugDetails?.assignedTo;\r\n  const isResolved = (bugDetails?.status || \"\").toLowerCase() === \"resolved\";\r\n  // const isResolved = bugDetails?.status === \"resolved\";\r\n\r\n  // Convert bug deadline to Date object\r\n  const bugDeadlineDate = bugDetails.deadline ? new Date(bugDetails.deadline) : null;\r\n  // Get current date and time\r\n  const now = new Date();\r\n  // Check if deadline has passed\r\n  const isOverdue = bugDeadlineDate && now > bugDeadlineDate;\r\n\r\n  // ISO strings for logging\r\n  if (bugDeadlineDate) {\r\n    const bugDeadlineISO = bugDeadlineDate.toISOString();\r\n    const nowISO = now.toISOString();\r\n  }\r\n\r\n  return (\r\n    <Dialog open={isOpen} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"w-full max-w-full h-[100vh] sm:max-w-4xl sm:max-h-[90vh] md:max-w-5xl bg-white shadow-lg border-gray-200 rounded-lg text-black overflow-y-auto\">\r\n        <DialogHeader className=\"px-4 py-3 sm:px-6 sm:py-4 sticky top-0\">\r\n          <DialogTitle className=\"text-gray-800 text-lg font-bold flex items-center gap-2\">\r\n            <Bug className=\"h-5 w-5\" />\r\n            Issue Details\r\n          </DialogTitle>\r\n        </DialogHeader>\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 py-2 px-4 sm:px-6\">\r\n          {/* Bug ID */}\r\n          <div className=\"flex flex-col\">\r\n            <Label className=\"text-xs font-bold text-gray-800 mb-1 flex items-center gap-1\">\r\n              <FileText className=\"h-3 w-3\" />\r\n              Issue ID\r\n            </Label>\r\n            <p className=\"text-xs text-black p-2\">{bugDetails.bug_id}</p>\r\n          </div>\r\n\r\n          {/* Status */}\r\n          <div className=\"flex flex-col\">\r\n            <Label className=\"text-xs font-bold text-gray-800 mb-1 flex items-center gap-1\">\r\n              <CheckCircle className=\"h-3 w-3\" />\r\n              Status\r\n            </Label>\r\n            <p className=\"text-xs text-black p-2\">{bugDetails.status || \"N/A\"}</p>\r\n          </div>\r\n\r\n          {/* Priority */}\r\n          <div className=\"flex flex-col\">\r\n            <Label className=\"text-xs font-bold text-gray-800 mb-1 flex items-center gap-1\">\r\n              <AlertCircle className=\"h-3 w-3\" />\r\n              Priority\r\n            </Label>\r\n            <p className=\"text-xs text-black p-2\">{bugDetails.priority || \"N/A\"}</p>\r\n          </div>\r\n\r\n          {/* Deadline */}\r\n          {bugDetails.deadline && (\r\n            <div className=\"flex flex-col\">\r\n              <Label className=\"text-xs font-bold text-gray-800 mb-1 flex items-center gap-1\">\r\n                <Calendar className=\"h-3 w-3\" />\r\n                Deadline\r\n              </Label>\r\n              <div className=\"flex items-center gap-2\">\r\n                <p className=\"text-xs text-black p-2\">\r\n                  {formatDateTimeIST(bugDetails.deadline) || \"N/A\"}\r\n                </p>\r\n                {/* Overdue indicator */}\r\n                {isOverdue && bugDetails?.status !== \"Resolved\" && (\r\n                  <span className=\"px-2 py-1 rounded-full bg-red-100 text-red-600 text-xs font-medium flex items-center gap-1\">\r\n                    <AlertCircle className=\"h-3 w-3\" />\r\n                    Overdue\r\n                  </span>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Assigned To */}\r\n          {bugDetails?.assignedToDetails?.memberName && (\r\n            <div className=\"flex flex-col\">\r\n              <Label className=\"text-xs font-bold text-gray-800 mb-1 flex items-center gap-1\">\r\n                <User className=\"h-3 w-3\" />\r\n                Assigned To\r\n              </Label>\r\n              <p className=\"text-xs text-black p-2\">{bugDetails.assignedToDetails.memberName}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Project Id */}\r\n          {bugDetails.projectId && (\r\n            <div className=\"flex flex-col\">\r\n              <Label className=\"text-xs font-bold text-gray-800 mb-1 flex items-center gap-1\">\r\n                <FileText className=\"h-3 w-3\" />\r\n                Project Id\r\n              </Label>\r\n              <p className=\"text-xs text-black p-2\">{bugDetails.projectId}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Created At */}\r\n          {bugDetails.createdAt && (\r\n            <div className=\"flex flex-col\">\r\n              <Label className=\"text-xs font-bold text-gray-800 mb-1 flex items-center gap-1\">\r\n                <ClockIcon className=\"h-3 w-3\" />\r\n                Created At\r\n              </Label>\r\n              <p className=\"text-xs text-black p-2\">{formatDateTimeIST(bugDetails.createdAt)}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Download Attachment */}\r\n          {bugDetails.attachmentLinks && (\r\n            <div className=\"mt-2\">\r\n              <Label className=\"text-xs font-bold text-gray-800 mb-1\">Attachment</Label>\r\n              <a\r\n                href={bugDetails.attachmentLinks}\r\n                download\r\n                className=\"inline-flex items-center gap-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 border border-gray-300 rounded-md text-sm text-gray-800 font-medium transition-colors\"\r\n              >\r\n                <svg\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  className=\"h-4 w-4 text-blue-600\"\r\n                  fill=\"none\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  stroke=\"currentColor\"\r\n                >\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M7 10l5 5m0 0l5-5m-5 5V4\" />\r\n                </svg>\r\n                <span>Download</span>\r\n              </a>\r\n            </div>\r\n          )}\r\n\r\n          {/* Task Ref - Clickable */}\r\n          <div className=\"flex flex-col relative\">\r\n            <Label className=\"text-xs font-bold text-gray-800 mb-1 flex items-center gap-1\">\r\n              <FileText className=\"h-3 w-3\" />\r\n              Reference\r\n            </Label>\r\n            <div className=\"inline-flex items-center gap-2\">\r\n              {/* Task ID chip */}\r\n              <span className=\"px-2 py-0.5 rounded-full bg-blue-500 text-white text-xs\">\r\n                {bugDetails.taskRef}\r\n              </span>\r\n              {/* Redirect icon with tooltip */}\r\n              <span className=\"relative group cursor-pointer text-blue-500\">\r\n                <ExternalLinkIcon className=\"w-4 h-4\" />\r\n                <span className=\"absolute -top-7 left-1/2 transform -translate-x-1/2 px-2 py-1 text-xs bg-gray-800 text-white rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap\">\r\n                  Click to view full task\r\n                </span>\r\n                <span\r\n                  onClick={() => router.push(`/task/${bugDetails.taskRef}`)}\r\n                  className=\"absolute inset-0\"\r\n                />\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Title - Larger Area */}\r\n          <div className=\"sm:col-span-2 lg:col-span-3 flex flex-col\">\r\n            <Label className=\"text-xs font-bold text-gray-800 mb-1 flex items-center gap-1\">\r\n              <FileText className=\"h-3 w-3\" />\r\n              Title\r\n            </Label>\r\n            <p className=\"text-sm text-black p-3\">{bugDetails.title}</p>\r\n          </div>\r\n\r\n          {/* Description - Larger Area */}\r\n          {bugDetails.description && (\r\n            <div className=\"sm:col-span-2 lg:col-span-3 flex flex-col\">\r\n              <Label className=\"text-xs font-bold text-gray-800 mb-1 flex items-center gap-1\">\r\n                <FileText className=\"h-3 w-3\" />\r\n                Description\r\n              </Label>\r\n              <p className=\"text-sm text-black p-3 rounded-md border border-gray-200 whitespace-pre-wrap break-words\">\r\n                {bugDetails.description}\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Delay Reason - View or Input, Larger Area */}\r\n          {(isOverdue && !isResolved && isAssignedToCurrentUser) || bugDetails.delayReason ? (\r\n            <div className=\"sm:col-span-2 lg:col-span-3 flex flex-col\">\r\n              <Label className=\"text-xs font-bold text-gray-800 mb-1 flex items-center gap-1\">\r\n                <Clock className=\"h-3 w-3\" />\r\n                Delay Reason\r\n              </Label>\r\n              {isResolved || bugDetails.delayReason ? (\r\n                <p className=\"text-sm text-black p-3 rounded-md border border-gray-200\">\r\n                  {bugDetails.delayReason || \"N/A\"}\r\n                </p>\r\n              ) : (\r\n                <Textarea\r\n                  className=\"text-sm text-black p-3 rounded-md border border-gray-200 min-h-[4rem] max-h-40 resize-y focus:border-gray-500 focus:ring focus:ring-gray-200\"\r\n                  value={delayReason}\r\n                  onChange={(e) => setDelayReason(e.target.value)}\r\n                  placeholder=\"Enter reason for delay\"\r\n                />\r\n              )}\r\n            </div>\r\n          ) : null}\r\n\r\n          {/* Resolution Note - Input if Resolving, View if Resolved, Larger Area */}\r\n          {(!isResolved && isAssignedToCurrentUser) || bugDetails.resolutionNote ? (\r\n            <div className=\"sm:col-span-2 lg:col-span-3 flex flex-col\">\r\n              <Label className=\"text-xs font-bold text-gray-800 mb-sticky top-0 1 flex items-center gap-1\">\r\n                <CheckCircle className=\"h-3 w-3\" />\r\n                Resolution Note\r\n              </Label>\r\n              {!isResolved && isAssignedToCurrentUser ? (\r\n                <Textarea\r\n                  className=\"text-sm text-black p-3 rounded-md border border-gray-200 min-h-[6rem] max-h-40 resize-y focus:border-gray-500 focus:ring focus:ring-gray-200\"\r\n                  value={resolutionNote}\r\n                  onChange={(e) => setResolutionNote(e.target.value)}\r\n                  placeholder=\"Enter resolution note\"\r\n                />\r\n              ) : (\r\n                <p className=\"text-sm text-black p-3 rounded-md border border-gray-200\">\r\n                  {bugDetails.resolutionNote}\r\n                </p>\r\n              )}\r\n            </div>\r\n          ) : null}\r\n\r\n          {/* Error Message */}\r\n          {error && (\r\n            <div className=\"sm:col-span-2 lg:col-span-3 text-xs text-red-600 font-medium bg-red-50 border border-red-200 rounded p-3\">\r\n              {error}\r\n            </div>\r\n          )}\r\n        </div>\r\n        <DialogFooter className=\"px-4 sm:px-6 py-4 border-t border-gray-200\">\r\n          {!isResolved && isAssignedToCurrentUser && (\r\n            <Button\r\n              onClick={handleResolveBug}\r\n              className=\"bg-blue-700 text-white hover:bg-blue-700 font-semibold\"\r\n              disabled={loading}\r\n            >\r\n              {loading ? (\r\n                <>\r\n                  <Loader2 className=\"h-4 w-4 animate-spin mr-2\" />\r\n                  Resolving...\r\n                </>\r\n              ) : (\r\n                \"Resolve Bug\"\r\n              )}\r\n            </Button>\r\n          )}\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default BugDetailsViewModal;\r\n\r\n\r\n\r\n\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1620, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/issues/components/bug/BugEditModal.jsx"],"sourcesContent":["\r\n\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogClose,\r\n} from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\r\nimport { Calendar } from \"@/components/ui/calendar\";\r\nimport { Bug, X, Loader, Flag, CalendarIcon, Clock, Info } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { format, parseISO } from \"date-fns\";\r\nimport { getBugById, editBug } from \"@/modules/project-management/issues/slices/bugSlice\";\r\n\r\nconst EditBugModal = ({bugId, isOpen, onOpenChange }) => {\r\n    \r\n\r\n \r\n   \r\n\r\n  const dispatch = useDispatch();\r\n  const { bugDetails, loading } = useSelector((state) => state.bugs);\r\n\r\n  const [bugTitle, setBugTitle] = useState(\"\");\r\n  const [bugDescription, setBugDescription] = useState(\"\");\r\n  const [priority, setPriority] = useState(\"Medium\");\r\n  const [selectedDate, setSelectedDate] = useState(null);\r\n  const [selectedTime, setSelectedTime] = useState(\"\");\r\n  const [attachment, setAttachment] = useState(null);\r\n  const [errors, setErrors] = useState({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  // Fetch bug details when modal opens or bugId changes\r\n  useEffect(() => {\r\n   \r\n    \r\n    if (bugId && isOpen) {\r\n      dispatch(getBugById(bugId));\r\n    }\r\n  }, [bugId, isOpen, dispatch]);\r\n\r\n  \r\n   \r\n  // Auto-fill form when bugDetails are loaded\r\n  useEffect(() => {\r\n    if (bugDetails) {\r\n      setBugTitle(bugDetails.title || \"\");\r\n      setBugDescription(bugDetails.description || \"\");\r\n      setPriority(bugDetails.priority || \"Medium\");\r\n\r\n      if (bugDetails.deadline) {\r\n        const dateObj = parseISO(bugDetails.deadline);\r\n        setSelectedDate(dateObj);\r\n        setSelectedTime(`${String(dateObj.getHours()).padStart(2, \"0\")}:${String(dateObj.getMinutes()).padStart(2, \"0\")}`);\r\n      }\r\n\r\n      // Cannot prefill file input for security reasons\r\n      setAttachment(null);\r\n    }\r\n  }, [bugDetails]);\r\n\r\n  const resetForm = () => {\r\n    setBugTitle(\"\");\r\n    setBugDescription(\"\");\r\n    setPriority(\"Medium\");\r\n    setSelectedDate(null);\r\n    setSelectedTime(\"\");\r\n    setAttachment(null);\r\n    setErrors({});\r\n  };\r\n\r\n  const handleClose = () => {\r\n    resetForm();\r\n    onOpenChange(false);\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n    if (!bugTitle.trim()) newErrors.title = \"Bug title is required.\";\r\n    if (!bugDescription.trim()) newErrors.description = \"Bug description is required.\";\r\n    if (!priority) newErrors.priority = \"Please select a priority.\";\r\n    if (!selectedDate) newErrors.deadline = \"Please select a deadline date.\";\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleEditBug = async () => {\r\n    if (!validateForm()) return;\r\n\r\n    setIsSubmitting(true);\r\n\r\n    const pad = (n) => (n < 10 ? \"0\" + n : n);\r\n\r\n    let combinedDateTime = null;\r\n    if (selectedDate) {\r\n      const dateObj = new Date(selectedDate);\r\n      const [hours, minutes] = selectedTime\r\n        ? selectedTime.split(\":\").map(Number)\r\n        : [23, 59];\r\n      dateObj.setHours(hours, minutes, 0, 0);\r\n      combinedDateTime =\r\n        dateObj.getFullYear() +\r\n        \"-\" +\r\n        pad(dateObj.getMonth() + 1) +\r\n        \"-\" +\r\n        pad(dateObj.getDate()) +\r\n        \"T\" +\r\n        pad(dateObj.getHours()) +\r\n        \":\" +\r\n        pad(dateObj.getMinutes()) +\r\n        \":\" +\r\n        pad(dateObj.getSeconds());\r\n    }\r\n\r\n    const bugData = {\r\n      title: bugTitle.trim(),\r\n      description: bugDescription.trim(),\r\n      priority,\r\n      deadline: combinedDateTime,\r\n      attachment,\r\n    };\r\n\r\n    try {\r\n      await dispatch(editBug({ bugId, bugData })).unwrap();\r\n      \r\n      toast.success(\"Bug updated successfully!\");\r\n      handleClose();\r\n    } catch (err) {\r\n      toast.error(err || \"Failed to update bug.\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const isFormValid =\r\n    bugTitle.trim() && bugDescription.trim() && priority && selectedDate;\r\n  const isDisabled = isSubmitting || !isFormValid || loading.bugDetailsFetch;\r\n\r\n  return (\r\n    <Dialog open={isOpen} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"w-full max-w-full h-[100vh] sm:max-w-6xl sm:max-h-[85vh] bg-white shadow-lg border border-gray-200 rounded-lg p-2\">\r\n        <DialogHeader className=\"bg-gradient-to-r from-blue-50 to-indigo-50 px-4 py-3 border-b border-gray-200 sticky top-0 z-10 h-16 flex items-center\">\r\n          <div className=\"flex justify-between items-center w-full\">\r\n            <DialogTitle className=\"text-base sm:text-lg font-bold text-gray-800 flex items-center\">\r\n              <Bug className=\"mr-2 h-4 w-4 text-blue-500\" /> Edit Bug\r\n            </DialogTitle>\r\n            <DialogClose asChild>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                className=\"text-gray-500 hover:bg-gray-100 rounded-full h-8 w-8\"\r\n                onClick={handleClose}\r\n              >\r\n                <X className=\"h-4 w-4\" />\r\n              </Button>\r\n            </DialogClose>\r\n          </div>\r\n        </DialogHeader>\r\n\r\n        <div className=\"px-4 sm:px-6 overflow-y-auto max-h-[calc(85vh-64px)]\">\r\n          <form\r\n            onSubmit={(e) => {\r\n              e.preventDefault();\r\n              handleEditBug();\r\n            }}\r\n            className=\"space-y-4\"\r\n          >\r\n            {/* Title */}\r\n            <div>\r\n              <label className=\"flex items-center text-sm font-medium mb-2\">\r\n                <Bug className=\"h-4 w-4 text-blue-500 mr-2\" /> Title{\" \"}\r\n                <span className=\"text-red-500 ml-1\">*</span>\r\n              </label>\r\n              <Textarea\r\n                value={bugTitle}\r\n                onChange={(e) => {\r\n                  setBugTitle(e.target.value);\r\n                  setErrors((prev) => ({ ...prev, title: \"\" }));\r\n                }}\r\n                className=\"w-full border rounded-lg p-3 text-sm\"\r\n                placeholder=\"Enter bug title\"\r\n                disabled={isSubmitting}\r\n              />\r\n              {errors.title && (\r\n                <p className=\"text-red-500 text-xs mt-1 flex items-center\">\r\n                  <X className=\"h-3 w-3 mr-1\" />\r\n                  {errors.title}\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Priority / Date / Time */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n              <div>\r\n                <label className=\"flex items-center text-sm font-medium mb-2\">\r\n                  <Flag className=\"h-4 w-4 text-blue-500 mr-2\" /> Priority{\" \"}\r\n                  <span className=\"text-red-500 ml-1\">*</span>\r\n                </label>\r\n                <Select\r\n                  value={priority}\r\n                  onValueChange={setPriority}\r\n                  disabled={isSubmitting}\r\n                >\r\n                  <SelectTrigger className=\"w-full h-10\">\r\n                    <SelectValue placeholder=\"Select priority\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"Low\">Low</SelectItem>\r\n                    <SelectItem value=\"Medium\">Medium</SelectItem>\r\n                    <SelectItem value=\"High\">High</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"flex items-center text-sm font-medium mb-2\">\r\n                  <CalendarIcon className=\"h-4 w-4 text-blue-500 mr-2\" /> Deadline{\" \"}\r\n                  <span className=\"text-red-500 ml-1\">*</span>\r\n                </label>\r\n                <Popover>\r\n                  <PopoverTrigger asChild>\r\n                    <Button variant=\"outline\" className=\"w-full h-10\">\r\n                      {selectedDate\r\n                        ? format(selectedDate, \"MMM dd, yyyy\")\r\n                        : \"Select date\"}\r\n                    </Button>\r\n                  </PopoverTrigger>\r\n                  <PopoverContent>\r\n                    <Calendar\r\n                      mode=\"single\"\r\n                      selected={selectedDate}\r\n                      onSelect={setSelectedDate}\r\n                    />\r\n                  </PopoverContent>\r\n                </Popover>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"flex items-center text-sm font-medium mb-2\">\r\n                  <Clock className=\"h-4 w-4 text-blue-500 mr-2\" /> Time\r\n                </label>\r\n                <Input\r\n                  type=\"time\"\r\n                  value={selectedTime}\r\n                  onChange={(e) => setSelectedTime(e.target.value)}\r\n                  className=\"w-full h-10\"\r\n                  disabled={isSubmitting}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Description */}\r\n            <div>\r\n              <label className=\"flex items-center text-sm font-medium mb-2\">\r\n                <Info className=\"h-4 w-4 text-blue-500 mr-2\" /> Description{\" \"}\r\n                <span className=\"text-red-500 ml-1\">*</span>\r\n              </label>\r\n              <Textarea\r\n                value={bugDescription}\r\n                onChange={(e) => setBugDescription(e.target.value)}\r\n                className=\"w-full h-[40vh] p-3\"\r\n                placeholder=\"Describe the issue...\"\r\n                disabled={isSubmitting}\r\n              />\r\n            </div>\r\n\r\n            {/* Attachment */}\r\n            <div>\r\n              <label className=\"flex items-center text-sm font-medium mb-2\">\r\n                Attachment (optional)\r\n              </label>\r\n              <Input\r\n                type=\"file\"\r\n                accept=\"image/*,application/pdf,.doc,.docx\"\r\n                onChange={(e) => setAttachment(e.target.files[0] || null)}\r\n                disabled={isSubmitting}\r\n              />\r\n              {bugDetails?.attachmentUrl && !attachment && (\r\n                <p className=\"text-xs mt-1\">\r\n                  Current file:{\" \"}\r\n                  <a\r\n                    href={bugDetails.attachmentUrl}\r\n                    target=\"_blank\"\r\n                    className=\"text-blue-600 underline\"\r\n                  >\r\n                    View\r\n                  </a>\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Actions */}\r\n            <div className=\"flex justify-end gap-3 pt-4 border-t mt-4\">\r\n              <DialogClose asChild>\r\n                <Button type=\"button\" variant=\"outline\" disabled={isSubmitting}>\r\n                  Cancel\r\n                </Button>\r\n              </DialogClose>\r\n              <Button\r\n                className=\"bg-blue-700\"\r\n                type=\"submit\"\r\n                disabled={isDisabled}\r\n              >\r\n                {isSubmitting ? (\r\n                  <Loader className=\"animate-spin h-4 w-4 mr-2\" />\r\n                ) : (\r\n                  \"Update Bug\"\r\n                )}\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default EditBugModal;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2288, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/issues/components/bug/BugAssignModal.jsx"],"sourcesContent":["\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// \"use client\";\r\n\r\n// import { useState, useEffect, useMemo } from \"react\";\r\n// import { useDispatch, useSelector } from \"react-redux\";\r\n// import {\r\n//   Dialog,\r\n//   DialogContent,\r\n//   DialogHeader,\r\n//   DialogTitle,\r\n//   DialogClose,\r\n// } from \"@/components/ui/dialog\";\r\n// import {\r\n//   Select,\r\n//   SelectContent,\r\n//   SelectItem,\r\n//   SelectTrigger,\r\n//   SelectValue,\r\n// } from \"@/components/ui/select\";\r\n// import { Button } from \"@/components/ui/button\";\r\n// import { Loader2, Users, User, Calendar, X } from \"lucide-react\";\r\n// import { toast } from \"sonner\";\r\n// import { fetchTeamByProjectId } from \"@/modules/project-management/team/slices/teamSlice\";\r\n// import { assignBug } from \"@/modules/project-management/issues/slices/bugSlice\";\r\n\r\n// const BugAssignModal = ({ isOpen, onOpenChange, bug, bugId, projectId, onAssign }) => {\r\n//   const dispatch = useDispatch();\r\n//   const { teamsByProject: teams, status: teamStatus } = useSelector(\r\n//     (state) => state.team\r\n//   );\r\n\r\n//   const [selectedTeam, setSelectedTeam] = useState(null);\r\n//   const [selectedMember, setSelectedMember] = useState(\"\");\r\n//   const [deadline, setDeadline] = useState(\"\");\r\n//   const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n//   useEffect(() => {\r\n//     if (projectId && isOpen) dispatch(fetchTeamByProjectId(projectId));\r\n//   }, [dispatch, projectId, isOpen]);\r\n\r\n//   useEffect(() => {\r\n//     if (!isOpen) {\r\n//       setSelectedTeam(null);\r\n//       setSelectedMember(\"\");\r\n//       setDeadline(\"\");\r\n//       setIsSubmitting(false);\r\n//     }\r\n//   }, [isOpen]);\r\n\r\n//   const handleTeamSelect = (value) => {\r\n//     const team = teams.find((t) => t.teamId === value);\r\n//     setSelectedTeam(team);\r\n//     setSelectedMember(\"\");\r\n//   };\r\n\r\n//   const handleAssign = async () => {\r\n//     if (!selectedTeam) return toast.error(\"Please select a team\");\r\n//     if (!selectedMember) return toast.error(\"Please select a team member\");\r\n//     if (!deadline) return toast.error(\"Please select a deadline\");\r\n\r\n//     const payload = {\r\n//       assignedTo: selectedMember,\r\n//       deadline,\r\n//     };\r\n\r\n//     setIsSubmitting(true);\r\n//     try {\r\n//       await dispatch(assignBug({ bug_id: bugId, payload })).unwrap();\r\n\r\n//       toast.success(\"Bug assigned successfully!\");\r\n//       if (onAssign) onAssign({ ...payload, bug_id: bugId });\r\n//       onOpenChange(false);\r\n//     } catch (error) {\r\n//       toast.error(error || \"Failed to assign bug\");\r\n//     } finally {\r\n//       setIsSubmitting(false);\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <Dialog open={isOpen} onOpenChange={onOpenChange}>\r\n//       <DialogContent className=\"max-w-[95vw] sm:max-w-md bg-white shadow-lg border border-gray-200 rounded-lg p-6\">\r\n//         <DialogHeader>\r\n//           <DialogTitle className=\"text-lg font-semibold text-gray-900 flex items-center justify-between\">\r\n//             <span>\r\n//               Assign Bug:{\" \"}\r\n//               {bug?.title\r\n//                 ? bug.title.slice(0, 30) + (bug.title.length > 30 ? \"...\" : \"\")\r\n//                 : \"N/A\"}\r\n//             </span>\r\n//             <DialogClose asChild>\r\n//               <Button\r\n//                 variant=\"ghost\"\r\n//                 size=\"icon\"\r\n//                 className=\"text-gray-500 hover:bg-gray-100 rounded-full h-7 w-7\"\r\n//               >\r\n//                 <X className=\"h-4 w-4\" />\r\n//               </Button>\r\n//             </DialogClose>\r\n//           </DialogTitle>\r\n//         </DialogHeader>\r\n\r\n//         {/* FORM FIELDS */}\r\n//         <div className=\"space-y-4 mt-4\">\r\n//           {/* Select Team */}\r\n//           <div>\r\n//             <label className=\"text-sm font-medium text-gray-700 flex items-center mb-2\">\r\n//               <Users className=\"h-4 w-4 text-blue-500 mr-2\" />\r\n//               Select Team\r\n//             </label>\r\n//             <Select\r\n//               value={selectedTeam?.teamId || \"\"}\r\n//               onValueChange={handleTeamSelect}\r\n//               disabled={teamStatus === \"loading\"}\r\n//             >\r\n//               <SelectTrigger className=\"w-full border border-gray-300 rounded-lg text-sm h-10\">\r\n//                 <SelectValue\r\n//                   placeholder={\r\n//                     teamStatus === \"loading\" ? \"Loading teams...\" : \"Select team\"\r\n//                   }\r\n//                 />\r\n//               </SelectTrigger>\r\n//               <SelectContent className=\"bg-white shadow-lg border border-gray-200 rounded-lg text-black max-h-48\">\r\n//                 {teams.map((team) => (\r\n//                   <SelectItem key={team.teamId} value={team.teamId}>\r\n//                     {team.teamName}\r\n//                   </SelectItem>\r\n//                 ))}\r\n//               </SelectContent>\r\n//             </Select>\r\n\r\n//             {/* Inline Team Members Display */}\r\n//             {selectedTeam && (\r\n//               <div className=\"mt-3 pl-2 border-l-2 border-blue-200\">\r\n//                 <p className=\"text-sm font-medium text-gray-700 mb-2 flex items-center\">\r\n//                   <User className=\"h-4 w-4 text-blue-500 mr-2\" />\r\n//                   Team Members\r\n//                 </p>\r\n//                 {selectedTeam.teamMembers?.length > 0 ? (\r\n//                   <div className=\"flex flex-wrap gap-2\">\r\n//                     {selectedTeam.teamMembers.map((member) => (\r\n//                       <button\r\n//                         key={member.memberId}\r\n//                         onClick={() => setSelectedMember(member.memberId)}\r\n//                         className={`px-3 py-1.5 rounded-lg text-sm border transition ${\r\n//                           selectedMember === member.memberId\r\n//                             ? \"bg-blue-600 text-white border-blue-600\"\r\n//                             : \"border-gray-300 hover:bg-gray-100\"\r\n//                         }`}\r\n//                       >\r\n//                         {member.memberName}\r\n//                       </button>\r\n//                     ))}\r\n//                   </div>\r\n//                 ) : (\r\n//                   <p className=\"text-sm text-gray-500\">No members in this team.</p>\r\n//                 )}\r\n//               </div>\r\n//             )}\r\n//           </div>\r\n\r\n//           {/* Deadline (Date & Time) */}\r\n//           <div>\r\n//             <label className=\"text-sm font-medium text-gray-700 flex items-center mb-2\">\r\n//               <Calendar className=\"h-4 w-4 text-blue-500 mr-2\" />\r\n//               Deadline (Date & Time)\r\n//             </label>\r\n//             <input\r\n//               type=\"datetime-local\"\r\n//               value={deadline}\r\n//               onChange={(e) => setDeadline(e.target.value)}\r\n//               className=\"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n//             />\r\n//           </div>\r\n//         </div>\r\n\r\n//         {/* Action Buttons */}\r\n//         <div className=\"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200\">\r\n//           <DialogClose asChild>\r\n//             <Button\r\n//               variant=\"outline\"\r\n//               className=\"text-gray-700 border border-gray-300 hover:bg-gray-50\"\r\n//             >\r\n//               Cancel\r\n//             </Button>\r\n//           </DialogClose>\r\n//           <Button\r\n//             onClick={handleAssign}\r\n//             disabled={isSubmitting || teamStatus === \"loading\"}\r\n//             className=\"bg-blue-600 hover:bg-blue-700 text-white flex items-center gap-2\"\r\n//           >\r\n//             {isSubmitting ? (\r\n//               <>\r\n//                 <Loader2 className=\"h-4 w-4 animate-spin\" /> Assigning...\r\n//               </>\r\n//             ) : (\r\n//               \"Assign Bug\"\r\n//             )}\r\n//           </Button>\r\n//         </div>\r\n//       </DialogContent>\r\n//     </Dialog>\r\n//   );\r\n// };\r\n\r\n// export default BugAssignModal;\r\n\r\n\r\n\r\n\r\n\r\n\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogClose,\r\n} from \"@/components/ui/dialog\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Loader2, Users, User, Calendar, X } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\n\r\nimport { fetchTeamByProjectId } from \"@/modules/project-management/team/slices/teamSlice\";\r\nimport { assignBug, fetchBugByProjectId } from \"@/modules/project-management/issues/slices/bugSlice\";\r\n\r\nconst BugAssignModal = ({ isOpen, onOpenChange, bug, bugId, projectId, onAssign }) => {\r\n  const dispatch = useDispatch();\r\n  const { teamsByProject: teams, status: teamStatus } = useSelector(\r\n    (state) => state.team\r\n  );\r\n\r\n  const [selectedTeam, setSelectedTeam] = useState(null);\r\n  const [selectedMember, setSelectedMember] = useState(\"\");\r\n  const [deadline, setDeadline] = useState(\"\");\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  // Fetch team when modal opens\r\n  useEffect(() => {\r\n    if (projectId && isOpen) dispatch(fetchTeamByProjectId(projectId));\r\n  }, [dispatch, projectId, isOpen]);\r\n\r\n  // Reset state on modal close\r\n  useEffect(() => {\r\n    if (!isOpen) {\r\n      setSelectedTeam(null);\r\n      setSelectedMember(\"\");\r\n      setDeadline(\"\");\r\n      setIsSubmitting(false);\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const handleTeamSelect = (value) => {\r\n    const team = teams.find((t) => t.teamId === value);\r\n    setSelectedTeam(team);\r\n    setSelectedMember(\"\");\r\n  };\r\n\r\n  const handleAssign = async () => {\r\n    if (!selectedTeam) return toast.error(\"Please select a team\");\r\n    if (!selectedMember) return toast.error(\"Please select a team member\");\r\n    if (!deadline) return toast.error(\"Please select a deadline\");\r\n\r\n    const payload = {\r\n      assignedTo: selectedMember,\r\n      deadline,\r\n    };\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      await dispatch(assignBug({ bug_id: bugId, payload })).unwrap();\r\n\r\n      // âœ… Refresh bug list after success\r\n      await dispatch(fetchBugByProjectId(projectId));\r\n\r\n      toast.success(\"Bug assigned successfully!\");\r\n      if (onAssign) onAssign({ ...payload, bug_id: bugId });\r\n\r\n      onOpenChange(false);\r\n    } catch (error) {\r\n      toast.error(error || \"Failed to assign bug\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={isOpen} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-[95vw] sm:max-w-md bg-white shadow-lg border border-gray-200 rounded-lg p-6\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"text-lg font-semibold text-gray-900 flex items-center justify-between\">\r\n            <span>\r\n              Assign Bug:{\" \"}\r\n              {bug?.title\r\n                ? bug.title.slice(0, 30) + (bug.title.length > 30 ? \"...\" : \"\")\r\n                : \"N/A\"}\r\n            </span>\r\n            <DialogClose asChild>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                className=\"text-gray-500 hover:bg-gray-100 rounded-full h-7 w-7\"\r\n              >\r\n                <X className=\"h-4 w-4\" />\r\n              </Button>\r\n            </DialogClose>\r\n          </DialogTitle>\r\n        </DialogHeader>\r\n\r\n        {/* FORM FIELDS */}\r\n        <div className=\"space-y-4 mt-4\">\r\n          {/* Select Team */}\r\n          <div>\r\n            <label className=\"text-sm font-medium text-gray-700 flex items-center mb-2\">\r\n              <Users className=\"h-4 w-4 text-blue-500 mr-2\" />\r\n              Select Team\r\n            </label>\r\n            <Select\r\n              value={selectedTeam?.teamId || \"\"}\r\n              onValueChange={handleTeamSelect}\r\n              disabled={teamStatus === \"loading\"}\r\n            >\r\n              <SelectTrigger className=\"w-full border border-gray-300 rounded-lg text-sm h-10\">\r\n                <SelectValue\r\n                  placeholder={\r\n                    teamStatus === \"loading\" ? \"Loading teams...\" : \"Select team\"\r\n                  }\r\n                />\r\n              </SelectTrigger>\r\n              <SelectContent className=\"bg-white shadow-lg border border-gray-200 rounded-lg text-black max-h-48\">\r\n                {teams.map((team) => (\r\n                  <SelectItem key={team.teamId} value={team.teamId}>\r\n                    {team.teamName}\r\n                  </SelectItem>\r\n                ))}\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n          {/* Select Team Member (Dropdown) */}\r\n          {selectedTeam && (\r\n            <div>\r\n              <label className=\"text-sm font-medium text-gray-700 flex items-center mb-2\">\r\n                <User className=\"h-4 w-4 text-blue-500 mr-2\" />\r\n                Select Team Member\r\n              </label>\r\n              {selectedTeam.teamMembers?.length > 0 ? (\r\n                <Select\r\n                  value={selectedMember || \"\"}\r\n                  onValueChange={setSelectedMember}\r\n                >\r\n                  <SelectTrigger className=\"w-full border border-gray-300 rounded-lg text-sm h-10\">\r\n                    <SelectValue placeholder=\"Select member\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent className=\"bg-white shadow-lg border border-gray-200 rounded-lg text-black max-h-48\">\r\n                    {selectedTeam.teamMembers.map((member) => (\r\n                      <SelectItem key={member.memberId} value={member.memberId}>\r\n                        {member.memberName}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              ) : (\r\n                <p className=\"text-sm text-gray-500\">No members in this team.</p>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Deadline */}\r\n          <div>\r\n            <label className=\"text-sm font-medium text-gray-700 flex items-center mb-2\">\r\n              <Calendar className=\"h-4 w-4 text-blue-500 mr-2\" />\r\n              Deadline (Date & Time)\r\n            </label>\r\n            <input\r\n              type=\"datetime-local\"\r\n              value={deadline}\r\n              onChange={(e) => setDeadline(e.target.value)}\r\n              className=\"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200\">\r\n          <DialogClose asChild>\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"text-gray-700 border border-gray-300 hover:bg-gray-50\"\r\n            >\r\n              Cancel\r\n            </Button>\r\n          </DialogClose>\r\n          <Button\r\n            onClick={handleAssign}\r\n            disabled={isSubmitting || teamStatus === \"loading\"}\r\n            className=\"bg-blue-600 hover:bg-blue-700 text-white flex items-center gap-2\"\r\n          >\r\n            {isSubmitting ? (\r\n              <>\r\n                <Loader2 className=\"h-4 w-4 animate-spin\" /> Assigning...\r\n              </>\r\n            ) : (\r\n              \"Assign Bug\"\r\n            )}\r\n          </Button>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default BugAssignModal;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2884, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/issues/components/bug/ReportIssueForm.jsx"],"sourcesContent":["\r\n\r\n\r\n\r\n\r\n\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogClose,\r\n} from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { toast } from \"sonner\";\r\nimport { createIssue } from \"@/modules/project-management/issues/slices/issuesSlice\";\r\nimport { FileText, Loader2, Paperclip, X, File, Image as ImageIcon } from \"lucide-react\";\r\n\r\nconst ReportIssueForm = ({ onClose, projectData, onIssueReported, isOpen = true }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const [title, setTitle] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [priority, setPriority] = useState(\"Medium\");\r\n  const [attachment, setAttachment] = useState(null);\r\n  const [previewUrl, setPreviewUrl] = useState(null);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n\r\n  const resetForm = () => {\r\n    setTitle(\"\");\r\n    setDescription(\"\");\r\n    setPriority(\"Medium\");\r\n    setAttachment(null);\r\n    setPreviewUrl(null);\r\n    setErrors({});\r\n  };\r\n\r\n  const handleClose = () => {\r\n    resetForm();\r\n    onClose();\r\n  };\r\n\r\n  // âœ… Validate form\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n    if (!title.trim()) newErrors.title = \"Title is required.\";\r\n    if (!description.trim()) newErrors.description = \"Description is required.\";\r\n    if (!projectData?.projectId) newErrors.projectId = \"Project ID is required.\";\r\n    if (!projectData?.projectName) newErrors.projectName = \"Project Name is required.\";\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  // ðŸ“Ž Handle file select and preview\r\n  const handleFileSelect = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n\r\n    const allowed = [\r\n      \"application/pdf\",\r\n      \"image/jpeg\",\r\n      \"image/png\",\r\n      \"application/msword\",\r\n      \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\r\n    ];\r\n\r\n    if (!allowed.includes(file.type)) {\r\n      toast.error(\"Only PDF, JPG, PNG, and DOC/DOCX files are allowed.\");\r\n      return;\r\n    }\r\n\r\n    setAttachment(file);\r\n\r\n    // Show preview if image\r\n    if (file.type.startsWith(\"image/\")) {\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => setPreviewUrl(reader.result);\r\n      reader.readAsDataURL(file);\r\n    } else {\r\n      setPreviewUrl(null);\r\n    }\r\n  };\r\n\r\n  // ðŸš€ Submit\r\n  const handleSubmit = async () => {\r\n    if (!validateForm()) return;\r\n    setIsSubmitting(true);\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"projectId\", projectData.projectId);\r\n    formData.append(\"projectName\", projectData.projectName);\r\n    formData.append(\"title\", title.trim());\r\n    formData.append(\"description\", description.trim());\r\n    formData.append(\"priority\", priority);\r\n\r\n    if (attachment) {\r\n      formData.append(\"attachment\", attachment);\r\n    }\r\n\r\n    try {\r\n      await dispatch(createIssue(formData)).unwrap();\r\n      toast.success(\"Issue reported successfully!\");\r\n      resetForm();\r\n      onIssueReported?.();\r\n      onClose();\r\n    } catch (err) {\r\n      toast.error(err?.message || \"Failed to report issue.\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const isDisabled = isSubmitting || !title.trim() || !description.trim();\r\n\r\n  return (\r\n    <Dialog open={isOpen} onOpenChange={(open) => !open && handleClose()}>\r\n      <DialogContent className=\"max-w-3xl bg-white border border-gray-200 rounded-xl shadow-lg p-4 sm:p-6\">\r\n        <DialogHeader className=\"border-b pb-3\">\r\n          <DialogTitle className=\"text-lg font-semibold text-gray-800 flex items-center\">\r\n            <FileText className=\"mr-2 h-5 w-5 text-blue-500\" /> Report Issue\r\n          </DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <form\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n            handleSubmit();\r\n          }}\r\n          className=\"space-y-5 mt-4\"\r\n        >\r\n          {/* Title */}\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-2 block\">\r\n              Title <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <Input\r\n              value={title}\r\n              onChange={(e) => setTitle(e.target.value)}\r\n              placeholder=\"Enter issue title\"\r\n              disabled={isSubmitting}\r\n            />\r\n          </div>\r\n\r\n          {/* Priority */}\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-2 block\">\r\n              Priority <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <Select value={priority} onValueChange={setPriority} disabled={isSubmitting}>\r\n              <SelectTrigger className=\"w-full\">\r\n                <SelectValue placeholder=\"Select priority\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"Low\">Low</SelectItem>\r\n                <SelectItem value=\"Medium\">Medium</SelectItem>\r\n                <SelectItem value=\"High\">High</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n          {/* Description */}\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-2 block\">\r\n              Description <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <Textarea\r\n              value={description}\r\n              onChange={(e) => setDescription(e.target.value)}\r\n              placeholder=\"Describe the issue in detail...\"\r\n              className=\"min-h-[150px]\"\r\n              disabled={isSubmitting}\r\n            />\r\n          </div>\r\n\r\n          {/* Attachment + Preview */}\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-2 block\">\r\n              Attachment (PDF, JPG, PNG, DOCX)\r\n            </label>\r\n            <Input\r\n              type=\"file\"\r\n              accept=\".pdf,image/*,.doc,.docx\"\r\n              onChange={handleFileSelect}\r\n              disabled={isSubmitting}\r\n            />\r\n\r\n            {attachment && (\r\n              <div className=\"mt-3 p-3 border rounded-lg bg-gray-50 flex items-start justify-between\">\r\n                <div className=\"flex items-start gap-3\">\r\n                  {previewUrl ? (\r\n                    <img\r\n                      src={previewUrl}\r\n                      alt=\"Preview\"\r\n                      className=\"w-16 h-16 object-cover rounded-md border\"\r\n                    />\r\n                  ) : (\r\n                    <div className=\"flex items-center justify-center w-16 h-16 border rounded-md bg-white\">\r\n                      {attachment.type === \"application/pdf\" ? (\r\n                        <FileText className=\"text-red-500\" size={24} />\r\n                      ) : (\r\n                        <File className=\"text-gray-400\" size={24} />\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-gray-700\">{attachment.name}</p>\r\n                    <p className=\"text-xs text-gray-500\">\r\n                      {(attachment.size / 1024).toFixed(1)} KB\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    setAttachment(null);\r\n                    setPreviewUrl(null);\r\n                  }}\r\n                  className=\"text-red-500 hover:text-red-700\"\r\n                >\r\n                  <X size={16} />\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Actions */}\r\n          <div className=\"flex justify-end gap-3 pt-4 border-t border-gray-100\">\r\n            <DialogClose asChild>\r\n              <Button type=\"button\" variant=\"outline\" disabled={isSubmitting}>\r\n                Cancel\r\n              </Button>\r\n            </DialogClose>\r\n            <Button\r\n              type=\"submit\"\r\n              className=\"bg-blue-600 hover:bg-blue-700 text-white\"\r\n              disabled={isDisabled}\r\n            >\r\n              {isSubmitting ? (\r\n                <>\r\n                  <Loader2 className=\"h-4 w-4 animate-spin mr-2\" /> Submitting...\r\n                </>\r\n              ) : (\r\n                \"Report Issue\"\r\n              )}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default ReportIssueForm;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3393, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/issues/components/bug/ProjectbugList.js"],"sourcesContent":["\r\n\r\n\r\n\r\n\r\n\r\n\"use client\";\r\n\r\nimport { format } from \"date-fns\";\r\nimport { useEffect, useState, useMemo } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport {\r\n  fetchBugByProjectId,\r\n  downloadBugsByProjectId,\r\n  downloadBugsByMemberId,\r\n  fetchEmployeeProjectBugs,\r\n} from \"@/modules/project-management/issues/slices/bugSlice\";\r\nimport { fetchProjectById } from \"@/modules/project-management/project/slices/projectSlice\";\r\nimport { getTeamMembersByProjectId } from \"@/modules/project-management/team/slices/teamSlice\";\r\nimport {\r\n  X,\r\n  CalendarIcon,\r\n  Filter,\r\n  Download,\r\n  Edit,\r\n  Plus,\r\n} from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Popover,\r\n  PopoverContent,\r\n  PopoverTrigger,\r\n} from \"@/components/ui/popover\";\r\nimport { Calendar } from \"@/components/ui/calendar\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from \"@/components/ui/table\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { formatDateTimeIST } from \"@/utils/formatDate\";\r\nimport { useCurrentUser } from \"@/hooks/useCurrentUser\";\r\nimport BugDetailsViewModal from \"./BugDetailsViewModal\";\r\nimport BugEditModal from \"./BugEditModal\";\r\nimport BugAssignModal from \"./BugAssignModal\"; // Import the new component\r\nimport ReportIssueForm from \"./ReportIssueForm\";\r\n\r\nconst ProjectbugList = ({ projectId, teamLeadId }) => {\r\n  const { currentUser, isTeamLead } = useCurrentUser(teamLeadId);\r\n  const { project: { data: projectData } } = useSelector((state) => state.project);\r\n  const dispatch = useDispatch();\r\n  const router = useRouter();\r\n\r\n  /* ----------  STATE  ---------- */\r\n  const [showFilterDialog, setShowFilterDialog] = useState(false);\r\n  const [showViewModal, setShowViewModal] = useState(false);\r\n  const [selectedBug, setSelectedBug] = useState(null);\r\n  const [showEditModal, setShowEditModal] = useState(false);\r\n  const [selectedBugForEdit, setSelectedBugForEdit] = useState(null);\r\n  const [showAssignModal, setShowAssignModal] = useState(false); // New state for assign modal\r\n  const [selectedBugForAssign, setSelectedBugForAssign] = useState(null); // New state for selected bug to assign\r\n  const [viewMode, setViewMode] = useState(\"all\");\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [tempPriorityFilter, setTempPriorityFilter] = useState(\"all\");\r\n  const [tempStatusFilter, setTempStatusFilter] = useState(\"all\");\r\n  const [tempAssignedToFilter, setTempAssignedToFilter] = useState(\"all\");\r\n  const [tempDateFrom, setTempDateFrom] = useState(null);\r\n  const [tempDateTo, setTempDateTo] = useState(null);\r\n  const [priorityFilter, setPriorityFilter] = useState(\"all\");\r\n  const [statusFilter, setStatusFilter] = useState(\"all\");\r\n  const [assignedToFilter, setAssignedToFilter] = useState(\"all\");\r\n  const [dateFrom, setDateFrom] = useState(null);\r\n  const [dateTo, setDateTo] = useState(null);\r\n  const [sortConfig, setSortConfig] = useState({ key: \"\", direction: \"asc\" });\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const bugsPerPage = 10;\r\n  const [showCreateIssue, setShowCreateIssue] = useState(false);\r\n\r\n  /* ----------  REDUX SELECTORS  ---------- */\r\n  const bugsByProjectId = useSelector((state) => state.bugs.bugsByProjectId);\r\n  const employeeProjectBugs = useSelector((state) => state.bugs.employeeProjectBugs);\r\n  const teamMembersByProjectId = useSelector((state) => state.team.teamMembersByProjectId);\r\n  const loading = useSelector((state) => state.bugs.loading);\r\n\r\n  const employeeId = currentUser?.id;\r\n\r\n  /* ----------  FETCH DATA  ---------- */\r\n  useEffect(() => {\r\n    if (projectId) {\r\n      dispatch(fetchBugByProjectId(projectId));\r\n      dispatch(getTeamMembersByProjectId(projectId));\r\n    }\r\n  }, [dispatch, projectId]);\r\n\r\n  useEffect(() => {\r\n    if (viewMode === \"my\" && employeeId) {\r\n      dispatch(fetchEmployeeProjectBugs({ projectId, employeeId }));\r\n    } else {\r\n      dispatch(fetchBugByProjectId(projectId));\r\n    }\r\n  }, [dispatch, viewMode, employeeId,projectId]);\r\n\r\n  /* ----------  ROLE LOGIC  ---------- */\r\n  const isCpc = currentUser?.role === \"cpc\";\r\n  const showAllViewOption = isCpc || isTeamLead;\r\n  const showAssignedFilter = showAllViewOption && viewMode === \"all\";\r\n  const showActionColumn = viewMode === \"all\" && (isCpc || isTeamLead);\r\n\r\n  useEffect(() => {\r\n    if (!showAllViewOption) setViewMode(\"my\");\r\n  }, [showAllViewOption]);\r\n\r\n  /* ----------  BUG LIST  ---------- */\r\n  const bugs = useMemo(() => {\r\n    return viewMode === \"my\" ? employeeProjectBugs || [] : bugsByProjectId || [];\r\n  }, [viewMode, employeeProjectBugs, bugsByProjectId]);\r\n\r\n  /* ----------  HELPERS  ---------- */\r\n  const getInitials = (name) => {\r\n    if (!name) return \"N/A\";\r\n    if (name === currentUser?.name && viewMode === \"my\") return \"Me\";\r\n    const parts = name.split(\" \");\r\n    return parts.length > 1\r\n      ? `${parts[0][0]}${parts[1][0]}`.toUpperCase()\r\n      : name.slice(0, 2).toUpperCase();\r\n  };\r\n  const truncate = (s) => (s?.length > 50 ? `${s.slice(0, 50)}...` : s || \"\");\r\n\r\n  const assignedMembersMap = useMemo(() => {\r\n    const map = {};\r\n    (teamMembersByProjectId || []).forEach((m) => {\r\n      map[m.memberName] = m.memberId;\r\n    });\r\n    return map;\r\n  }, [teamMembersByProjectId]);\r\n\r\n  /* ----------  FILTER / SORT / SEARCH  ---------- */\r\n  const filteredBugs = useMemo(() => {\r\n    let list = [...bugs];\r\n    if (searchQuery) {\r\n      const q = searchQuery.toLowerCase();\r\n      list = list.filter(\r\n        (b) =>\r\n          b.title?.toLowerCase().includes(q) ||\r\n          b.bug_id?.toLowerCase().includes(q) ||\r\n          b?.assignedToDetails?.memberName?.toLowerCase().includes(q)\r\n      );\r\n    }\r\n    if (priorityFilter !== \"all\") list = list.filter((b) => b.priority === priorityFilter);\r\n    if (statusFilter !== \"all\") list = list.filter((b) => b.status === statusFilter);\r\n    if (assignedToFilter !== \"all\")\r\n      list = list.filter((b) => b?.assignedToDetails?.memberName === assignedToFilter);\r\n    if (dateFrom || dateTo) {\r\n      list = list.filter((b) => {\r\n        const d = new Date(b.createdAt);\r\n        return (!dateFrom || d >= dateFrom) && (!dateTo || d <= dateTo);\r\n      });\r\n    }\r\n    if (sortConfig.key) {\r\n      list.sort((a, b) => {\r\n        const getVal = (obj, path) =>\r\n          path.split(\".\").reduce((o, k) => (o ? o[k] : \"\"), obj);\r\n        const aVal = getVal(a, sortConfig.key);\r\n        const bVal = getVal(b, sortConfig.key);\r\n        const cmp = String(aVal || \"\").localeCompare(String(bVal || \"\"));\r\n        return sortConfig.direction === \"asc\" ? cmp : -cmp;\r\n      });\r\n    }\r\n    return list;\r\n  }, [\r\n    bugs,\r\n    searchQuery,\r\n    priorityFilter,\r\n    statusFilter,\r\n    assignedToFilter,\r\n    dateFrom,\r\n    dateTo,\r\n    sortConfig,\r\n  ]);\r\n\r\n  /* ----------  HANDLERS  ---------- */\r\n  const handleViewBug = (bug) => {\r\n    setSelectedBug(bug);\r\n    setShowViewModal(true);\r\n  };\r\n  const handleEditBug = (bug) => {\r\n    setSelectedBugForEdit(bug);\r\n    setShowEditModal(true);\r\n  };\r\n  const handleAssignBug = (bug) => {\r\n    setSelectedBugForAssign(bug);\r\n    setShowAssignModal(true);\r\n  };\r\n  const handleSort = (key) => {\r\n    setSortConfig((prev) => ({\r\n      key,\r\n      direction: prev.key === key && prev.direction === \"asc\" ? \"desc\" : \"asc\",\r\n    }));\r\n    setCurrentPage(1);\r\n  };\r\n  const handleResetFilters = () => {\r\n    setSearchQuery(\"\");\r\n    setPriorityFilter(\"all\");\r\n    setStatusFilter(\"all\");\r\n    setAssignedToFilter(\"all\");\r\n    setDateFrom(null);\r\n    setDateTo(null);\r\n    setTempPriorityFilter(\"all\");\r\n    setTempStatusFilter(\"all\");\r\n    setTempAssignedToFilter(\"all\");\r\n    setTempDateFrom(null);\r\n    setTempDateTo(null);\r\n    setSortConfig({ key: \"\", direction: \"asc\" });\r\n    setCurrentPage(1);\r\n  };\r\n  const handleApplyFilters = () => {\r\n    setPriorityFilter(tempPriorityFilter);\r\n    setStatusFilter(tempStatusFilter);\r\n    if (showAssignedFilter) setAssignedToFilter(tempAssignedToFilter);\r\n    setDateFrom(tempDateFrom);\r\n    setDateTo(tempDateTo);\r\n    setShowFilterDialog(false);\r\n    setCurrentPage(1);\r\n  };\r\n  const handleDownloadReport = async () => {\r\n    try {\r\n      if (assignedToFilter !== \"all\" && assignedMembersMap[assignedToFilter]) {\r\n        await dispatch(\r\n          downloadBugsByMemberId({\r\n            projectId,\r\n            memberId: assignedMembersMap[assignedToFilter],\r\n          })\r\n        ).unwrap();\r\n      } else {\r\n        await dispatch(downloadBugsByProjectId(projectId)).unwrap();\r\n      }\r\n      toast.success(\"Report downloaded!\");\r\n    } catch {\r\n      toast.error(\"No Bug Found\");\r\n    }\r\n  };\r\n  const onIssueCreated = () => {\r\n    dispatch(fetchBugByProjectId(projectId));\r\n    toast.success(\"Issue created â€“ it will appear in the list shortly.\");\r\n  };\r\n\r\n  /* ----------  PAGINATION  ---------- */\r\n  const totalPages = Math.max(1, Math.ceil(filteredBugs.length / bugsPerPage));\r\n  const paginatedBugs = filteredBugs.slice(\r\n    (currentPage - 1) * bugsPerPage,\r\n    currentPage * bugsPerPage\r\n  );\r\n\r\n  const getPaginationButtons = () => {\r\n    const maxButtons = 8;\r\n    const buttons = [];\r\n    let startPage = Math.max(1, currentPage - Math.floor(maxButtons / 2));\r\n    let endPage = Math.min(totalPages, startPage + maxButtons - 1);\r\n    if (endPage - startPage + 1 < maxButtons) {\r\n      startPage = Math.max(1, endPage - maxButtons + 1);\r\n    }\r\n    for (let page = startPage; page <= endPage; page++) buttons.push(page);\r\n    return buttons;\r\n  };\r\n\r\n  return (\r\n    <TooltipProvider delayDuration={150} skipDelayDuration={0}>\r\n      <div className=\"w-full bg-white\">\r\n        <div className=\"space-y-2\">\r\n          {/* ---------- TOP BAR ---------- */}\r\n          <div className=\"flex flex-wrap gap-4 p-4\">\r\n            <div className=\"flex-1 min-w-[180px]\">\r\n              <div className=\"relative w-full\">\r\n                <Input\r\n                  placeholder=\"Search bugs...\"\r\n                  value={searchQuery}\r\n                  onChange={(e) => setSearchQuery(e.target.value)}\r\n                  className=\"pl-10 text-sm w-full bg-white border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 rounded-lg\"\r\n                />\r\n              </div>\r\n            </div>\r\n            {showAllViewOption && (\r\n              <div className=\"flex-1 min-w-[140px]\">\r\n                <Select value={viewMode} onValueChange={setViewMode}>\r\n                  <SelectTrigger className=\"text-sm w-full bg-white border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 rounded-lg\">\r\n                    <SelectValue placeholder=\"View Mode\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent className=\"bg-white shadow-lg border-gray-200 rounded-lg\">\r\n                    <SelectItem value=\"my\">My Bugs</SelectItem>\r\n                    <SelectItem value=\"all\">All Bugs</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n            )}\r\n            <div className=\"flex-1 min-w-[140px]\">\r\n              <Button\r\n                variant=\"outline\"\r\n                className=\"w-full bg-white text-black border-gray-300 hover:bg-gray-100 rounded-lg text-sm flex items-center justify-center\"\r\n                onClick={() => setShowFilterDialog(true)}\r\n              >\r\n                Apply Filters <Filter className=\"w-4 h-4 ml-2\" />\r\n              </Button>\r\n            </div>\r\n            <div className=\"flex-1 min-w-[140px]\">\r\n              <Button\r\n                variant=\"outline\"\r\n                className=\"w-full bg-white text-black border-gray-300 hover:bg-gray-100 rounded-lg text-sm flex items-center justify-center\"\r\n                onClick={handleResetFilters}\r\n              >\r\n                Reset Filters <X className=\"w-4 h-4 ml-2\" />\r\n              </Button>\r\n            </div>\r\n            {showAllViewOption && (\r\n              <div className=\"flex-1 min-w-[140px]\">\r\n                <Button\r\n                  variant=\"default\"\r\n                  className=\"w-full bg-blue-600 text-white hover:bg-blue-700 rounded-lg flex items-center justify-center\"\r\n                  onClick={handleDownloadReport}\r\n                >\r\n                  Download <Download className=\"w-4 h-4 ml-2\" />\r\n                </Button>\r\n              </div>\r\n            )}\r\n            <Button\r\n              className=\"bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm flex items-center gap-2\"\r\n              onClick={() => setShowCreateIssue(true)}\r\n            >\r\n              <Plus className=\"h-4 w-4\" />\r\n              Create Issue\r\n            </Button>\r\n          </div>\r\n\r\n          {/* ---------- FILTER DIALOG ---------- */}\r\n          <Dialog open={showFilterDialog} onOpenChange={setShowFilterDialog}>\r\n            <DialogContent className=\"max-w-[95vw] sm:max-w-md bg-white shadow-lg border-gray-200 rounded-lg\">\r\n              <DialogHeader>\r\n                <DialogTitle className=\"text-lg font-semibold text-gray-900\">Filter Bugs</DialogTitle>\r\n              </DialogHeader>\r\n              <div className=\"grid gap-4 py-4\">\r\n                <Select value={tempPriorityFilter} onValueChange={setTempPriorityFilter}>\r\n                  <SelectTrigger className=\"w-full bg-white border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 rounded-lg text-sm\">\r\n                    <SelectValue placeholder=\"Priority\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent className=\"bg-white shadow-lg border-gray-200 rounded-lg\">\r\n                    <SelectItem value=\"all\">All Priorities</SelectItem>\r\n                    <SelectItem value=\"Low\">Low</SelectItem>\r\n                    <SelectItem value=\"Medium\">Medium</SelectItem>\r\n                    <SelectItem value=\"High\">High</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n                <Select value={tempStatusFilter} onValueChange={setTempStatusFilter}>\r\n                  <SelectTrigger className=\"w-full bg-white border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 rounded-lg text-sm\">\r\n                    <SelectValue placeholder=\"Status\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent className=\"bg-white shadow-lg border-gray-200 rounded-lg\">\r\n                    <SelectItem value=\"all\">All Statuses</SelectItem>\r\n                    <SelectItem value=\"Pending\">Pending</SelectItem>\r\n                    <SelectItem value=\"In Progress\">In Progress</SelectItem>\r\n                    <SelectItem value=\"Resolved\">Resolved</SelectItem>\r\n                    <SelectItem value=\"Completed\">Completed</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n                {showAssignedFilter && (\r\n                  <Select value={tempAssignedToFilter} onValueChange={setTempAssignedToFilter}>\r\n                    <SelectTrigger className=\"w-full bg-white border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 rounded-lg text-sm\">\r\n                      <SelectValue placeholder=\"Assigned To\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent className=\"bg-white shadow-lg border-gray-200 rounded-lg\">\r\n                      <SelectItem value=\"all\">All Assigned</SelectItem>\r\n                      {(teamMembersByProjectId || []).map((m) => (\r\n                        <SelectItem key={m.memberId} value={m.memberName}>\r\n                          {m.memberName}\r\n                        </SelectItem>\r\n                      ))}\r\n                    </SelectContent>\r\n                  </Select>\r\n                )}\r\n                <Popover>\r\n                  <PopoverTrigger asChild>\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      className={cn(\r\n                        \"w-full justify-between bg-white border-gray-300 hover:bg-gray-100 rounded-lg text-sm\",\r\n                        !tempDateFrom && \"text-gray-500\"\r\n                      )}\r\n                    >\r\n                      {tempDateFrom ? format(tempDateFrom, \"PPP\") : <span>From Date</span>}\r\n                      <CalendarIcon className=\"ml-2 h-4 w-4 text-black\" />\r\n                    </Button>\r\n                  </PopoverTrigger>\r\n                  <PopoverContent className=\"w-auto p-0 bg-white shadow-lg border-gray-200 rounded-lg\">\r\n                    <Calendar\r\n                      mode=\"single\"\r\n                      selected={tempDateFrom}\r\n                      onSelect={setTempDateFrom}\r\n                      initialFocus\r\n                      className=\"rounded-lg text-black\"\r\n                    />\r\n                  </PopoverContent>\r\n                </Popover>\r\n                <Popover>\r\n                  <PopoverTrigger asChild>\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      className={cn(\r\n                        \"w-full justify-between bg-white border-gray-300 hover:bg-gray-100 rounded-lg text-sm\",\r\n                        !tempDateTo && \"text-gray-500\"\r\n                      )}\r\n                    >\r\n                      {tempDateTo ? format(tempDateTo, \"PPP\") : <span>To Date</span>}\r\n                      <CalendarIcon className=\"ml-2 h-4 w-4 text-black\" />\r\n                    </Button>\r\n                  </PopoverTrigger>\r\n                  <PopoverContent className=\"w-auto p-0 bg-white shadow-lg border-gray-200 rounded-lg\">\r\n                    <Calendar\r\n                      mode=\"single\"\r\n                      selected={tempDateTo}\r\n                      onSelect={setTempDateTo}\r\n                      initialFocus\r\n                      className=\"rounded-lg text-black\"\r\n                    />\r\n                  </PopoverContent>\r\n                </Popover>\r\n                <Button\r\n                  onClick={handleApplyFilters}\r\n                  className=\"bg-blue-600 text-white hover:bg-blue-700 rounded-lg text-sm\"\r\n                >\r\n                  Apply Filters\r\n                </Button>\r\n              </div>\r\n            </DialogContent>\r\n          </Dialog>\r\n\r\n          {/* ---------- TABLE ---------- */}\r\n          <div className=\"overflow-x-auto rounded-md border\">\r\n            <Table>\r\n              <TableHeader>\r\n                <TableRow className=\"bg-gray-50 text-xs sm:text-sm\">\r\n                  <TableHead className=\"font-bold text-gray-700 w-[60px]\">S.N</TableHead>\r\n                  <TableHead\r\n                    className=\"font-bold text-gray-700 cursor-pointer w-[300px] sm:w-[400px]\"\r\n                    onClick={() => handleSort(\"title\")}\r\n                  >\r\n                    Title\r\n                  </TableHead>\r\n                  <TableHead\r\n                    className=\"font-bold text-gray-700 cursor-pointer w-[100px]\"\r\n                    onClick={() => handleSort(\"assignedToDetails.memberName\")}\r\n                  >\r\n                    Assignee\r\n                  </TableHead>\r\n                  <TableHead\r\n                    className=\"font-bold text-gray-700 cursor-pointer w-[100px]\"\r\n                    onClick={() => handleSort(\"priority\")}\r\n                  >\r\n                    Priority\r\n                  </TableHead>\r\n                  <TableHead\r\n                    className=\"font-bold text-gray-700 cursor-pointer w-[150px]\"\r\n                    onClick={() => handleSort(\"deadline\")}\r\n                  >\r\n                    Deadline\r\n                  </TableHead>\r\n                  <TableHead\r\n                    className=\"font-bold text-gray-700 cursor-pointer w-[100px]\"\r\n                    onClick={() => handleSort(\"status\")}\r\n                  >\r\n                    Status\r\n                  </TableHead>\r\n                  {showActionColumn && <TableHead className=\"font-bold text-gray-700 w-[60px]\">Action</TableHead>}\r\n                </TableRow>\r\n              </TableHeader>\r\n              <TableBody>\r\n                {paginatedBugs.length === 0 ? (\r\n                  <TableRow>\r\n                    <TableCell\r\n                      colSpan={showActionColumn ? 7 : 6}\r\n                      className=\"text-center text-gray-500 py-6 text-sm\"\r\n                    >\r\n                      No bugs found\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ) : (\r\n                  paginatedBugs.map((bug, index) => (\r\n                    <TableRow\r\n                      key={bug._id}\r\n                      className=\"text-xs sm:text-sm cursor-pointer transition-all duration-300 ease-in-out hover:bg-gray-600 hover:bg-opacity-100 hover:shadow-md\"\r\n                      onClick={() => handleViewBug(bug)}\r\n                    >\r\n                      <TableCell>{(currentPage - 1) * bugsPerPage + index + 1}</TableCell>\r\n                      <TableCell>\r\n                        <span className=\"line-clamp-1\">{truncate(bug.title)}</span>\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        {bug?.assignedToDetails?.memberName ? (\r\n                          <Tooltip>\r\n                            <TooltipTrigger>\r\n                              <div className=\"w-8 h-8 rounded-full bg-blue-100 text-blue-700 flex items-center justify-center text-xs font-medium\">\r\n                                {getInitials(bug.assignedToDetails.memberName)}\r\n                              </div>\r\n                            </TooltipTrigger>\r\n                            <TooltipContent className=\"bg-gradient-to-br from-blue-50 to-indigo-50/80 backdrop-blur-sm border border-blue-100/50 shadow-xl shadow-blue-100/20 max-w-[300px] p-4 rounded-xl\">\r\n                              <p className=\"text-xs text-gray-700\">\r\n                                {bug.assignedToDetails.memberName}\r\n                              </p>\r\n                            </TooltipContent>\r\n                          </Tooltip>\r\n                        ) : (\r\n                          showActionColumn && (\r\n                            <Button\r\n                              variant=\"outline\"\r\n                              size=\"sm\"\r\n                              className=\"h-8 px-2 text-xs bg-white border-gray-300 hover:bg-gray-100\"\r\n                              onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                handleAssignBug(bug);\r\n                              }}\r\n                            >\r\n                              Assign\r\n                            </Button>\r\n                          )\r\n                        )}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <span\r\n                          className={cn(\r\n                            \"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium\",\r\n                            bug.priority === \"Low\"\r\n                              ? \"bg-green-200 text-green-800\"\r\n                              : bug.priority === \"Medium\"\r\n                              ? \"bg-yellow-200 text-yellow-800\"\r\n                              : bug.priority === \"High\"\r\n                              ? \"bg-red-200 text-red-800\"\r\n                              : \"bg-gray-200 text-gray-800\"\r\n                          )}\r\n                        >\r\n                          {bug.priority || \"N/A\"}\r\n                        </span>\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <p className=\"text-xs text-gray-700\">{formatDateTimeIST(bug.deadline) || \"N/A\"}</p>\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <span\r\n                          className={cn(\r\n                            \"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium\",\r\n                            bug.status === \"Pending\"\r\n                              ? \"bg-yellow-200 text-yellow-800\"\r\n                              : bug.status === \"In Progress\"\r\n                              ? \"bg-blue-200 text-blue-800\"\r\n                              : bug.status === \"Resolved\"\r\n                              ? \"bg-purple-200 text-purple-800\"\r\n                              : bug.status === \"Completed\"\r\n                              ? \"bg-green-200 text-green-800\"\r\n                              : \"bg-gray-200 text-gray-800\"\r\n                          )}\r\n                        >\r\n                          {bug.status || \"N/A\"}\r\n                        </span>\r\n                      </TableCell>\r\n                      {showActionColumn && (\r\n                        <TableCell>\r\n                          <Button\r\n                            title=\"Edit Bug\"\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            className=\"h-6 w-6 sm:h-8 sm:w-8 p-0\"\r\n                            onClick={(e) => {\r\n                              e.stopPropagation();\r\n                              handleEditBug(bug);\r\n                            }}\r\n                          >\r\n                            <Edit className=\"h-4 w-4 text-green-700\" />\r\n                          </Button>\r\n                        </TableCell>\r\n                      )}\r\n                    </TableRow>\r\n                  ))\r\n                )}\r\n              </TableBody>\r\n            </Table>\r\n          </div>\r\n\r\n          {/* ---------- PAGINATION ---------- */}\r\n          <div className=\"flex flex-col sm:flex-row items-center justify-between px-2 py-4 gap-4 sm:gap-0\">\r\n            <div className=\"text-xs sm:text-sm text-gray-700\">\r\n              Showing {Math.min((currentPage - 1) * bugsPerPage + 1, filteredBugs.length)}-\r\n              {Math.min(currentPage * bugsPerPage, filteredBugs.length)} of {filteredBugs.length} bugs\r\n            </div>\r\n            {totalPages > 1 && (\r\n              <div className=\"flex items-center gap-2\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => setCurrentPage((p) => Math.max(1, p - 1))}\r\n                  disabled={currentPage === 1}\r\n                  className=\"bg-white text-black border-gray-300 hover:bg-gray-100 rounded-lg text-xs sm:text-sm\"\r\n                >\r\n                  Previous\r\n                </Button>\r\n                {getPaginationButtons().map((page) => (\r\n                  <Button\r\n                    key={page}\r\n                    variant={currentPage === page ? \"default\" : \"outline\"}\r\n                    size=\"sm\"\r\n                    onClick={() => setCurrentPage(page)}\r\n                    className={cn(\r\n                      \"w-8 h-8 p-0\",\r\n                      currentPage === page\r\n                        ? \"bg-blue-600 text-white hover:bg-blue-700\"\r\n                        : \"bg-white text-black border-gray-300 hover:bg-gray-100\",\r\n                      \"rounded-lg text-xs sm:text-sm\"\r\n                    )}\r\n                  >\r\n                    {page}\r\n                  </Button>\r\n                ))}\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => setCurrentPage((p) => Math.min(totalPages, p + 1))}\r\n                  disabled={currentPage === totalPages}\r\n                  className=\"bg-white text-black border-gray-300 hover:bg-gray-100 rounded-lg text-xs sm:text-sm\"\r\n                >\r\n                  Next\r\n                </Button>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* ---------- CREATE ISSUE MODAL ---------- */}\r\n          <ReportIssueForm\r\n            projectData={projectData}\r\n            isOpen={showCreateIssue}\r\n            onClose={() => setShowCreateIssue(false)}\r\n            onIssueReported={onIssueCreated}\r\n          />\r\n\r\n          {/* ---------- VIEW / EDIT / ASSIGN MODALS ---------- */}\r\n          <BugDetailsViewModal\r\n            isOpen={showViewModal}\r\n            onOpenChange={setShowViewModal}\r\n            bug={selectedBug}\r\n            bugId={selectedBug?.bug_id}\r\n          />\r\n          <BugEditModal\r\n            isOpen={showEditModal}\r\n            onOpenChange={setShowEditModal}\r\n            bug={selectedBugForEdit}\r\n            bugId={selectedBugForEdit?.bug_id}\r\n          />\r\n          <BugAssignModal\r\n            isOpen={showAssignModal}\r\n            onOpenChange={setShowAssignModal}\r\n            bug={selectedBugForAssign}\r\n            bugId={selectedBugForAssign?.bug_id}\r\n            teamMembers={teamMembersByProjectId || []}\r\n          />\r\n        </div>\r\n      </div>\r\n    </TooltipProvider>\r\n  );\r\n};\r\n\r\nexport default ProjectbugList;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4663, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/analytics/components/ProjectMetrics.jsx"],"sourcesContent":["\r\n\r\n\r\n\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { Chart as ChartJS, ArcElement, Tooltip, Legend, BarElement, CategoryScale, LinearScale, LineElement, PointElement, RadialLinearScale, Filler } from \"chart.js\";\r\nimport { Pie, Doughnut, Bar, Line } from \"react-chartjs-2\";\r\nimport { fetchProjectAnalytics, fetchEmployeeAnalytics } from \"@/modules/project-management/analytics/slices/projectAnalyticsSlice\";\r\nimport { useCurrentUser } from \"@/hooks/useCurrentUser\";\r\n\r\n// Register Chart.js components\r\nChartJS.register(ArcElement, Tooltip, Legend, BarElement, CategoryScale, LinearScale, LineElement, PointElement, RadialLinearScale, Filler);\r\n\r\n// Colors for charts\r\nconst MIXED_COLORS = [\"#3b82f6\", \"#22c55e\", \"#ef4444\", \"#eab308\", \"#f97316\"];\r\n\r\n// Chart rendering function\r\nfunction renderChart(type, data, isTaskChart = false, noDataMessage = 'No data available') {\r\n  // Check for no valid data\r\n  if (!data || data.length === 0 || data.every((d) => !d || d.value == null || d.value === 0)) {\r\n    return (\r\n      <div className=\"w-full h-full flex items-center justify-center text-gray-500 text-sm\">\r\n        {noDataMessage}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const labels = data.map((d) => d.name || \"Unknown\");\r\n  const values = data.map((d) => Number(d.value) || 0);\r\n  const chartData = {\r\n    labels,\r\n    datasets: [\r\n      {\r\n        data: values,\r\n        backgroundColor: MIXED_COLORS.slice(0, values.length),\r\n        borderColor: MIXED_COLORS.slice(0, values.length).map((c) => c + \"cc\"),\r\n        borderWidth: 1,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const options = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: {\r\n      legend: {\r\n        position: \"bottom\",\r\n        labels: {\r\n          font: { size: 10, family: \"'Inter', sans-serif\" },\r\n          color: \"#1f2937\",\r\n          padding: 5,\r\n        },\r\n      },\r\n      tooltip: {\r\n        backgroundColor: \"#ffffff\",\r\n        titleColor: \"#1f2937\",\r\n        bodyColor: \"#1f2937\",\r\n        borderColor: \"#e5e7eb\",\r\n        borderWidth: 1,\r\n        cornerRadius: 4,\r\n        padding: 6,\r\n        callbacks: {\r\n          label: function (context) {\r\n            const label = context.dataset.label || context.label || \"\";\r\n            const value = context.raw || 0;\r\n            return `${label}: ${value}`;\r\n          },\r\n          title: function (context) {\r\n            return context[0].label || \"\";\r\n          },\r\n        },\r\n      },\r\n      datalabels: isTaskChart\r\n        ? {\r\n            display: true,\r\n            color: \"#1f2937\",\r\n            font: { size: 10, family: \"'Inter', sans-serif\" },\r\n            formatter: (value, context) => `${context.chart.data.labels[context.dataIndex]}: ${value}`,\r\n            anchor: \"center\",\r\n            align: \"center\",\r\n          }\r\n        : { display: false },\r\n    },\r\n    hover: {\r\n      mode: \"nearest\",\r\n      intersect: true,\r\n    },\r\n    interaction: {\r\n      mode: \"index\",\r\n      intersect: false,\r\n    },\r\n  };\r\n\r\n  switch (type) {\r\n    case \"pie\": return <Pie data={chartData} options={options} />;\r\n    case \"doughnut\": return <Doughnut data={chartData} options={{ ...options, cutout: \"50%\" }} />;\r\n    case \"bar\": return <Bar data={chartData} options={options} />;\r\n    case \"line\": return <Line data={chartData} options={options} />;\r\n    default: return null;\r\n  }\r\n}\r\n\r\n// Skeleton for loading state\r\nfunction ChartSkeleton() {\r\n  return <Skeleton className=\"w-full h-[150px] rounded-lg\" />;\r\n}\r\n\r\nexport default function ProjectMetrics({ projectId }) {\r\n  const dispatch = useDispatch();\r\n  const { analytics, employeeAnalytics, loading: analyticsLoading } = useSelector((state) => state.projectAnalytics);\r\n  const { project } = useSelector((state) => state.project);\r\n  const { currentUser, isTeamLead } = useCurrentUser(project?.data?.teamLeadId);\r\n\r\n  // Determine if user can toggle between full and personal views\r\n  // Toggle is only shown when isTeamLead is true\r\n  const canViewBoth = isTeamLead === true;\r\n\r\n  // Set view mode based on user role/position\r\n  // - Team Lead (isTeamLead === true): Can toggle, default to 'full'\r\n  // - CPC or position 'Team Lead' but not isTeamLead: Only 'full' view\r\n  // - Otherwise: Only 'personal' view\r\n  const initialViewMode = canViewBoth\r\n    ? 'full'\r\n    : (currentUser?.role === 'cpc' || currentUser?.position === 'Team Lead')\r\n      ? 'full'\r\n      : 'personal';\r\n  const [viewMode, setViewMode] = useState(initialViewMode);\r\n\r\n  // Fetch analytics based on view mode\r\n  useEffect(() => {\r\n    if (projectId && currentUser?.id) {\r\n      if (viewMode === 'full') {\r\n        dispatch(fetchProjectAnalytics(projectId));\r\n      } else {\r\n        dispatch(fetchEmployeeAnalytics({ projectId, employeeId: currentUser.id }));\r\n      }\r\n    }\r\n  }, [projectId, dispatch, viewMode, currentUser?.id]);\r\n\r\n  const chartData = viewMode === 'full' ? analytics : employeeAnalytics;\r\n\r\n  // Dynamic titles and messages based on view mode\r\n  const isPersonal = viewMode === 'personal';\r\n  const tasksTitle = isPersonal ? 'My Tasks' : 'All Tasks';\r\n  const bugsTitle = isPersonal ? 'My Bugs' : 'All Bugs';\r\n  const teamTitle = isPersonal ? 'Active Teams' : 'Active Teams';\r\n  const momTitle = isPersonal ? 'All MOM' : 'All MOM';\r\n\r\n  const tasksNoDataMessage = isPersonal ? 'No tasks assigned' : 'No tasks';\r\n  const bugsNoDataMessage = isPersonal ? 'No bugs assigned' : 'No bugs';\r\n  const teamNoDataMessage = isPersonal ? 'No teams involved' : 'No teams';\r\n  const momNoDataMessage = isPersonal ? 'No MOM available' : 'No MOM';\r\n\r\n  // Chart data functions\r\n  const getTaskChartData = () =>\r\n    chartData?.summary?.taskStatusCounts\r\n      ? Object.entries(chartData.summary.taskStatusCounts)\r\n          .map(([name, value]) => ({ name, value: Number(value) }))\r\n          .filter((item) => item?.name && item.value != null && item.value >= 0)\r\n      : [];\r\n\r\n  const getBugChartData = () =>\r\n    chartData?.summary?.bugStatusCounts\r\n      ? Object.entries(chartData.summary.bugStatusCounts)\r\n          .map(([name, value]) => ({ name, value: Number(value) }))\r\n          .filter((item) => item?.name && item.value != null && item.value >= 0)\r\n      : [];\r\n\r\n  const getTeamChartData = () => {\r\n    if (chartData?.summary?.teamCount != null && chartData.summary.teamCount >= 0) {\r\n      return [{ name: \"Active Teams\", value: Number(chartData.summary.teamCount) }];\r\n    }\r\n    return [];\r\n  };\r\n\r\n  const getMomChartData = () =>\r\n    chartData?.summary?.mom\r\n      ? [\r\n          { name: \"Online\", value: Number(chartData.summary.mom.online) || 0 },\r\n          { name: \"Offline\", value: Number(chartData.summary.mom.offline) || 0 },\r\n        ].filter((item) => item?.name && item.value != null && item.value >= 0)\r\n      : [];\r\n\r\n  return (\r\n    <section className=\"space-y-4\">\r\n      {canViewBoth && (\r\n        <div className=\"flex justify-end items-center mb-4 cursor-pointer\">\r\n          <Switch\r\n            checked={viewMode === \"full\"}\r\n            onCheckedChange={(checked) =>\r\n              setViewMode(checked ? \"full\" : \"personal\")\r\n            }\r\n            title={\r\n              viewMode === \"full\"\r\n                ? \"Show My Analytics\"\r\n                : \"Show Full Project Analytics\"\r\n            }\r\n            className=\"data-[state=checked]:bg-blue-500 transition\"\r\n          />\r\n        </div>\r\n      )}\r\n      {analyticsLoading ? (\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n          {Array(4).fill(0).map((_, index) => (\r\n            <Card key={index} className=\"bg-gradient-to-br from-gray-50 to-gray-100 border border-gray-200/50 rounded-xl overflow-hidden shadow-md\">\r\n              <CardHeader className=\"pb-2 bg-gray-200/50\">\r\n                <CardTitle className=\"text-sm font-medium text-gray-900\"></CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"p-4\" style={{ height: \"180px\" }}>\r\n                <ChartSkeleton />\r\n              </CardContent>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n      ) : !chartData?.summary ? (\r\n        <div className=\"w-full h-[180px] text-center text-gray-500\">\r\n          No analytics data available\r\n        </div>\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n          <Card className=\"bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200/50 rounded-xl overflow-hidden shadow-md\">\r\n            <CardHeader className=\"pb-2 bg-blue-200/50\">\r\n              <CardTitle className=\"text-sm font-medium text-blue-900\">{tasksTitle}</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"p-4\" style={{ height: \"180px\" }}>\r\n              {renderChart(\"pie\", getTaskChartData(), true, tasksNoDataMessage)}\r\n            </CardContent>\r\n          </Card>\r\n          <Card className=\"bg-gradient-to-br from-red-50 to-red-100 border border-red-200/50 rounded-xl overflow-hidden shadow-md\">\r\n            <CardHeader className=\"pb-2 bg-red-200/50\">\r\n              <CardTitle className=\"text-sm font-medium text-red-900\">{bugsTitle}</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"p-4\" style={{ height: \"180px\" }}>\r\n              {renderChart(\"doughnut\", getBugChartData(), false, bugsNoDataMessage)}\r\n            </CardContent>\r\n          </Card>\r\n          <Card className=\"bg-gradient-to-br from-green-50 to-green-100 border border-green-200/50 rounded-xl overflow-hidden shadow-md\">\r\n            <CardHeader className=\"pb-2 bg-green-200/50\">\r\n              <CardTitle className=\"text-sm font-medium text-green-900\">{teamTitle}</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"p-4\" style={{ height: \"180px\" }}>\r\n              {renderChart(\"pie\", getTeamChartData(), false, teamNoDataMessage)}\r\n            </CardContent>\r\n          </Card>\r\n\r\n          \r\n          <Card className=\"bg-gradient-to-br from-purple-50 to-purple-100 border border-purple-200/50 rounded-xl overflow-hidden shadow-md\">\r\n            <CardHeader className=\"pb-2 bg-purple-200/50\">\r\n              <CardTitle className=\"text-sm font-medium text-purple-900\">{momTitle}</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"p-4\" style={{ height: \"180px\" }}>\r\n              {renderChart(\"pie\", getMomChartData(), false, momNoDataMessage)}\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5164, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/team/components/CreateTeamModal.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect, useMemo, useRef } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { fetchTeamMembers, createTeam } from \"@/modules/project-management/team/slices/teamSlice\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { DialogContent } from \"@/components/ui/dialog\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { Users, Check, Loader2, Trash2 } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { fetchTeamByProjectId } from \"@/modules/project-management/team/slices/viewTeamByProjectIdSlice\";\r\n\r\nexport default function CreateTeamModal({ projectId, onClose, isOpen }) {\r\n  const dispatch = useDispatch();\r\n  const { allMembers, createTeamError } = useSelector((state) => state.team);\r\n  const { project } = useSelector((state) => state.project);\r\n  const {\r\n    teamsByProject: teams,\r\n    status,\r\n    error,\r\n  } = useSelector((state) => state.team);\r\n\r\n  const [selectedMembers, setSelectedMembers] = useState([]);\r\n  const [teamName, setTeamName] = useState(\"\");\r\n  const [formErrors, setFormErrors] = useState({});\r\n  const [successMessage, setSuccessMessage] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [isSelectOpen, setIsSelectOpen] = useState(false);\r\n  const selectRef = useRef(null);\r\n  const searchInputRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchTeamMembers());\r\n    if (projectId) {\r\n      dispatch(fetchTeamByProjectId(projectId));\r\n    }\r\n  }, [dispatch, projectId]);\r\n\r\n  // Flatten existing members from teams\r\n  const existingMember = teams.flatMap((team) => team.teamMembers);\r\n\r\n  // Step 1: Filter unique members by memberId, ensuring it's defined\r\n  const uniqueMembers = Array.from(\r\n    new Map(\r\n      existingMember\r\n        .filter((member) => member.memberId) // Filter out invalid entries\r\n        .map((member) => [member.memberId.trim(), member])\r\n    ).values()\r\n  );\r\n\r\n  // Step 2: Create a set of memberIds from uniqueMembers\r\n  const uniqueMemberIds = new Set(\r\n    uniqueMembers.map((member) => member.memberId.trim())\r\n  );\r\n\r\n  // Step 3: Filter allMembers to exclude members already in uniqueMembers\r\n  const finalMembers = allMembers.filter((member) => {\r\n    if (!member.employeeID) {\r\n      // console.warn(\"Member missing employeeID:\", member);\r\n      return true; // Keep or handle as needed\r\n    }\r\n    const id = member.employeeID.trim();\r\n    return !uniqueMemberIds.has(id);\r\n  });\r\n\r\n  // Step 4: Log the results\r\n  // console.log(\"All Members\", allMembers);\r\n  // console.log(\"Unique Existing Members\", uniqueMembers);\r\n  // console.log(\"Final Members after excluding existing\", finalMembers);\r\n\r\n  const memberOptions = useMemo(() => {\r\n    if (!finalMembers || !Array.isArray(finalMembers)) return [];\r\n\r\n    return finalMembers.map((member) => ({\r\n      value: member.employeeID,\r\n      label: member.name || `${member.firstName} ${member.lastName}`.trim(),\r\n      email: member.email,\r\n      firstName: member.firstName,\r\n      lastName: member.lastName,\r\n      id: member.employeeID,\r\n      designation: member.designation || \"Not specified\",\r\n    }));\r\n  }, [finalMembers]);\r\n\r\n  const availableMembers = useMemo(() => {\r\n    return memberOptions.filter(\r\n      (member) =>\r\n        !selectedMembers.some((selected) => selected.value === member.value) &&\r\n        (searchQuery === \"\" ||\r\n          member.label.toLowerCase().includes(searchQuery.toLowerCase()))\r\n    );\r\n  }, [memberOptions, selectedMembers, searchQuery]);\r\n\r\n  const validateForm = () => {\r\n    const errors = {};\r\n    if (!teamName.trim()) errors.teamName = \"Team name is required\";\r\n    if (selectedMembers.length === 0)\r\n      errors.teamMembers = \"Please select at least one team member\";\r\n    return errors;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const errors = validateForm();\r\n    if (Object.keys(errors).length > 0) {\r\n      setFormErrors(errors);\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setFormErrors({});\r\n    setSuccessMessage(\"\");\r\n\r\n    const formattedTeamMembers = selectedMembers.map((member) => ({\r\n      memberId: member.value,\r\n      memberName: member.label,\r\n      role: member.designation,\r\n      email: member.email,\r\n    }));\r\n\r\n    const teamData = {\r\n      projectId,\r\n      teamName: teamName.trim(),\r\n      projectName: project?.data?.name || \"N/A\",\r\n      teamLeadName: project?.data?.teamLeadName?.trim() || \"N/A\",\r\n      teamLeadId: project?.data?.teamLeadId?.trim() || \"N/A\",\r\n      teamMembers: formattedTeamMembers,\r\n    };\r\n\r\n\r\n\r\n    try {\r\n      const resultAction = await dispatch(createTeam(teamData));\r\n\r\n      if (createTeam.fulfilled.match(resultAction)) {\r\n        toast.success(\r\n          resultAction.payload?.message || \"Team created successfully!\"\r\n        );\r\n        await dispatch(fetchTeamByProjectId(projectId)); // âœ… Only here, after success\r\n        setTeamName(\"\");\r\n        setSelectedMembers([]);\r\n        setSearchQuery(\"\");\r\n        onClose();\r\n      } else {\r\n        throw new Error(\r\n          resultAction.payload?.message || \"Failed to create team\"\r\n        );\r\n      }\r\n    } catch (err) {\r\n      toast.error(err.message || createTeamError || \"Failed to create team\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const addTeamMember = (value) => {\r\n    const selected = memberOptions.find((member) => member.value === value);\r\n    if (selected && !selectedMembers.some((m) => m.value === selected.value)) {\r\n      setSelectedMembers([...selectedMembers, selected]);\r\n      setFormErrors((prev) => ({ ...prev, teamMembers: \"\" }));\r\n      setSuccessMessage(\"\");\r\n      setSearchQuery(\"\"); // Clear search query after selection\r\n      setIsSelectOpen(true); // Keep dropdown open\r\n      setTimeout(() => {\r\n        if (searchInputRef.current) {\r\n          searchInputRef.current.focus(); // Refocus on search input\r\n        }\r\n      }, 0);\r\n    }\r\n  };\r\n\r\n  const removeTeamMember = (memberToRemove) => {\r\n    setSelectedMembers(\r\n      selectedMembers.filter((member) => member.value !== memberToRemove.value)\r\n    );\r\n    setFormErrors((prev) => ({ ...prev, teamMembers: \"\" }));\r\n    setSuccessMessage(\"\");\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setTeamName(\"\");\r\n    setSelectedMembers([]);\r\n    setFormErrors({});\r\n    setSuccessMessage(\"\");\r\n    setSearchQuery(\"\");\r\n    setIsSelectOpen(false);\r\n    onClose();\r\n    \r\n  };\r\n\r\n  const handleSearchInputChange = (e) => {\r\n    setSearchQuery(e.target.value);\r\n    setIsSelectOpen(true); // Keep dropdown open while typing\r\n  };\r\n\r\n  const handleSelectTriggerClick = () => {\r\n    setIsSelectOpen(true);\r\n    setTimeout(() => {\r\n      if (searchInputRef.current) {\r\n        searchInputRef.current.focus(); // Focus on search input when trigger is clicked\r\n      }\r\n    }, 0);\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <DialogContent className=\"h-[90vh] max-w-full sm:max-w-4xl md:max-w-5xl lg:max-w-6xl p-0 border-none overflow-y-auto max-h-[85vh]\">\r\n      <Card className=\"w-full bg-white border border-gray-200 shadow-lg rounded-xl\">\r\n        <CardHeader className=\"sticky top-0 bg-white px-6 py-4 border-b border-gray-200 z-10\">\r\n          <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 sm:gap-0\">\r\n            <CardTitle className=\"text-xl font-bold text-black flex items-center gap-2\">\r\n              <Users className=\"h-6 w-6 text-black\" /> Create Team\r\n            </CardTitle>\r\n            <div className=\"flex items-center gap-3\">\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={handleClose}\r\n                className=\"px-4 py-2 bg-white text-black border border-gray-300 rounded-md hover:bg-gray-100 text-sm font-medium transition-colors\"\r\n                aria-label=\"Cancel\"\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                type=\"submit\"\r\n                onClick={handleSubmit}\r\n                disabled={isLoading}\r\n                className=\"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700 disabled:bg-indigo-400 disabled:cursor-not-allowed transition-colors\"\r\n                aria-label=\"Create team\"\r\n              >\r\n                {isLoading ? (\r\n                  <>\r\n                    <Loader2 className=\"inline-block mr-2 animate-spin h-4 w-4\" />\r\n                    Creating...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Check className=\"inline-block mr-2 h-4 w-4\" />\r\n                    Create Team\r\n                  </>\r\n                )}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent className=\"p-6 bg-white\">\r\n          <form className=\"space-y-6\">\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-6\">\r\n              <div>\r\n                <Label className=\"block text-sm font-bold text-black mb-2 flex items-center gap-1.5\">\r\n                  <Users className=\"h-4 w-4 text-black\" /> Team Name\r\n                  {formErrors.teamName && (\r\n                    <span className=\"text-xs ml-2 text-red-500\">\r\n                      ({formErrors.teamName})\r\n                    </span>\r\n                  )}\r\n                </Label>\r\n                <Input\r\n                  type=\"text\"\r\n                  value={teamName}\r\n                  onChange={(e) => {\r\n                    setTeamName(e.target.value);\r\n                    setFormErrors((prev) => ({ ...prev, teamName: \"\" }));\r\n                    setSuccessMessage(\"\");\r\n                  }}\r\n                  placeholder=\"Enter team name\"\r\n                  className=\"w-full h-10 px-3 rounded-md border border-gray-300 text-sm text-black focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white transition-colors\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label className=\"block text-sm font-bold text-black mb-2 flex items-center gap-1.5\">\r\n                  <Users className=\"h-4 w-4 text-black\" /> Add Member\r\n                  {formErrors.teamMembers && (\r\n                    <span className=\"text-xs ml-2 text-red-500\">\r\n                      ({formErrors.teamMembers})\r\n                    </span>\r\n                  )}\r\n                </Label>\r\n                <Select\r\n                  open={isSelectOpen}\r\n                  onOpenChange={(open) => {\r\n                    setIsSelectOpen(open);\r\n                    if (open && searchInputRef.current) {\r\n                      setTimeout(() => searchInputRef.current.focus(), 0);\r\n                    }\r\n                  }}\r\n                  onValueChange={addTeamMember}\r\n                >\r\n                  <SelectTrigger\r\n                    ref={selectRef}\r\n                    onClick={handleSelectTriggerClick}\r\n                    className={`w-full h-10 border ${\r\n                      formErrors.teamMembers\r\n                        ? \"border-red-300\"\r\n                        : \"border-gray-300\"\r\n                    } bg-white text-black focus:ring-indigo-500 relative`}\r\n                  >\r\n                    <span className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm pointer-events-none\">\r\n                      Search and add Team members\r\n                    </span>\r\n                    <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContent className=\"bg-white border border-gray-200 max-h-60 overflow-y-auto\">\r\n                    <div className=\"p-2 border-b border-gray-200\">\r\n                      <Input\r\n                        ref={searchInputRef}\r\n                        type=\"text\"\r\n                        value={searchQuery}\r\n                        onChange={handleSearchInputChange}\r\n                        placeholder=\"Search Team Members\"\r\n                        className=\"w-full h-10 px-3 rounded-md border border-gray-300 text-sm text-black focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white transition-colors\"\r\n                        onKeyDown={(e) => e.stopPropagation()} // Prevent dropdown from closing on keypress\r\n                      />\r\n                    </div>\r\n                    <div className=\"p-2 text-sm text-green-600 font-medium border-b border-gray-200\">\r\n                      Available Members ({availableMembers.length} )\r\n                    </div>\r\n                    {isLoading ? (\r\n                      <div className=\"p-2 text-sm text-black\">Loading...</div>\r\n                    ) : availableMembers.length === 0 ? (\r\n                      <div className=\"p-2 text-sm text-black\">\r\n                        {searchQuery\r\n                          ? \"No matching team members found\"\r\n                          : \"No team members available\"}\r\n                      </div>\r\n                    ) : (\r\n                      availableMembers.map((member) => (\r\n                        <SelectItem\r\n                          key={member.value}\r\n                          value={member.value}\r\n                          className=\"text-black hover:bg-gray-100 focus:bg-gray-100\"\r\n                        >\r\n                          {member.label}\r\n                        </SelectItem>\r\n                      ))\r\n                    )}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex flex-col\">\r\n              <div className=\"flex justify-between items-center mb-3\">\r\n                <h3 className=\"text-sm font-bold text-black flex items-center gap-1.5\">\r\n                  <Users className=\"h-4 w-4 text-black\" /> Selected Team Members\r\n                </h3>\r\n                <span className=\"text-sm text-green-600 font-medium\">\r\n                  Total: {selectedMembers.length}{\" \"}\r\n                  {selectedMembers.length === 1 ? \"member\" : \"members\"}\r\n                </span>\r\n              </div>\r\n              {selectedMembers.length === 0 ? (\r\n                <div className=\"flex flex-col items-center justify-center py-12 text-black bg-white rounded-lg border border-gray-200 shadow-sm\">\r\n                  <Users className=\"h-8 w-8 mb-2 text-gray-400\" />\r\n                  <p className=\"text-sm font-medium\">\r\n                    No team members selected\r\n                  </p>\r\n                  <p className=\"text-xs text-gray-400\">\r\n                    Add team members using the selector above\r\n                  </p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"flex flex-wrap gap-4\">\r\n                  {selectedMembers.map((member) => (\r\n                    <div\r\n                      key={member.value}\r\n                      className=\"flex items-center gap-4 p-4 bg-white rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow w-full sm:w-[calc(50%-0.5rem)] lg:w-[calc(33.33%-0.67rem)]\"\r\n                    >\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"text-sm font-medium text-black\">\r\n                          {member.label}\r\n                        </div>\r\n                        <div className=\"text-sm text-black\">{member.email}</div>\r\n                        <div className=\"text-sm text-black\">\r\n                          {member.designation}\r\n                        </div>\r\n                      </div>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"icon\"\r\n                        onClick={() => removeTeamMember(member)}\r\n                        className=\"text-red-500 hover:text-red-700 hover:bg-red-50\"\r\n                        aria-label={`Remove ${member.label}`}\r\n                      >\r\n                        <Trash2 className=\"h-5 w-5\" />\r\n                      </Button>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {formErrors.general && (\r\n              <div className=\"mt-4 p-4 bg-red-50 border border-red-200 rounded-md\">\r\n                <p className=\"text-sm text-red-600 font-medium\">\r\n                  {formErrors.general}\r\n                </p>\r\n              </div>\r\n            )}\r\n            {successMessage && (\r\n              <div className=\"mt-4 p-4 bg-green-50 border border-green-200 rounded-md\">\r\n                <p className=\"text-sm text-green-600 font-medium\">\r\n                  {successMessage}\r\n                </p>\r\n              </div>\r\n            )}\r\n          </form>\r\n        </CardContent>\r\n      </Card>\r\n    </DialogContent>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5904, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/team/components/EditTeamModal.jsx"],"sourcesContent":["\r\n\r\nimport { useState, useEffect, useMemo, useRef } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { updateTeam } from '@/modules/project-management/team/slices/teamMembersSlice';\r\nimport { fetchTeamDetails, fetchTeamMembers } from \"@/modules/project-management/team/slices/teamSlice\";\r\nimport { fetchTeamByProjectId } from \"@/modules/project-management/team/slices/viewTeamByProjectIdSlice\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { DialogContent } from \"@/components/ui/dialog\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { Users, Check, Loader2, Trash2 } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\n\r\nexport default function EditTeamModal({ projectId, teamId, onClose }) {\r\n  const dispatch = useDispatch();\r\n  const selectedTeam = useSelector((state) => state.team.selectedTeam);\r\n  const { allMembers } = useSelector((state) => state.team);\r\n  const { teamsByProject: teams, status } = useSelector((state) => state.team);\r\n  const updateTeamError = useSelector((state) => state.teamMembers.error || \"\");\r\n\r\n  const [selectedMembers, setSelectedMembers] = useState([]);\r\n  const [teamName, setTeamName] = useState(\"\");\r\n  const [teamLeadName, setTeamLeadName] = useState(\"\");\r\n  const [teamLeadId, setTeamLeadId] = useState(\"\"); // Add teamLeadId state\r\n  const [formErrors, setFormErrors] = useState({});\r\n  const [successMessage, setSuccessMessage] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [isSelectOpen, setIsSelectOpen] = useState(false);\r\n  const selectRef = useRef(null);\r\n  const searchInputRef = useRef(null);\r\n\r\n  // Fetch team details, all members, and teams by project\r\n  useEffect(() => {\r\n    if (teamId) {\r\n      dispatch(fetchTeamDetails(teamId));\r\n    }\r\n    dispatch(fetchTeamMembers());\r\n    if (projectId) {\r\n      dispatch(fetchTeamByProjectId(projectId));\r\n    }\r\n  }, [dispatch, teamId, projectId]);\r\n\r\n  // Populate form data when selectedTeam changes\r\n  useEffect(() => {\r\n    if (selectedTeam && selectedTeam.teamId === teamId) {\r\n      setTeamName(selectedTeam.teamName || \"\");\r\n      setTeamLeadName(selectedTeam.teamLeadName || \"\");\r\n      setTeamLeadId(selectedTeam.teamLeadId || \"N/A\"); // Set teamLeadId\r\n      setSelectedMembers(\r\n        (selectedTeam.teamMembers || []).map((member) => ({\r\n          value: member.memberId,\r\n          label: member.memberName,\r\n          email: member.email || \"N/A\",\r\n          designation: member.role || \"Not specified\",\r\n        }))\r\n      );\r\n    }\r\n  }, [selectedTeam, teamId]);\r\n\r\n  // Filter unique members from other teams\r\n  const existingMember = teams\r\n    .filter((team) => team.teamId !== teamId)\r\n    .flatMap((team) => team.teamMembers);\r\n\r\n  const uniqueMembers = Array.from(\r\n    new Map(\r\n      existingMember\r\n        .filter((member) => member.memberId)\r\n        .map((member) => [member.memberId.trim(), member])\r\n    ).values()\r\n  );\r\n\r\n  const uniqueMemberIds = new Set(uniqueMembers.map((member) => member.memberId.trim()));\r\n\r\n  const finalMembers = allMembers.filter((member) => {\r\n    if (!member.employeeID) return false;\r\n    return !uniqueMemberIds.has(member.employeeID.trim());\r\n  });\r\n\r\n  const memberOptions = useMemo(() => {\r\n    if (!finalMembers || !Array.isArray(finalMembers)) return [];\r\n    return finalMembers.map((member) => ({\r\n      value: member.employeeID,\r\n      label: member.name || `${member.firstName} ${member.lastName}`.trim(),\r\n      email: member.email || \"N/A\",\r\n      firstName: member.firstName,\r\n      lastName: member.lastName,\r\n      id: member.employeeID,\r\n      designation: member.designation || \"Not specified\",\r\n    }));\r\n  }, [finalMembers]);\r\n\r\n  const availableMembers = useMemo(() => {\r\n    return memberOptions.filter(\r\n      (member) =>\r\n        !selectedMembers.some((selected) => selected.value === member.value) &&\r\n        (searchQuery === \"\" ||\r\n          member.label.toLowerCase().includes(searchQuery.toLowerCase()))\r\n    );\r\n  }, [memberOptions, selectedMembers, searchQuery]);\r\n\r\n  const validateForm = () => {\r\n    const errors = {};\r\n    if (!teamName.trim()) errors.teamName = \"Team name is required\";\r\n    if (!teamLeadName.trim()) errors.teamLeadName = \"Team lead name is required\";\r\n    if (selectedMembers.length === 0) errors.teamMembers = \"Please select at least one team member\";\r\n    return errors;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const errors = validateForm();\r\n    if (Object.keys(errors).length > 0) {\r\n      setFormErrors(errors);\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setFormErrors({});\r\n    setSuccessMessage(\"\");\r\n\r\n    const formattedTeamMembers = selectedMembers.map((member) => ({\r\n      memberId: member.value,\r\n      memberName: member.label,\r\n      role: member.designation,\r\n      email: member.email,\r\n    }));\r\n\r\n    const teamData = {\r\n      teamId,\r\n      teamName: teamName.trim(),\r\n      projectId: selectedTeam?.projectId || projectId || \"\", // Ensure projectId is included\r\n      projectName: selectedTeam?.projectName || \"N/A\", // Include projectName if available\r\n      teamLeadName: teamLeadName.trim(),\r\n      teamLeadId: teamLeadId || \"N/A\", // Include teamLeadId\r\n      teamMembers: formattedTeamMembers,\r\n    };\r\n\r\n    try {\r\n      const resultAction = await dispatch(updateTeam({ teamId, teamData }));\r\n      dispatch(fetchTeamByProjectId(projectId));\r\n      if (updateTeam.fulfilled.match(resultAction)) {\r\n        toast.success(resultAction.payload?.message || \"Team updated successfully!\");\r\n        setTeamName(\"\");\r\n        setTeamLeadName(\"\");\r\n        setTeamLeadId(\"\");\r\n        setSelectedMembers([]);\r\n        setSearchQuery(\"\");\r\n        onClose();\r\n      } else {\r\n        throw new Error(resultAction.payload?.message || \"Failed to update team\");\r\n      }\r\n    } catch (err) {\r\n      toast.error(err.message || updateTeamError || \"Failed to update team\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const addTeamMember = (value) => {\r\n    const selected = memberOptions.find((member) => member.value === value);\r\n    if (selected && !selectedMembers.some((m) => m.value === selected.value)) {\r\n      setSelectedMembers([...selectedMembers, selected]);\r\n      setFormErrors((prev) => ({ ...prev, teamMembers: \"\" }));\r\n      setSuccessMessage(\"\");\r\n      setSearchQuery(\"\");\r\n      setIsSelectOpen(true);\r\n      setTimeout(() => {\r\n        if (searchInputRef.current) {\r\n          searchInputRef.current.focus();\r\n        }\r\n      }, 0);\r\n    }\r\n  };\r\n\r\n  const removeTeamMember = (memberToRemove) => {\r\n    setSelectedMembers(selectedMembers.filter((member) => member.value !== memberToRemove.value));\r\n    setFormErrors((prev) => ({ ...prev, teamMembers: \"\" }));\r\n    setSuccessMessage(\"\");\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setTeamName(\"\");\r\n    setTeamLeadName(\"\");\r\n    setTeamLeadId(\"\");\r\n    setSelectedMembers([]);\r\n    setFormErrors({});\r\n    setSuccessMessage(\"\");\r\n    setSearchQuery(\"\");\r\n    setIsSelectOpen(false);\r\n    onClose();\r\n  };\r\n\r\n  const handleSearchInputChange = (e) => {\r\n    setSearchQuery(e.target.value);\r\n    setIsSelectOpen(true);\r\n  };\r\n\r\n  const handleSelectTriggerClick = () => {\r\n    setIsSelectOpen(true);\r\n    setTimeout(() => {\r\n      if (searchInputRef.current) {\r\n        searchInputRef.current.focus();\r\n      }\r\n    }, 0);\r\n  };\r\n\r\n  // Loading state\r\n  if (!selectedTeam || selectedTeam.teamId !== teamId || status === \"loading\") {\r\n    return (\r\n      <DialogContent>\r\n        <div>Loading...</div>\r\n      </DialogContent>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <DialogContent className=\"h-[90vh] max-w-full sm:max-w-4xl md:max-w-5xl lg:max-w-6xl p-0 border-none overflow-y-auto max-h-[85vh]\">\r\n      <Card className=\"w-full bg-white border border-gray-200 shadow-lg rounded-xl\">\r\n        <CardHeader className=\"sticky top-0 bg-white px-6 py-4 border-b border-gray-200 z-10\">\r\n          <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 sm:gap-0\">\r\n            <CardTitle className=\"text-xl font-bold text-black flex items-center gap-2\">\r\n              <Users className=\"h-6 w-6 text-black\" /> Edit Team\r\n            </CardTitle>\r\n            <div className=\"flex items-center gap-3\">\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={handleClose}\r\n                className=\"px-4 py-2 bg-white text-black border border-gray-300 rounded-md hover:bg-gray-100 text-sm font-medium transition-colors\"\r\n                aria-label=\"Cancel\"\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                type=\"submit\"\r\n                onClick={handleSubmit}\r\n                disabled={isLoading}\r\n                className=\"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700 disabled:bg-indigo-400 disabled:cursor-not-allowed transition-colors\"\r\n                aria-label=\"Update team\"\r\n              >\r\n                {isLoading ? (\r\n                  <>\r\n                    <Loader2 className=\"inline-block mr-2 animate-spin h-4 w-4\" />\r\n                    Updating...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Check className=\"inline-block mr-2 h-4 w-4\" />\r\n                    Update Team\r\n                  </>\r\n                )}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent className=\"p-6 bg-white\">\r\n          <form className=\"space-y-6\">\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-6\">\r\n              <div>\r\n                <Label className=\"block text-sm font-bold text-black mb-2 flex items-center gap-1.5\">\r\n                  <Users className=\"h-4 w-4 text-black\" /> Team Name\r\n                  {formErrors.teamName && (\r\n                    <span className=\"text-xs ml-2 text-red-500\">({formErrors.teamName})</span>\r\n                  )}\r\n                </Label>\r\n                <Input\r\n                  type=\"text\"\r\n                  value={teamName}\r\n                  onChange={(e) => {\r\n                    setTeamName(e.target.value);\r\n                    setFormErrors((prev) => ({ ...prev, teamName: \"\" }));\r\n                    setSuccessMessage(\"\");\r\n                  }}\r\n                  placeholder=\"Enter team name\"\r\n                  className=\"w-full h-10 px-3 rounded-md border border-gray-300 text-sm text-black focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white transition-colors\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label className=\"block text-sm font-bold text-black mb-2 flex items-center gap-1.5\">\r\n                  <Users className=\"h-4 w-4 text-black\" /> Team Lead Name\r\n                  {formErrors.teamLeadName && (\r\n                    <span className=\"text-xs ml-2 text-red-500\">({formErrors.teamLeadName})</span>\r\n                  )}\r\n                </Label>\r\n                <div className=\"w-full h-10 px-3 py-2 rounded-md border border-gray-300 text-sm text-black bg-gray-100\">\r\n                  {teamLeadName || \"N/A\"}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"grid grid-cols-1 gap-6\">\r\n              <div>\r\n                <Label className=\"block text-sm font-bold text-black mb-2 flex items-center gap-1.5\">\r\n                  <Users className=\"h-4 w-4 text-black\" /> Add Member\r\n                  {formErrors.teamMembers && (\r\n                    <span className=\"text-xs ml-2 text-red-500\">({formErrors.teamMembers})</span>\r\n                  )}\r\n                </Label>\r\n                <Select\r\n                  open={isSelectOpen}\r\n                  onOpenChange={(open) => {\r\n                    setIsSelectOpen(open);\r\n                    if (open && searchInputRef.current) {\r\n                      setTimeout(() => searchInputRef.current.focus(), 0);\r\n                    }\r\n                  }}\r\n                  onValueChange={addTeamMember}\r\n                >\r\n                  <SelectTrigger\r\n                    ref={selectRef}\r\n                    onClick={handleSelectTriggerClick}\r\n                    className={`w-full h-10 border ${formErrors.teamMembers ? \"border-red-300\" : \"border-gray-300\"} bg-white text-black focus:ring-indigo-500 relative`}\r\n                  >\r\n                    <span className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm pointer-events-none\">\r\n                      Search and add Team members\r\n                    </span>\r\n                    <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContent className=\"bg-white border border-gray-200 max-h-60 overflow-y-auto\">\r\n                    <div className=\"p-2 border-b border-gray-200\">\r\n                      <Input\r\n                        ref={searchInputRef}\r\n                        type=\"text\"\r\n                        value={searchQuery}\r\n                        onChange={handleSearchInputChange}\r\n                        placeholder=\"Search Team Members\"\r\n                        className=\"w-full h-10 px-3 rounded-md border border-gray-300 text-sm text-black focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white transition-colors\"\r\n                        onKeyDown={(e) => e.stopPropagation()}\r\n                      />\r\n                    </div>\r\n                    <div className=\"p-2 text-sm text-green-600 font-medium border-b border-gray-200\">\r\n                      Available Members ({availableMembers.length} )\r\n                    </div>\r\n                    {isLoading ? (\r\n                      <div className=\"p-2 text-sm text-black\">Loading...</div>\r\n                    ) : availableMembers.length === 0 ? (\r\n                      <div className=\"p-2 text-sm text-black\">\r\n                        {searchQuery ? \"No matching team members found\" : \"No team members available\"}\r\n                      </div>\r\n                    ) : (\r\n                      availableMembers.map((member) => (\r\n                        <SelectItem\r\n                          key={member.value}\r\n                          value={member.value}\r\n                          className=\"text-black hover:bg-gray-100 focus:bg-gray-100\"\r\n                        >\r\n                          {member.label}\r\n                        </SelectItem>\r\n                      ))\r\n                    )}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex flex-col\">\r\n              <div className=\"flex justify-between items-center mb-3\">\r\n                <h3 className=\"text-sm font-bold text-black flex items-center gap-1.5\">\r\n                  <Users className=\"h-4 w-4 text-black\" /> Selected Team Members\r\n                </h3>\r\n                <span className=\"text-sm text-green-600 font-medium\">\r\n                  Total: {selectedMembers.length} {selectedMembers.length === 1 ? \"member\" : \"members\"}\r\n                </span>\r\n              </div>\r\n              {selectedMembers.length === 0 ? (\r\n                <div className=\"flex flex-col items-center justify-center py-12 text-black bg-white rounded-lg border border-gray-200 shadow-sm\">\r\n                  <Users className=\"h-8 w-8 mb-2 text-gray-400\" />\r\n                  <p className=\"text-sm font-medium\">No team members selected</p>\r\n                  <p className=\"text-xs text-gray-400\">Add team members using the selector above</p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"flex flex-wrap gap-4\">\r\n                  {selectedMembers.map((member) => (\r\n                    <div\r\n                      key={member.value}\r\n                      className=\"flex items-center gap-4 p-4 bg-white rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow w-full sm:w-[calc(50%-0.5rem)] lg:w-[calc(33.33%-0.67rem)]\"\r\n                    >\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"text-sm font-medium text-black\">{member.label}</div>\r\n                        <div className=\"text-sm text-black\">{member.email}</div>\r\n                        <div className=\"text-sm text-black\">{member.designation}</div>\r\n                      </div>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"icon\"\r\n                        onClick={() => removeTeamMember(member)}\r\n                        className=\"text-red-500 hover:text-red-700 hover:bg-red-50\"\r\n                        aria-label={`Remove ${member.label}`}\r\n                      >\r\n                        <Trash2 className=\"h-5 w-5\" />\r\n                      </Button>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {formErrors.general && (\r\n              <div className=\"mt-4 p-4 bg-red-50 border border-red-200 rounded-md\">\r\n                <p className=\"text-sm text-red-600 font-medium\">{formErrors.general}</p>\r\n              </div>\r\n            )}\r\n            {successMessage && (\r\n              <div className=\"mt-4 p-4 bg-green-50 border border-green-200 rounded-md\">\r\n                <p className=\"text-sm text-green-600 font-medium\">{successMessage}</p>\r\n              </div>\r\n            )}\r\n          </form>\r\n        </CardContent>\r\n      </Card>\r\n    </DialogContent>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6741, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/team/components/DeleteTeamModal.jsx"],"sourcesContent":["\r\n\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { DialogContent, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { FiTrash } from \"react-icons/fi\";\r\nimport { deleteTeam } from \"@/modules/project-management/team/slices/teamSlice\"; // Assuming deleteTeam action exists\r\n\r\nexport default function DeleteTeamModal({ teamId, onClose }) {\r\n  const dispatch = useDispatch();\r\n  const { teamsByProject: teams } = useSelector((state) => state.team);\r\n  const teamName = teams.find((t) => t.teamId === teamId)?.teamName || \"Unknown\";\r\n\r\n  const handleDelete = () => {\r\n    dispatch(deleteTeam(teamId)); // Dispatch delete action\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <DialogContent className=\"max-w-full sm:max-w-md md:max-w-lg p-6 border-none\">\r\n      <DialogHeader>\r\n        <DialogTitle className=\"text-lg font-semibold text-gray-800 flex items-center gap-2\">\r\n          <FiTrash aria-hidden=\"true\" />\r\n          Delete Team\r\n        </DialogTitle>\r\n      </DialogHeader>\r\n      <p className=\"text-sm text-gray-600\">\r\n        Are you sure you want to delete the team \"{teamName}\"? This action cannot be undone.\r\n      </p>\r\n      <DialogFooter className=\"mt-6\">\r\n        <Button\r\n          variant=\"outline\"\r\n          onClick={onClose}\r\n          className=\"border-gray-300 text-gray-800 hover:bg-gray-50 rounded-md text-sm h-10 px-4\"\r\n          aria-label=\"Cancel\"\r\n        >\r\n          Cancel\r\n        </Button>\r\n        <Button\r\n          onClick={handleDelete}\r\n          className=\"bg-red-500 hover:bg-red-600 text-white rounded-md text-sm h-10 px-4\"\r\n          aria-label=\"Delete team\"\r\n        >\r\n          Delete\r\n        </Button>\r\n      </DialogFooter>\r\n    </DialogContent>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA,wSAAiF,oCAAoC;;;;;;;;AAEtG,SAAS,gBAAgB,EAAE,MAAM,EAAE,OAAO,EAAE;;IACzD,MAAM,WAAW,CAAA,GAAA,4JAAA,CAAA,cAAW,AAAD;IAC3B,MAAM,EAAE,gBAAgB,KAAK,EAAE,GAAG,CAAA,GAAA,4JAAA,CAAA,cAAW,AAAD;uCAAE,CAAC,QAAU,MAAM,IAAI;;IACnE,MAAM,WAAW,MAAM,IAAI,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,SAAS,YAAY;IAErE,MAAM,eAAe;QACnB,SAAS,CAAA,GAAA,yKAAA,CAAA,aAAU,AAAD,EAAE,UAAU,yBAAyB;QACvD;IACF;IAEA,qBACE,6LAAC,qIAAA,CAAA,gBAAa;QAAC,WAAU;;0BACvB,6LAAC,qIAAA,CAAA,eAAY;0BACX,cAAA,6LAAC,qIAAA,CAAA,cAAW;oBAAC,WAAU;;sCACrB,6LAAC,iJAAA,CAAA,UAAO;4BAAC,eAAY;;;;;;wBAAS;;;;;;;;;;;;0BAIlC,6LAAC;gBAAE,WAAU;;oBAAwB;oBACQ;oBAAS;;;;;;;0BAEtD,6LAAC,qIAAA,CAAA,eAAY;gBAAC,WAAU;;kCACtB,6LAAC,qIAAA,CAAA,SAAM;wBACL,SAAQ;wBACR,SAAS;wBACT,WAAU;wBACV,cAAW;kCACZ;;;;;;kCAGD,6LAAC,qIAAA,CAAA,SAAM;wBACL,SAAS;wBACT,WAAU;wBACV,cAAW;kCACZ;;;;;;;;;;;;;;;;;;AAMT;GAxCwB;;QACL,4JAAA,CAAA,cAAW;QACM,4JAAA,CAAA,cAAW;;;KAFvB","debugId":null}},
    {"offset": {"line": 6861, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/team/components/TeamView.jsx"],"sourcesContent":["\r\n\r\n\r\n\r\nimport { useSelector } from \"react-redux\";\r\nimport { FiUser, FiBriefcase, FiMail, FiUsers, FiEdit, FiTrash } from \"react-icons/fi\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { useCurrentUser } from \"@/hooks/useCurrentUser\";\r\n\r\nexport default function ViewTeam({ teamId, project,onEdit, onDelete }) {\r\n  // Fetch team data from Redux store\r\n  const { teamsByProject: teams } = useSelector((state) => state.team);\r\n  const team = teams.find((t) => t.teamId === teamId);\r\n  const { currentUser, isTeamLead } = useCurrentUser(project?.data?.teamLeadId);\r\n\r\n  return (\r\n    <div className=\"p-3 bg-white  space-y-3\">\r\n      {team ? (\r\n        <>\r\n          <div className=\"flex  flex-col sm:flex-row justify-between items-start sm:items-center gap-2\">\r\n            <h3 className=\"text-base font-bold text-gray-900\">{team.teamName}</h3>\r\n            {\r\n              (currentUser?.role === \"cpc\" || isTeamLead || currentUser?.position === \"Team Lead\") &&(\r\n\r\n            <div className=\"flex gap-1.5\">\r\n\r\n              <Button\r\n                onClick={onEdit}\r\n                className=\"bg-blue-700 hover:bg-blue-800 text-white rounded-full p-1.5 h-7 w-7 flex items-center justify-center transition-colors duration-200\"\r\n                aria-label={`Edit team ${team.teamName}`}\r\n              >\r\n                <FiEdit className=\"h-3.5 w-3.5\" />\r\n              </Button>\r\n              <Button\r\n                onClick={onDelete}\r\n                className=\"bg-red-700 hover:bg-red-800 text-white rounded-full p-1.5 h-7 w-7 flex items-center justify-center transition-colors duration-200\"\r\n                aria-label={`Delete team ${team.teamName}`}\r\n              >\r\n                <FiTrash className=\"h-3.5 w-3.5\" />\r\n              </Button>\r\n            </div>\r\n              )\r\n            }\r\n          </div>\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2\">\r\n            <div className=\"space-y-0.5\">\r\n              <p className=\"text-xs font-medium text-gray-600 flex items-center gap-1\">\r\n                <FiBriefcase className=\"h-3 w-3\" aria-hidden=\"true\" />\r\n                Project Name\r\n              </p>\r\n              <p className=\"text-xs text-gray-800\">{team.projectName}</p>\r\n            </div>\r\n            <div className=\"space-y-0.5\">\r\n              <p className=\"text-xs font-medium text-gray-600 flex items-center gap-1\">\r\n                <FiUser className=\"h-3 w-3\" aria-hidden=\"true\" />\r\n                Team Lead\r\n              </p>\r\n              <p className=\"text-xs text-gray-800\">{team.teamLeadName}</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"space-y-1.5\">\r\n            <h4 className=\"text-sm font-bold text-gray-900 flex items-center gap-1\">\r\n              <FiUsers className=\"h-3.5 w-3.5\" aria-hidden=\"true\" />\r\n              All Members {team.teamMembers.length > 0 ? `(${team.teamMembers.length})` : \"\"}\r\n            </h4>\r\n            <div className=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2\">\r\n              {team.teamMembers.map((member) => (\r\n                <div\r\n                  key={member.memberId}\r\n                  className=\"p-2 bg-gray-50 rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow duration-200 space-y-0.5\"\r\n                >\r\n                  <p className=\"text-xs font-medium text-gray-900\">{member.memberName}</p>\r\n                  <p className=\"text-xs text-gray-600\">{member.role}</p>\r\n               \r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <p className=\"text-xs text-gray-600 text-center\">No team selected</p>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAIA;AACA;AACA;AACA;;;;;;;AAEe,SAAS,SAAS,EAAE,MAAM,EAAE,OAAO,EAAC,MAAM,EAAE,QAAQ,EAAE;;IACnE,mCAAmC;IACnC,MAAM,EAAE,gBAAgB,KAAK,EAAE,GAAG,CAAA,GAAA,4JAAA,CAAA,cAAW,AAAD;gCAAE,CAAC,QAAU,MAAM,IAAI;;IACnE,MAAM,OAAO,MAAM,IAAI,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK;IAC5C,MAAM,EAAE,WAAW,EAAE,UAAU,EAAE,GAAG,CAAA,GAAA,iIAAA,CAAA,iBAAc,AAAD,EAAE,SAAS,MAAM;IAElE,qBACE,6LAAC;QAAI,WAAU;kBACZ,qBACC;;8BACE,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;sCAAqC,KAAK,QAAQ;;;;;;wBAE9D,CAAC,aAAa,SAAS,SAAS,cAAc,aAAa,aAAa,WAAW,mBAErF,6LAAC;4BAAI,WAAU;;8CAEb,6LAAC,qIAAA,CAAA,SAAM;oCACL,SAAS;oCACT,WAAU;oCACV,cAAY,CAAC,UAAU,EAAE,KAAK,QAAQ,EAAE;8CAExC,cAAA,6LAAC,iJAAA,CAAA,SAAM;wCAAC,WAAU;;;;;;;;;;;8CAEpB,6LAAC,qIAAA,CAAA,SAAM;oCACL,SAAS;oCACT,WAAU;oCACV,cAAY,CAAC,YAAY,EAAE,KAAK,QAAQ,EAAE;8CAE1C,cAAA,6LAAC,iJAAA,CAAA,UAAO;wCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;8BAMzB,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAE,WAAU;;sDACX,6LAAC,iJAAA,CAAA,cAAW;4CAAC,WAAU;4CAAU,eAAY;;;;;;wCAAS;;;;;;;8CAGxD,6LAAC;oCAAE,WAAU;8CAAyB,KAAK,WAAW;;;;;;;;;;;;sCAExD,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAE,WAAU;;sDACX,6LAAC,iJAAA,CAAA,SAAM;4CAAC,WAAU;4CAAU,eAAY;;;;;;wCAAS;;;;;;;8CAGnD,6LAAC;oCAAE,WAAU;8CAAyB,KAAK,YAAY;;;;;;;;;;;;;;;;;;8BAG3D,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;;8CACZ,6LAAC,iJAAA,CAAA,UAAO;oCAAC,WAAU;oCAAc,eAAY;;;;;;gCAAS;gCACzC,KAAK,WAAW,CAAC,MAAM,GAAG,IAAI,CAAC,CAAC,EAAE,KAAK,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG;;;;;;;sCAE9E,6LAAC;4BAAI,WAAU;sCACZ,KAAK,WAAW,CAAC,GAAG,CAAC,CAAC,uBACrB,6LAAC;oCAEC,WAAU;;sDAEV,6LAAC;4CAAE,WAAU;sDAAqC,OAAO,UAAU;;;;;;sDACnE,6LAAC;4CAAE,WAAU;sDAAyB,OAAO,IAAI;;;;;;;mCAJ5C,OAAO,QAAQ;;;;;;;;;;;;;;;;;yCAY9B,6LAAC;YAAE,WAAU;sBAAoC;;;;;;;;;;;AAIzD;GA3EwB;;QAEY,4JAAA,CAAA,cAAW;QAET,iIAAA,CAAA,iBAAc;;;KAJ5B","debugId":null}},
    {"offset": {"line": 7117, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/team/components/TeamManagement.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { FiUsers, FiPlus } from \"react-icons/fi\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\";\r\nimport { fetchTeamByProjectId } from \"@/modules/project-management/team/slices/teamSlice\";\r\nimport CreateTeamModal from \"./CreateTeamModal\";\r\nimport EditTeamModal from \"./EditTeamModal\";\r\nimport DeleteTeamModal from \"./DeleteTeamModal\";\r\nimport ViewTeam from \"./TeamView\";\r\nimport { useCurrentUser } from \"@/hooks/useCurrentUser\";\r\nimport {Tooltip, TooltipContent, TooltipTrigger } from \"@/components/ui/tooltip\";\r\n\r\nexport default function TeamManagement({ projectId, project }) {\r\n  const dispatch = useDispatch();\r\n  const [selectedTeamId, setSelectedTeamId] = useState(null);\r\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\r\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\r\n  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\r\n  const [isDetailsModalOpen, setIsDetailsModalOpen] = useState(false);\r\n\r\n  // Fetch teams from Redux store\r\n  const {\r\n    teamsByProject: teams,\r\n    status,\r\n    error,\r\n  } = useSelector((state) => state.team);\r\n  const { currentUser, isTeamLead } = useCurrentUser(project?.data?.teamLeadId);\r\n\r\n  // Fetch teams on mount and select first team for larger screens\r\n \r\n\r\n  useEffect(() => {\r\n    if (!isCreateModalOpen || !isEditModalOpen ) {\r\n      dispatch(fetchTeamByProjectId(projectId));\r\n    }\r\n  }, [isCreateModalOpen,isEditModalOpen, projectId, dispatch]);\r\n\r\n  // Automatically select the first team for larger screens when teams are loaded\r\n  useEffect(() => {\r\n    if (\r\n      status === \"succeeded\" &&\r\n      teams.length > 0 &&\r\n      !selectedTeamId &&\r\n      window.innerWidth >= 768\r\n    ) {\r\n      setSelectedTeamId(teams[0].teamId);\r\n    }\r\n  }, [status, teams, selectedTeamId]);\r\n\r\n  // Handle team selection\r\n  const handleTeamSelect = (teamId) => {\r\n    setSelectedTeamId(teamId);\r\n    if (window.innerWidth < 768) {\r\n      setIsDetailsModalOpen(true); // Open modal only on small screens when a team is selected\r\n    }\r\n  };\r\n\r\n  // Find selected team for ViewTeam\r\n  const selectedTeam = teams.find((team) => team.teamId === selectedTeamId);\r\n\r\n  return (\r\n    <Card className=\"bg-white border border-gray-200 shadow-md\">\r\n      <div className=\"grid grid-cols-1 md:grid-cols-[280px_1fr] gap-0\">\r\n        {/* Left Sidebar: Team List */}\r\n        <div className=\"bg-white border-r border-gray-200 h-screen overflow-y-auto\">\r\n          <div className=\"p-4 border-b border-gray-200 flex justify-between items-center\">\r\n            <h2 className=\"text-lg font-bold text-gray-800 flex items-center gap-2\">\r\n              <FiUsers aria-hidden=\"true\" />\r\n              Teams\r\n              <span className=\"text-sm text-green-600 ml-2\">\r\n                ({teams.length} Total)\r\n              </span>\r\n            </h2>\r\n            {/* {(currentUser?.role === \"cpc\" ||\r\n              isTeamLead ||\r\n              currentUser?.position === \"Team Lead\") && (\r\n              <Button\r\n                onClick={() => setIsCreateModalOpen(true)}\r\n                className=\"bg-blue-500 hover:bg-blue-600 text-white rounded-md text-sm p-2\"\r\n                aria-label=\"Create new team\"\r\n              >\r\n                <FiPlus className=\"h-5 w-5\" />\r\n              </Button>\r\n            )} */}\r\n{(currentUser?.role === \"cpc\" ||\r\n  isTeamLead ||\r\n  currentUser?.position === \"Team Lead\") && (\r\n  <Tooltip>\r\n    <TooltipTrigger asChild>\r\n      <Button\r\n        onClick={() => setIsCreateModalOpen(true)}\r\n        className=\"bg-blue-500 hover:bg-blue-600 text-white rounded-md text-sm p-2\"\r\n        aria-label=\"Create new team\"\r\n      >\r\n        <FiPlus className=\"h-5 w-5\" />\r\n      </Button>\r\n    </TooltipTrigger>\r\n    <TooltipContent\r\n      side=\"top\"\r\n      align=\"center\"\r\n      sideOffset={6}\r\n      className=\"text-white bg-black border border-gray-200 rounded-md p-2 text-xs shadow-sm\"\r\n    >\r\n      Create Team\r\n    </TooltipContent>\r\n  </Tooltip>\r\n)}\r\n\r\n        \r\n          </div>\r\n\r\n          {status === \"succeeded\" && teams.length === 0 && (\r\n            <p className=\"p-4 text-sm text-gray-600\">No teams found.</p>\r\n          )}\r\n          {teams.length > 0 && (\r\n            <ul className=\"divide-y divide-gray-200\">\r\n              {teams.map((team) => (\r\n                <li\r\n                  key={team.teamId}\r\n                  className={`p-4 cursor-pointer transition-colors duration-200 text-sm font-medium ${\r\n                    selectedTeamId === team.teamId\r\n                      ? \"bg-indigo-100 text-indigo-800\"\r\n                      : \"text-gray-800 hover:bg-gray-50\"\r\n                  }`}\r\n                  onClick={() => handleTeamSelect(team.teamId)}\r\n                  role=\"button\"\r\n                  tabIndex={0}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === \"Enter\" || e.key === \" \") {\r\n                      handleTeamSelect(team.teamId);\r\n                    }\r\n                  }}\r\n                  aria-label={`Select team ${team.teamName}`}\r\n                >\r\n                  {team.teamName}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n\r\n        {/* Right Content: Team Details (Large Screens Only) */}\r\n        {selectedTeam && (\r\n          <div className=\"hidden md:block\">\r\n            <CardHeader>\r\n              <CardTitle className=\"text-xl font-bold text-gray-800\">\r\n                Team Details\r\n              </CardTitle>\r\n            </CardHeader>\r\n            <ViewTeam\r\n              project={project}\r\n              teamId={selectedTeam.teamId}\r\n              onEdit={() => setIsEditModalOpen(true)}\r\n              onDelete={() => {\r\n                setIsDeleteModalOpen(true);\r\n              }}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Details Modal (Small Screens Only) */}\r\n      {selectedTeam && (\r\n        <Dialog open={isDetailsModalOpen} onOpenChange={setIsDetailsModalOpen}>\r\n          <DialogContent className=\"max-h-[80vh] w-full sm:max-w-md overflow-y-auto p-4\">\r\n            <ViewTeam\r\n              project={project}\r\n              teamId={selectedTeam.teamId}\r\n              onEdit={() => setIsEditModalOpen(true)}\r\n              onDelete={() => setIsDeleteModalOpen(true)}\r\n            />\r\n          </DialogContent>\r\n        </Dialog>\r\n      )}\r\n\r\n      {/* Create Team Modal */}\r\n      <Dialog open={isCreateModalOpen} onOpenChange={setIsCreateModalOpen}>\r\n        <DialogContent>\r\n          <CreateTeamModal\r\n            projectId={projectId}\r\n            isOpen={isCreateModalOpen}\r\n            onClose={() => setIsCreateModalOpen(false)}\r\n          />\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Edit Team Modal */}\r\n      {selectedTeam && (\r\n        <Dialog open={isEditModalOpen} onOpenChange={setIsEditModalOpen}>\r\n          <DialogContent>\r\n            <EditTeamModal\r\n              open={isEditModalOpen}\r\n              projectId={projectId}\r\n              teamId={selectedTeam.teamId}\r\n              onClose={() => setIsEditModalOpen(false)}\r\n            />\r\n          </DialogContent>\r\n        </Dialog>\r\n      )}\r\n\r\n      {/* Delete Team Modal */}\r\n      {selectedTeam && (\r\n        <Dialog open={isDeleteModalOpen} onOpenChange={setIsDeleteModalOpen}>\r\n          <DialogContent>\r\n            <DeleteTeamModal\r\n              teamId={selectedTeam.teamId}\r\n              onClose={() => {\r\n                setIsDeleteModalOpen(false);\r\n              }}\r\n            />\r\n          </DialogContent>\r\n        </Dialog>\r\n      )}\r\n    </Card>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7487, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/live/frontend/Blueprint_Front/src/modules/project-management/project/components/ViewProjectById.js"],"sourcesContent":["\r\n\r\n\r\n\r\n\"use client\";\r\n\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  fetchProjectById,\r\n  changeProjectStatus,\r\n  resetSuccessMessage,\r\n} from \"@/modules/project-management/project/slices/projectSlice\";\r\nimport {\r\n  FiArrowLeft,\r\n  FiDownload,\r\n  FiUsers,\r\n  FiList,\r\n  FiFileText,\r\n  FiInfo,\r\n  FiCalendar,\r\n  FiUser,\r\n  FiPaperclip,\r\n  FiFile,\r\n} from \"react-icons/fi\";\r\nimport {\r\n  Briefcase,\r\n  TrendingUp,\r\n  FileStack,\r\n  BugIcon,\r\n  Dock,\r\n} from \"lucide-react\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport AllTaskListByProjectId from \"@/modules/project-management/task/components/AllTaskListByProjectId\";\r\nimport { toast } from \"sonner\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { LuFolderClock } from \"react-icons/lu\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogFooter,\r\n} from \"@/components/ui/dialog\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { useCurrentUser } from \"@/hooks/useCurrentUser\";\r\nimport ProjectbugList from \"../../issues/components/bug/ProjectbugList\";\r\nimport Spinner from \"@/components/loader/Spinner\";\r\nimport ProjectwiseAllMeetingAndMom from \"@/modules/meet/components/ProjectwiseAllmeetingMom\";\r\nimport { formatDateUTC } from \"@/utils/formatDate\";\r\nimport DocumentManager from \"@/modules/document/components/DocumentManager\";\r\nimport ProjectMetrics from \"../../analytics/components/ProjectMetrics\";\r\nimport TeamManagement from \"@/modules/project-management/team/components/TeamManagement\";\r\nimport {\r\n  Popover,\r\n  PopoverTrigger,\r\n  PopoverContent,\r\n} from \"@/components/ui/popover\";\r\n\r\nexport default function ViewProjectById({ projectId }) {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const initialTab = searchParams.get(\"tab\") || \"details\";\r\n  const [activeTab, setActiveTab] = useState(initialTab);\r\n  const [isProjectActive, setIsProjectActive] = useState(false);\r\n\r\n  // Dynamic tabs with overflow detection only on sm/md (below lg)\r\n  const tabsContainerRef = useRef(null);\r\n  const [visibleTabs, setVisibleTabs] = useState([]);\r\n  const [hiddenTabs, setHiddenTabs] = useState([]);\r\n  const [showMoreMenu, setShowMoreMenu] = useState(false);\r\n  const [isLargeScreen, setIsLargeScreen] = useState(true);\r\n\r\n  const tabs = [\r\n    { id: \"details\", label: \"Details\", icon: <FiInfo className=\"h-5 w-5\" /> },\r\n    { id: \"team\", label: \"Team\", icon: <FiUsers className=\"h-5 w-5\" /> },\r\n    { id: \"task\", label: \"Task\", icon: <FiList className=\"h-5 w-5\" /> },\r\n    { id: \"issues\", label: \"Issues\", icon: <BugIcon className=\"h-5 w-5\" /> },\r\n    { id: \"mom\", label: \"Mom\", icon: <LuFolderClock className=\"h-5 w-5\" /> },\r\n    { id: \"document\", label: \"Document\", icon: <Dock className=\"h-5 w-5\" /> },\r\n  ];\r\n\r\n  // Track screen size: lg+ shows all tabs, sm/md uses dynamic overflow\r\n  useEffect(() => {\r\n    const checkScreenSize = () => {\r\n      const large = window.innerWidth >= 1024; // Tailwind 'lg' breakpoint\r\n      setIsLargeScreen(large);\r\n      if (large) {\r\n        setVisibleTabs(tabs);\r\n        setHiddenTabs([]);\r\n      } else {\r\n        updateTabVisibility();\r\n      }\r\n    };\r\n\r\n    const updateTabVisibility = () => {\r\n      if (!tabsContainerRef.current) return;\r\n\r\n      const container = tabsContainerRef.current;\r\n      const containerWidth = container.offsetWidth;\r\n      const tabElements = container.querySelectorAll(\".tab-button\");\r\n      const moreButton = container.querySelector(\".more-button\");\r\n      const moreWidth = moreButton ? moreButton.offsetWidth + 24 : 100; // padding + margin\r\n\r\n      let totalWidth = 0;\r\n      let visibleCount = 0;\r\n\r\n      tabElements.forEach((btn, index) => {\r\n        const btnWidth = btn.offsetWidth + 16; // gap + padding\r\n        if (totalWidth + btnWidth < containerWidth - moreWidth) {\r\n          totalWidth += btnWidth;\r\n          visibleCount = index + 1;\r\n        }\r\n      });\r\n\r\n      setVisibleTabs(tabs.slice(0, visibleCount));\r\n      setHiddenTabs(tabs.slice(visibleCount));\r\n    };\r\n\r\n    checkScreenSize();\r\n    window.addEventListener(\"resize\", checkScreenSize);\r\n    return () => window.removeEventListener(\"resize\", checkScreenSize);\r\n  }, []);\r\n\r\n  // Recalculate visible/hidden on tab change or content load (for sm/md only)\r\n  useEffect(() => {\r\n    if (!isLargeScreen) {\r\n      const timer = setTimeout(() => {\r\n        if (tabsContainerRef.current) {\r\n          updateTabVisibility();\r\n        }\r\n      }, 50);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [activeTab, isLargeScreen,tabs]);\r\n\r\n  const updateTabVisibility = () => {}; // Defined inside useEffect above\r\n\r\n  useEffect(() => {\r\n    if (activeTab !== initialTab) {\r\n      const params = new URLSearchParams(window.location.search);\r\n      params.set(\"tab\", activeTab);\r\n      router.replace(`?${params.toString()}`, { scroll: false });\r\n    }\r\n  }, [activeTab, initialTab, router]);\r\n\r\n  const dispatch = useDispatch();\r\n  const { project, status, error, successMessage } = useSelector((state) => state.project);\r\n  const { currentUser, isTeamLead } = useCurrentUser(project?.data?.teamLeadId);\r\n\r\n  useEffect(() => {\r\n    if (projectId) {\r\n      dispatch(fetchProjectById(projectId));\r\n    }\r\n  }, [projectId, dispatch]);\r\n\r\n  const [newStatus, setNewStatus] = useState(\"\");\r\n  const [statusUpdateMessage, setStatusUpdateMessage] = useState(\"\");\r\n  const [isStatusModalOpen, setIsStatusModalOpen] = useState(false);\r\n  const [isConfirmModalOpen, setIsConfirmModalOpen] = useState(false);\r\n  const [isDownloading, setIsDownloading] = useState(false);\r\n  const [hasFetchedAfterStatusChange, setHasFetchedAfterStatusChange] = useState(false);\r\n  const [showLoader, setShowLoader] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (project?.data?.status && project.data.status !== \"Planned\") {\r\n      setIsProjectActive(true);\r\n    }\r\n  }, [project?.data?.status]);\r\n\r\n  useEffect(() => {\r\n    if (successMessage && !hasFetchedAfterStatusChange) {\r\n      setStatusUpdateMessage(successMessage);\r\n      setHasFetchedAfterStatusChange(true);\r\n      dispatch(fetchProjectById(projectId));\r\n      setNewStatus(\"\");\r\n      setTimeout(() => {\r\n        setStatusUpdateMessage(\"\");\r\n        dispatch(resetSuccessMessage());\r\n        setHasFetchedAfterStatusChange(false);\r\n      }, 3000);\r\n    }\r\n    if (error?.statusChange) {\r\n      setStatusUpdateMessage(error.statusChange);\r\n      setTimeout(() => setStatusUpdateMessage(\"\"), 3000);\r\n    }\r\n  }, [successMessage, error?.statusChange, dispatch, projectId, hasFetchedAfterStatusChange]);\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => setShowLoader(false), 1000);\r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n\r\n  const handleDownload = (url, filename) => {\r\n    setIsDownloading(true);\r\n    const link = document.createElement(\"a\");\r\n    link.href = url;\r\n    link.download = filename;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n    setTimeout(() => setIsDownloading(false), 1000);\r\n  };\r\n\r\n  const handleStatusSubmit = () => {\r\n    if (newStatus) {\r\n      setIsStatusModalOpen(false);\r\n      setIsConfirmModalOpen(true);\r\n    }\r\n  };\r\n\r\n  const handleConfirmStatusChange = () => {\r\n    if (newStatus && projectId) {\r\n      dispatch(changeProjectStatus({ projectId, status: newStatus }));\r\n      setIsConfirmModalOpen(false);\r\n      toast.success(\"Status Updated!\");\r\n      setIsProjectActive(true);\r\n    }\r\n  };\r\n\r\n  const statusOptions = [\"In Progress\", \"Completed\"];\r\n\r\n  const canEditStatus =\r\n    currentUser?.role?.toLowerCase() === \"cpc\" ||\r\n    isTeamLead ||\r\n    currentUser?.position === \"Team Lead\";\r\n\r\n  const getFileTypeInfo = (filename) => {\r\n    const ext = filename.split(\".\").pop().toLowerCase();\r\n    switch (ext) {\r\n      case \"pdf\":\r\n        return { icon: <FiFileText className=\"h-5 w-5 text-red-600\" />, bg: \"bg-red-50\" };\r\n      case \"doc\":\r\n      case \"docx\":\r\n        return { icon: <FiFileText className=\"h-5 w-5 text-blue-600\" />, bg: \"bg-blue-50\" };\r\n      case \"xls\":\r\n      case \"xlsx\":\r\n        return { icon: <FiFileText className=\"h-5 w-5 text-green-600\" />, bg: \"bg-green-50\" };\r\n      case \"ppt\":\r\n      case \"pptx\":\r\n        return { icon: <FiFileText className=\"h-5 w-5 text-orange-600\" />, bg: \"bg-orange-50\" };\r\n      case \"csv\":\r\n        return { icon: <FiFileText className=\"h-5 w-5 text-yellow-600\" />, bg: \"bg-yellow-50\" };\r\n      default:\r\n        return { icon: <FiFile className=\"h-5 w-5 text-gray-600\" />, bg: \"bg-gray-50\" };\r\n    }\r\n  };\r\n\r\n  if (status?.fetchProject === \"loading\" || showLoader) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center w-full h-[calc(100vh-64px)]\">\r\n        <Spinner />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <Card className=\"shadow-2xl border border-gray-200 mx-auto max-w-full\">\r\n        <CardHeader className=\"border-b border-gray-200 bg-white\">\r\n          {/* <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 \">\r\n            <div className=\"flex items-center gap-4\">\r\n              <button\r\n                onClick={() => router.back()}\r\n                className=\"inline-flex items-center gap-2 bg-blue-600 text-white font-medium text-sm px-4 py-2 rounded-md shadow-sm hover:bg-blue-700 transition-colors duration-200\"\r\n              >\r\n                <FiArrowLeft className=\"h-4 w-4\" />\r\n                Back\r\n              </button>\r\n              <CardTitle className=\"text-2xl font-bold text-gray-900\">\r\n                {project?.data?.projectName || \"Unnamed Project\"}\r\n              </CardTitle>\r\n            </div>\r\n            <div className=\"flex items-center gap-4\">\r\n              {statusUpdateMessage && (\r\n                <p\r\n                  className={`text-sm font-medium ${\r\n                    successMessage ? \"text-green-600\" : \"text-red-600\"\r\n                  }`}\r\n                >\r\n                  {statusUpdateMessage}\r\n                </p>\r\n              )}\r\n              {canEditStatus && (\r\n                <Button\r\n                  onClick={() => setIsStatusModalOpen(true)}\r\n                  className=\"bg-blue-600 text-white hover:bg-blue-700\"\r\n                >\r\n                  {isProjectActive ? \"Update Status\" : \"Start Project\"}\r\n                </Button>\r\n              )}\r\n            </div>\r\n          </div> */}\r\n          <div className=\"flex flex-wrap items-center justify-between gap-3 sm:gap-4\">\r\n  {/* Left side: Back + Project name */}\r\n  <div className=\"flex items-center min-w-0 gap-2 sm:gap-4\">\r\n    <Button\r\n      onClick={() => router.back()}\r\n      className=\"inline-flex shrink-0 items-center gap-2 bg-blue-600 text-white font-medium text-xs sm:text-sm px-3 sm:px-4 py-2 rounded-md shadow-sm hover:bg-blue-700 transition-colors duration-200\"\r\n    >\r\n      <FiArrowLeft className=\"h-4 w-4\" />\r\n      <span className=\"hidden sm:inline\">Back</span>\r\n    </Button>\r\n\r\n    <CardTitle\r\n      className=\"truncate text-base sm:text-xl font-semibold text-gray-900 max-w-[150px] sm:max-w-[250px] md:max-w-[400px]\"\r\n      title={project?.data?.projectName || \"Unnamed Project\"}\r\n    >\r\n      {project?.data?.projectName || \"Unnamed Project\"}\r\n    </CardTitle>\r\n  </div>\r\n\r\n  {/* Right side: Status + message */}\r\n  <div className=\"flex items-center flex-wrap justify-end gap-2 sm:gap-4 mt-2 sm:mt-0\">\r\n    {statusUpdateMessage && (\r\n      <p\r\n        className={`text-xs sm:text-sm font-medium ${\r\n          successMessage ? \"text-green-600\" : \"text-red-600\"\r\n        }`}\r\n      >\r\n        {statusUpdateMessage}\r\n      </p>\r\n    )}\r\n    {canEditStatus && (\r\n      <Button\r\n        onClick={() => setIsStatusModalOpen(true)}\r\n        className=\"bg-blue-600 text-white hover:bg-blue-700 text-xs sm:text-sm px-3 sm:px-4 py-2\"\r\n      >\r\n        {isProjectActive ? \"Update Status\" : \"Start Project\"}\r\n      </Button>\r\n    )}\r\n  </div>\r\n</div>\r\n\r\n        </CardHeader>\r\n\r\n        <CardContent className=\"p-0\">\r\n          {!isProjectActive && project?.data?.status === \"Planned\" && canEditStatus ? (\r\n            // <div className=\"p-16 text-center bg-gray-100 min-h-screen flex flex-col justify-center item-center\">\r\n            //   <h2 className=\"text-3xl font-bold text-gray-800 mb-6\">\r\n            //     Project is in Planned Stage\r\n            //   </h2>\r\n            //   <p className=\"text-lg text-gray-600 mb-10 max-w-3xl mx-auto\">\r\n            //     This project is currently in the planning phase. To access tasks, team, issues, documents, and other features, \r\n            //     please start the project by changing its status to In Progress.\r\n            //   </p>\r\n            //   <Button\r\n            //     onClick={() => {\r\n            //       setNewStatus(\"In Progress\");\r\n            //       setIsStatusModalOpen(true);\r\n            //     }}\r\n            //     className=\"bg-blue-600 text-white hover:bg-blue-700 text-lg px-8 py-4 rounded-xl shadow-lg w-[1\"\r\n            //   >\r\n            //     Start Project Now\r\n            //   </Button>\r\n            // </div>\r\n            <div className=\"min-h-screen flex items-center justify-center  p-6\">\r\n  <div className=\" p-10 max-w-md w-full text-center\">\r\n    <h2 className=\"text-2xl font-semibold text-gray-800 mb-4\">\r\n      Project is in Planned Stage\r\n    </h2>\r\n    <p className=\"text-gray-600 mb-8 leading-relaxed\">\r\n      This project is currently in the planning phase. To access tasks, team, issues, \r\n      documents, and other features, please start the project by changing its status \r\n      to <span className=\"font-medium text-blue-600\">In Progress</span>.\r\n    </p>\r\n    <Button\r\n      onClick={() => {\r\n        setNewStatus(\"In Progress\");\r\n        setIsStatusModalOpen(true);\r\n      }}\r\n      className=\"bg-blue-600 text-white hover:bg-blue-700 text-lg px-6 py-3 rounded-xl shadow-md transition-all duration-200 w-full\"\r\n    >\r\n      Start Project Now\r\n    </Button>\r\n  </div>\r\n</div>\r\n\r\n          ) : (\r\n            <>\r\n              {/* Responsive Tab Navigation - 3 dots only on sm/md */}\r\n              <div className=\"border-b border-gray-200 bg-white sticky top-0 z-10\">\r\n                <div\r\n                  ref={tabsContainerRef}\r\n                  className=\"flex overflow-x-auto scrollbar-hide px-4\"\r\n                  onScroll={() => setShowMoreMenu(false)}\r\n                >\r\n                  {visibleTabs.map((tab) => (\r\n                    <button\r\n                      key={tab.id}\r\n                      onClick={() => setActiveTab(tab.id)}\r\n                      className={`tab-button flex items-center gap-3 px-6 py-4 text-sm font-medium border-b-2 transition-all duration-300 flex-shrink-0 whitespace-nowrap ${\r\n                        activeTab === tab.id\r\n                          ? \"border-blue-600 text-blue-600 bg-blue-50\"\r\n                          : \"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300 hover:bg-gray-50\"\r\n                      }`}\r\n                    >\r\n                      {tab.icon}\r\n                      <span className=\"hidden sm:inline\">{tab.label}</span>\r\n                    </button>\r\n                  ))}\r\n\r\n                  {/* 3-dot More menu - only shows when needed on sm/md */}\r\n                  {!isLargeScreen && hiddenTabs.length > 0 && (\r\n                    <Popover open={showMoreMenu} onOpenChange={setShowMoreMenu}>\r\n                      <PopoverTrigger asChild>\r\n                        <button\r\n                          className={`more-button flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition-all duration-300 whitespace-nowrap ${\r\n                            showMoreMenu\r\n                              ? \"border-blue-600 text-blue-600 bg-blue-50\"\r\n                              : \"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300 hover:bg-gray-50\"\r\n                          }`}\r\n                        >\r\n                          <span className=\"text-2xl leading-none\">â‹¯</span>\r\n                          <span className=\"hidden sm:inline\">More</span>\r\n                        </button>\r\n                      </PopoverTrigger>\r\n                      <PopoverContent className=\"w-56 p-0 rounded-xl shadow-2xl border border-gray-200 mt-2\">\r\n                        <div className=\"py-2\">\r\n                          {hiddenTabs.map((tab) => (\r\n                            <button\r\n                              key={tab.id}\r\n                              onClick={() => {\r\n                                setActiveTab(tab.id);\r\n                                setShowMoreMenu(false);\r\n                              }}\r\n                              className=\"flex items-center gap-3 w-full px-4 py-3 text-sm text-left hover:bg-blue-50 hover:text-blue-600 transition-all duration-200 first:rounded-t-xl last:rounded-b-xl\"\r\n                            >\r\n                              {tab.icon}\r\n                              <span>{tab.label}</span>\r\n                            </button>\r\n                          ))}\r\n                        </div>\r\n                      </PopoverContent>\r\n                    </Popover>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Tab Content */}\r\n              <div className=\"p-2 min-h-screen\">\r\n                {activeTab === \"details\" && (\r\n                  <div className=\"space-y-12\">\r\n                    \r\n                      <ProjectMetrics projectId={projectId} />\r\n                  \r\n\r\n                    <div className=\"\">\r\n                      <h3 className=\"text-2xl font-bold text-gray-900 flex items-center gap-3 mb-8 border-b-2 border-gray-200 pb-4\">\r\n                        <FiInfo className=\"h-7 w-7 text-blue-600\" />\r\n                        Project Information\r\n                      </h3>\r\n                      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-10\">\r\n                        <div className=\"space-y-7\">\r\n                          <div className=\"flex items-start gap-5 p-4 bg-green-50 rounded-xl\">\r\n                            <div className=\"p-3 bg-green-100 rounded-lg\">\r\n                              <Briefcase className=\"h-6 w-6 text-green-600\" />\r\n                            </div>\r\n                            <div>\r\n                              <p className=\"text-sm font-semibold text-gray-600\">Project ID</p>\r\n                              <p className=\"text-xl font-bold text-gray-900 mt-1\">{project?.data?.projectId || \"N/A\"}</p>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"flex items-start gap-5 p-4 bg-green-50 rounded-xl\">\r\n                            <div className=\"p-3 bg-green-100 rounded-lg\">\r\n                              <FiPaperclip className=\"h-6 w-6 text-green-600\" />\r\n                            </div>\r\n                            <div>\r\n                              <p className=\"text-sm font-semibold text-gray-600\">Category</p>\r\n                              <p className=\"text-xl font-bold text-gray-900 mt-1\">\r\n                                {project?.data?.category\r\n                                  ? project.data.category\r\n                                      .toLowerCase()\r\n                                      .split(\" \")\r\n                                      .map((w) => w[0].toUpperCase() + w.slice(1))\r\n                                      .join(\" \")\r\n                                  : \"N/A\"}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                          {project?.data?.clientId?.trim() && (\r\n                            <div className=\"flex items-start gap-5 p-4 bg-green-50 rounded-xl\">\r\n                              <div className=\"p-3 bg-green-100 rounded-lg\">\r\n                                <FiUser className=\"h-6 w-6 text-green-600\" />\r\n                              </div>\r\n                              <div>\r\n                                <p className=\"text-sm font-semibold text-gray-600\">Client ID</p>\r\n                                <p className=\"text-xl font-bold text-gray-900 mt-1\">{project.data.clientId}</p>\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                          <div className=\"flex items-start gap-5 p-4 bg-green-50 rounded-xl\">\r\n                            <div className=\"p-3 bg-green-100 rounded-lg\">\r\n                              <FiUser className=\"h-6 w-6 text-green-600\" />\r\n                            </div>\r\n                            <div>\r\n                              <p className=\"text-sm font-semibold text-gray-600\">Team Lead</p>\r\n                              <p className=\"text-xl font-bold text-gray-900 mt-1\">{project?.data?.teamLeadName || \"Unassigned\"}</p>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-7\">\r\n                          <div className=\"flex items-start gap-5 p-4 bg-blue-50 rounded-xl\">\r\n                            <div className=\"p-3 bg-blue-100 rounded-lg\">\r\n                              <TrendingUp className=\"h-6 w-6 text-blue-600\" />\r\n                            </div>\r\n                            <div>\r\n                              <p className=\"text-sm font-semibold text-gray-600\">Status</p>\r\n                              <span\r\n                                className={`inline-flex items-center px-5 py-2 rounded-full text-sm font-bold mt-2 ${\r\n                                  project?.data?.status === \"Completed\"\r\n                                    ? \"bg-green-100 text-green-800\"\r\n                                    : project?.data?.status === \"In Progress\"\r\n                                    ? \"bg-blue-100 text-blue-800\"\r\n                                    : \"bg-gray-100 text-gray-800\"\r\n                                }`}\r\n                              >\r\n                                {project?.data?.status || \"N/A\"}\r\n                              </span>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"flex items-start gap-5 p-4 bg-purple-50 rounded-xl\">\r\n                            <div className=\"p-3 bg-purple-100 rounded-lg\">\r\n                              <FiCalendar className=\"h-6 w-6 text-purple-600\" />\r\n                            </div>\r\n                            <div>\r\n                              <p className=\"text-sm font-semibold text-gray-600\">Onboarding Date</p>\r\n                              <p className=\"text-xl font-bold text-gray-900 mt-1\">\r\n                                {project?.data?.createdAt ? formatDateUTC(project.data.createdAt) : \"N/A\"}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                          {project?.data?.startDate && (\r\n                            <div className=\"flex items-start gap-5 p-4 bg-indigo-50 rounded-xl\">\r\n                              <div className=\"p-3 bg-indigo-100 rounded-lg\">\r\n                                <FiCalendar className=\"h-6 w-6 text-indigo-600\" />\r\n                              </div>\r\n                              <div>\r\n                                <p className=\"text-sm font-semibold text-gray-600\">Start Date</p>\r\n                                <p className=\"text-xl font-bold text-gray-900 mt-1\">{formatDateUTC(project.data.startDate)}</p>\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                          {project?.data?.endDate && (\r\n                            <div className=\"flex items-start gap-5 p-4 bg-red-50 rounded-xl\">\r\n                              <div className=\"p-3 bg-red-100 rounded-lg\">\r\n                                <FiCalendar className=\"h-6 w-6 text-red-600\" />\r\n                              </div>\r\n                              <div>\r\n                                <p className=\"text-sm font-semibold text-gray-600\">End Date</p>\r\n                                <p className=\"text-xl font-bold text-gray-900 mt-1\">{formatDateUTC(project.data.endDate)}</p>\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                          {project?.data?.expectedEndDate && (\r\n                            <div className=\"flex items-start gap-5 p-4 bg-orange-50 rounded-xl\">\r\n                              <div className=\"p-3 bg-orange-100 rounded-lg\">\r\n                                <FiCalendar className=\"h-6 w-6 text-orange-600\" />\r\n                              </div>\r\n                              <div>\r\n                                <p className=\"text-sm font-semibold text-gray-600\">Expected End Date</p>\r\n                                <p className=\"text-xl font-bold text-gray-900 mt-1\">{formatDateUTC(project.data.expectedEndDate)}</p>\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {project?.data?.attachments?.length > 0 && (\r\n                      <div className=\"\">\r\n                        <h3 className=\"text-2xl font-bold text-gray-900 flex items-center gap-3 mb-8 border-b-2 border-gray-200 pb-4\">\r\n                          <FileStack className=\"h-7 w-7 text-blue-600\" />\r\n                          Attachments\r\n                        </h3>\r\n                        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\r\n                          {project.data.attachments.map((attachment, index) => {\r\n                            const fileInfo = getFileTypeInfo(attachment.filename);\r\n                            return (\r\n                              <div\r\n                                key={index}\r\n                                className=\"group relative bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl border border-gray-200 overflow-hidden hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300\"\r\n                              >\r\n                                <button\r\n                                  onClick={() => handleDownload(attachment.url, attachment.filename)}\r\n                                  disabled={isDownloading}\r\n                                  className=\"cursor-pointer w-full p-6 text-left space-y-4 hover:bg-white/50 transition-all\"\r\n                                >\r\n                                  <div className={`p-4 rounded-xl ${fileInfo.bg} w-fit shadow-md`}>\r\n                                    {fileInfo.icon}\r\n                                  </div>\r\n                                  <div>\r\n                                    <p className=\"font-semibold text-gray-900 truncate text-base\">{attachment.filename}</p>\r\n                                    <p className=\"text-sm text-gray-500 mt-1\">Click to download</p>\r\n                                  </div>\r\n                                  <div className=\"flex items-center gap-2 text-blue-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\r\n                                    <FiDownload className=\"h-5 w-5\" />\r\n                                    <span className=\"font-medium\">Download</span>\r\n                                  </div>\r\n                                </button>\r\n                              </div>\r\n                            );\r\n                          })}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    <div className=\"\">\r\n                      <h3 className=\"text-2xl font-bold text-gray-900 flex items-center gap-3 mb-8 border-b-2 border-gray-200 pb-4\">\r\n                        <FiFileText className=\"h-7 w-7 text-blue-600\" />\r\n                        Description\r\n                      </h3>\r\n                      <div className=\"prose prose-lg max-w-none\">\r\n                        {project?.data?.description ? (\r\n                          <p className=\"text-gray-700 whitespace-pre-wrap leading-relaxed text-base\">\r\n                            {project.data.description}\r\n                          </p>\r\n                        ) : (\r\n                          <p className=\"text-gray-500 italic text-lg\">No description provided for this project.</p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {activeTab === \"task\" && (\r\n                  <div className=\"\">\r\n                    <AllTaskListByProjectId project={project?.data} projectId={project?.data?.projectId} />\r\n                  </div>\r\n                )}\r\n\r\n                {activeTab === \"team\" && <TeamManagement project={project} projectId={projectId} />}\r\n\r\n                {activeTab === \"issues\" && (\r\n                  <div className=\"\">\r\n                    <ProjectbugList project={project} projectId={projectId} teamLeadId={project?.data?.teamLeadId} />\r\n                  </div>\r\n                )}\r\n\r\n                {activeTab === \"mom\" && (\r\n                  <div className=\"\">\r\n                    <ProjectwiseAllMeetingAndMom\r\n                      projectName={project?.data?.projectName}\r\n                      project={project?.data}\r\n                      projectId={projectId}\r\n                      teamLeadId={project?.data?.teamLeadId}\r\n                    />\r\n                  </div>\r\n                )}\r\n\r\n                {activeTab === \"document\" && (\r\n                  <div className=\"\">\r\n                    <DocumentManager\r\n                      project={project?.data}\r\n                      projectId={projectId}\r\n                      teamLeadId={project?.data?.teamLeadId}\r\n                    />\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Status Modals remain unchanged */}\r\n      <Dialog open={isStatusModalOpen} onOpenChange={setIsStatusModalOpen}>\r\n        <DialogContent className=\"sm:max-w-md rounded-2xl shadow-2xl\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"text-2xl font-bold text-gray-900\">\r\n              {project?.data?.status === \"Planned\" ? \"Start Project\" : \"Update Project Status\"}\r\n            </DialogTitle>\r\n          </DialogHeader>\r\n          <div className=\"py-6\">\r\n            <label className=\"block text-sm font-semibold text-gray-700 mb-3\">Select New Status</label>\r\n            <Select value={newStatus} onValueChange={setNewStatus}>\r\n              <SelectTrigger className=\"w-full h-12 text-base border-2\">\r\n                <SelectValue placeholder=\"Choose status\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                {statusOptions\r\n                  .filter((s) => s !== project?.data?.status)\r\n                  .map((s) => (\r\n                    <SelectItem key={s} value={s} className=\"text-base\">\r\n                      {s}\r\n                    </SelectItem>\r\n                  ))}\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n          <DialogFooter>\r\n            <Button variant=\"outline\" onClick={() => setIsStatusModalOpen(false)} className=\"px-6 py-3 text-base\">\r\n              Cancel\r\n            </Button>\r\n            <Button onClick={handleStatusSubmit} disabled={!newStatus} className=\"bg-blue-600 hover:bg-blue-700 px-8 py-3 text-base\">\r\n              Proceed\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <Dialog open={isConfirmModalOpen} onOpenChange={setIsConfirmModalOpen}>\r\n        <DialogContent className=\"sm:max-w-md rounded-2xl shadow-2xl\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"text-2xl font-bold text-gray-900\">Confirm Status Change</DialogTitle>\r\n          </DialogHeader>\r\n          <div className=\"py-6\">\r\n            <p className=\"text-lg text-gray-700\">\r\n              Are you sure you want to change the project status to{\" \"}\r\n              <span className=\"font-bold text-blue-600 text-xl\">{newStatus}</span>?\r\n            </p>\r\n          </div>\r\n          <DialogFooter>\r\n            <Button variant=\"outline\" onClick={() => setIsConfirmModalOpen(false)} className=\"px-6 py-3 text-base\">\r\n              Cancel\r\n            </Button>\r\n            <Button onClick={handleConfirmStatusChange} className=\"bg-blue-600 hover:bg-blue-700 px-8 py-3 text-base\">\r\n              Confirm\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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","debugId":null}}]
}